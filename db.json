{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/favicon.ico","path":"favicon.ico","modified":0,"renderable":0},{"_id":"themes/next/source/404.html","path":"404.html","modified":0,"renderable":1},{"_id":"source/wp-content/base/favicon.ico","path":"wp-content/base/favicon.ico","modified":0,"renderable":0},{"_id":"source/wp-content/base/loading.gif","path":"wp-content/base/loading.gif","modified":0,"renderable":0},{"_id":"source/wp-content/base/cuihuan_title.jpg","path":"wp-content/base/cuihuan_title.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/base/qrcode.jpg","path":"wp-content/base/qrcode.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/base/cuihuan_title.jpg","path":"wp_content/base/cuihuan_title.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/base/favicon.ico","path":"wp_content/base/favicon.ico","modified":0,"renderable":0},{"_id":"source/wp_content/base/loading.gif","path":"wp_content/base/loading.gif","modified":0,"renderable":0},{"_id":"source/wp_content/base/qrcode.jpg","path":"wp_content/base/qrcode.jpg","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"source/wp_content/new/nginx1/nginx_rb_tree.png","path":"wp_content/new/nginx1/nginx_rb_tree.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/redis/redis_3_log.png","path":"wp_content/new/redis/redis_3_log.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/redis/redis_3_slave.png","path":"wp_content/new/redis/redis_3_slave.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/redis/redis_3_master.png","path":"wp_content/new/redis/redis_3_master.png","modified":0,"renderable":0},{"_id":"themes/next/source/js/src/hook-duoshuo.js","path":"js/src/hook-duoshuo.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","path":"lib/algolia-instant-search/instantsearch.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","path":"lib/canvas-nest/canvas-nest.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/README.md","path":"lib/fastclick/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/bower.json","path":"lib/fastclick/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/LICENSE","path":"lib/fastclick/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","path":"lib/jquery_lazyload/CONTRIBUTING.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","path":"lib/jquery_lazyload/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","path":"lib/jquery_lazyload/jquery.lazyload.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","path":"lib/jquery_lazyload/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","path":"lib/jquery_lazyload/jquery.scrollstop.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/bower.json","path":"lib/velocity/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"source/wp-content/base/bg.jpg","path":"wp-content/base/bg.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/base/bg.jpg","path":"wp_content/base/bg.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/7E2CA17E-BA80-4A5B-AB2E-80BE5E06A946.png","path":"wp_content/new/nginx1/7E2CA17E-BA80-4A5B-AB2E-80BE5E06A946.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_event_.png","path":"wp_content/new/nginx1/nginx_event_.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_framework.png","path":"wp_content/new/nginx1/nginx_framework.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_flow.png","path":"wp_content/new/nginx1/nginx_flow.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_task.png","path":"wp_content/new/nginx1/nginx_task.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/redis/redis_3_framework.png","path":"wp_content/new/redis/redis_3_framework.png","modified":0,"renderable":0},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"source/wp-content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","path":"wp-content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","path":"wp-content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-180x180.jpg","path":"wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-180x180.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-192x192.jpg","path":"wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-192x192.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","path":"wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-32x32.jpg","path":"wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-32x32.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-270x270.jpg","path":"wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-270x270.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-300x300.jpg","path":"wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-300x300.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","path":"wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/ipfs-300x122.png","path":"wp-content/uploads/2015/10/ipfs-300x122.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/ipfs-150x150.png","path":"wp-content/uploads/2015/10/ipfs-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/ipfs网络拓扑-150x150.png","path":"wp-content/uploads/2015/10/ipfs网络拓扑-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/ipfs网络拓扑-300x190.png","path":"wp-content/uploads/2015/10/ipfs网络拓扑-300x190.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/rasmus_lerdorf_php-150x150.png","path":"wp-content/uploads/2015/10/rasmus_lerdorf_php-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/rasmus_lerdorf_php-300x131.png","path":"wp-content/uploads/2015/10/rasmus_lerdorf_php-300x131.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件4-150x150.png","path":"wp-content/uploads/2015/10/插件4-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件4-300x57.png","path":"wp-content/uploads/2015/10/插件4-300x57.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件5-150x150.png","path":"wp-content/uploads/2015/10/插件5-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件5-300x54.png","path":"wp-content/uploads/2015/10/插件5-300x54.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件6-300x128.png","path":"wp-content/uploads/2015/10/插件6-300x128.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件6-150x150.png","path":"wp-content/uploads/2015/10/插件6-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_1-150x150.png","path":"wp-content/uploads/2015/10/插件_1-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_1-300x60.png","path":"wp-content/uploads/2015/10/插件_1-300x60.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_2-150x150.png","path":"wp-content/uploads/2015/10/插件_2-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_3-300x110.png","path":"wp-content/uploads/2015/10/插件_3-300x110.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_3-150x150.png","path":"wp-content/uploads/2015/10/插件_3-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-150x150.png","path":"wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-300x137.png","path":"wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-300x137.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-300x137.png","path":"wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-300x137.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-150x150.png","path":"wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_2-300x67.png","path":"wp-content/uploads/2015/10/插件_2-300x67.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/201312082105529075-150x150.gif","path":"wp-content/uploads/2015/11/201312082105529075-150x150.gif","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/201312082105529075-285x300.gif","path":"wp-content/uploads/2015/11/201312082105529075-285x300.gif","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","path":"wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","path":"wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-300x36.png","path":"wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-300x36.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-150x150.png","path":"wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-1024x121.png","path":"wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-1024x121.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8.png","path":"wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-150x150.png","path":"wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-300x164.png","path":"wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-300x164.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-150x150.png","path":"wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-300x249.png","path":"wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-300x249.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-150x150.png","path":"wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-150x150.png","path":"wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-300x159.png","path":"wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-300x159.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-150x150.png","path":"wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-300x175.png","path":"wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-300x175.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-150x150.png","path":"wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-1024x105.png","path":"wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-1024x105.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-300x31.png","path":"wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-300x31.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-150x150.png","path":"wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-300x154.png","path":"wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-300x154.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-150x150.png","path":"wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-1024x141.png","path":"wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-1024x141.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-300x41.png","path":"wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-300x41.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E.png","path":"wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-150x150.png","path":"wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-1024x682.png","path":"wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-1024x682.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-300x200.png","path":"wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-300x200.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9.png","path":"wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-150x150.png","path":"wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-150x150.png","path":"wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-300x190.png","path":"wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-300x190.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-150x150.png","path":"wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-300x160.png","path":"wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-300x160.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-150x150.png","path":"wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-300x210.png","path":"wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-300x210.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-150x150.png","path":"wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-300x149.png","path":"wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-300x149.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-150x150.png","path":"wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-150x150.png","path":"wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-300x200.png","path":"wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-300x200.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-300x89.png","path":"wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-300x89.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-150x150.png","path":"wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-150x150.png","path":"wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-300x175.png","path":"wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-300x175.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-150x150.png","path":"wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-150x150.png","path":"wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-300x201.png","path":"wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-300x201.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug-150x150.png","path":"wp-content/uploads/2015/11/bug-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug-300x131.png","path":"wp-content/uploads/2015/11/bug-300x131.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug_show-150x150.png","path":"wp-content/uploads/2015/11/bug_show-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug_show-300x127.png","path":"wp-content/uploads/2015/11/bug_show-300x127.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug_sql-150x150.png","path":"wp-content/uploads/2015/11/bug_sql-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug_sql-300x100.png","path":"wp-content/uploads/2015/11/bug_sql-300x100.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/clear_sql-150x150.png","path":"wp-content/uploads/2015/11/clear_sql-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-150x150.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-180x180.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title-180x180.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-192x192.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title-192x192.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-270x270.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title-270x270.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-150x150.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title1-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-32x32.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title-32x32.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/clear_sql-300x109.png","path":"wp-content/uploads/2015/11/clear_sql-300x109.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-300x300.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title-300x300.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-192x192.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title1-192x192.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-270x270.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title1-270x270.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-180x180.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title1-180x180.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-300x300.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title1-300x300.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cuihuan_title-1-150x150.jpg","path":"wp-content/uploads/2015/11/cuihuan_title-1-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title1.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cuihuan_title-1.jpg","path":"wp-content/uploads/2015/11/cuihuan_title-1.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-32x32.jpg","path":"wp-content/uploads/2015/11/cropped-cuihuan_title1-32x32.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cuihuan_title-150x150.jpg","path":"wp-content/uploads/2015/11/cuihuan_title-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/cuihuan_title.jpg","path":"wp-content/uploads/2015/11/cuihuan_title.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/del.png","path":"wp-content/uploads/2015/11/del.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/sql_2-300x140.png","path":"wp-content/uploads/2015/11/sql_2-300x140.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/sql_2-150x150.png","path":"wp-content/uploads/2015/11/sql_2-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/下载-150x150.png","path":"wp-content/uploads/2015/11/下载-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-150x150.png","path":"wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/下载.png","path":"wp-content/uploads/2015/11/下载.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-300x141.png","path":"wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-300x141.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-150x150.png","path":"wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-300x141.png","path":"wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-300x141.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","path":"wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","path":"wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/3805545923-558fed41556e2_articlex.png","path":"wp-content/uploads/2015/12/3805545923-558fed41556e2_articlex.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/3805545923-558fed41556e2_articlex-150x150.png","path":"wp-content/uploads/2015/12/3805545923-558fed41556e2_articlex-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-150x150.png","path":"wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-300x162.png","path":"wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-300x162.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-150x150.png","path":"wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-300x160.png","path":"wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-300x160.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-150x150.png","path":"wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-300x144.png","path":"wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-300x144.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/列表-150x150.png","path":"wp-content/uploads/2015/12/列表-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/列表.png","path":"wp-content/uploads/2015/12/列表.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/01/web_spider-150x150.png","path":"wp-content/uploads/2016/01/web_spider-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/01/web_spider-184x300.png","path":"wp-content/uploads/2016/01/web_spider-184x300.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/01/wise_web_spider-150x150.png","path":"wp-content/uploads/2016/01/wise_web_spider-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/01/wise_web_spider-40x300.png","path":"wp-content/uploads/2016/01/wise_web_spider-40x300.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-150x150.png","path":"wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-300x100.png","path":"wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-300x100.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-150x150.png","path":"wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-150x150.png","path":"wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-300x111.png","path":"wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-300x111.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-150x150.png","path":"wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-300x140.png","path":"wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-300x140.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-150x150.png","path":"wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-300x130.png","path":"wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-300x130.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-150x150.png","path":"wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-150x150.png","path":"wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-300x111.png","path":"wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-300x111.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-300x280.png","path":"wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-300x280.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-150x150.png","path":"wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-300x119.png","path":"wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-300x119.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png","path":"wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-150x124.png","path":"wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-150x124.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828.png","path":"wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-300x108.png","path":"wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-300x108.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-150x150.png","path":"wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-300x143.png","path":"wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-300x143.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-150x150.png","path":"wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-300x79.png","path":"wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-300x79.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-150x150.png","path":"wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-300x208.png","path":"wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-300x208.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png","path":"wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-150x150.png","path":"wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-300x188.png","path":"wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-300x188.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png","path":"wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-150x150.png","path":"wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-300x149.png","path":"wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-300x149.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/存储架构-150x150.jpg","path":"wp-content/uploads/2016/02/存储架构-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/存储架构-300x292.jpg","path":"wp-content/uploads/2016/02/存储架构-300x292.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/评测存储架构-2.pdf","path":"wp-content/uploads/2016/02/评测存储架构-2.pdf","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-150x150.png","path":"wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-150x150.png","path":"wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png","path":"wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-150x150.png","path":"wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-300x169.png","path":"wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-300x169.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-150x150.png","path":"wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png","path":"wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-150x150.png","path":"wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png","path":"wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-300x133.png","path":"wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-300x133.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-150x150.png","path":"wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46.png","path":"wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-150x150.png","path":"wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png","path":"wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-150x150.png","path":"wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-150x150.png","path":"wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-150x150.png","path":"wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-300x248.png","path":"wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-300x248.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-150x150.png","path":"wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-150x150.png","path":"wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-300x243.png","path":"wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-300x243.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-150x150.png","path":"wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png","path":"wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png","path":"wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-150x150.png","path":"wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-300x172.png","path":"wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-300x172.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-150x150.png","path":"wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-300x164.png","path":"wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-300x164.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-150x150.png","path":"wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-150x150.png","path":"wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png","path":"wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-150x150.png","path":"wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-300x141.png","path":"wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-300x141.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-150x146.png","path":"wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-150x146.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png","path":"wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png","path":"wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-150x150.png","path":"wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-150x150.png","path":"wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-150x150.png","path":"wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/dom-150x150.jpg","path":"wp-content/uploads/2016/08/dom-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-300x192.png","path":"wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-300x192.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/dom-271x300.jpg","path":"wp-content/uploads/2016/08/dom-271x300.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/dom-分布-300x162.jpg","path":"wp-content/uploads/2016/08/dom-分布-300x162.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/dom-分布-150x150.jpg","path":"wp-content/uploads/2016/08/dom-分布-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图-203x300.png","path":"wp-content/uploads/2016/08/page-diff-流程图-203x300.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图-150x150.png","path":"wp-content/uploads/2016/08/page-diff-流程图-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图.pdf","path":"wp-content/uploads/2016/08/page-diff-流程图.pdf","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-300x185.png","path":"wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-300x185.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-150x150.png","path":"wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/68923650-0F29-47A7-A7D5-1EC4713D6A8D.png","path":"wp_content/new/nginx1/68923650-0F29-47A7-A7D5-1EC4713D6A8D.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/BAABA0FC-B60C-4070-B247-F3B658B9F2B3.png","path":"wp_content/new/nginx1/BAABA0FC-B60C-4070-B247-F3B658B9F2B3.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-150x150.png","path":"wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-150x150.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-300x251.png","path":"wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-300x251.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_epoll.png","path":"wp_content/new/nginx1/nginx_epoll.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_trend_top.png","path":"wp_content/new/nginx1/nginx_trend_top.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_task2.png","path":"wp_content/new/nginx1/nginx_task2.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","path":"wp_content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","path":"wp_content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-192x192.jpg","path":"wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-192x192.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","path":"wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-180x180.jpg","path":"wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-180x180.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-270x270.jpg","path":"wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-270x270.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-32x32.jpg","path":"wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-32x32.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-300x300.jpg","path":"wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-300x300.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","path":"wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/ipfs-150x150.png","path":"wp_content/uploads/2015/10/ipfs-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/ipfs-300x122.png","path":"wp_content/uploads/2015/10/ipfs-300x122.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/ipfs网络拓扑-150x150.png","path":"wp_content/uploads/2015/10/ipfs网络拓扑-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/ipfs网络拓扑-300x190.png","path":"wp_content/uploads/2015/10/ipfs网络拓扑-300x190.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/rasmus_lerdorf_php-150x150.png","path":"wp_content/uploads/2015/10/rasmus_lerdorf_php-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/rasmus_lerdorf_php-300x131.png","path":"wp_content/uploads/2015/10/rasmus_lerdorf_php-300x131.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件4-150x150.png","path":"wp_content/uploads/2015/10/插件4-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件4-300x57.png","path":"wp_content/uploads/2015/10/插件4-300x57.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件5-300x54.png","path":"wp_content/uploads/2015/10/插件5-300x54.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件5-150x150.png","path":"wp_content/uploads/2015/10/插件5-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件6-150x150.png","path":"wp_content/uploads/2015/10/插件6-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件6-300x128.png","path":"wp_content/uploads/2015/10/插件6-300x128.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_1-150x150.png","path":"wp_content/uploads/2015/10/插件_1-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_1-300x60.png","path":"wp_content/uploads/2015/10/插件_1-300x60.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_2-150x150.png","path":"wp_content/uploads/2015/10/插件_2-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_2-300x67.png","path":"wp_content/uploads/2015/10/插件_2-300x67.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_3-150x150.png","path":"wp_content/uploads/2015/10/插件_3-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_3-300x110.png","path":"wp_content/uploads/2015/10/插件_3-300x110.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/01/web_spider-150x150.png","path":"wp_content/uploads/2016/01/web_spider-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/01/web_spider-184x300.png","path":"wp_content/uploads/2016/01/web_spider-184x300.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/01/wise_web_spider-150x150.png","path":"wp_content/uploads/2016/01/wise_web_spider-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/01/wise_web_spider-40x300.png","path":"wp_content/uploads/2016/01/wise_web_spider-40x300.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-150x150.png","path":"wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-300x141.png","path":"wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-300x141.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-150x150.png","path":"wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-300x141.png","path":"wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-300x141.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","path":"wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","path":"wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/3805545923-558fed41556e2_articlex-150x150.png","path":"wp_content/uploads/2015/12/3805545923-558fed41556e2_articlex-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/3805545923-558fed41556e2_articlex.png","path":"wp_content/uploads/2015/12/3805545923-558fed41556e2_articlex.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-150x150.png","path":"wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-300x162.png","path":"wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-300x162.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-150x150.png","path":"wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-300x160.png","path":"wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-300x160.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-150x150.png","path":"wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-300x144.png","path":"wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-300x144.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/列表-150x150.png","path":"wp_content/uploads/2015/12/列表-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/列表.png","path":"wp_content/uploads/2015/12/列表.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-300x137.png","path":"wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-300x137.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-150x150.png","path":"wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-150x150.png","path":"wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-300x137.png","path":"wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-300x137.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/201312082105529075-285x300.gif","path":"wp_content/uploads/2015/11/201312082105529075-285x300.gif","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/201312082105529075-150x150.gif","path":"wp_content/uploads/2015/11/201312082105529075-150x150.gif","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","path":"wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-300x36.png","path":"wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-300x36.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","path":"wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-150x150.png","path":"wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-1024x121.png","path":"wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-1024x121.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8.png","path":"wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-150x150.png","path":"wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-300x164.png","path":"wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-300x164.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-150x150.png","path":"wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-300x249.png","path":"wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-300x249.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-150x150.png","path":"wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-150x150.png","path":"wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-300x159.png","path":"wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-300x159.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-150x150.png","path":"wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-300x175.png","path":"wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-300x175.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-150x150.png","path":"wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-1024x105.png","path":"wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-1024x105.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-300x31.png","path":"wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-300x31.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-150x150.png","path":"wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-300x154.png","path":"wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-300x154.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-1024x141.png","path":"wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-1024x141.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-300x41.png","path":"wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-300x41.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-150x150.png","path":"wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E.png","path":"wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-150x150.png","path":"wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-300x200.png","path":"wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-300x200.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-1024x682.png","path":"wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-1024x682.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9.png","path":"wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-150x150.png","path":"wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-150x150.png","path":"wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-300x190.png","path":"wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-300x190.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-150x150.png","path":"wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-300x160.png","path":"wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-300x160.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-300x210.png","path":"wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-300x210.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-150x150.png","path":"wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-150x150.png","path":"wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-300x149.png","path":"wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-300x149.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-150x150.png","path":"wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-300x200.png","path":"wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-300x200.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-150x150.png","path":"wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-300x89.png","path":"wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-300x89.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-150x150.png","path":"wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-150x150.png","path":"wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-300x175.png","path":"wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-300x175.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-150x150.png","path":"wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-150x150.png","path":"wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-300x201.png","path":"wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-300x201.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug-150x150.png","path":"wp_content/uploads/2015/11/bug-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug-300x131.png","path":"wp_content/uploads/2015/11/bug-300x131.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug_show-300x127.png","path":"wp_content/uploads/2015/11/bug_show-300x127.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug_show-150x150.png","path":"wp_content/uploads/2015/11/bug_show-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug_sql-150x150.png","path":"wp_content/uploads/2015/11/bug_sql-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug_sql-300x100.png","path":"wp_content/uploads/2015/11/bug_sql-300x100.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/clear_sql-300x109.png","path":"wp_content/uploads/2015/11/clear_sql-300x109.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/clear_sql-150x150.png","path":"wp_content/uploads/2015/11/clear_sql-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-180x180.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title-180x180.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-150x150.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-192x192.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title-192x192.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-270x270.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title-270x270.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-300x300.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title-300x300.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-32x32.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title-32x32.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-150x150.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title1-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-180x180.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title1-180x180.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-192x192.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title1-192x192.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-270x270.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title1-270x270.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-32x32.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title1-32x32.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cuihuan_title-1-150x150.jpg","path":"wp_content/uploads/2015/11/cuihuan_title-1-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title1.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cuihuan_title-1.jpg","path":"wp_content/uploads/2015/11/cuihuan_title-1.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-300x300.jpg","path":"wp_content/uploads/2015/11/cropped-cuihuan_title1-300x300.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cuihuan_title-150x150.jpg","path":"wp_content/uploads/2015/11/cuihuan_title-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/del.png","path":"wp_content/uploads/2015/11/del.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/cuihuan_title.jpg","path":"wp_content/uploads/2015/11/cuihuan_title.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/sql_2-300x140.png","path":"wp_content/uploads/2015/11/sql_2-300x140.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/sql_2-150x150.png","path":"wp_content/uploads/2015/11/sql_2-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/下载-150x150.png","path":"wp_content/uploads/2015/11/下载-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-300x208.png","path":"wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-300x208.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-150x150.png","path":"wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/下载.png","path":"wp_content/uploads/2015/11/下载.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png","path":"wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-150x150.png","path":"wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-300x188.png","path":"wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-300x188.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png","path":"wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-150x150.png","path":"wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-300x149.png","path":"wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-300x149.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/存储架构-150x150.jpg","path":"wp_content/uploads/2016/02/存储架构-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/存储架构-300x292.jpg","path":"wp_content/uploads/2016/02/存储架构-300x292.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-150x150.png","path":"wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/评测存储架构-2.pdf","path":"wp_content/uploads/2016/02/评测存储架构-2.pdf","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-300x100.png","path":"wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-300x100.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-150x150.png","path":"wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-150x150.png","path":"wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-300x111.png","path":"wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-300x111.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-150x150.png","path":"wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-300x140.png","path":"wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-300x140.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-150x150.png","path":"wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-300x130.png","path":"wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-300x130.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-150x150.png","path":"wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-300x111.png","path":"wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-300x111.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-150x150.png","path":"wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-300x280.png","path":"wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-300x280.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png","path":"wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-150x150.png","path":"wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-300x119.png","path":"wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-300x119.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-150x124.png","path":"wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-150x124.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-300x108.png","path":"wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-300x108.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828.png","path":"wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-150x150.png","path":"wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-300x143.png","path":"wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-300x143.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-150x150.png","path":"wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-300x79.png","path":"wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-300x79.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-150x150.png","path":"wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-150x150.png","path":"wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png","path":"wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-150x150.png","path":"wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-300x169.png","path":"wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-300x169.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-150x150.png","path":"wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png","path":"wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-150x150.png","path":"wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png","path":"wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-150x150.png","path":"wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46.png","path":"wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-300x133.png","path":"wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-300x133.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-150x150.png","path":"wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png","path":"wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-150x150.png","path":"wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-150x150.png","path":"wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-150x150.png","path":"wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-300x248.png","path":"wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-300x248.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-150x150.png","path":"wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-150x150.png","path":"wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-300x243.png","path":"wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-300x243.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png","path":"wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png","path":"wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-150x150.png","path":"wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-150x150.png","path":"wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-300x172.png","path":"wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-300x172.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-150x150.png","path":"wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-300x164.png","path":"wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-300x164.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-150x150.png","path":"wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png","path":"wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-150x150.png","path":"wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-150x150.png","path":"wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-300x141.png","path":"wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-300x141.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-150x146.png","path":"wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-150x146.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png","path":"wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png","path":"wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-150x150.png","path":"wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-150x150.png","path":"wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-150x150.png","path":"wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-300x192.png","path":"wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-300x192.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/dom-150x150.jpg","path":"wp_content/uploads/2016/08/dom-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/dom-271x300.jpg","path":"wp_content/uploads/2016/08/dom-271x300.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/dom-分布-300x162.jpg","path":"wp_content/uploads/2016/08/dom-分布-300x162.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/dom-分布-150x150.jpg","path":"wp_content/uploads/2016/08/dom-分布-150x150.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图-203x300.png","path":"wp_content/uploads/2016/08/page-diff-流程图-203x300.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图-150x150.png","path":"wp_content/uploads/2016/08/page-diff-流程图-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图.pdf","path":"wp_content/uploads/2016/08/page-diff-流程图.pdf","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-150x150.png","path":"wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-150x150.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-300x185.png","path":"wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-300x185.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-300x251.png","path":"wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-300x251.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-150x150.png","path":"wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-150x150.png","modified":0,"renderable":0},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","path":"lib/fancybox/source/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","path":"lib/fancybox/source/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","path":"lib/fancybox/source/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","path":"lib/fancybox/source/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","path":"lib/fancybox/source/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","path":"lib/fancybox/source/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","path":"lib/fancybox/source/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","path":"lib/fancybox/source/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","path":"lib/fancybox/source/blank.gif","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","path":"lib/fastclick/lib/fastclick.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","path":"lib/fastclick/lib/fastclick.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"source/wp-content/uploads/2015/10/ipfs.png","path":"wp-content/uploads/2015/10/ipfs.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_1.png","path":"wp-content/uploads/2015/10/插件_1.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/201312082105529075.gif","path":"wp-content/uploads/2015/11/201312082105529075.gif","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-300x249.png","path":"wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-300x249.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0.png","path":"wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-300x182.png","path":"wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-300x182.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png","path":"wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-300x210.png","path":"wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-300x210.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-1024x682.png","path":"wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-1024x682.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75.png","path":"wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-300x195.png","path":"wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-300x195.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B.png","path":"wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/01/wise_web_spider-138x1024.png","path":"wp-content/uploads/2016/01/wise_web_spider-138x1024.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-300x285.png","path":"wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-300x285.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png","path":"wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-1024x379.png","path":"wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-1024x379.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672.png","path":"wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png","path":"wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/存储架构-1024x996.jpg","path":"wp-content/uploads/2016/02/存储架构-1024x996.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-222x300.png","path":"wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-222x300.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png","path":"wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png","path":"wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png","path":"wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-1024x454.png","path":"wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-1024x454.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-1024x136.png","path":"wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-1024x136.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png","path":"wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-300x215.png","path":"wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-300x215.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-300x144.png","path":"wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-300x144.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png","path":"wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-208x300.png","path":"wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-208x300.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-300x300.png","path":"wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-300x300.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-263x300.png","path":"wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-263x300.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png","path":"wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/dom-分布-1024x552.jpg","path":"wp-content/uploads/2016/08/dom-分布-1024x552.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/dom-926x1024.jpg","path":"wp-content/uploads/2016/08/dom-926x1024.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_bit_reload.png","path":"wp_content/new/nginx1/nginx_bit_reload.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_trend_all.png","path":"wp_content/new/nginx1/nginx_trend_all.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_conf_reload.png","path":"wp_content/new/nginx1/nginx_conf_reload.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/ipfs.png","path":"wp_content/uploads/2015/10/ipfs.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_1.png","path":"wp_content/uploads/2015/10/插件_1.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/01/wise_web_spider-138x1024.png","path":"wp_content/uploads/2016/01/wise_web_spider-138x1024.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B.png","path":"wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/201312082105529075.gif","path":"wp_content/uploads/2015/11/201312082105529075.gif","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-300x249.png","path":"wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-300x249.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0.png","path":"wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-300x182.png","path":"wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-300x182.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png","path":"wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-300x210.png","path":"wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-300x210.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75.png","path":"wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-1024x682.png","path":"wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-1024x682.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-300x195.png","path":"wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-300x195.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/存储架构-1024x996.jpg","path":"wp_content/uploads/2016/02/存储架构-1024x996.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-300x285.png","path":"wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-300x285.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png","path":"wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-1024x379.png","path":"wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-1024x379.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672.png","path":"wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png","path":"wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-222x300.png","path":"wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-222x300.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png","path":"wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png","path":"wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png","path":"wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-1024x454.png","path":"wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-1024x454.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-1024x136.png","path":"wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-1024x136.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png","path":"wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-300x215.png","path":"wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-300x215.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-300x144.png","path":"wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-300x144.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png","path":"wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-208x300.png","path":"wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-208x300.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-300x300.png","path":"wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-300x300.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-263x300.png","path":"wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-263x300.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png","path":"wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/dom-926x1024.jpg","path":"wp_content/uploads/2016/08/dom-926x1024.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/dom-分布-1024x552.jpg","path":"wp_content/uploads/2016/08/dom-分布-1024x552.jpg","modified":0,"renderable":0},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","path":"lib/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"source/wp-content/uploads/2015/10/ipfs网络拓扑.png","path":"wp-content/uploads/2015/10/ipfs网络拓扑.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/rasmus_lerdorf_php.png","path":"wp-content/uploads/2015/10/rasmus_lerdorf_php.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png","path":"wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598.png","path":"wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-1024x544.png","path":"wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-1024x544.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-1024x598.png","path":"wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-1024x598.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png","path":"wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png","path":"wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/clear_sql-1024x372.png","path":"wp-content/uploads/2015/11/clear_sql-1024x372.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-1024x553.png","path":"wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-1024x553.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png","path":"wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png","path":"wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-1024x407.png","path":"wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-1024x407.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-1024x271.png","path":"wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-1024x271.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png","path":"wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-1024x286.png","path":"wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-1024x286.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-1024x157.png","path":"wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-1024x157.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC.png","path":"wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/dom.jpg","path":"wp-content/uploads/2016/08/dom.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/dom-分布.jpg","path":"wp-content/uploads/2016/08/dom-分布.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/rasmus_lerdorf_php.png","path":"wp_content/uploads/2015/10/rasmus_lerdorf_php.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/ipfs网络拓扑.png","path":"wp_content/uploads/2015/10/ipfs网络拓扑.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-1024x553.png","path":"wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-1024x553.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png","path":"wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598.png","path":"wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-1024x544.png","path":"wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-1024x544.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-1024x598.png","path":"wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-1024x598.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png","path":"wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png","path":"wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/clear_sql-1024x372.png","path":"wp_content/uploads/2015/11/clear_sql-1024x372.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png","path":"wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png","path":"wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png","path":"wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-1024x407.png","path":"wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-1024x407.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-1024x271.png","path":"wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-1024x271.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-1024x286.png","path":"wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-1024x286.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-1024x157.png","path":"wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-1024x157.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC.png","path":"wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/dom-分布.jpg","path":"wp_content/uploads/2016/08/dom-分布.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/dom.jpg","path":"wp_content/uploads/2016/08/dom.jpg","modified":0,"renderable":0},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","path":"lib/fancybox/source/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","path":"lib/fancybox/source/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","path":"lib/fancybox/source/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","path":"lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","path":"lib/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"source/wp-content/uploads/2015/10/插件4-1024x195.png","path":"wp-content/uploads/2015/10/插件4-1024x195.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件5-1024x183.png","path":"wp-content/uploads/2015/10/插件5-1024x183.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件6.png","path":"wp-content/uploads/2015/10/插件6.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_2-1024x229.png","path":"wp-content/uploads/2015/10/插件_2-1024x229.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838.png","path":"wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-1024x468.png","path":"wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-1024x468.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","path":"wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316.png","path":"wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-1024x526.png","path":"wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-1024x526.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF.png","path":"wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png","path":"wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32.png","path":"wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png","path":"wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png","path":"wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug_sql.png","path":"wp-content/uploads/2015/11/bug_sql.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug_sql-1024x341.png","path":"wp-content/uploads/2015/11/bug_sql-1024x341.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","path":"wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png","path":"wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png","path":"wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-1024x340.png","path":"wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-1024x340.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-1024x442.png","path":"wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-1024x442.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-1024x508.png","path":"wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-1024x508.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-1024x576.png","path":"wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-1024x576.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-1024x283.png","path":"wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-1024x283.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-1024x656.png","path":"wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-1024x656.png","modified":0,"renderable":0},{"_id":"source/wp_content/new/nginx1/nginx_compare.png","path":"wp_content/new/nginx1/nginx_compare.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6.png","path":"wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件4-1024x195.png","path":"wp_content/uploads/2015/10/插件4-1024x195.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件5-1024x183.png","path":"wp_content/uploads/2015/10/插件5-1024x183.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件6.png","path":"wp_content/uploads/2015/10/插件6.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_2-1024x229.png","path":"wp_content/uploads/2015/10/插件_2-1024x229.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","path":"wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png","path":"wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png","path":"wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838.png","path":"wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-1024x468.png","path":"wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-1024x468.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","path":"wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316.png","path":"wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-1024x526.png","path":"wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-1024x526.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF.png","path":"wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png","path":"wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32.png","path":"wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png","path":"wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png","path":"wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug_sql-1024x341.png","path":"wp_content/uploads/2015/11/bug_sql-1024x341.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug_sql.png","path":"wp_content/uploads/2015/11/bug_sql.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-1024x508.png","path":"wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-1024x508.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-1024x340.png","path":"wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-1024x340.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-1024x442.png","path":"wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-1024x442.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-1024x576.png","path":"wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-1024x576.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-1024x283.png","path":"wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-1024x283.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-1024x656.png","path":"wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-1024x656.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6.png","path":"wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件5.png","path":"wp-content/uploads/2015/10/插件5.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件6-1024x436.png","path":"wp-content/uploads/2015/10/插件6-1024x436.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_3-1024x374.png","path":"wp-content/uploads/2015/10/插件_3-1024x374.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png","path":"wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323.png","path":"wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-1024x548.png","path":"wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-1024x548.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-1024x598.png","path":"wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-1024x598.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug-1024x446.png","path":"wp-content/uploads/2015/11/bug-1024x446.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug_show-1024x433.png","path":"wp-content/uploads/2015/11/bug_show-1024x433.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/clear_sql.png","path":"wp-content/uploads/2015/11/clear_sql.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/sql_2-1024x479.png","path":"wp-content/uploads/2015/11/sql_2-1024x479.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/sql_2.png","path":"wp-content/uploads/2015/11/sql_2.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-1024x482.png","path":"wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-1024x482.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png","path":"wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png","path":"wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-1024x476.png","path":"wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-1024x476.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-1024x488.png","path":"wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-1024x488.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png","path":"wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png","path":"wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png","path":"wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png","path":"wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png","path":"wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图-693x1024.png","path":"wp-content/uploads/2016/08/page-diff-流程图-693x1024.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-1024x630.png","path":"wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-1024x630.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34.png","path":"wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件5.png","path":"wp_content/uploads/2015/10/插件5.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件6-1024x436.png","path":"wp_content/uploads/2015/10/插件6-1024x436.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_3-1024x374.png","path":"wp_content/uploads/2015/10/插件_3-1024x374.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-1024x482.png","path":"wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-1024x482.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png","path":"wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png","path":"wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png","path":"wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323.png","path":"wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-1024x548.png","path":"wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-1024x548.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-1024x598.png","path":"wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-1024x598.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug-1024x446.png","path":"wp_content/uploads/2015/11/bug-1024x446.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug_show-1024x433.png","path":"wp_content/uploads/2015/11/bug_show-1024x433.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/clear_sql.png","path":"wp_content/uploads/2015/11/clear_sql.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/sql_2-1024x479.png","path":"wp_content/uploads/2015/11/sql_2-1024x479.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/sql_2.png","path":"wp_content/uploads/2015/11/sql_2.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-1024x476.png","path":"wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-1024x476.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-1024x488.png","path":"wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-1024x488.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png","path":"wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png","path":"wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png","path":"wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png","path":"wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png","path":"wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图-693x1024.png","path":"wp_content/uploads/2016/08/page-diff-流程图-693x1024.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-1024x630.png","path":"wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-1024x630.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34.png","path":"wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34.png","modified":0,"renderable":0},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","path":"lib/algolia-instant-search/instantsearch.min.js","modified":0,"renderable":1},{"_id":"source/wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-1024x560.png","path":"wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-1024x560.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C.png","path":"wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-1024x850.png","path":"wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-1024x850.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86.png","path":"wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png","path":"wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B.png","path":"wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/01/web_spider-629x1024.png","path":"wp-content/uploads/2016/01/web_spider-629x1024.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31.png","path":"wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-1024x561.png","path":"wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-1024x561.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-1024x856.png","path":"wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-1024x856.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/01/web_spider-629x1024.png","path":"wp_content/uploads/2016/01/web_spider-629x1024.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-1024x560.png","path":"wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-1024x560.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C.png","path":"wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-1024x850.png","path":"wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-1024x850.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png","path":"wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86.png","path":"wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B.png","path":"wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31.png","path":"wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-1024x561.png","path":"wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-1024x561.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-1024x856.png","path":"wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-1024x856.png","modified":0,"renderable":0},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","path":"lib/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"source/wp-content/uploads/2015/10/插件4.png","path":"wp-content/uploads/2015/10/插件4.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_2.png","path":"wp-content/uploads/2015/10/插件_2.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","path":"wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-1024x649.png","path":"wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-1024x649.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-1024x685.png","path":"wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-1024x685.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20.png","path":"wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C.png","path":"wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1.png","path":"wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","path":"wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png","path":"wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-1024x514.png","path":"wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-1024x514.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-1024x481.png","path":"wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-1024x481.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png","path":"wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件4.png","path":"wp_content/uploads/2015/10/插件4.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_2.png","path":"wp_content/uploads/2015/10/插件_2.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C.png","path":"wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1.png","path":"wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","path":"wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","path":"wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-1024x649.png","path":"wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-1024x649.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-1024x685.png","path":"wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-1024x685.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20.png","path":"wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png","path":"wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-1024x514.png","path":"wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-1024x514.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-1024x481.png","path":"wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-1024x481.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png","path":"wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png","path":"wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png","path":"wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug.png","path":"wp-content/uploads/2015/11/bug.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/bug_show.png","path":"wp-content/uploads/2015/11/bug_show.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/01/wise_web_spider.png","path":"wp-content/uploads/2016/01/wise_web_spider.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png","path":"wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png","path":"wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-1024x848.png","path":"wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-1024x848.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-1024x588.png","path":"wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-1024x588.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png","path":"wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/01/wise_web_spider.png","path":"wp_content/uploads/2016/01/wise_web_spider.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png","path":"wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png","path":"wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug.png","path":"wp_content/uploads/2015/11/bug.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/bug_show.png","path":"wp_content/uploads/2015/11/bug_show.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png","path":"wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png","path":"wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-1024x848.png","path":"wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-1024x848.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-1024x588.png","path":"wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-1024x588.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png","path":"wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/10/插件_3.png","path":"wp-content/uploads/2015/10/插件_3.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png","path":"wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/02/存储架构.jpg","path":"wp-content/uploads/2016/02/存储架构.jpg","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-1024x733.png","path":"wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-1024x733.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/10/插件_3.png","path":"wp_content/uploads/2015/10/插件_3.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png","path":"wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/02/存储架构.jpg","path":"wp_content/uploads/2016/02/存储架构.jpg","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-1024x733.png","path":"wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-1024x733.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4.png","path":"wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-1024x493.png","path":"wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-1024x493.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC.png","path":"wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6.png","path":"wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png","path":"wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4.png","path":"wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC.png","path":"wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-1024x493.png","path":"wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-1024x493.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png","path":"wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6.png","path":"wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-1024x715.png","path":"wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-1024x715.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图.png","path":"wp-content/uploads/2016/08/page-diff-流程图.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-1024x715.png","path":"wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-1024x715.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图.png","path":"wp_content/uploads/2016/08/page-diff-流程图.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878.png","path":"wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/01/web_spider.png","path":"wp-content/uploads/2016/01/web_spider.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-722x1024.png","path":"wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-722x1024.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-896x1024.png","path":"wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-896x1024.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/01/web_spider.png","path":"wp_content/uploads/2016/01/web_spider.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878.png","path":"wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-722x1024.png","path":"wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-722x1024.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-896x1024.png","path":"wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-896x1024.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-759x1024.png","path":"wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-759x1024.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-709x1024.png","path":"wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-709x1024.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-759x1024.png","path":"wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-759x1024.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-709x1024.png","path":"wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-709x1024.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png","path":"wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png","path":"wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png","path":"wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png","path":"wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png","path":"wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png","path":"wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png","modified":0,"renderable":0},{"_id":"source/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png","path":"wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png","modified":0,"renderable":0},{"_id":"source/wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png","path":"wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png","modified":0,"renderable":0}],"Cache":[{"_id":"source/favicon.ico","hash":"3d86b7de4e1e93dfa205801be7e12bc63edb202f","modified":1489549260000},{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1489549261000},{"_id":"themes/next/.javascript_ignore","hash":"f9ea3c5395f8feb225a24e2c32baa79afda30c16","modified":1489549261000},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1489549261000},{"_id":"themes/next/.hound.yml","hash":"b76daa84c9ca3ad292c78412603370a367cc2bc3","modified":1489549261000},{"_id":"themes/next/bower.json","hash":"5abc236d9cc2512f5457ed57c1fba76669eb7399","modified":1489549261000},{"_id":"themes/next/_config.yml","hash":"cc969938820d8bfed8dc6657d95a0f3596b2d1e0","modified":1497950161000},{"_id":"themes/next/gulpfile.coffee","hash":"61ef0606a8134894d7ac796bc8d0fa4ba6a94483","modified":1489549261000},{"_id":"themes/next/package.json","hash":"877cb98025e59015532c4c9a04a33e2af4ad56f9","modified":1489549261000},{"_id":"themes/next/.jshintrc","hash":"9928f81bd822f6a8d67fdbc909b517178533bca9","modified":1489549261000},{"_id":"source/404/index.md","hash":"486f5f697c7c125abb5298a8219de0b21039118e","modified":1489549260000},{"_id":"source/_posts/Nginx实践一：centos apache更换为nginx.md","hash":"732ba047f0cc54d1c77263a9ae2d6a952d541971","modified":1489549260000},{"_id":"source/_posts/YII2数据库查询实践.md","hash":"61d61451733746daf34a0838929480091de40ed4","modified":1489549260000},{"_id":"source/_posts/canvas_combine_pic.md","hash":"ffe92ef3c6d1c0620bac37e5e652387473738a0f","modified":1489549260000},{"_id":"source/_posts/chrome_1.md","hash":"fb095e6bf7c498f3acbed7eb9ddb089830edde8d","modified":1489549260000},{"_id":"source/_posts/crontab 误删除恢复.md","hash":"5776f4fc0f013b15c1074a13b06b6925a243e7d6","modified":1489549260000},{"_id":"source/_posts/charactor.md","hash":"b88a1e1f6ac39c185d83e0e72c4936fb6ead564e","modified":1489549260000},{"_id":"source/_posts/chrome_2.md","hash":"ba7ab898d6c8e0e9d8cac48b99ca1f5657559008","modified":1489549260000},{"_id":"source/_posts/echarts动态获取数据实例.md","hash":"29a52314c75d9fd2245d6ca450418d4381c16ef0","modified":1489549260000},{"_id":"source/_posts/fsck修复linux文件损坏.md","hash":"d5101b72627f4b9f21f3f5134f673ae54f9fbde4","modified":1489549260000},{"_id":"source/_posts/jsonp + php 跨域实例.md","hash":"5dadfb794f48b6b85d65dfa4ab8686941d3bb1c0","modified":1489549260000},{"_id":"source/_posts/linux 查找清理大文件.md","hash":"4c79a0d044e77e05eafca94394f228172b7ab99c","modified":1489549260000},{"_id":"source/_posts/mysql 简单全量备份和快速恢复.md","hash":"a077d72a4942328ccd675cb4df4dec05960b9d50","modified":1489549260000},{"_id":"source/_posts/mysql数据导库常用操作.md","hash":"22a95f9fc1dd816f5120a5fe6b6d2ec1f9336e9e","modified":1489549260000},{"_id":"source/_posts/page_monitor_second.md","hash":"6d59faa36db9605a9e95527d4e485bbc85f05bc6","modified":1489549260000},{"_id":"source/_posts/php 操作不同数据库.md","hash":"65d3a5d7c109ce638e572fe2ef4fa2575ad0e591","modified":1489549260000},{"_id":"source/_posts/phpUnit 安装，实例和简单部署.md","hash":"8f4e62577c71b382bec8d0001e3a4fc29a83a8aa","modified":1489549260000},{"_id":"source/_posts/php 处理unicode解码.md","hash":"d99fb38b02b25dbe9eb706ac7e2c49b072a98b1a","modified":1489549260000},{"_id":"source/_posts/nginx_study_1.md","hash":"2a23676519418c6bad6e2555246beb5d8661f475","modified":1497950012000},{"_id":"source/_posts/phpredis单例模式封装.md","hash":"50dffd584bbe11abb8f85068afa362a2c59aa373","modified":1489549260000},{"_id":"source/_posts/postMessage处理iframe 跨域问题.md","hash":"b8f515b26cc373aed45d9619db0ca22ecf3f32d5","modified":1489549260000},{"_id":"source/_posts/php反射调用private方法实践.md","hash":"0716a68fb3f275e76ce707bf624d8b51b41e7f48","modified":1489549260000},{"_id":"source/_posts/redis3.md","hash":"a37eea3a93c66e235fe1e86043b01a16c459ed9b","modified":1489549260000},{"_id":"source/_posts/【page-monitor 前端自动化 上篇】初步调研 .md","hash":"dda4f5108601b8e547c108bfe0d2cbeec9a95142","modified":1489549260000},{"_id":"source/_posts/【redis学习一】基本概念和基本操作.md","hash":"ba94f5db8e7f99cfa19ba096e786619198105a69","modified":1489549260000},{"_id":"source/_posts/【redis学习二】多php版本下phpredis扩展安装.md","hash":"d8d06f4ebaff06dd57134982bcb54a113092c2ef","modified":1489549260000},{"_id":"source/_posts/【page-monitor 前端自动化 下篇】 实践应用.md","hash":"5e17b29572506029c8f5d6bd94b7f9bdc0cbae66","modified":1489549260000},{"_id":"source/_posts/【wordpress优化】压缩和使用静态缓存.md","hash":"c0db654a3dff873f11c06abe96f4c07630e6ec6c","modified":1489549260000},{"_id":"source/_posts/【高并发简单解决方案】redis队列缓存 + mysql 批量入库 + php离线整合.md","hash":"a9b7dde5bfe654149d88a159f09cd4a77aa814c1","modified":1489549260000},{"_id":"source/_posts/中型存储架构实践探索.md","hash":"5c4b8573ebd85adcd70ee73a0228466dbdb33a71","modified":1489549260000},{"_id":"source/_posts/机器多次恶意提交攻击.md","hash":"37c19875094c88db5904919d7bc2e54741472608","modified":1489549260000},{"_id":"source/_posts/检验mysql主从备份，读写分离.md","hash":"f8093b62a27377babc6ee8419b92d8da7c184706","modified":1489549260000},{"_id":"source/about/index.md","hash":"acd4e4e43cd1318504be04bad72fbab5d579defb","modified":1489549260000},{"_id":"source/categories/index.md","hash":"8054185b84f100b33aeef1c87eb4e18870f83296","modified":1489549260000},{"_id":"source/_posts/Nginx实践二：nginx端口配置，域名重定向设置.md","hash":"18fd2fdc8186ad59df1e2a24638b448d55ad79fd","modified":1489549260000},{"_id":"source/old/index.md","hash":"d51b4efa9cd9e46e889a98682f14e65cca93c790","modified":1489549260000},{"_id":"source/tags/index.md","hash":"7e9061843f8230fbce73acf5f411590e9be1437a","modified":1489549260000},{"_id":"themes/next/languages/de.yml","hash":"1fdea1f84b7f691f5b4dd4d2b43eeb27b10fa0c8","modified":1489549261000},{"_id":"themes/next/languages/default.yml","hash":"767470a80dc257e23e14c3a78e8c52a46c9d6209","modified":1489549261000},{"_id":"themes/next/languages/en.yml","hash":"40057d6608e825d06e0864bac4dcd27ed88ada87","modified":1489549261000},{"_id":"themes/next/languages/fr-FR.yml","hash":"9fca01ef917d33ae2ae6bc04561ec6799dff5351","modified":1489549261000},{"_id":"themes/next/languages/ja.yml","hash":"49f12149edcc1892b26a6207328cda64da20116d","modified":1489549261000},{"_id":"themes/next/languages/id.yml","hash":"34396bef27c4ab9e9a3c5d3e3aa94b0e3b3a7b0d","modified":1489549261000},{"_id":"themes/next/languages/ko.yml","hash":"b6bc5d6b0c000deb44099b42d3aebb8c49dbfca9","modified":1489549261000},{"_id":"themes/next/languages/pt-BR.yml","hash":"7742ba4c0d682cbe1d38305332ebc928abd754b5","modified":1489549261000},{"_id":"themes/next/languages/pt.yml","hash":"6b660b117314cad93f08757601df3adb04c68beb","modified":1489549261000},{"_id":"themes/next/languages/zh-Hans.yml","hash":"cddc483221f966a09c0d50fbb54e05ddd2a8eec8","modified":1489549261000},{"_id":"themes/next/languages/zh-hk.yml","hash":"34c84c6d04447a25bd5eac576922a13947c000e2","modified":1489549261000},{"_id":"themes/next/languages/ru.yml","hash":"257d11e626cbe4b9b78785a764190b9278f95c28","modified":1489549261000},{"_id":"themes/next/languages/zh-tw.yml","hash":"c97a5c41149de9b17f33439b0ecf0eff6fdae50e","modified":1489549261000},{"_id":"themes/next/layout/_layout.swig","hash":"2fa3c74066843a859fac77803324a1de51044da9","modified":1489549261000},{"_id":"themes/next/layout/category.swig","hash":"6422d196ceaff4220d54b8af770e7e957f3364ad","modified":1489549261000},{"_id":"themes/next/layout/archive.swig","hash":"b5b59d70fc1563f482fa07afd435752774ad5981","modified":1489549261000},{"_id":"themes/next/layout/index.swig","hash":"427d0b95b854e311ae363088ab39a393bf8fdc8b","modified":1489549261000},{"_id":"themes/next/layout/old.swig","hash":"e2e512142961ddfe77eba29eaa88f4a2ee43ae18","modified":1489549261000},{"_id":"themes/next/layout/post.swig","hash":"e2e512142961ddfe77eba29eaa88f4a2ee43ae18","modified":1489549261000},{"_id":"themes/next/layout/schedule.swig","hash":"1f1cdc268f4ef773fd3ae693bbdf7d0b2f45c3a3","modified":1489549261000},{"_id":"themes/next/layout/page.swig","hash":"3727fab9dadb967e9c2204edca787dc72264674a","modified":1489549261000},{"_id":"themes/next/scripts/merge-configs.js","hash":"0c56be2e85c694247cfa327ea6d627b99ca265e8","modified":1489549261000},{"_id":"themes/next/layout/tag.swig","hash":"07cf49c49c39a14dfbe9ce8e7d7eea3d4d0a4911","modified":1489549261000},{"_id":"themes/next/source/404.html","hash":"909a2b39bf012a9bb70865f9ba4569a08b165adb","modified":1489549261000},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1489549261000},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1489549261000},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1489549261000},{"_id":"source/wp-content/base/favicon.ico","hash":"3d86b7de4e1e93dfa205801be7e12bc63edb202f","modified":1489549260000},{"_id":"source/wp-content/base/loading.gif","hash":"2842d8b2614d0d440689dcb9b15940c80cbd2f34","modified":1489549260000},{"_id":"source/wp-content/base/cuihuan_title.jpg","hash":"6dfa70c62e063d7b399c815c4bbf3611f7f806de","modified":1489549260000},{"_id":"source/wp-content/base/qrcode.jpg","hash":"605d6a4bf60b50a0caa5d8466bca4ce33e69c389","modified":1489549260000},{"_id":"source/wp_content/base/cuihuan_title.jpg","hash":"6dfa70c62e063d7b399c815c4bbf3611f7f806de","modified":1489549260000},{"_id":"source/wp_content/base/favicon.ico","hash":"3d86b7de4e1e93dfa205801be7e12bc63edb202f","modified":1489549260000},{"_id":"source/wp_content/base/loading.gif","hash":"2842d8b2614d0d440689dcb9b15940c80cbd2f34","modified":1489549260000},{"_id":"source/wp_content/base/qrcode.jpg","hash":"605d6a4bf60b50a0caa5d8466bca4ce33e69c389","modified":1489549260000},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1489549261000},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"5864f5567ba5efeabcf6ea355013c0b603ee07f2","modified":1489549261000},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1489549261000},{"_id":"themes/next/layout/_macro/reward.swig","hash":"37e5b7c42ec17b9b6b786c5512bcc481a21c974e","modified":1489549261000},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"43d8830bb19da4fc7a5773866be19fa066b62645","modified":1489549261000},{"_id":"themes/next/layout/_partials/comments.swig","hash":"78ccfc1dc915247c1fec3c86d742e0f4c2f6d99c","modified":1489549261000},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"14e785adeb0e671ba0ff9a553e6f0d8def6c670c","modified":1489549261000},{"_id":"themes/next/layout/_macro/post.swig","hash":"e6016def9b512188f4c2725399c9adc7bc41cdae","modified":1489549261000},{"_id":"themes/next/layout/_partials/head.swig","hash":"ca56f92e2fa82b03853869f5073ee1a5626a4796","modified":1489549261000},{"_id":"themes/next/layout/_partials/header.swig","hash":"adab5c3f7b173f1b45454787f39dde07aea03483","modified":1489549261000},{"_id":"themes/next/layout/_partials/footer.swig","hash":"7172c6053118b7c291a56a7860128a652ae66b83","modified":1489549261000},{"_id":"themes/next/layout/_partials/duoshuo-hot-articles.swig","hash":"5d4638c46aef65bf32a01681495b62416ccc98db","modified":1489549261000},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"9e8e21d194ef44d271b1cca0bc1448c14d7edf4f","modified":1489549261000},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"39d613e5a9f8389d4ea52d6082502af8e833b9f2","modified":1489549261000},{"_id":"themes/next/layout/_partials/search.swig","hash":"1431719d1dbba3f5ee385eebc46376d1a960b2d5","modified":1489549261000},{"_id":"themes/next/layout/_scripts/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1489549261000},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"03aaebe9d50f6acb007ec38cc04acd1cfceb404d","modified":1489549261000},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"766b2bdda29523ed6cd8d7aa197f996022f8fd94","modified":1489549261000},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"4512867d80d9eddfc3a0f5fea3c456f33aa9d522","modified":1489549261000},{"_id":"themes/next/scripts/tags/button.js","hash":"62e6dbeb53d07627a048132c79630b45d9a8f2cc","modified":1489549261000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"535fc542781021c4326dec24d8495cbb1387634a","modified":1489549261000},{"_id":"themes/next/scripts/tags/full-image.js","hash":"8eeb3fb89540299bdbb799edfdfdac3743b50596","modified":1489549261000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"49252824cd53184dc9b97b2f2d87ff28e1b3ef27","modified":1489549261000},{"_id":"themes/next/scripts/tags/note.js","hash":"6752925eedbdb939d8ec4d11bdfb75199f18dd70","modified":1489549261000},{"_id":"themes/next/source/css/main.styl","hash":"20702c48d6053c92c5bcdbc68e8d0ef1369848a0","modified":1489549261000},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1489549261000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1489549261000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1489549261000},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"90035272fa31a3f65b3c0e2cb8a633876ef457dc","modified":1489549261000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1489549261000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1489549261000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1489549261000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1489549261000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1489549261000},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1489549261000},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1489549261000},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1489549261000},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1489549261000},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1489549261000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1489549261000},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1489549261000},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1489549261000},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1489549261000},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1489549261000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1489549261000},{"_id":"source/wp_content/new/nginx1/nginx_rb_tree.png","hash":"9d4210a87a66d5ba0f567cb9b2a2efbb5439121e","modified":1489549260000},{"_id":"source/wp_content/new/redis/redis_3_log.png","hash":"6366d20bc7c4a5134311ca16e8f2dfc386e5de1b","modified":1489549260000},{"_id":"source/wp_content/new/redis/redis_3_slave.png","hash":"4da35b5a68f3ada5d1c05296dadc60af2cb77024","modified":1489549260000},{"_id":"source/wp_content/new/redis/redis_3_master.png","hash":"8b7b963818a64b0c4ea368d52079c2b158b0f75a","modified":1489549260000},{"_id":"themes/next/layout/_partials/head/custom-head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1489549261000},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1489549261000},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1489549261000},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"ff5523d5dacaa77a55a24e50e6e6530c3b98bfad","modified":1489549261000},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1489549261000},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1489549261000},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1489549261000},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1489549261000},{"_id":"themes/next/layout/_partials/share/jiathis.swig","hash":"63315fcf210799f894208c9f512737096df84962","modified":1489549261000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"a44acf9b0d0f44ef3dfc767376a95c984cc127de","modified":1489549261000},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"069d1357c717572256e5cdee09574ebce529cbae","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/analytics.swig","hash":"394d9fff7951287cc90f52acc2d4cbfd1bae079d","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/comments.swig","hash":"4abc01bc870e1d7a783cdbd26166edc782a6a4f4","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/localsearch.swig","hash":"b460e27db3dcd4ab40b17d8926a5c4e624f293a9","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/lean-analytics.swig","hash":"92dc60821307fc9769bea9b2d60adaeb798342af","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/mathjax.swig","hash":"6d25596d6a7c57700d37b607f8d9a62d89708683","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1489549261000},{"_id":"themes/next/layout/_components/algolia-search/dom.swig","hash":"636f1181dd5887a70b4a08ca8f655d4e46635792","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1489549261000},{"_id":"themes/next/layout/_components/algolia-search/assets.swig","hash":"28ff4ed6714c59124569ffcbd10f1173d53ca923","modified":1489549261000},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"328d9a9696cc2ccf59c67d3c26000d569f46344c","modified":1489549261000},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"715d5b40dc52f319fe4bff0325beb874774d9bd9","modified":1489549261000},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"78a83c38f69a8747bb74e420e6c9eeef1ea76525","modified":1489549261000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"c459aa6d607d8bcb747544e74f6ad0b8374aa3b1","modified":1489549261000},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"fb19ffb069adb37fff8fa97879bab24bd7250c4a","modified":1489549261000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"fc185c6cec79593775d1c2440dbe2a71cfbe2e99","modified":1489549261000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"c8d35a6b9e3bff6d8fdb66de853065af9d37562d","modified":1489549261000},{"_id":"themes/next/source/js/src/hook-duoshuo.js","hash":"a6119070c0119f33e08b29da7d2cce2635eb40a0","modified":1489549261000},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"39bf93769d9080fa01a9a875183b43198f79bc19","modified":1489549261000},{"_id":"themes/next/source/js/src/motion.js","hash":"269414e84df544a4ccb88519f6abae4943db3c67","modified":1489549261000},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"96b29f69b8b916b22f62c9959a117b5a968200a5","modified":1489549261000},{"_id":"themes/next/source/js/src/post-details.js","hash":"2038f54e289b6da5def09689e69f623187147be5","modified":1489549261000},{"_id":"themes/next/source/js/src/affix.js","hash":"978e0422b5bf1b560236d8d10ebc1adcf66392e3","modified":1489549261000},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fe4da1b9fe73518226446f5f27d2831e4426fc35","modified":1489549261000},{"_id":"themes/next/source/js/src/utils.js","hash":"384e17ff857f073060f5bf8c6e4f4b7353236331","modified":1489549261000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.css","hash":"90ef19edc982645b118b095615838d9c5eaba0de","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/.bower.json","hash":"cc40a9b11e52348e554c84e4a5c058056f6b7aeb","modified":1489549261000},{"_id":"themes/next/source/lib/canvas-nest/canvas-nest.min.js","hash":"0387e75e23b1db108a755073fe52a0d03eb391a7","modified":1489549261000},{"_id":"themes/next/source/lib/fastclick/.bower.json","hash":"93ebd5b35e632f714dcf1753e1f6db77ec74449b","modified":1489549261000},{"_id":"themes/next/source/lib/fastclick/README.md","hash":"1decd8e1adad2cd6db0ab50cf56de6035156f4ea","modified":1489549261000},{"_id":"themes/next/source/lib/fastclick/bower.json","hash":"13379463c7463b4b96d13556b46faa4cc38d81e6","modified":1489549261000},{"_id":"themes/next/source/lib/fastclick/LICENSE","hash":"dcd5b6b43095d9e90353a28b09cb269de8d4838e","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"c1072942459fa0880e8a33a1bd929176b62b4171","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1489549261000},{"_id":"themes/next/source/lib/jquery/.bower.json","hash":"91745c2cc6c946c7275f952b2b0760b880cea69e","modified":1489549261000},{"_id":"themes/next/source/lib/jquery_lazyload/.bower.json","hash":"b7638afc93e9cd350d0783565ee9a7da6805ad8e","modified":1489549261000},{"_id":"themes/next/source/lib/jquery_lazyload/CONTRIBUTING.md","hash":"4891864c24c28efecd81a6a8d3f261145190f901","modified":1489549261000},{"_id":"themes/next/source/lib/jquery_lazyload/README.md","hash":"895d50fa29759af7835256522e9dd7dac597765c","modified":1489549261000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.lazyload.js","hash":"481fd478650e12b67c201a0ea41e92743f8b45a3","modified":1489549261000},{"_id":"themes/next/source/lib/jquery_lazyload/bower.json","hash":"65bc85d12197e71c40a55c0cd7f6823995a05222","modified":1489549261000},{"_id":"themes/next/source/lib/jquery_lazyload/jquery.scrollstop.js","hash":"0e9a81785a011c98be5ea821a8ed7d411818cfd1","modified":1489549261000},{"_id":"themes/next/source/lib/velocity/.bower.json","hash":"05f960846f1c7a93dab1d3f9a1121e86812e8c88","modified":1489549261000},{"_id":"themes/next/source/lib/velocity/bower.json","hash":"2ec99573e84c7117368beccb9e94b6bf35d2db03","modified":1489549261000},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1489549261000},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1489549261000},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1489549261000},{"_id":"source/wp-content/base/bg.jpg","hash":"77e001765e99d69012a1a2f4d52bc2417fb9fda9","modified":1489549260000},{"_id":"source/wp_content/base/bg.jpg","hash":"77e001765e99d69012a1a2f4d52bc2417fb9fda9","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/7E2CA17E-BA80-4A5B-AB2E-80BE5E06A946.png","hash":"c982edddaa8b4de89c9e6e9ee255acefa828fa0e","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_event_.png","hash":"d101c05ebe07614207dbb16c5e389f9582374981","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_framework.png","hash":"82c5c0d5579a4491f462de4822866c87f74fca72","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_flow.png","hash":"b3a7761d016a851e88b6f208cf178ead06f3d6e8","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_task.png","hash":"e05545d2a4cc8d27e846e959cb214aedff517eec","modified":1489549260000},{"_id":"source/wp_content/new/redis/redis_3_framework.png","hash":"51753f989d1fae318e0d4535f617289b93bd6189","modified":1489549260000},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","hash":"292d0080353f417115dd29619adbd918976e322e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/_1-e1446213477244-150x150.png","hash":"2bf9208a3bcfe524574c5c86dc612dc7cf043302","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","hash":"c0bfd564ad496a42713af4e6061194f3c2013de7","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/_1-e1446213477244-300x60.png","hash":"45bd6718a5ed696d25f3b81190959009bb4b9fe8","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-180x180.jpg","hash":"0479002b269c6d35809678196a47e4bd3147cdd0","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-192x192.jpg","hash":"df63fd35ff23d2727d7a1da1defa375ecae5e48f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","hash":"0919249dc71c8925f2120f6a4ca3f7a13dc8ba63","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-32x32.jpg","hash":"76314707f2981521c76cf3e4f514d7a797a9a64f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-270x270.jpg","hash":"089b98f0d9de4de6e003fde96e6f148a1d980527","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-300x300.jpg","hash":"33e642e82fc11a1bbe1fd41a576da7f8a7d2a371","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","hash":"cf05bd3b09703422f2a6465ba7c82e8191018b63","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/ipfs-300x122.png","hash":"b66bb25f2e52f94a37c9f74b7a06d9cb1dd2d6c4","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/ipfs-150x150.png","hash":"310c1a668cd23e19a446a80a2f0c93fb82df1a9a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/ipfs网络拓扑-150x150.png","hash":"d571c05faa8bc60f6c6f63ec77462285116e5fe7","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/ipfs网络拓扑-300x190.png","hash":"89f035b017d6a7604c32859a35013f7ae044e2c4","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/rasmus_lerdorf_php-150x150.png","hash":"85bc0d03c50891f2ce1d91f1ef7da806ba04da2a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/rasmus_lerdorf_php-300x131.png","hash":"cc0e535474146b5b277787254da28ddcb30523ea","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/准备动作.html","hash":"de04ab5c3a4b88bad21287e273422c17448c0d23","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件4-150x150.png","hash":"ae13cbbee09e52aa593c0fe343ec8503c7e1af7a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件4-300x57.png","hash":"aee518f4b6052179849198ad178ed9dfaed6d5ad","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件5-150x150.png","hash":"bdc7ac87f3a063a4f9f86fd453809bdb7703d178","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件5-300x54.png","hash":"334abec6618b8437fa72895e4f7c1a609545127c","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件6-300x128.png","hash":"7cc0ab0f43429cfef43fdd272ef819fd3cf5695c","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件6-150x150.png","hash":"5705681271290b8e53a7efb1c410b4557263858e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_1-150x150.png","hash":"2bf9208a3bcfe524574c5c86dc612dc7cf043302","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_1-300x60.png","hash":"45bd6718a5ed696d25f3b81190959009bb4b9fe8","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_2-150x150.png","hash":"bd92a33b490e82f73887c3f63e218ca71fda2a7b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_3-300x110.png","hash":"799b380091ed6a19714a41de5b00b0cb5c4531d5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_3-150x150.png","hash":"2720ee0f85c2f216169bb9f978af25144e2dfe26","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-150x150.png","hash":"4e22201f0eb08c5640b3bf38e028c4e51eebee63","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-300x137.png","hash":"ce0648060b27d6d84a83ee297f163fee6275f47a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-300x137.png","hash":"15343e2c60e0fadb60cb1616d96ec7c4eec2d844","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-150x150.png","hash":"ca91a296c2bee6e26bf2b7257da9d36dbfef8a01","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_2-300x67.png","hash":"858bab786750c6407001db8263a115b051f73de1","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/201312082105529075-150x150.gif","hash":"a7697fc29fe5e794c377c8ac9d8beb0c7944fad0","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/201312082105529075-285x300.gif","hash":"aa7b51a24a8df4419efa0d50093d6022dc0b4256","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","hash":"eaa4b4240df0f7de3084e5d4bb932fc42ad6e60e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","hash":"c3a90231aa5ee53ac4f74750db77330a00733360","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-300x36.png","hash":"465c2ca1bf198696ce02382195710e07b37196f4","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-150x150.png","hash":"54bc64893a076e57648ecfb05d20897ee3e9a56e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-1024x121.png","hash":"08f0a53898e60d451e4139bcd02e40c00b13275a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8.png","hash":"6adb7197745a75d2f837e067d95d2f60a2680104","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-150x150.png","hash":"b74ac1e4f888779f772705b500ed41a3eecd6a66","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-300x164.png","hash":"c27d91ff306a9ead5c8b006351754d16adeef407","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-150x150.png","hash":"80e41012b9b0fb4ed6fd36c7db2df11d94cf226d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-300x249.png","hash":"c9a8471f87c6225a7dab132b6de279f71433ed23","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-150x150.png","hash":"a66054b7690c04d2b82a7726a7ea82c970a37918","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-150x150.png","hash":"5611bd5099327f57c95da5f5dbafcbedbb79f3ed","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-300x159.png","hash":"5e26d1ba04b4b0e72fbb187391409133012d2ba1","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-150x150.png","hash":"3f3c4753f9a5437b5f2bc7cc38ac4aacb5e3c6ad","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-300x175.png","hash":"23a2a858f4bb1d3dddf905aacb35e5a39d58a4c4","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-150x150.png","hash":"1236307f4234ca0fba8d8523e61b8784b2b15f45","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-1024x105.png","hash":"3d13859a57603d86dca331a41b171674341474b2","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-300x31.png","hash":"5f6367538f3c54462cbf3eb7fec90305b05c6bce","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-150x150.png","hash":"cc509a8c2ec413a5df994be9e04339157139ee18","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-300x154.png","hash":"5adaedee58b900c6bd8a8fedc3d954195eb1aabc","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-150x150.png","hash":"50008ae739df4f4d4a501c64b797edfe3f7aee9e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-1024x141.png","hash":"a6c95ff3887b8ac20032de5c7ec6b257e17148b7","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-300x41.png","hash":"f41c537c39b397f203541dda0a62eb3030635b1e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E.png","hash":"3a544f490ce719ca090931657053576cdafaa8e3","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-150x150.png","hash":"e14aef308e7db87fff038aa2dbcf099808b245e3","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-1024x682.png","hash":"4bc1809b332d970fe08eccd2dfcda9ef07d2a691","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-300x200.png","hash":"6b5e963a88d25deae4b98fec86b892a5c62bb65a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9.png","hash":"4be2afb801653d00dd202156fcff312729dfe30f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-150x150.png","hash":"ec2dba325ba31f5388f757a091948a48447b324f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-150x150.png","hash":"081b75c1fdfc6a254208312de3e1f7aafeecefb4","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-300x190.png","hash":"55a1eb3fc65838eef4533ab1f4724f1c300be72f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-150x150.png","hash":"ab530b3799c9e4891580cc3e7673544db6cd74d5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-300x160.png","hash":"a2db96d3af45dea433115099a8d8b3923b664d16","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-150x150.png","hash":"7b0e02f11e1d510913cfaa1ef5e9beeeb06b965a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-300x210.png","hash":"c763fd43fc09362103c04e5d83e76db8072c208d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-150x150.png","hash":"d36734a838d2425f86fb14304c08a8e3bdb5103b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-300x149.png","hash":"1595fabdb0a2526d8674982a4c821f2b6259dbe4","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-150x150.png","hash":"10bac3ecc166ac5ff71c23e7b116942b4ac5be2d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-150x150.png","hash":"4cd7e56151d0bda8764cdf8a70b2c609e62bd21d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-300x200.png","hash":"11ff3bdb23786e41fa16f39d0638b1600d18a6d0","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-300x89.png","hash":"70fe9463f4e98c123758da40e180a7b88fb0bde5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-150x150.png","hash":"59befc2bf080f2897a9018dda5248fa805eaf9af","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-150x150.png","hash":"fa050b1ce99ec54f7842ce64084c9afd1c03583c","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-300x175.png","hash":"6748523d1e516e1b89e253cf8e49773a7bb6f59f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-150x150.png","hash":"b7fbe1b06b54966a9809350142ba44b06074c362","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-150x150.png","hash":"ed7eefe0f00f6b35b8bfc9ae1821f7332be5e64c","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-300x201.png","hash":"716ad2227831637ef6735881301ad9c9f62ba754","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug-150x150.png","hash":"d462b6f00e3d3f9d917c2b584bdb9b3594a73d87","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug-300x131.png","hash":"40c7e623ef9ae93739f9ed2a79c3fac4208fb6a9","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug_show-150x150.png","hash":"68d058ad6b3220800844db7348b1eb0529496023","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug_show-300x127.png","hash":"067a64611027412be382baf5a03c7e15e6dfbb83","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug_sql-150x150.png","hash":"b9c2adaff1bdd37b9ef2960fa536faf5c6b9bfcc","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug_sql-300x100.png","hash":"5414ce7b783141f20798def8c0db6700edadd357","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/clear_sql-150x150.png","hash":"24eb9b9e9c07ac2baec5361885f5d4a7f5dfbf4d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-150x150.jpg","hash":"591a047b91b69b04eb901ab06066be5b5b066092","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-180x180.jpg","hash":"f995c0ae57ad626b4d2e3d8053ec15e0367f3306","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-192x192.jpg","hash":"24e891e180168d89779bc12ec46fe6d1ed9615d5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-270x270.jpg","hash":"9bced12e07d490454c5f1f03e23a5a76b4d63e6e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-150x150.jpg","hash":"591a047b91b69b04eb901ab06066be5b5b066092","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-32x32.jpg","hash":"ce2bb1b3b14d6fd35dcebad62205c0b8b90ba919","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title.jpg","hash":"eb85eeffb5b64388fffeea6197d63cd125714530","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/clear_sql-300x109.png","hash":"1202a775383ffb17a6c9b24ff2acc52dced43d1e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title-300x300.jpg","hash":"2ca80262e1b5bddfc63845c804c4c3e2afc4e006","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-192x192.jpg","hash":"24e891e180168d89779bc12ec46fe6d1ed9615d5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-270x270.jpg","hash":"9bced12e07d490454c5f1f03e23a5a76b4d63e6e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-180x180.jpg","hash":"f995c0ae57ad626b4d2e3d8053ec15e0367f3306","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-300x300.jpg","hash":"2ca80262e1b5bddfc63845c804c4c3e2afc4e006","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cuihuan_title-1-150x150.jpg","hash":"fec96ab63f46fe41cde2a537bd6b64c3535ac8f6","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1.jpg","hash":"eb85eeffb5b64388fffeea6197d63cd125714530","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cuihuan_title-1.jpg","hash":"6dfa70c62e063d7b399c815c4bbf3611f7f806de","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cropped-cuihuan_title1-32x32.jpg","hash":"ce2bb1b3b14d6fd35dcebad62205c0b8b90ba919","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cuihuan_title-150x150.jpg","hash":"1cbb97f8f81e9afb27810c55287de33155461625","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/cuihuan_title.jpg","hash":"08a24a59e0ecba5681795f65d6d5c08d308736b7","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/del.png","hash":"7c533f8032d6613ac4f97ff04dcf5ea27d82381a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/sql_2-300x140.png","hash":"cac1323bfd3bbcd98dae4cd760da4095a8aab2f3","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/sql_2-150x150.png","hash":"746f36f7ab853ac8a06546b87be512b5127815c4","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/下载-150x150.png","hash":"92d3d6d1ec49b35a1a7f7d97197a5ea85c1bf9f2","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-150x150.png","hash":"72e99738f6650dc8a47c648b1acd2573287dac4b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/下载.png","hash":"b503e2877dcdfa7da34032c4906cfa3e45097496","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-300x141.png","hash":"222cecbb2c713d7305bb87959ee3b3d8e70b7355","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-150x150.png","hash":"72e99738f6650dc8a47c648b1acd2573287dac4b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-300x141.png","hash":"222cecbb2c713d7305bb87959ee3b3d8e70b7355","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","hash":"eaa4b4240df0f7de3084e5d4bb932fc42ad6e60e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","hash":"c3a90231aa5ee53ac4f74750db77330a00733360","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/3805545923-558fed41556e2_articlex.png","hash":"0f1c8449d711a6bd90490a5a2c1cd8c2813f0ec5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/3805545923-558fed41556e2_articlex-150x150.png","hash":"9df06937d9fd80bb7bf9b5e8a69698fdef1aa0d6","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-150x150.png","hash":"4e4b4ee0ff22151e0ab3d90b9ef9c3d988a050a8","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-300x162.png","hash":"5a45e84d68ddf968ec57d67a3cab0b3a573d38c4","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-150x150.png","hash":"52dfffe0996b40d41fb7c3c2710afae3c6beee5a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-300x160.png","hash":"432ce0a7a7a65d53b158cb7e09c0a3e3169d2dc5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-150x150.png","hash":"4dd598afdce5f52a70fdb8d3c9b57c591cb6a4b3","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-300x144.png","hash":"79c261720dcb8b12373491a286d65cad11efb16b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/列表-150x150.png","hash":"5c6dda19f189f997a89e167d60b652e468bc294b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/列表.png","hash":"14d1a6c2b49d49ff517329654c7d676778a0267e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/01/web_spider-150x150.png","hash":"8d54947e91b05a484ba1b0ef9208cce82ad5a46c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/01/web_spider-184x300.png","hash":"2bbc6985ec5d41e52859e05f5980916da6c8e56b","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/01/wise_web_spider-150x150.png","hash":"d9f394ba67200f7f3aeb210313feb68cb1f97e92","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/01/wise_web_spider-40x300.png","hash":"8566b7721a788bed9eadcb8c46ca0aefa46f484f","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-150x150.png","hash":"47f864dd2752440dd1f40518e8435e7f7aad3c6f","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-300x100.png","hash":"2305e6a8c02e67db5f3e42e949b1f3add999ab49","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-150x150.png","hash":"fbc13b21547991e0ef06eff7f0c19921cc8dbebd","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-150x150.png","hash":"21321ca006f354c63cd4aea3343f3270d4a481fb","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-300x111.png","hash":"beab7b5d49eb77c9d11e820e36fb34a9b585006c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-150x150.png","hash":"1eed9ed5ee7075babf3be1c09f6aae1e6a8300e9","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-300x140.png","hash":"9c3cad2c9b5b69e33164ac47ef2f53515f2cd29c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-150x150.png","hash":"ca6078e0c324f944a855614784dd7f54a56253fc","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-300x130.png","hash":"a5fffbc947c59d8da7ce51fe3c24306b60906a4b","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-150x150.png","hash":"3e1584f26740f257f2ad08d15ec8ef4022d1407d","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-150x150.png","hash":"85193875a2f0249bd0c2c4d577e4be7eaeb94b31","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-300x111.png","hash":"f6cab4cd6c88984657b49ad2b74a51e3ad0530ac","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-300x280.png","hash":"8b7b410df148d8255d7cf88e321a03250d2f4a2f","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-150x150.png","hash":"bf54b253a2fa03ff6038201ce7b586ce2e80a3d3","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-300x119.png","hash":"91d440a94fe8d8e16c44bc81ac5ad2f42c2d6aff","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png","hash":"f6be5ff9275a4ed0c698791973b8a5b35873cd2a","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-150x124.png","hash":"37391a7ca58a1c36c636b74cbf94ac203fd8905a","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828.png","hash":"25c9daf106210759ac0e2f67e5723a97a96b6201","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-300x108.png","hash":"aec25c75c40bb1202c5956857098192986108d4c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-150x150.png","hash":"3617a2ba8da8ff5995ef7efda9135aec758a4804","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-300x143.png","hash":"83705b65f3fbd3bd01d5ebfc523348bc47a144c1","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-150x150.png","hash":"65763c1830209691815658303f47339446ee28de","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-300x79.png","hash":"76de7fecba684e9a41b69a4916648110f593f91b","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-150x150.png","hash":"13d469b6618b972ca2c36113f079749508fe31d2","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-300x208.png","hash":"88f2886e93b6b775cd3d192e55ae0bb747c9b8af","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png","hash":"3c670e365e1a2d5e30a8e677e73b8bc159768175","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-150x150.png","hash":"3001188f4a1caa02dba36944ee7f0297de4ac6fe","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-300x188.png","hash":"f3c7a99375bbebc8cdcec56e92f31d86421a652e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png","hash":"0aa55339c864d1bdf5473eb4d43461a6c2520440","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-150x150.png","hash":"704f0a41cc0845bbc2b94cebcae2bbb47d93f1dc","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-300x149.png","hash":"e122553f76601e8300b810c6f1a941086d3d9a98","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/存储架构-150x150.jpg","hash":"5b83b98d8981ea88a3c35c70124dddb88ad8347d","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/存储架构-300x292.jpg","hash":"5533f019a017e02d9c7b5d5db633c3875a85c8fd","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/评测存储架构-2.pdf","hash":"728996a2af63d068594bad9a9f89605c82963831","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-150x150.png","hash":"9005b5966354f45013fea69aa67bb4a399a86eb8","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-150x150.png","hash":"43966ff7c53d6fbf61e5dbb627f435a78d71cb8c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png","hash":"9c4c53b5a63978943ad24be2f0352c7d413b2f37","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-150x150.png","hash":"02c65798349127c104bb960332b64fc0d4ef014c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-300x169.png","hash":"04fdcb4b0ed3b330f5cff1e91caa02c0531436d0","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-150x150.png","hash":"3918b5c9e7ab3b0c5ce5fe5b78ba99e3af0c7f95","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png","hash":"50ba5ade7c6f0d7450eb48b81b6502d80fa544da","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-150x150.png","hash":"c6999a8d149d758df6ca13017498db0b14c0562b","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png","hash":"a5db8ddf706ea0df1446ad036325a9926589bb3c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-300x133.png","hash":"986af154adbaa4ce01111db61d2eb65e62cf95f8","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-150x150.png","hash":"721ac403589ebf265d49733f355e21e65252ce64","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46.png","hash":"bd2914ddbb5393093a91ddd7243fef5b1aaeb25e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-150x150.png","hash":"017178bc3f9f9d61b5ba91c94d4e1e382e17d8e6","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png","hash":"d7f1990df5628ecb16cefbc27381b4c43535c1c7","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-150x150.png","hash":"a3eadd5b7204fe1f43e5751be2a52b7e608c4e18","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-150x150.png","hash":"83628f78f4d80cdcc0bbd6b53b3d12f278276b65","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-150x150.png","hash":"e803eaa284f6e7556cdf24970a7fab2bdbe77a1e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-300x248.png","hash":"4013902b973d95287f75f4439dd17f134194f077","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-150x150.png","hash":"766947c40c825c867aec4fc2df3ea15c91aa3683","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-150x150.png","hash":"c14e4d48a892ca17d4d60c2a15373a41cbd60f4f","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-300x243.png","hash":"0058dc45c40cdf48e27ead60cd4894df8ebbde9f","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-150x150.png","hash":"3a776485e2a239c2e59b2f28a70e801cd7a2119e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png","hash":"b510ae6215c17361b107a850c3c29f3d219456ca","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png","hash":"868db76440299244e6abbd3a78e40ccb083ce75d","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-150x150.png","hash":"b40aa97da201ac0f655adf560138d204e026b44c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-300x172.png","hash":"ba7e90d8611ce233618c92810ded10ad7c7dba16","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-150x150.png","hash":"35176a892cb012d0daa37768e95bb889dc257a58","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-300x164.png","hash":"d7d9b7b56765700eab069de32cb57a8e2d149dfb","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-150x150.png","hash":"7889fea6fbff2ee7dd7ace2e8c98b9179d7322eb","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-150x150.png","hash":"20019d45d4e708e9efd529afb231b57e036635a2","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png","hash":"00450486993112d7ca2ac75d1a25667c105317ef","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-150x150.png","hash":"3eb0df197722cad7e57f44c3140266bf7f3b529a","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-300x141.png","hash":"3957ab82af265eaffb4366a352a60188f4d54586","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-150x146.png","hash":"6beb34ee0d7ea7b5f9ea736c58838948d75bd3cc","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png","hash":"47d56c85580a971165820b2b6a423afd19e8cf5e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png","hash":"be6ed93682c882f9bc9df7628c57348e9c0b2af6","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-150x150.png","hash":"4b62e20c30df3b8c357bc48ec320f4ae28737f2d","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-150x150.png","hash":"06704a285bf94bd0a4c7d99e84192a97860609c8","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-150x150.png","hash":"5a62f36917afc78bac9e43b26ed9ec0a072e0b8a","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/dom-150x150.jpg","hash":"87f8a463f3996ce410b61a4df7cff74d6f100101","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-300x192.png","hash":"164b8a2905675abd97a66cbc1f6627b2212791d0","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/dom-271x300.jpg","hash":"d69c3acf280d72af32972564f54dfacd8a57a477","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/dom-分布-300x162.jpg","hash":"331deb12eaa2bf5df2cb806eb0a90f4350568d49","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/dom-分布-150x150.jpg","hash":"3142001e4f6b8afb60085e746b809a8909a6bfc4","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图-203x300.png","hash":"e7ccc2c192f1c508c623ebd270f5739775628325","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图-150x150.png","hash":"ccb1a4225af88755e01a25305b51b1d99f342b2a","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图.pdf","hash":"555d0c0699ddb79b7130e65cb2a66b23b566f9e7","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-300x185.png","hash":"24f9b28ac48bce811478d15736be7e9f0f3c4fc0","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-150x150.png","hash":"a9c2b3e2d8bb7527ff8566279c934af67c6dcc3c","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/68923650-0F29-47A7-A7D5-1EC4713D6A8D.png","hash":"ee6ae36d69df0f5b85d54da5206a349cfce8dded","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/BAABA0FC-B60C-4070-B247-F3B658B9F2B3.png","hash":"0edf0f4ca963babc0aad032c998405190a976b5f","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-150x150.png","hash":"3735b1402b0437ef108b7ff9b639ac0ea0ea0f83","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-300x251.png","hash":"372b96dfed35a072fa21c30fbfb40ff9ab5f6fb9","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_epoll.png","hash":"6afc3c0577721f969fcf03fceb50d1f31c61c29c","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_trend_top.png","hash":"d747f761238c2065c561960b61589f5230cf24ac","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_task2.png","hash":"ebaa8772bceb021450a68e3b30c0b9626ca9fd2e","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","hash":"292d0080353f417115dd29619adbd918976e322e","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/_1-e1446213477244-150x150.png","hash":"2bf9208a3bcfe524574c5c86dc612dc7cf043302","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","hash":"c0bfd564ad496a42713af4e6061194f3c2013de7","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/_1-e1446213477244-300x60.png","hash":"45bd6718a5ed696d25f3b81190959009bb4b9fe8","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-192x192.jpg","hash":"df63fd35ff23d2727d7a1da1defa375ecae5e48f","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-150x150.jpg","hash":"0919249dc71c8925f2120f6a4ca3f7a13dc8ba63","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-180x180.jpg","hash":"0479002b269c6d35809678196a47e4bd3147cdd0","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-270x270.jpg","hash":"089b98f0d9de4de6e003fde96e6f148a1d980527","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-32x32.jpg","hash":"76314707f2981521c76cf3e4f514d7a797a9a64f","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl-300x300.jpg","hash":"33e642e82fc11a1bbe1fd41a576da7f8a7d2a371","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/cropped-3cc6118ce3ecf41eade8a4bcd06a264f_xl.jpg","hash":"cf05bd3b09703422f2a6465ba7c82e8191018b63","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/ipfs-150x150.png","hash":"310c1a668cd23e19a446a80a2f0c93fb82df1a9a","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/ipfs-300x122.png","hash":"b66bb25f2e52f94a37c9f74b7a06d9cb1dd2d6c4","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/ipfs网络拓扑-150x150.png","hash":"d571c05faa8bc60f6c6f63ec77462285116e5fe7","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/ipfs网络拓扑-300x190.png","hash":"89f035b017d6a7604c32859a35013f7ae044e2c4","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/rasmus_lerdorf_php-150x150.png","hash":"85bc0d03c50891f2ce1d91f1ef7da806ba04da2a","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/rasmus_lerdorf_php-300x131.png","hash":"cc0e535474146b5b277787254da28ddcb30523ea","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/准备动作.html","hash":"de04ab5c3a4b88bad21287e273422c17448c0d23","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件4-150x150.png","hash":"ae13cbbee09e52aa593c0fe343ec8503c7e1af7a","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件4-300x57.png","hash":"aee518f4b6052179849198ad178ed9dfaed6d5ad","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件5-300x54.png","hash":"334abec6618b8437fa72895e4f7c1a609545127c","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件5-150x150.png","hash":"bdc7ac87f3a063a4f9f86fd453809bdb7703d178","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件6-150x150.png","hash":"5705681271290b8e53a7efb1c410b4557263858e","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件6-300x128.png","hash":"7cc0ab0f43429cfef43fdd272ef819fd3cf5695c","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_1-150x150.png","hash":"2bf9208a3bcfe524574c5c86dc612dc7cf043302","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_1-300x60.png","hash":"45bd6718a5ed696d25f3b81190959009bb4b9fe8","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_2-150x150.png","hash":"bd92a33b490e82f73887c3f63e218ca71fda2a7b","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_2-300x67.png","hash":"858bab786750c6407001db8263a115b051f73de1","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_3-150x150.png","hash":"2720ee0f85c2f216169bb9f978af25144e2dfe26","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_3-300x110.png","hash":"799b380091ed6a19714a41de5b00b0cb5c4531d5","modified":1489549260000},{"_id":"source/wp_content/uploads/2016/01/web_spider-150x150.png","hash":"8d54947e91b05a484ba1b0ef9208cce82ad5a46c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/01/web_spider-184x300.png","hash":"2bbc6985ec5d41e52859e05f5980916da6c8e56b","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/01/wise_web_spider-150x150.png","hash":"d9f394ba67200f7f3aeb210313feb68cb1f97e92","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/01/wise_web_spider-40x300.png","hash":"8566b7721a788bed9eadcb8c46ca0aefa46f484f","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-150x150.png","hash":"72e99738f6650dc8a47c648b1acd2573287dac4b","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-300x141.png","hash":"222cecbb2c713d7305bb87959ee3b3d8e70b7355","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-150x150.png","hash":"72e99738f6650dc8a47c648b1acd2573287dac4b","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-300x141.png","hash":"222cecbb2c713d7305bb87959ee3b3d8e70b7355","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","hash":"eaa4b4240df0f7de3084e5d4bb932fc42ad6e60e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","hash":"c3a90231aa5ee53ac4f74750db77330a00733360","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/3805545923-558fed41556e2_articlex-150x150.png","hash":"9df06937d9fd80bb7bf9b5e8a69698fdef1aa0d6","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/3805545923-558fed41556e2_articlex.png","hash":"0f1c8449d711a6bd90490a5a2c1cd8c2813f0ec5","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-150x150.png","hash":"4e4b4ee0ff22151e0ab3d90b9ef9c3d988a050a8","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-300x162.png","hash":"5a45e84d68ddf968ec57d67a3cab0b3a573d38c4","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-150x150.png","hash":"52dfffe0996b40d41fb7c3c2710afae3c6beee5a","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-300x160.png","hash":"432ce0a7a7a65d53b158cb7e09c0a3e3169d2dc5","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-150x150.png","hash":"4dd598afdce5f52a70fdb8d3c9b57c591cb6a4b3","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-300x144.png","hash":"79c261720dcb8b12373491a286d65cad11efb16b","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/列表-150x150.png","hash":"5c6dda19f189f997a89e167d60b652e468bc294b","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/列表.png","hash":"14d1a6c2b49d49ff517329654c7d676778a0267e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-300x137.png","hash":"ce0648060b27d6d84a83ee297f163fee6275f47a","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-150x150.png","hash":"4e22201f0eb08c5640b3bf38e028c4e51eebee63","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-150x150.png","hash":"ca91a296c2bee6e26bf2b7257da9d36dbfef8a01","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-300x137.png","hash":"15343e2c60e0fadb60cb1616d96ec7c4eec2d844","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/201312082105529075-285x300.gif","hash":"aa7b51a24a8df4419efa0d50093d6022dc0b4256","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/201312082105529075-150x150.gif","hash":"a7697fc29fe5e794c377c8ac9d8beb0c7944fad0","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-150x150.png","hash":"eaa4b4240df0f7de3084e5d4bb932fc42ad6e60e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-300x36.png","hash":"465c2ca1bf198696ce02382195710e07b37196f4","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-300x237.png","hash":"c3a90231aa5ee53ac4f74750db77330a00733360","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-150x150.png","hash":"54bc64893a076e57648ecfb05d20897ee3e9a56e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8-1024x121.png","hash":"08f0a53898e60d451e4139bcd02e40c00b13275a","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/2D8EE086-B20B-4059-8E1C-857067A4E6B8.png","hash":"6adb7197745a75d2f837e067d95d2f60a2680104","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-150x150.png","hash":"b74ac1e4f888779f772705b500ed41a3eecd6a66","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-300x164.png","hash":"c27d91ff306a9ead5c8b006351754d16adeef407","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-150x150.png","hash":"80e41012b9b0fb4ed6fd36c7db2df11d94cf226d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-300x249.png","hash":"c9a8471f87c6225a7dab132b6de279f71433ed23","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-150x150.png","hash":"a66054b7690c04d2b82a7726a7ea82c970a37918","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-150x150.png","hash":"5611bd5099327f57c95da5f5dbafcbedbb79f3ed","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-300x159.png","hash":"5e26d1ba04b4b0e72fbb187391409133012d2ba1","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-150x150.png","hash":"3f3c4753f9a5437b5f2bc7cc38ac4aacb5e3c6ad","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-300x175.png","hash":"23a2a858f4bb1d3dddf905aacb35e5a39d58a4c4","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-150x150.png","hash":"1236307f4234ca0fba8d8523e61b8784b2b15f45","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-1024x105.png","hash":"3d13859a57603d86dca331a41b171674341474b2","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0-300x31.png","hash":"5f6367538f3c54462cbf3eb7fec90305b05c6bce","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-150x150.png","hash":"cc509a8c2ec413a5df994be9e04339157139ee18","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-300x154.png","hash":"5adaedee58b900c6bd8a8fedc3d954195eb1aabc","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-1024x141.png","hash":"a6c95ff3887b8ac20032de5c7ec6b257e17148b7","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-300x41.png","hash":"f41c537c39b397f203541dda0a62eb3030635b1e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E-150x150.png","hash":"50008ae739df4f4d4a501c64b797edfe3f7aee9e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/6E201F61-D1C3-4EF2-85FF-20F22FF2A06E.png","hash":"3a544f490ce719ca090931657053576cdafaa8e3","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-150x150.png","hash":"e14aef308e7db87fff038aa2dbcf099808b245e3","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-300x200.png","hash":"6b5e963a88d25deae4b98fec86b892a5c62bb65a","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9-1024x682.png","hash":"4bc1809b332d970fe08eccd2dfcda9ef07d2a691","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/73304A30-9138-4D16-A4EE-30F4C5A5C0F9.png","hash":"4be2afb801653d00dd202156fcff312729dfe30f","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-150x150.png","hash":"ec2dba325ba31f5388f757a091948a48447b324f","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-150x150.png","hash":"081b75c1fdfc6a254208312de3e1f7aafeecefb4","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-300x190.png","hash":"55a1eb3fc65838eef4533ab1f4724f1c300be72f","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-150x150.png","hash":"ab530b3799c9e4891580cc3e7673544db6cd74d5","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-300x160.png","hash":"a2db96d3af45dea433115099a8d8b3923b664d16","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-300x210.png","hash":"c763fd43fc09362103c04e5d83e76db8072c208d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-150x150.png","hash":"7b0e02f11e1d510913cfaa1ef5e9beeeb06b965a","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-150x150.png","hash":"d36734a838d2425f86fb14304c08a8e3bdb5103b","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0-300x149.png","hash":"1595fabdb0a2526d8674982a4c821f2b6259dbe4","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-150x150.png","hash":"10bac3ecc166ac5ff71c23e7b116942b4ac5be2d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-300x200.png","hash":"11ff3bdb23786e41fa16f39d0638b1600d18a6d0","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-150x150.png","hash":"4cd7e56151d0bda8764cdf8a70b2c609e62bd21d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-300x89.png","hash":"70fe9463f4e98c123758da40e180a7b88fb0bde5","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-150x150.png","hash":"59befc2bf080f2897a9018dda5248fa805eaf9af","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-150x150.png","hash":"fa050b1ce99ec54f7842ce64084c9afd1c03583c","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-300x175.png","hash":"6748523d1e516e1b89e253cf8e49773a7bb6f59f","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-150x150.png","hash":"b7fbe1b06b54966a9809350142ba44b06074c362","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-150x150.png","hash":"ed7eefe0f00f6b35b8bfc9ae1821f7332be5e64c","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-300x201.png","hash":"716ad2227831637ef6735881301ad9c9f62ba754","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug-150x150.png","hash":"d462b6f00e3d3f9d917c2b584bdb9b3594a73d87","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug-300x131.png","hash":"40c7e623ef9ae93739f9ed2a79c3fac4208fb6a9","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug_show-300x127.png","hash":"067a64611027412be382baf5a03c7e15e6dfbb83","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug_show-150x150.png","hash":"68d058ad6b3220800844db7348b1eb0529496023","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug_sql-150x150.png","hash":"b9c2adaff1bdd37b9ef2960fa536faf5c6b9bfcc","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug_sql-300x100.png","hash":"5414ce7b783141f20798def8c0db6700edadd357","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/clear_sql-300x109.png","hash":"1202a775383ffb17a6c9b24ff2acc52dced43d1e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/clear_sql-150x150.png","hash":"24eb9b9e9c07ac2baec5361885f5d4a7f5dfbf4d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-180x180.jpg","hash":"f995c0ae57ad626b4d2e3d8053ec15e0367f3306","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-150x150.jpg","hash":"591a047b91b69b04eb901ab06066be5b5b066092","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-192x192.jpg","hash":"24e891e180168d89779bc12ec46fe6d1ed9615d5","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-270x270.jpg","hash":"9bced12e07d490454c5f1f03e23a5a76b4d63e6e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-300x300.jpg","hash":"2ca80262e1b5bddfc63845c804c4c3e2afc4e006","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title-32x32.jpg","hash":"ce2bb1b3b14d6fd35dcebad62205c0b8b90ba919","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-150x150.jpg","hash":"591a047b91b69b04eb901ab06066be5b5b066092","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-180x180.jpg","hash":"f995c0ae57ad626b4d2e3d8053ec15e0367f3306","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title.jpg","hash":"eb85eeffb5b64388fffeea6197d63cd125714530","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-192x192.jpg","hash":"24e891e180168d89779bc12ec46fe6d1ed9615d5","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-270x270.jpg","hash":"9bced12e07d490454c5f1f03e23a5a76b4d63e6e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-32x32.jpg","hash":"ce2bb1b3b14d6fd35dcebad62205c0b8b90ba919","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cuihuan_title-1-150x150.jpg","hash":"fec96ab63f46fe41cde2a537bd6b64c3535ac8f6","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1.jpg","hash":"eb85eeffb5b64388fffeea6197d63cd125714530","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cuihuan_title-1.jpg","hash":"6dfa70c62e063d7b399c815c4bbf3611f7f806de","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cropped-cuihuan_title1-300x300.jpg","hash":"2ca80262e1b5bddfc63845c804c4c3e2afc4e006","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cuihuan_title-150x150.jpg","hash":"1cbb97f8f81e9afb27810c55287de33155461625","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/del.png","hash":"7c533f8032d6613ac4f97ff04dcf5ea27d82381a","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/cuihuan_title.jpg","hash":"08a24a59e0ecba5681795f65d6d5c08d308736b7","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/sql_2-300x140.png","hash":"cac1323bfd3bbcd98dae4cd760da4095a8aab2f3","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/sql_2-150x150.png","hash":"746f36f7ab853ac8a06546b87be512b5127815c4","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/下载-150x150.png","hash":"92d3d6d1ec49b35a1a7f7d97197a5ea85c1bf9f2","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-300x208.png","hash":"88f2886e93b6b775cd3d192e55ae0bb747c9b8af","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66-150x150.png","hash":"13d469b6618b972ca2c36113f079749508fe31d2","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/下载.png","hash":"b503e2877dcdfa7da34032c4906cfa3e45097496","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png","hash":"3c670e365e1a2d5e30a8e677e73b8bc159768175","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-150x150.png","hash":"3001188f4a1caa02dba36944ee7f0297de4ac6fe","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37-300x188.png","hash":"f3c7a99375bbebc8cdcec56e92f31d86421a652e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png","hash":"0aa55339c864d1bdf5473eb4d43461a6c2520440","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-150x150.png","hash":"704f0a41cc0845bbc2b94cebcae2bbb47d93f1dc","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-300x149.png","hash":"e122553f76601e8300b810c6f1a941086d3d9a98","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/存储架构-150x150.jpg","hash":"5b83b98d8981ea88a3c35c70124dddb88ad8347d","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/存储架构-300x292.jpg","hash":"5533f019a017e02d9c7b5d5db633c3875a85c8fd","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-150x150.png","hash":"47f864dd2752440dd1f40518e8435e7f7aad3c6f","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/评测存储架构-2.pdf","hash":"728996a2af63d068594bad9a9f89605c82963831","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-300x100.png","hash":"2305e6a8c02e67db5f3e42e949b1f3add999ab49","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-150x150.png","hash":"fbc13b21547991e0ef06eff7f0c19921cc8dbebd","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-150x150.png","hash":"21321ca006f354c63cd4aea3343f3270d4a481fb","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-300x111.png","hash":"beab7b5d49eb77c9d11e820e36fb34a9b585006c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-150x150.png","hash":"1eed9ed5ee7075babf3be1c09f6aae1e6a8300e9","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-300x140.png","hash":"9c3cad2c9b5b69e33164ac47ef2f53515f2cd29c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-150x150.png","hash":"ca6078e0c324f944a855614784dd7f54a56253fc","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-300x130.png","hash":"a5fffbc947c59d8da7ce51fe3c24306b60906a4b","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-150x150.png","hash":"3e1584f26740f257f2ad08d15ec8ef4022d1407d","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672-300x111.png","hash":"f6cab4cd6c88984657b49ad2b74a51e3ad0530ac","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-150x150.png","hash":"85193875a2f0249bd0c2c4d577e4be7eaeb94b31","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA-300x280.png","hash":"8b7b410df148d8255d7cf88e321a03250d2f4a2f","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png","hash":"f6be5ff9275a4ed0c698791973b8a5b35873cd2a","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-150x150.png","hash":"bf54b253a2fa03ff6038201ce7b586ce2e80a3d3","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-300x119.png","hash":"91d440a94fe8d8e16c44bc81ac5ad2f42c2d6aff","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-150x124.png","hash":"37391a7ca58a1c36c636b74cbf94ac203fd8905a","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828-300x108.png","hash":"aec25c75c40bb1202c5956857098192986108d4c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/952A496D-7DE8-4800-A2BE-43491EDA5828.png","hash":"25c9daf106210759ac0e2f67e5723a97a96b6201","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-150x150.png","hash":"3617a2ba8da8ff5995ef7efda9135aec758a4804","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-300x143.png","hash":"83705b65f3fbd3bd01d5ebfc523348bc47a144c1","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-150x150.png","hash":"65763c1830209691815658303f47339446ee28de","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-300x79.png","hash":"76de7fecba684e9a41b69a4916648110f593f91b","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-150x150.png","hash":"9005b5966354f45013fea69aa67bb4a399a86eb8","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-150x150.png","hash":"43966ff7c53d6fbf61e5dbb627f435a78d71cb8c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png","hash":"9c4c53b5a63978943ad24be2f0352c7d413b2f37","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-150x150.png","hash":"02c65798349127c104bb960332b64fc0d4ef014c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-300x169.png","hash":"04fdcb4b0ed3b330f5cff1e91caa02c0531436d0","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-150x150.png","hash":"3918b5c9e7ab3b0c5ce5fe5b78ba99e3af0c7f95","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png","hash":"50ba5ade7c6f0d7450eb48b81b6502d80fa544da","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-150x150.png","hash":"c6999a8d149d758df6ca13017498db0b14c0562b","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png","hash":"a5db8ddf706ea0df1446ad036325a9926589bb3c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-150x150.png","hash":"721ac403589ebf265d49733f355e21e65252ce64","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46.png","hash":"bd2914ddbb5393093a91ddd7243fef5b1aaeb25e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-300x133.png","hash":"986af154adbaa4ce01111db61d2eb65e62cf95f8","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-150x150.png","hash":"017178bc3f9f9d61b5ba91c94d4e1e382e17d8e6","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png","hash":"d7f1990df5628ecb16cefbc27381b4c43535c1c7","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-150x150.png","hash":"a3eadd5b7204fe1f43e5751be2a52b7e608c4e18","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-150x150.png","hash":"83628f78f4d80cdcc0bbd6b53b3d12f278276b65","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-150x150.png","hash":"e803eaa284f6e7556cdf24970a7fab2bdbe77a1e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-300x248.png","hash":"4013902b973d95287f75f4439dd17f134194f077","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-150x150.png","hash":"766947c40c825c867aec4fc2df3ea15c91aa3683","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-150x150.png","hash":"c14e4d48a892ca17d4d60c2a15373a41cbd60f4f","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169-300x243.png","hash":"0058dc45c40cdf48e27ead60cd4894df8ebbde9f","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png","hash":"b510ae6215c17361b107a850c3c29f3d219456ca","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png","hash":"868db76440299244e6abbd3a78e40ccb083ce75d","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-150x150.png","hash":"3a776485e2a239c2e59b2f28a70e801cd7a2119e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-150x150.png","hash":"b40aa97da201ac0f655adf560138d204e026b44c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-300x172.png","hash":"ba7e90d8611ce233618c92810ded10ad7c7dba16","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-150x150.png","hash":"35176a892cb012d0daa37768e95bb889dc257a58","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-300x164.png","hash":"d7d9b7b56765700eab069de32cb57a8e2d149dfb","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-150x150.png","hash":"7889fea6fbff2ee7dd7ace2e8c98b9179d7322eb","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png","hash":"00450486993112d7ca2ac75d1a25667c105317ef","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-150x150.png","hash":"20019d45d4e708e9efd529afb231b57e036635a2","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-150x150.png","hash":"3eb0df197722cad7e57f44c3140266bf7f3b529a","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-300x141.png","hash":"3957ab82af265eaffb4366a352a60188f4d54586","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-150x146.png","hash":"6beb34ee0d7ea7b5f9ea736c58838948d75bd3cc","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png","hash":"47d56c85580a971165820b2b6a423afd19e8cf5e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png","hash":"be6ed93682c882f9bc9df7628c57348e9c0b2af6","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-150x150.png","hash":"4b62e20c30df3b8c357bc48ec320f4ae28737f2d","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-150x150.png","hash":"06704a285bf94bd0a4c7d99e84192a97860609c8","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-150x150.png","hash":"5a62f36917afc78bac9e43b26ed9ec0a072e0b8a","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-300x192.png","hash":"164b8a2905675abd97a66cbc1f6627b2212791d0","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/dom-150x150.jpg","hash":"87f8a463f3996ce410b61a4df7cff74d6f100101","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/dom-271x300.jpg","hash":"d69c3acf280d72af32972564f54dfacd8a57a477","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/dom-分布-300x162.jpg","hash":"331deb12eaa2bf5df2cb806eb0a90f4350568d49","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/dom-分布-150x150.jpg","hash":"3142001e4f6b8afb60085e746b809a8909a6bfc4","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图-203x300.png","hash":"e7ccc2c192f1c508c623ebd270f5739775628325","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图-150x150.png","hash":"ccb1a4225af88755e01a25305b51b1d99f342b2a","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图.pdf","hash":"555d0c0699ddb79b7130e65cb2a66b23b566f9e7","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-150x150.png","hash":"a9c2b3e2d8bb7527ff8566279c934af67c6dcc3c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-300x185.png","hash":"24f9b28ac48bce811478d15736be7e9f0f3c4fc0","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-300x251.png","hash":"372b96dfed35a072fa21c30fbfb40ff9ab5f6fb9","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-150x150.png","hash":"3735b1402b0437ef108b7ff9b639ac0ea0ea0f83","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/analytics/busuanzi-counter.swig","hash":"4fcbf57c4918528ab51d3d042cff92cf5aefb599","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/analytics/google-analytics.swig","hash":"30a23fa7e816496fdec0e932aa42e2d13098a9c2","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/analytics/facebook-sdk.swig","hash":"394d008e5e94575280407ad8a1607a028026cbc3","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/comments/disqus.swig","hash":"fb1d04ede838b52ca7541973f86c3810f1ad396e","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/comments/duoshuo.swig","hash":"a356b2185d40914447fde817eb3d358ab6b3e4c3","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/comments/gentie.swig","hash":"03592d1d731592103a41ebb87437fe4b0a4c78ca","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/comments/youyan.swig","hash":"ea8078fa9e10be2bb042749d8b6a97adc38f914c","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"0dfb4b3ba3180d7285e66f270e1d3fa0f132c3d2","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1489549261000},{"_id":"themes/next/layout/_scripts/third-party/comments/hypercomments.swig","hash":"3e8dc5c6c912628a37e3b5f886bec7b2e5ed14ea","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"10994990d6e0b4d965a728a22cf7f6ee29cae9f6","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"b49efc66bd055a2d0be7deabfcb02ee72a9a28c8","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"711c8830886619d4f4a0598b0cde5499dce50c62","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1489549261000},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"2186be20e317505cd31886f1291429cc21f76703","modified":1489549261000},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"54c90cf7bdbf5c596179d8dae6e671bad1292662","modified":1489549261000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5304f99581da3a31de3ecec959b7adf9002fde83","modified":1489549261000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1489549261000},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"013619c472c7e4b08311c464fcbe9fcf5edde603","modified":1489549261000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"64f5d56c08d74a338813df1265580ca0cbf0190b","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"c2d079788d6fc2e9a191ccdae94e50d55bf849dc","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"b0dcca862cd0cc6e732e33d975b476d744911742","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"fda14bc35be2e1b332809b55b3d07155a833dbf4","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"9a5581a770af8964064fef7afd3e16963e45547f","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"ff9f163bb05c0709577040a875924d36c9ab99d6","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"1408209dfb9a22a0982a30bdbd14842c2b53f264","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"dcf9fe43b2ef78b923118ba39efedb38760e76b1","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"9b63bd8effc7cf4b96acdea4d73add7df934a222","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"69ecd6c97e7cdfd822ac8102b45ad0ede85050db","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"82bbaa6322764779a1ac2e2c8390ce901c7972e2","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"a0e2030a606c934fb2c5c7373aaae04a1caac4c5","modified":1489549261000},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"9ccee9189c910b8a264802d7b2ec305d12dedcd0","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.css","hash":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.pack.js","hash":"53360764b429c212f424399384417ccc233bb3be","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/jquery.fancybox.js","hash":"1cf3d47b5ccb7cb6e9019c64f2a88d03a64853e4","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1489549261000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.min.js","hash":"2cae0f5a6c5d6f3cb993015e6863f9483fc4de18","modified":1489549261000},{"_id":"themes/next/source/lib/fastclick/lib/fastclick.js","hash":"06cef196733a710e77ad7e386ced6963f092dc55","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"4eda182cbcc046dbf449aef97c02c230cf80a494","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"fb5b49426dee7f1508500e698d1b3c6b04c8fcce","modified":1489549261000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1489549261000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/10/_1-e1446213477244.png","hash":"0489dc53e6103658e8b6cb79c2c9f9ebb518fbb9","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/ipfs.png","hash":"9d77c1ef047f496c7bb5c73fa637c060af23208b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_1.png","hash":"9031632871c05414d52f86cdc37a83cd5e1d2c51","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/201312082105529075.gif","hash":"399c08d4d62b8fc05cef78866561a6110815c69a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-300x249.png","hash":"60818b76fc2954182607d061b65d9929a6e38f5d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0.png","hash":"fd665fdb5eca8bcd4f74156afc4c3ef6f40a7dee","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-300x182.png","hash":"e2c792ce3b9c9fcf2c6845ce7539da7137b8e945","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png","hash":"bd2ec55dd559b174e032a61b055b67b6355cb6fa","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-300x210.png","hash":"f60272b43043dcff3a344de521dc2d7fd0607779","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-1024x682.png","hash":"40fdd07cb2b56c206bed2bdc92bdd5940900f8b8","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75.png","hash":"72e3d012a6467bf3d61b3dd0882357c39bb8b7fa","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-300x195.png","hash":"1fb61ea8cd2e872c4308d098954863f157fb9b09","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B.png","hash":"c7b51ace0d73568dd675c953aa40ea4ecd118d69","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/01/wise_web_spider-138x1024.png","hash":"03ca65fbd51d659ccf60aad2c91c4c845eee3602","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-300x285.png","hash":"d5a17cd2a7cce94fafc586d2c125137f82d12444","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png","hash":"5487040e50b68be76d32381b0c16fba00b7e641e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-1024x379.png","hash":"5fecd72a4eaeb92acedc21dec391e80326ae2877","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672.png","hash":"f2cc4bf5b06d9e81474514acc987b7fb6e031565","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png","hash":"6e764ee6d557f66e9604b316bfa130729886bd3c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/存储架构-1024x996.jpg","hash":"89e6f96310c3a25da0cb4c1c2cd52619dcc491c3","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-222x300.png","hash":"36d662858e5b81fc28b6c3096f70b8819d9a412b","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png","hash":"b3f2d1d033d1bd7f87d2f2d9a28d2d26070712a5","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png","hash":"5de9155b14f73ee81a501a0349075fedc13f3ce1","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png","hash":"9cba98de4e9dc3f54033e5cf8c725e8d323e8943","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-1024x454.png","hash":"a9cd6030aef7cbd82b015b30f47a43458fe9ee76","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-1024x136.png","hash":"427895a78f26c9c3e320f2f543d7387b4d214489","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png","hash":"9cf0d142215de2335f183cd4e743d0d0ff2eea3e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-300x215.png","hash":"e19a2555ae3fcf802558ffe97390bc44d390b059","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-300x144.png","hash":"a7c447b45883714188d1dd645eecf0cfe5489277","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png","hash":"f6146905cbb6cab3de215f99af8befa8200f6d8c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-208x300.png","hash":"ce78e2e9c7d296762605dc82cecf4ca82b27d1a5","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-300x300.png","hash":"7c3075bcc732891ed9b75e6f04bbd2f7547f71de","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-263x300.png","hash":"737640d252b953c942dbaf4f2ebe0980bfc442c2","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png","hash":"e46243b7625016f677ef8db63aee7ec6679be525","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/dom-分布-1024x552.jpg","hash":"7d86a09b14145db129069dfb9a04c92807faede2","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/dom-926x1024.jpg","hash":"c117c7504bc309a18909cb8424a186348c2c7065","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_bit_reload.png","hash":"8cac911e9931bda1bbcd707d16954e1cb58aa48e","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_trend_all.png","hash":"90739baddac74e776b3be87d04238ee173df6974","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_conf_reload.png","hash":"4730f943269ebddd5b57122b636e40fe14f8a617","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/_1-e1446213477244.png","hash":"0489dc53e6103658e8b6cb79c2c9f9ebb518fbb9","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/ipfs.png","hash":"9d77c1ef047f496c7bb5c73fa637c060af23208b","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_1.png","hash":"9031632871c05414d52f86cdc37a83cd5e1d2c51","modified":1489549260000},{"_id":"source/wp_content/uploads/2016/01/wise_web_spider-138x1024.png","hash":"03ca65fbd51d659ccf60aad2c91c4c845eee3602","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B.png","hash":"c7b51ace0d73568dd675c953aa40ea4ecd118d69","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/201312082105529075.gif","hash":"399c08d4d62b8fc05cef78866561a6110815c69a","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-300x249.png","hash":"60818b76fc2954182607d061b65d9929a6e38f5d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/5D07512E-4251-4671-8EBD-C6F6EF4F9CC0.png","hash":"fd665fdb5eca8bcd4f74156afc4c3ef6f40a7dee","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-300x182.png","hash":"e2c792ce3b9c9fcf2c6845ce7539da7137b8e945","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png","hash":"bd2ec55dd559b174e032a61b055b67b6355cb6fa","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-300x210.png","hash":"f60272b43043dcff3a344de521dc2d7fd0607779","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75.png","hash":"72e3d012a6467bf3d61b3dd0882357c39bb8b7fa","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/C16CDC26-1F27-4D61-AEBF-242072625D75-1024x682.png","hash":"40fdd07cb2b56c206bed2bdc92bdd5940900f8b8","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-300x195.png","hash":"1fb61ea8cd2e872c4308d098954863f157fb9b09","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/存储架构-1024x996.jpg","hash":"89e6f96310c3a25da0cb4c1c2cd52619dcc491c3","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346-300x285.png","hash":"d5a17cd2a7cce94fafc586d2c125137f82d12444","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png","hash":"5487040e50b68be76d32381b0c16fba00b7e641e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56-1024x379.png","hash":"5fecd72a4eaeb92acedc21dec391e80326ae2877","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/7266F793-4ED9-4DA9-AFD4-1527177CE672.png","hash":"f2cc4bf5b06d9e81474514acc987b7fb6e031565","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png","hash":"6e764ee6d557f66e9604b316bfa130729886bd3c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-222x300.png","hash":"36d662858e5b81fc28b6c3096f70b8819d9a412b","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png","hash":"b3f2d1d033d1bd7f87d2f2d9a28d2d26070712a5","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png","hash":"5de9155b14f73ee81a501a0349075fedc13f3ce1","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png","hash":"9cba98de4e9dc3f54033e5cf8c725e8d323e8943","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/541E920B-8C17-4108-8DBE-9F201FDEAB46-1024x454.png","hash":"a9cd6030aef7cbd82b015b30f47a43458fe9ee76","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-1024x136.png","hash":"427895a78f26c9c3e320f2f543d7387b4d214489","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png","hash":"9cf0d142215de2335f183cd4e743d0d0ff2eea3e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-300x215.png","hash":"e19a2555ae3fcf802558ffe97390bc44d390b059","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-300x144.png","hash":"a7c447b45883714188d1dd645eecf0cfe5489277","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png","hash":"f6146905cbb6cab3de215f99af8befa8200f6d8c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-208x300.png","hash":"ce78e2e9c7d296762605dc82cecf4ca82b27d1a5","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC-300x300.png","hash":"7c3075bcc732891ed9b75e6f04bbd2f7547f71de","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-263x300.png","hash":"737640d252b953c942dbaf4f2ebe0980bfc442c2","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png","hash":"e46243b7625016f677ef8db63aee7ec6679be525","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/dom-926x1024.jpg","hash":"c117c7504bc309a18909cb8424a186348c2c7065","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/dom-分布-1024x552.jpg","hash":"7d86a09b14145db129069dfb9a04c92807faede2","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1489549261000},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/10/ipfs网络拓扑.png","hash":"520c2b9ec1d3b978f0acae5266c361581fb63dd2","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/rasmus_lerdorf_php.png","hash":"cd8047f4c2aa6b3502a77749b12cc008605930d8","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png","hash":"9d2e6d418e4bba6d4ccb158ca1fe526b8947c5fd","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598.png","hash":"8e4687b8f53cbe9d6354cc89cd066302b569e324","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-1024x544.png","hash":"ff65507f90352ab33dba715e0399678daf53c420","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-1024x598.png","hash":"7a2746b43b1b2f0798e4943edc4e6b1389cdfcdc","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png","hash":"fab656299f875d165ca4ad21adb056d0b2c1ac3f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png","hash":"d3b988f228cbaaa5e9fa7498a36ad8cfbdf5ca3b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/clear_sql-1024x372.png","hash":"0ae2fee2ffa14987d331cf3ccbf4b56edea47aa9","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-1024x553.png","hash":"0b15a7d75ca59a89209272a0ebebc737ffb3afb6","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png","hash":"c05c461f654d4470a6e6c9f5f40912d469741e7f","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png","hash":"c5bd51823f26d682b2c2a94daf898e21a52d405e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-1024x407.png","hash":"be25a9fb1d4de8efec2df98244b8275b9a964562","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-1024x271.png","hash":"b04df454398fefb3fb407112bfa6d404f14d0bfa","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png","hash":"e373221823235d0fd4fcd4d87ee82afe53987523","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-1024x286.png","hash":"cd9912f487528fe920ddc63d245e6a7f8bf40646","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-1024x157.png","hash":"bf0df1b0f9f09c6c057b8a66a225a674876bfae5","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC.png","hash":"6047df89d824d11e5b47dc2f4eb26b7dee94b46e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/dom.jpg","hash":"8dce0abe32a3ef9287d2490c54e7b02d414af124","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/dom-分布.jpg","hash":"c3cc39b5168b7bad8aa22229dd4439d04b32ea06","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/rasmus_lerdorf_php.png","hash":"cd8047f4c2aa6b3502a77749b12cc008605930d8","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/ipfs网络拓扑.png","hash":"520c2b9ec1d3b978f0acae5266c361581fb63dd2","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/12/61C2AF22-5EA9-4D55-B78D-DCE75FE81A6B-1024x553.png","hash":"0b15a7d75ca59a89209272a0ebebc737ffb3afb6","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png","hash":"9d2e6d418e4bba6d4ccb158ca1fe526b8947c5fd","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598.png","hash":"8e4687b8f53cbe9d6354cc89cd066302b569e324","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878-1024x544.png","hash":"ff65507f90352ab33dba715e0399678daf53c420","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316-1024x598.png","hash":"7a2746b43b1b2f0798e4943edc4e6b1389cdfcdc","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png","hash":"fab656299f875d165ca4ad21adb056d0b2c1ac3f","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png","hash":"d3b988f228cbaaa5e9fa7498a36ad8cfbdf5ca3b","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/clear_sql-1024x372.png","hash":"0ae2fee2ffa14987d331cf3ccbf4b56edea47aa9","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png","hash":"e373221823235d0fd4fcd4d87ee82afe53987523","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png","hash":"c05c461f654d4470a6e6c9f5f40912d469741e7f","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png","hash":"c5bd51823f26d682b2c2a94daf898e21a52d405e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4-1024x407.png","hash":"be25a9fb1d4de8efec2df98244b8275b9a964562","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF-1024x271.png","hash":"b04df454398fefb3fb407112bfa6d404f14d0bfa","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-1024x286.png","hash":"cd9912f487528fe920ddc63d245e6a7f8bf40646","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-1024x157.png","hash":"bf0df1b0f9f09c6c057b8a66a225a674876bfae5","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F982885B-21E2-41C2-A217-5B5BF27336CC.png","hash":"6047df89d824d11e5b47dc2f4eb26b7dee94b46e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/dom-分布.jpg","hash":"c3cc39b5168b7bad8aa22229dd4439d04b32ea06","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/dom.jpg","hash":"8dce0abe32a3ef9287d2490c54e7b02d414af124","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"8994ffcce84deac0471532f270f97c44fea54dc0","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"ae1ca14e51de67b07dba8f61ec79ee0e2e344574","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"4b7f81e1006e7acee3d1c840ccba155239f830cc","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"c890ce7fe933abad7baf39764a01894924854e92","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"7778920dd105fa4de3a7ab206eeba30b1a7bac45","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"2039590632bba3943c39319d80ef630af7928185","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"a82afbb72d83ee394aedc7b37ac0008a9823b4f4","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"2e7ec9aaa3293941106b1bdd09055246aa3c3dc6","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"920343e41c124221a17f050bbb989494d44f7a24","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"c44f6a553ec7ea5508f2054a13be33a62a15d3a9","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"7690b9596ec3a49befbe529a5a2649abec0faf76","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"234facd038f144bd0fe09a31ed1357c5d74c517f","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"2d3abbc85b979a648e0e579e45f16a6eba49d1e7","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"b25132fe6a7ad67059a2c3afc60feabb479bdd75","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"8fae54591877a73dff0b29b2be2e8935e3c63575","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"fdfadbb4483043c7e0afd541ee9712389e633517","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"e792c8dc41561c96d128e9b421187f1c3dc978a0","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"7f1aab694caf603809e33cff82beea84cd0128fd","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"c6dab7661a6b8c678b21b7eb273cef7100f970f6","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"bfd806d0a9f21446a22df82ac02e37d0075cc3b5","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"963105a531403d7aad6d9e5e23e3bfabb8ec065a","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"b8969e1654eec89a0fd10d88b337fee9cb03cd44","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"74d0ba86f698165d13402670382a822c8736a556","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"eba491ae624b4c843c8be4c94a044085dad4ba0f","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/third-party/baidushare.styl","hash":"93b08815c4d17e2b96fef8530ec1f1064dede6ef","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"b03f891883446f3a5548b7cc90d29c77e62f1053","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"3eb73cee103b810fa56901577ecb9c9bb1793cff","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/third-party/gentie.styl","hash":"586a3ec0f1015e7207cd6a2474362e068c341744","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/third-party/jiathis.styl","hash":"327b5f63d55ec26f7663185c1a778440588d9803","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"637c6b32c58ecf40041be6e911471cd82671919b","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/third-party/duoshuo.styl","hash":"2340dd9b3202c61d73cc708b790fac5adddbfc7f","modified":1489549261000},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"42348219db93a85d2ee23cb06cebd4d8ab121726","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"8b8e8cbce98a9296c8fd77f512ae85d945f65d40","modified":1489549261000},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"8b8e8cbce98a9296c8fd77f512ae85d945f65d40","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-buttons.js","hash":"91e41741c2e93f732c82aaacec4cfc6e3f3ec876","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-media.js","hash":"3bdf69ed2469e4fb57f5a95f17300eef891ff90d","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.js","hash":"53e194f4a72e649c04fb586dd57762b8c022800b","modified":1489549261000},{"_id":"themes/next/source/lib/fancybox/source/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/10/插件4-1024x195.png","hash":"08e3371f06338488177050939adfcea9be6526c5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件5-1024x183.png","hash":"1c0519efb0ac1b4cc36d498fc7b5075f420b3928","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件6.png","hash":"3b630e3cf9d55b6688bbced33642447a037c8fed","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_2-1024x229.png","hash":"0291a51981fda37e32d359fd014940b50cd2be5f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838.png","hash":"951630e01a882922559674ebf6cba054f0ee3202","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-1024x468.png","hash":"e39497ba892c721dac8e129a91a66157e5e38a4c","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","hash":"20a4ec2d823af47c6c509517b255b395fb03c294","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316.png","hash":"207829f164abe84888d6f4ee6518840e21c46c46","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-1024x526.png","hash":"cd2fb66cf32afde7cd2ea0e1ab76e2a14a677d92","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF.png","hash":"fd2804c0dcda8cfe1d02bf8bc967d3e8b327d459","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png","hash":"33c3bc55f17991b2d97ece0639ec4aa20e943565","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32.png","hash":"8de877d890aaa96133a59b0dce77e825f7bb0ef5","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png","hash":"8adbcc1f510cd53974c09eecb99cf1abef0d4113","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png","hash":"9a742a28c787ff7c458d862acd0bbc6557fe6a7d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug_sql.png","hash":"ae8aa5d1eee39fb2f64e0ee7f6ba2df7c43eda1a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug_sql-1024x341.png","hash":"49449d492a0f41c7e8bfa49af5babfdd88974ec8","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","hash":"20a4ec2d823af47c6c509517b255b395fb03c294","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png","hash":"6d3cd17f90223e4cb9449240f4d0ac4f85a17895","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png","hash":"25a696de8010dcaa47f32cb31b2ecf0b4a45778e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-1024x340.png","hash":"4fcc10d83d82976758892331d908265f75eaba43","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-1024x442.png","hash":"1f69fd4da381a54347011a2fceb0c50b5846e339","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-1024x508.png","hash":"41707b6128542e849600fffdbe4bedaeb22f2f19","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-1024x576.png","hash":"063104c1be01be6c52ce8baf8453e436f6b914de","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-1024x283.png","hash":"1f825f5138820f0a3fdd91bcd54e60f9e525b00c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-1024x656.png","hash":"7a991ded56afeff4f9b228d4c4ed77d0cb25f2a8","modified":1489549260000},{"_id":"source/wp_content/new/nginx1/nginx_compare.png","hash":"387d14aeba6b3277b579ca06f50bb3c62f323a66","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6.png","hash":"fdd9fdf0e3135dd741a56eab80697e5835b63753","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件4-1024x195.png","hash":"08e3371f06338488177050939adfcea9be6526c5","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件5-1024x183.png","hash":"1c0519efb0ac1b4cc36d498fc7b5075f420b3928","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件6.png","hash":"3b630e3cf9d55b6688bbced33642447a037c8fed","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_2-1024x229.png","hash":"0291a51981fda37e32d359fd014940b50cd2be5f","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","hash":"20a4ec2d823af47c6c509517b255b395fb03c294","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png","hash":"6d3cd17f90223e4cb9449240f4d0ac4f85a17895","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png","hash":"25a696de8010dcaa47f32cb31b2ecf0b4a45778e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838.png","hash":"951630e01a882922559674ebf6cba054f0ee3202","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/1B1AAA7E-B359-4686-89DB-6BD49E18E838-1024x468.png","hash":"e39497ba892c721dac8e129a91a66157e5e38a4c","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977.png","hash":"20a4ec2d823af47c6c509517b255b395fb03c294","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/5B562381-CC58-4B96-9780-8F2728005316.png","hash":"207829f164abe84888d6f4ee6518840e21c46c46","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF-1024x526.png","hash":"cd2fb66cf32afde7cd2ea0e1ab76e2a14a677d92","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/67808828-7D20-4088-9F63-6474E0CADEBF.png","hash":"fd2804c0dcda8cfe1d02bf8bc967d3e8b327d459","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png","hash":"33c3bc55f17991b2d97ece0639ec4aa20e943565","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32.png","hash":"8de877d890aaa96133a59b0dce77e825f7bb0ef5","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png","hash":"8adbcc1f510cd53974c09eecb99cf1abef0d4113","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png","hash":"9a742a28c787ff7c458d862acd0bbc6557fe6a7d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug_sql-1024x341.png","hash":"49449d492a0f41c7e8bfa49af5babfdd88974ec8","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug_sql.png","hash":"ae8aa5d1eee39fb2f64e0ee7f6ba2df7c43eda1a","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D-1024x508.png","hash":"41707b6128542e849600fffdbe4bedaeb22f2f19","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C-1024x340.png","hash":"4fcc10d83d82976758892331d908265f75eaba43","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E-1024x442.png","hash":"1f69fd4da381a54347011a2fceb0c50b5846e339","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47-1024x576.png","hash":"063104c1be01be6c52ce8baf8453e436f6b914de","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-1024x283.png","hash":"1f825f5138820f0a3fdd91bcd54e60f9e525b00c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677-1024x656.png","hash":"7a991ded56afeff4f9b228d4c4ed77d0cb25f2a8","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6.png","hash":"fdd9fdf0e3135dd741a56eab80697e5835b63753","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/10/插件5.png","hash":"a9de7f501e27eee3fff8d28b1000dfc3a279217c","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件6-1024x436.png","hash":"bf37ff6a37283cba5c6b68a464eb3aa062f1a2ec","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_3-1024x374.png","hash":"85bcfd4a7c1fd181e74c2b022bf0d9600f0380a3","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png","hash":"d31ceaa5afcc6f7c301edb1c821d0838a3d8d24f","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323.png","hash":"fd99b321fe82a475b710c4663f0b1d05965c9b5d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-1024x548.png","hash":"d38c37b7fe12458c8b85c66188efd34b3f5b07b9","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-1024x598.png","hash":"3943cc5dff40fdb7c4c052ab5481243889d09244","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug-1024x446.png","hash":"31c944daa3c541e88b2279f28cab8a62330c2614","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug_show-1024x433.png","hash":"aec8c53b4d3a0d391c9e34c7f5f8218e35150e76","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/clear_sql.png","hash":"0decc4c3a9c18d159479618d3fcb90cfd9b3ddb2","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/sql_2-1024x479.png","hash":"fffb6c7e9551fe61f33461b5e407a4a7c65cd7ad","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/sql_2.png","hash":"5f88991967abdd5db0bfa1f1ff8803b150929789","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-1024x482.png","hash":"1ca438906f95fa3562da9461970971a1e0c78e21","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png","hash":"1ca438906f95fa3562da9461970971a1e0c78e21","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png","hash":"599ce1aacff1bec4f464849ade8038b84ba6c5a7","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-1024x476.png","hash":"04106c2bda77d8cb83d0b2d60d77251a66c3e9ac","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-1024x488.png","hash":"2c9059cdc7ca427d84600e0d801da99c627985a6","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png","hash":"9bbb3c0f9432574f78f23957aaa00fe4f12d1d4c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png","hash":"efb30023030a4e02ba5260bbd63bdae8a5216a4a","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png","hash":"183ff358599a51457d6aafd8a8a1d3a9619a8e21","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png","hash":"15aa7f858e765c8c48cbd65582cc6bc7d66b15b3","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png","hash":"4337d4cae0d4c8d5e5ea01edef3829b325d6f0c2","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图-693x1024.png","hash":"8376521710e7b735515a800b9734ead223886baa","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-1024x630.png","hash":"786f76e88f7de26c47afe1be28f0159ac349db60","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34.png","hash":"de4cb5b158911440b0257700d6ff0e2cc97c7bc3","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件5.png","hash":"a9de7f501e27eee3fff8d28b1000dfc3a279217c","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件6-1024x436.png","hash":"bf37ff6a37283cba5c6b68a464eb3aa062f1a2ec","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_3-1024x374.png","hash":"85bcfd4a7c1fd181e74c2b022bf0d9600f0380a3","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C-1024x482.png","hash":"1ca438906f95fa3562da9461970971a1e0c78e21","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png","hash":"1ca438906f95fa3562da9461970971a1e0c78e21","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png","hash":"599ce1aacff1bec4f464849ade8038b84ba6c5a7","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png","hash":"d31ceaa5afcc6f7c301edb1c821d0838a3d8d24f","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323.png","hash":"fd99b321fe82a475b710c4663f0b1d05965c9b5d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86-1024x548.png","hash":"d38c37b7fe12458c8b85c66188efd34b3f5b07b9","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B-1024x598.png","hash":"3943cc5dff40fdb7c4c052ab5481243889d09244","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug-1024x446.png","hash":"31c944daa3c541e88b2279f28cab8a62330c2614","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug_show-1024x433.png","hash":"aec8c53b4d3a0d391c9e34c7f5f8218e35150e76","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/clear_sql.png","hash":"0decc4c3a9c18d159479618d3fcb90cfd9b3ddb2","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/sql_2-1024x479.png","hash":"fffb6c7e9551fe61f33461b5e407a4a7c65cd7ad","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/sql_2.png","hash":"5f88991967abdd5db0bfa1f1ff8803b150929789","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D-1024x476.png","hash":"04106c2bda77d8cb83d0b2d60d77251a66c3e9ac","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094-1024x488.png","hash":"2c9059cdc7ca427d84600e0d801da99c627985a6","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png","hash":"9bbb3c0f9432574f78f23957aaa00fe4f12d1d4c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png","hash":"efb30023030a4e02ba5260bbd63bdae8a5216a4a","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png","hash":"183ff358599a51457d6aafd8a8a1d3a9619a8e21","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png","hash":"15aa7f858e765c8c48cbd65582cc6bc7d66b15b3","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png","hash":"4337d4cae0d4c8d5e5ea01edef3829b325d6f0c2","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图-693x1024.png","hash":"8376521710e7b735515a800b9734ead223886baa","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34-1024x630.png","hash":"786f76e88f7de26c47afe1be28f0159ac349db60","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/11/FACB5ABD-1EE7-4D83-9293-067E957ABC34.png","hash":"de4cb5b158911440b0257700d6ff0e2cc97c7bc3","modified":1489549261000},{"_id":"themes/next/source/lib/algolia-instant-search/instantsearch.min.js","hash":"9ccc6f8144f54e86df9a3fd33a18368d81cf3a4f","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-1024x560.png","hash":"47f3bbe7f9f955901981bebc375934b4789bcb9b","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C.png","hash":"43b95bb13802abbadc40e242ec5c2a6bd403f07d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-1024x850.png","hash":"08721bfd05895aebb734fe2ddbed963edb9860a8","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86.png","hash":"32dfd93fb2f899de9333295c8c158aeabafbaf3e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png","hash":"a5f74304591dd70a30386924bede2a1ae2269a97","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B.png","hash":"fd7a06d8a3d2bb406d09e6915afdf062934e3742","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/01/web_spider-629x1024.png","hash":"7407daffdcd3de3be767200c70813d78dd707f79","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31.png","hash":"9d3c691dfcfe124e763d94204bc04c8507b8bd53","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-1024x561.png","hash":"d2a5b29c8ad5ae9356b5bcbb65a4906378957e1e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-1024x856.png","hash":"463b50459c84404ddaad890b523fa870973e6a0e","modified":1489549260000},{"_id":"source/wp_content/uploads/2016/01/web_spider-629x1024.png","hash":"7407daffdcd3de3be767200c70813d78dd707f79","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C-1024x560.png","hash":"47f3bbe7f9f955901981bebc375934b4789bcb9b","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/2EE857EE-43DB-4064-9422-117A96DDBE0C.png","hash":"43b95bb13802abbadc40e242ec5c2a6bd403f07d","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/30A40C3F-5641-408D-AB54-B1FA6640F598-1024x850.png","hash":"08721bfd05895aebb734fe2ddbed963edb9860a8","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png","hash":"a5f74304591dd70a30386924bede2a1ae2269a97","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/A83EAED7-7F13-41B6-B205-B84A97514C86.png","hash":"32dfd93fb2f899de9333295c8c158aeabafbaf3e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/E459FAC6-38D6-4838-B7CE-AEBA04A79D9B.png","hash":"fd7a06d8a3d2bb406d09e6915afdf062934e3742","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31.png","hash":"9d3c691dfcfe124e763d94204bc04c8507b8bd53","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C-1024x561.png","hash":"d2a5b29c8ad5ae9356b5bcbb65a4906378957e1e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/11/FD953D3D-0466-41E6-846C-255797FC08C6-1024x856.png","hash":"463b50459c84404ddaad890b523fa870973e6a0e","modified":1489549261000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/10/插件4.png","hash":"a7bb8addb5dd3cb3731346ad781ce229f1b1f456","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/10/插件_2.png","hash":"09d22d5bd084a8028b274a3b727ffc3c5f21fdf3","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","hash":"f24d7525e6fae65e0a73cc3eb923a56cedb46d46","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-1024x649.png","hash":"588818fb2e7f2975f26c64c94c2292d49f42e42a","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-1024x685.png","hash":"1177c83836ea1a6fbd1521adb2e321a97e20f34e","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20.png","hash":"41c477c2f2d1b3c04966ca27f3a6479104ab67af","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C.png","hash":"e39c58585f499b3b540854e6e9c777952ef03e87","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1.png","hash":"e39c58585f499b3b540854e6e9c777952ef03e87","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","hash":"f24d7525e6fae65e0a73cc3eb923a56cedb46d46","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png","hash":"cecd93f9a8bc61726d935da0bb1dd15fa1234675","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-1024x514.png","hash":"5863aaefc4fed1789753fade598889e939aee71b","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-1024x481.png","hash":"aba835fcf05131557c71f97bcbe6a580aa89e216","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png","hash":"b0cc6334e6a0199938f085c1d9ad5a6ee1abfe5c","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件4.png","hash":"a7bb8addb5dd3cb3731346ad781ce229f1b1f456","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_2.png","hash":"09d22d5bd084a8028b274a3b727ffc3c5f21fdf3","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C.png","hash":"e39c58585f499b3b540854e6e9c777952ef03e87","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1.png","hash":"e39c58585f499b3b540854e6e9c777952ef03e87","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/12/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","hash":"f24d7525e6fae65e0a73cc3eb923a56cedb46d46","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/23C0A6E6-E455-4198-88E3-BD92AEDED977-1024x810.png","hash":"f24d7525e6fae65e0a73cc3eb923a56cedb46d46","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/9C39377D-B12E-40DC-A091-22F117A4BE32-1024x649.png","hash":"588818fb2e7f2975f26c64c94c2292d49f42e42a","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20-1024x685.png","hash":"1177c83836ea1a6fbd1521adb2e321a97e20f34e","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/EFD4223E-67DF-4222-90C9-41FAA5AF1F20.png","hash":"41c477c2f2d1b3c04966ca27f3a6479104ab67af","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png","hash":"cecd93f9a8bc61726d935da0bb1dd15fa1234675","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-1024x514.png","hash":"5863aaefc4fed1789753fade598889e939aee71b","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A-1024x481.png","hash":"aba835fcf05131557c71f97bcbe6a580aa89e216","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png","hash":"b0cc6334e6a0199938f085c1d9ad5a6ee1abfe5c","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png","hash":"6eb396abd5673acab17944ca5023150a13e20dbe","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png","hash":"b2658c9f3fdeab4dcb44f91fadae4ea0b680b7be","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug.png","hash":"67033de6211d4f5db16d760996940dda93a60873","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/bug_show.png","hash":"f1498d07c39ba4fbb2eae18eb86286d36652ce36","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/01/wise_web_spider.png","hash":"19f665a3afe3fb1bc773d266d8336a6a7bcd95b1","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png","hash":"29121e40256cb3207e4e81b82629f495cb775d62","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png","hash":"1cb954ae887f0c30f8d545abe7762b8a3c3a3916","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-1024x848.png","hash":"52c795e2a2cbc2e7ab49476dfdc6353073990f8c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-1024x588.png","hash":"3372bbdbc589466fe875c27091b1374ebb16ae7e","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png","hash":"8e64ce5429adc7138b6469d28dea477c9e7c52b7","modified":1489549260000},{"_id":"source/wp_content/uploads/2016/01/wise_web_spider.png","hash":"19f665a3afe3fb1bc773d266d8336a6a7bcd95b1","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png","hash":"6eb396abd5673acab17944ca5023150a13e20dbe","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png","hash":"b2658c9f3fdeab4dcb44f91fadae4ea0b680b7be","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug.png","hash":"67033de6211d4f5db16d760996940dda93a60873","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/bug_show.png","hash":"f1498d07c39ba4fbb2eae18eb86286d36652ce36","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png","hash":"29121e40256cb3207e4e81b82629f495cb775d62","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png","hash":"1cb954ae887f0c30f8d545abe7762b8a3c3a3916","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354-1024x848.png","hash":"52c795e2a2cbc2e7ab49476dfdc6353073990f8c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6-1024x588.png","hash":"3372bbdbc589466fe875c27091b1374ebb16ae7e","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png","hash":"8e64ce5429adc7138b6469d28dea477c9e7c52b7","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/10/插件_3.png","hash":"4edd2d13cae7f2977ff1b187f7c988e74640ef9d","modified":1489549260000},{"_id":"source/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png","hash":"259ed9af371dee63b3161853bb8e70240fd52fd5","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/02/存储架构.jpg","hash":"27b1eb266138d2b3325086c528070ccb46a9a3f5","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-1024x733.png","hash":"dc4faead79b29323c5e48d0ab4bfc61a7a313030","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/10/插件_3.png","hash":"4edd2d13cae7f2977ff1b187f7c988e74640ef9d","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png","hash":"259ed9af371dee63b3161853bb8e70240fd52fd5","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/02/存储架构.jpg","hash":"27b1eb266138d2b3325086c528070ccb46a9a3f5","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/5C631902-9A35-4D0A-BDD3-A9F80136BC31-1024x733.png","hash":"dc4faead79b29323c5e48d0ab4bfc61a7a313030","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4.png","hash":"73c17cf30e3c7d07523fd119aa18799a024f5762","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-1024x493.png","hash":"18bc8f394ba6d15df68a61200fd47d932fef2b2c","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC.png","hash":"0d201583174931aed5fef497e66868c946f6bab6","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6.png","hash":"57cb5ebe9c9103adbb83a395847cd185c7476773","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png","hash":"94abbc601bae0457d64c14d92bd16028cd74a4bc","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4.png","hash":"73c17cf30e3c7d07523fd119aa18799a024f5762","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC.png","hash":"0d201583174931aed5fef497e66868c946f6bab6","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/70CCD5D7-B2F0-44BC-9955-D65ABA671FAC-1024x493.png","hash":"18bc8f394ba6d15df68a61200fd47d932fef2b2c","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png","hash":"94abbc601bae0457d64c14d92bd16028cd74a4bc","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/CF84B429-CFD1-4B7C-A14C-646D33C8F7E6.png","hash":"57cb5ebe9c9103adbb83a395847cd185c7476773","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-1024x715.png","hash":"e0e48b0e8b502d6a81323fe1c3a0caf8f7bd7605","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/page-diff-流程图.png","hash":"b79f97a6d322fec2a088f342ff9fbc24572b75d4","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/11/BF518664-4DB9-48A1-A0EE-C3480C61F4D4-1024x715.png","hash":"e0e48b0e8b502d6a81323fe1c3a0caf8f7bd7605","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/page-diff-流程图.png","hash":"b79f97a6d322fec2a088f342ff9fbc24572b75d4","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878.png","hash":"e1e679a130be8f416c35070c59e7c606a7c1905d","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/01/web_spider.png","hash":"d3b839f41cc7b49d316b4d2d4ce5eabbd81923e9","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-722x1024.png","hash":"d16cb7c52d75284865b89057f61d5cdeb1e4d4d3","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-896x1024.png","hash":"cb78acc4eeef96852e46807fc2ab5397c524cd13","modified":1489549260000},{"_id":"source/wp_content/uploads/2016/01/web_spider.png","hash":"d3b839f41cc7b49d316b4d2d4ce5eabbd81923e9","modified":1489549261000},{"_id":"source/wp_content/uploads/2015/11/57021B73-933F-4696-848E-A6778FB8A878.png","hash":"e1e679a130be8f416c35070c59e7c606a7c1905d","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-722x1024.png","hash":"d16cb7c52d75284865b89057f61d5cdeb1e4d4d3","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291-896x1024.png","hash":"cb78acc4eeef96852e46807fc2ab5397c524cd13","modified":1489549261000},{"_id":"source/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-759x1024.png","hash":"face635d108eba6dd11cfd1b804fcb22e38e8c5d","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-709x1024.png","hash":"4788d07897f1c479cdf6b92b71ef9da53b7c5cc5","modified":1489549260000},{"_id":"source/wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF-759x1024.png","hash":"face635d108eba6dd11cfd1b804fcb22e38e8c5d","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759-709x1024.png","hash":"4788d07897f1c479cdf6b92b71ef9da53b7c5cc5","modified":1489549261000},{"_id":"source/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png","hash":"b9c1b5b246b18aee16b801e7a7d9cd935ed1c1ca","modified":1489549260000},{"_id":"source/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png","hash":"638c4f744faaa0067b65828b434b3a809a0efad1","modified":1489549260000},{"_id":"source/wp_content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png","hash":"b9c1b5b246b18aee16b801e7a7d9cd935ed1c1ca","modified":1489549261000},{"_id":"source/wp_content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png","hash":"638c4f744faaa0067b65828b434b3a809a0efad1","modified":1489549261000},{"_id":"source/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png","hash":"4d4f63e280e70a5d1c00e2694f6bed0b7057d86b","modified":1489549260000},{"_id":"source/wp_content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png","hash":"4d4f63e280e70a5d1c00e2694f6bed0b7057d86b","modified":1489549261000},{"_id":"source/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png","hash":"bf43aadd88f06d3b7c1b3e5f55a9e3210d0b1a15","modified":1489549260000},{"_id":"source/wp_content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png","hash":"bf43aadd88f06d3b7c1b3e5f55a9e3210d0b1a15","modified":1489549261000},{"_id":"public/search.xml","hash":"ed11df3ca4e4797b0a71ca300eaad66bf967e823","modified":1497950428599},{"_id":"public/404.html","hash":"fdb2293a9a980c471d8caf744638c89a12306f2b","modified":1497950428969},{"_id":"public/about/index.html","hash":"5420b08181b3691ce6b1a93e500bb240be703c1c","modified":1497950428971},{"_id":"public/categories/index.html","hash":"15d0e11c279378cb1458de74302ffd99eac351e4","modified":1497950428971},{"_id":"public/old/index.html","hash":"8f7344f9ef8b2158d53320ec86397aa856b822c7","modified":1497950428971},{"_id":"public/archives/page/4/index.html","hash":"c3d38dacf04bb27bbd4f45c054938c804598dda7","modified":1497950428971},{"_id":"public/archives/2016/02/index.html","hash":"b981fa7c958767ff1a4aac7ea6daa1b2679443d2","modified":1497950428971},{"_id":"public/archives/2016/03/index.html","hash":"2cb5166ace75b8c4be687d114fa56df1f0e017f8","modified":1497950428971},{"_id":"public/archives/2017/01/index.html","hash":"ebe1c5e250706d8ca941459e00d445013f2c5066","modified":1497950428971},{"_id":"public/archives/2017/02/index.html","hash":"01ce3d3d315a6ae4508f48310c8ed1bc92b57b92","modified":1497950428971},{"_id":"public/tags/nginx/index.html","hash":"e7d8136d490646dd0fb6316d1318fbe2a2cdf68f","modified":1497950428972},{"_id":"public/tags/apache/index.html","hash":"b74ac8c8e98803dedc4333789477572e98a950f6","modified":1497950428972},{"_id":"public/tags/php/page/2/index.html","hash":"147be9c5a4a440438ebebe31198adfc60e9b0778","modified":1497950428972},{"_id":"public/tags/db/index.html","hash":"4e75be485d81e33a44a3b07727740183726192b6","modified":1497950428972},{"_id":"public/tags/active-record/index.html","hash":"62a58ab2a2ad4f2989d38baef51153173d340480","modified":1497950428972},{"_id":"public/tags/yii2/index.html","hash":"d55938d3a5d40260242980b92befac95cca1de23","modified":1497950428972},{"_id":"public/tags/合成图片/index.html","hash":"6ecb5a57763199f9d20cc7c3b14297d7e19af0cd","modified":1497950428972},{"_id":"public/tags/canvas/index.html","hash":"247d2f9c84dee626c18e2b212f1e8f41ae2dbc94","modified":1497950428972},{"_id":"public/tags/chrome-extension/index.html","hash":"375bfedefdec2bbed8de7a7d703171a6b75a46a6","modified":1497950428972},{"_id":"public/tags/chrome/index.html","hash":"4ff0d7cdd7ff8257717b303028e2719f31d26045","modified":1497950428972},{"_id":"public/tags/crontab/index.html","hash":"ebdde2e2eadc82f4ba7c35c80338c6be725e1182","modified":1497950428972},{"_id":"public/tags/linux/index.html","hash":"31d23fa54dfd7ec52703064d0609bf3a1192eae3","modified":1497950428972},{"_id":"public/tags/网页爬虫/index.html","hash":"08d3bcc1568958eb2d32f89603d300b4e62366ee","modified":1497950428972},{"_id":"public/tags/shell/index.html","hash":"cc39b5995b4b546bec13df43d217a54f7ac5a335","modified":1497950428972},{"_id":"public/tags/css/index.html","hash":"c72049e399114628168a73f14e8909d755b2fa0e","modified":1497950428973},{"_id":"public/tags/git修复/index.html","hash":"2a04f7b20533a79634ccd741a3d64eeb661bfcaa","modified":1497950428973},{"_id":"public/tags/前端/index.html","hash":"3b7cf849d10e7f81573791cf3723fb0b16a3e49c","modified":1497950428973},{"_id":"public/tags/动态获取数据/index.html","hash":"5649158254d90f537072fb18556895dca73358b7","modified":1497950428973},{"_id":"public/tags/pho/index.html","hash":"1bf982a0f93d5221801918aeef2535c60d4491c4","modified":1497950428973},{"_id":"public/tags/echarts/index.html","hash":"04b30e31280547fc6c8e273a7a78e1b6cf8db834","modified":1497950428973},{"_id":"public/tags/cors/index.html","hash":"8ab0a19d0d78f4a5150fc618bb8c384129f0b678","modified":1497950428973},{"_id":"public/tags/跨域/index.html","hash":"2b5ec143e97b436c4ba15c66fca5dd731c1dda39","modified":1497950428973},{"_id":"public/tags/jsonp/index.html","hash":"5d489462deef7c8d9c5d0076024f617188fcabca","modified":1497950428973},{"_id":"public/tags/备份/index.html","hash":"dd08dc7906dbc96aaed5e57a94dff15a6d986da9","modified":1497950428973},{"_id":"public/tags/数据库同步/index.html","hash":"055a07f3f27094b6aae6718642c72813b0c8f5a3","modified":1497950428973},{"_id":"public/tags/自动化测试/index.html","hash":"ad4dcfa80945e2c925a7a2e3854b7a73478b6914","modified":1497950428973},{"_id":"public/tags/单元测试/index.html","hash":"0cb90752649a162d76ba3683523d5d1c66ad2f13","modified":1497950428973},{"_id":"public/tags/phpunit/index.html","hash":"46fbb17d74ae705d0cf0eb4192ddabdcf58a52f8","modified":1497950428973},{"_id":"public/tags/unicode/index.html","hash":"aebbebe6b0127df6a75c25e7bda99cf80865a28b","modified":1497950428973},{"_id":"public/tags/单例模式/index.html","hash":"a2e7810bd8a4624f1c1a33069819478b3b0e2dcb","modified":1497950428974},{"_id":"public/tags/设计模式/index.html","hash":"e50e00693c82d9527659f93d3198fcc6303e189b","modified":1497950428974},{"_id":"public/tags/iframe跨域/index.html","hash":"6692354665ac76338022d904c4cd6afc83ed30be","modified":1497950428974},{"_id":"public/tags/iframe自适应高度/index.html","hash":"175ed5b37c48f96e44a396e9d62a2082d0f1c51e","modified":1497950428974},{"_id":"public/tags/iframe/index.html","hash":"05d3a060238e5375bd29b98cee4e134ba9801805","modified":1497950428974},{"_id":"public/tags/html5/index.html","hash":"a1fe7bfb6b1d27f6a10c54f645d5da8e85cbe9aa","modified":1497950428974},{"_id":"public/tags/高可用架构/index.html","hash":"da9ab9fe06bd8d378dfb266563b7fe82522e111e","modified":1497950428974},{"_id":"public/tags/容灾方案/index.html","hash":"fdcbfc836c7f0cf65e8d46ddda06daf75dffbc99","modified":1497950428974},{"_id":"public/tags/redis主从/index.html","hash":"afbab17f6f3a1b6ed5803ab853b2e9b53a935fc3","modified":1497950428974},{"_id":"public/tags/phpredis/index.html","hash":"a267c5f6b42d111c8c2d08ecf48f3f6ae4dfba28","modified":1497950428974},{"_id":"public/tags/缓存/index.html","hash":"fe08f53b2589b6da7179c3ade2df2d1ba8a5026c","modified":1497950428974},{"_id":"public/tags/wordpress/index.html","hash":"1c2c41804163db532f4c7dc2aa17cf0aa9074c4c","modified":1497950428974},{"_id":"public/tags/高并发/index.html","hash":"2f12d999b99b64886ecca23d2c45bc51b2baa65f","modified":1497950428974},{"_id":"public/tags/读写分离/index.html","hash":"10446e7f6d62f58401a2be073ce3b54f50072409","modified":1497950428974},{"_id":"public/tags/主从备份/index.html","hash":"29a11985f3a65b35e29c120089e6bab23e8080e8","modified":1497950428974},{"_id":"public/tags/ip/index.html","hash":"dd11a5122e73e0e1815a847d3bd1edf103ad9b40","modified":1497950428974},{"_id":"public/tags/恶意攻击/index.html","hash":"05a50031495551bb4b087fe869c2fd56abb7e54d","modified":1497950428974},{"_id":"public/tags/服务器/index.html","hash":"e4e1d73303c2d4b9507de35d7ab612dc66cb8198","modified":1497950428974},{"_id":"public/tags/index.html","hash":"86f60ec1645b8966b73358d724373f18be5bc1ee","modified":1497950428975},{"_id":"public/wp-content/uploads/2015/10/准备动作.html","hash":"0eef87dd3a3b3c8846472ad563c3335f100a9cfa","modified":1497950428975},{"_id":"public/wp_content/uploads/2015/10/准备动作.html","hash":"2b57f76d6571191e43bc3d2ac867f0c1bffffab7","modified":1497950428975},{"_id":"public/2017/02/05/redis3/index.html","hash":"398171d0752c67b650b884e249c398d0e40c9131","modified":1497950428975},{"_id":"public/2017/01/20/charactor/index.html","hash":"75df235b290c82b908ebe15f636999483ebd471b","modified":1497950428975},{"_id":"public/2017/01/20/【高并发简单解决方案】redis队列缓存 + mysql 批量入库 + php离线整合/index.html","hash":"825a2c7c5c8ea4786cb1b5024fba802de466e6c2","modified":1497950428975},{"_id":"public/2016/08/20/【page-monitor 前端自动化 下篇】 实践应用/index.html","hash":"b8351c858c66ab3d90a3f9616a46728ab5d5cf1e","modified":1497950428976},{"_id":"public/2016/08/20/fsck修复linux文件损坏/index.html","hash":"8283cbb2a98a343cbf638ca7dfec54f0a5a0637c","modified":1497950428976},{"_id":"public/2016/08/08/phpredis单例模式封装/index.html","hash":"672417df1835c745e8048f8b075cc605bbe10646","modified":1497950428976},{"_id":"public/2016/08/07/page_monitor_second/index.html","hash":"8c18e72b96ba17839f5f474d3b4e5d569567a575","modified":1497950428976},{"_id":"public/2016/04/26/chrome_1/index.html","hash":"d153e36c99dd702c4c1727ad36cbfd76ddab0bee","modified":1497950428976},{"_id":"public/2016/04/20/中型存储架构实践探索/index.html","hash":"1956744925402935c2c21537ef42fc47a72ec159","modified":1497950428976},{"_id":"public/2016/08/07/【page-monitor 前端自动化 上篇】初步调研 /index.html","hash":"15a1115526e992fc33b413cf68a6311a43de6f51","modified":1497950428976},{"_id":"public/2016/04/20/chrome_2/index.html","hash":"09e57a52040868a0517b36f93a85f8fc9e571f4d","modified":1497950428976},{"_id":"public/2016/03/08/mysql数据导库常用操作/index.html","hash":"455c52fcbfc385aa651153995636be9c40e75166","modified":1497950428977},{"_id":"public/2016/02/29/postMessage处理iframe 跨域问题/index.html","hash":"01beb9f82454d8442f971f31df5de2221bfd51b1","modified":1497950428977},{"_id":"public/2016/01/10/YII2数据库查询实践/index.html","hash":"9d9e273d795f0b412231a498282022e8ce657986","modified":1497950428977},{"_id":"public/2016/01/07/机器多次恶意提交攻击/index.html","hash":"4b4fb3bc252e92b49c257e1cde2ccd9cb94d06d6","modified":1497950428977},{"_id":"public/2016/01/03/检验mysql主从备份，读写分离/index.html","hash":"3c35b41f4efccd02a07233a343e239215e926775","modified":1497950428977},{"_id":"public/2015/12/20/php反射调用private方法实践/index.html","hash":"483f9dea26f591f57809d48e13dca8aba98d5149","modified":1497950428977},{"_id":"public/2015/12/11/mysql 简单全量备份和快速恢复/index.html","hash":"e04973c4a9797ca59f149ca279e7dc13f2cf90fc","modified":1497950428977},{"_id":"public/2015/12/08/linux 查找清理大文件/index.html","hash":"55a9058ff60bbd3f69c48d4c1749ec7a86e52430","modified":1497950428977},{"_id":"public/2015/12/06/【wordpress优化】压缩和使用静态缓存/index.html","hash":"40f4cea3480b4b4637d0652b2702a065e39f11cf","modified":1497950428977},{"_id":"public/2015/12/06/echarts动态获取数据实例/index.html","hash":"b5c649446ac867ef8da8516d91e477d9af2fdaa1","modified":1497950428977},{"_id":"public/2015/12/03/crontab 误删除恢复/index.html","hash":"ac282bcfcae9f6acfc0bd29c744210c7d18e7a9f","modified":1497950428977},{"_id":"public/2015/12/02/jsonp + php 跨域实例/index.html","hash":"70940775aa2a4cc764585e5379d14868862844f9","modified":1497950428977},{"_id":"public/2015/11/30/php 操作不同数据库/index.html","hash":"fa5d8a37e7e088a28aeb65f117db2db1a89ac452","modified":1497950428977},{"_id":"public/2015/11/28/【redis学习一】基本概念和基本操作/index.html","hash":"dee655fc35e7562024b11b90d9f52eb2eea28c55","modified":1497950428977},{"_id":"public/2015/11/28/php 处理unicode解码/index.html","hash":"67ff3c6935afc5286c513e3b8f77f43631a9aabc","modified":1497950428977},{"_id":"public/2015/11/28/phpUnit 安装，实例和简单部署/index.html","hash":"9ad67d9c73d5d4f1691954143c285e813437c178","modified":1497950428977},{"_id":"public/2015/11/28/【redis学习二】多php版本下phpredis扩展安装/index.html","hash":"5b537f5e9e9d51317381bd82f27c4719cb69f667","modified":1497950428977},{"_id":"public/2015/11/23/canvas_combine_pic/index.html","hash":"6a2b4cd79ec1cd6f82de48b5e1a7521253164573","modified":1497950428978},{"_id":"public/2015/11/18/Nginx实践一：centos apache更换为nginx/index.html","hash":"1e440167e639081aa091a5b078dc01d59007c6d5","modified":1497950428978},{"_id":"public/2015/11/18/Nginx实践二：nginx端口配置，域名重定向设置/index.html","hash":"ce696f60e49bfc3c29264fbfb52ac6eca2fa2ba8","modified":1497950428978},{"_id":"public/index.html","hash":"0f5872f54dcbde4cf7fa92737efbc86c79a95e6d","modified":1497950428978},{"_id":"public/page/2/index.html","hash":"174897df3b8edd5e4746b46bed470f277928b59b","modified":1497950428978},{"_id":"public/page/3/index.html","hash":"1a877affe1abe541f022bacdd6f933aaa9814759","modified":1497950428978},{"_id":"public/page/4/index.html","hash":"f805d98eb4d9d2e3b4b66fb4dd6b3cf69358b6f5","modified":1497950428978},{"_id":"public/archives/index.html","hash":"93488afd0a1a77bbf0895e23f08d3e4893b1eb44","modified":1497950428978},{"_id":"public/archives/page/2/index.html","hash":"9a5a60d32c38600a5ca23a3f85eb05a841224ab7","modified":1497950428978},{"_id":"public/archives/page/3/index.html","hash":"6299a1d9099e6e4ec0ed60cc0c4b0deae1faee6e","modified":1497950428978},{"_id":"public/archives/2015/index.html","hash":"abafc7fac02e2e2e3b46ebf830b53fae9d73ae42","modified":1497950428978},{"_id":"public/archives/2015/page/2/index.html","hash":"9f9a3b9da7055eb2aa30f01bfef635af10dc8443","modified":1497950428978},{"_id":"public/archives/2015/11/index.html","hash":"476d07ae7f6ae193e47d4d7659584dad67c70ec5","modified":1497950428978},{"_id":"public/archives/2015/12/index.html","hash":"d3c73479b7dc1fe93c9a55eb20a1446b0885fa62","modified":1497950428978},{"_id":"public/archives/2016/index.html","hash":"751da332a90653cb6f9d92c88157757ce2ad8d99","modified":1497950428978},{"_id":"public/archives/2016/page/2/index.html","hash":"5b61cbdf88b705f3014efdb49b56ca17c0d1eed1","modified":1497950428978},{"_id":"public/archives/2016/01/index.html","hash":"6d5faddc42d77e84e5d876313b121508f9565a10","modified":1497950428978},{"_id":"public/archives/2016/04/index.html","hash":"0961fc72e9db0e26e446559dd68d27f4a572d94d","modified":1497950428978},{"_id":"public/archives/2016/08/index.html","hash":"80fc4a3d2f73b450feb7b75c23e8ae1d4b42f98e","modified":1497950428979},{"_id":"public/archives/2017/index.html","hash":"b05c41db24c79a240ad3810bd9f62017cac6e834","modified":1497950428979},{"_id":"public/tags/php/index.html","hash":"ac58446dbd6d178f4958bb75b84978d83c9e3d83","modified":1497950428979},{"_id":"public/tags/javascript/index.html","hash":"41f9cd1c044c0cff18157491a8e6d7ff91506701","modified":1497950428979},{"_id":"public/tags/mysql/index.html","hash":"b19d6ca0880a159e3e441153953281e310c7cb4e","modified":1497950428979},{"_id":"public/tags/redis/index.html","hash":"366eb96b0ef2f38b59781021cf23f732bb5d9780","modified":1497950428979},{"_id":"public/archives/2017/03/index.html","hash":"a3d076b462fbc954d04ed9b1a4420bbd4643b392","modified":1497950428980},{"_id":"public/tags/基本原理/index.html","hash":"7e3a70c9f8fa40c4ba8b92314152110394709252","modified":1497950428980},{"_id":"public/2017/03/14/nginx_study_1/index.html","hash":"89aa0d108f249391e36e4013ea0650f5b757f08e","modified":1497950428980},{"_id":"public/wp_content/new/nginx1/nginx_rb_tree.png","hash":"9d4210a87a66d5ba0f567cb9b2a2efbb5439121e","modified":1497950428995},{"_id":"public/wp_content/new/nginx1/7E2CA17E-BA80-4A5B-AB2E-80BE5E06A946.png","hash":"c982edddaa8b4de89c9e6e9ee255acefa828fa0e","modified":1497950428999},{"_id":"public/wp_content/new/nginx1/nginx_event_.png","hash":"d101c05ebe07614207dbb16c5e389f9582374981","modified":1497950428999},{"_id":"public/wp_content/new/nginx1/nginx_framework.png","hash":"82c5c0d5579a4491f462de4822866c87f74fca72","modified":1497950428999},{"_id":"public/wp_content/new/nginx1/nginx_flow.png","hash":"b3a7761d016a851e88b6f208cf178ead06f3d6e8","modified":1497950428999},{"_id":"public/wp_content/new/nginx1/nginx_task.png","hash":"e05545d2a4cc8d27e846e959cb214aedff517eec","modified":1497950428999},{"_id":"public/wp_content/new/nginx1/68923650-0F29-47A7-A7D5-1EC4713D6A8D.png","hash":"ee6ae36d69df0f5b85d54da5206a349cfce8dded","modified":1497950429009},{"_id":"public/wp_content/new/nginx1/BAABA0FC-B60C-4070-B247-F3B658B9F2B3.png","hash":"0edf0f4ca963babc0aad032c998405190a976b5f","modified":1497950429009},{"_id":"public/wp_content/new/nginx1/nginx_epoll.png","hash":"6afc3c0577721f969fcf03fceb50d1f31c61c29c","modified":1497950429009},{"_id":"public/wp_content/new/nginx1/nginx_trend_top.png","hash":"d747f761238c2065c561960b61589f5230cf24ac","modified":1497950429009},{"_id":"public/wp_content/new/nginx1/nginx_task2.png","hash":"ebaa8772bceb021450a68e3b30c0b9626ca9fd2e","modified":1497950429010},{"_id":"public/wp_content/new/nginx1/nginx_bit_reload.png","hash":"8cac911e9931bda1bbcd707d16954e1cb58aa48e","modified":1497950429031},{"_id":"public/wp_content/new/nginx1/nginx_trend_all.png","hash":"90739baddac74e776b3be87d04238ee173df6974","modified":1497950429031},{"_id":"public/wp_content/new/nginx1/nginx_conf_reload.png","hash":"4730f943269ebddd5b57122b636e40fe14f8a617","modified":1497950429032},{"_id":"public/wp_content/new/nginx1/nginx_compare.png","hash":"387d14aeba6b3277b579ca06f50bb3c62f323a66","modified":1497950429061}],"Category":[],"Data":[],"Page":[{"title":"404","toc":false,"comments":0,"_content":"\n<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\n<script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\"\n        charset=\"utf-8\" homePageUrl=\"http://cuihuan.net\"\n        homePageName=\"回到我的主页\">\n</script>\n\n</body>\n</html>","source":"404/index.md","raw":"title: 404\ntoc: false\ncomments: false\npermalink: /404\n\n---\n\n<!DOCTYPE HTML>\n<html>\n<head>\n  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/>\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" />\n  <meta name=\"robots\" content=\"all\" />\n  <meta name=\"robots\" content=\"index,follow\"/>\n</head>\n<body>\n\n<script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\"\n        charset=\"utf-8\" homePageUrl=\"http://cuihuan.net\"\n        homePageName=\"回到我的主页\">\n</script>\n\n</body>\n</html>","date":"2017-03-15T03:41:00.000Z","updated":"2017-03-15T03:41:00.000Z","path":"/404.html","layout":"page","_id":"cj0af9ni80000661fl8jrvyyo","content":"<p>&lt;!DOCTYPE HTML&gt;</p>\n<html><br><head><br>  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"><br>  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"><br>  <meta name=\"robots\" content=\"all\"><br>  <meta name=\"robots\" content=\"index,follow\"><br></head><br><body><br><br><script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homepageurl=\"http://cuihuan.net\" homepagename=\"回到我的主页\"><br></script><br><br></body><br></html>","excerpt":"","more":"<p>&lt;!DOCTYPE HTML&gt;</p>\n<html><br><head><br>  <meta http-equiv=\"content-type\" content=\"text/html;charset=utf-8;\"/><br>  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\" /><br>  <meta name=\"robots\" content=\"all\" /><br>  <meta name=\"robots\" content=\"index,follow\"/><br></head><br><body><br><br><script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\"\n        charset=\"utf-8\" homePageUrl=\"http://cuihuan.net\"\n        homePageName=\"回到我的主页\"><br></script><br><br></body><br></html>"},{"title":"靠谱崔小拽","type":"about","date":"2017-01-31T14:05:34.000Z","_content":"\n## 小拽个人简介的位置。","source":"about/index.md","raw":"---\ntitle: 靠谱崔小拽\ntype: \"about\"\ndate: 2017-01-31 22:05:34\n---\n\n## 小拽个人简介的位置。","updated":"2017-03-15T03:41:00.000Z","path":"about/index.html","comments":1,"layout":"page","_id":"cj0af9nif0002661f6wnxo85w","content":"<h2 id=\"小拽个人简介的位置。\"><a href=\"#小拽个人简介的位置。\" class=\"headerlink\" title=\"小拽个人简介的位置。\"></a>小拽个人简介的位置。</h2>","excerpt":"","more":"<h2 id=\"小拽个人简介的位置。\"><a href=\"#小拽个人简介的位置。\" class=\"headerlink\" title=\"小拽个人简介的位置。\"></a>小拽个人简介的位置。</h2>"},{"title":"分类","type":"categories","date":"2017-01-31T13:55:19.000Z","comments":0,"_content":"","source":"categories/index.md","raw":"---\ntitle: 分类\ntype: \"categories\"\ndate: 2017-01-31 21:55:19\ncomments: false\n---\n","updated":"2017-03-15T03:41:00.000Z","path":"categories/index.html","layout":"page","_id":"cj0af9nip0005661fha1crt8a","content":"","excerpt":"","more":""},{"title":"test","date":"2017-01-31T14:16:36.000Z","_content":"","source":"old/index.md","raw":"---\ntitle: test\ndate: 2017-01-31 22:16:36\n---\n","updated":"2017-03-15T03:41:00.000Z","path":"old/index.html","comments":1,"layout":"page","_id":"cj0af9niu0007661f464mhp4r","content":"","excerpt":"","more":""},{"title":"标签","type":"tags","date":"2017-01-31T13:55:19.000Z","comments":0,"_content":"","source":"tags/index.md","raw":"---\ntitle: 标签\ntype: \"tags\"\ndate: 2017-01-31 21:55:19\ncomments: false\n\n---\n","updated":"2017-03-15T03:41:00.000Z","path":"tags/index.html","layout":"page","_id":"cj0af9nj10009661fqifxizqi","content":"","excerpt":"","more":""},{"_content":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">\n<style>\nbody {\n  font-family: Helvetica, arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.6;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: white;\n  padding: 30px; }\n\nbody > *:first-child {\n  margin-top: 0 !important; }\nbody > *:last-child {\n  margin-bottom: 0 !important; }\n\na {\n  color: #4183C4; }\na.absent {\n  color: #cc0000; }\na.anchor {\n  display: block;\n  padding-left: 30px;\n  margin-left: -30px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0; }\n\nh1, h2, h3, h4, h5, h6 {\n  margin: 20px 0 10px;\n  padding: 0;\n  font-weight: bold;\n  -webkit-font-smoothing: antialiased;\n  cursor: text;\n  position: relative; }\n\nh1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;\n  text-decoration: none; }\n\nh1 tt, h1 code {\n  font-size: inherit; }\n\nh2 tt, h2 code {\n  font-size: inherit; }\n\nh3 tt, h3 code {\n  font-size: inherit; }\n\nh4 tt, h4 code {\n  font-size: inherit; }\n\nh5 tt, h5 code {\n  font-size: inherit; }\n\nh6 tt, h6 code {\n  font-size: inherit; }\n\nh1 {\n  font-size: 28px;\n  color: black; }\n\nh2 {\n  font-size: 24px;\n  border-bottom: 1px solid #cccccc;\n  color: black; }\n\nh3 {\n  font-size: 18px; }\n\nh4 {\n  font-size: 16px; }\n\nh5 {\n  font-size: 14px; }\n\nh6 {\n  color: #777777;\n  font-size: 14px; }\n\np, blockquote, ul, ol, dl, li, table, pre {\n  margin: 15px 0; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #cccccc;\n  height: 4px;\n  padding: 0;\n}\n\nbody > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\nbody > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  body > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\nbody > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 p, h2 p, h3 p, h4 p, h5 p, h6 p {\n  margin-top: 0; }\n\nli p.first {\n  display: inline-block; }\nli {\n  margin: 0; }\nul, ol {\n  padding-left: 30px; }\n\nul :first-child, ol :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #dddddd;\n  padding: 0 15px;\n  color: #777777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 0; }\n\ntable {\n  padding: 0;border-collapse: collapse; }\n  table tr {\n    border-top: 1px solid #cccccc;\n    background-color: white;\n    margin: 0;\n    padding: 0; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n    table tr th {\n      font-weight: bold;\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr td {\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr th :first-child, table tr td :first-child {\n      margin-top: 0; }\n    table tr th :last-child, table tr td :last-child {\n      margin-bottom: 0; }\n\nimg {\n  max-width: 100%; }\n\nspan.frame {\n  display: block;\n  overflow: hidden; }\n  span.frame > span {\n    border: 1px solid #dddddd;\n    display: block;\n    float: left;\n    overflow: hidden;\n    margin: 13px 0 0;\n    padding: 7px;\n    width: auto; }\n  span.frame span img {\n    display: block;\n    float: left; }\n  span.frame span span {\n    clear: both;\n    color: #333333;\n    display: block;\n    padding: 5px 0 0; }\nspan.align-center {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-center > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: center; }\n  span.align-center span img {\n    margin: 0 auto;\n    text-align: center; }\nspan.align-right {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px 0 0;\n    text-align: right; }\n  span.align-right span img {\n    margin: 0;\n    text-align: right; }\nspan.float-left {\n  display: block;\n  margin-right: 13px;\n  overflow: hidden;\n  float: left; }\n  span.float-left span {\n    margin: 13px 0 0; }\nspan.float-right {\n  display: block;\n  margin-left: 13px;\n  overflow: hidden;\n  float: right; }\n  span.float-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: right; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px; }\n\npre code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:0 auto;\n    }\n}\n@media print {\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n\tpre {\n\t\tword-wrap: break-word;\n\t}\n}\n</style>\n<title>准备动作：</title>\n\n</head>\n<body>\n<h3>准备动作：</h3>\n\n<p>首先：你需要有一块阿里云盘，也就几十块钱，学生的话9.9。【对于个人博客，建议购买流量包，一个月也就30来块钱】</p>\n\n<p>然后：你需要有那么一点linux操作基础。</p>\n\n<p>最后：你需要有一颗客服困难和享受技术带来的幸福。</p>\n\n<hr />\n\n<h3>阿里云进行基本的优化【非必须】</h3>\n\n<p>1：修改默认登录路径。阿里云默认是/root，方便每次操作。修改默认登录设在【/home/cuihuan】</p>\n\n<p>2：修复修改路径之后的问题。修改之后会丢失默认路径很多文件，因为，阿里云将默认的配置文件放在/root下面，所以全部拷贝过去 防止再次登录出现名称问题。\n修改之后如下</p>\n\n<pre><code>[cuixiaohuan@cuihuan html]# cd\n[cuixiaohuan@cuihuan ~]# pwd\n/home/cuixiaohuan\n</code></pre>\n\n<h4>一：基于yum 搭建，做yum更新。</h4>\n\n<p>yum update</p>\n\n<p>其他常用命令可以参考：http://blog.csdn.net/phpfengzikai/article/details/7085592</p>\n\n<p>同时，更新全部的信息，用阿里云自带的：http://help.aliyun.com/knowledge_detail.htm?knowledgeId=5974184</p>\n\n<p>注意：即使这样子更新了，也会有很多需要亲自下载，后面会说到</p>\n\n<h4>二：lamp 环境搭建</h4>\n\n<p>一键安装 apache php mysql</p>\n\n<pre><code>yum -y install httpd php mysql mysql-server php-mysql httpd-manual mod_ssl mod_perl mod_auth_mysql php-mcrypt php-gd php-xml php-mbstring php-ldap php-pear php-xmlrpc mysql-connector-odbc mysql-devel libdbi-dbd-mysql\n</code></pre>\n\n<blockquote><p>问题：如果选择的是centos6.0 以上，默认没有mysql，默认是mariadb。所以需要从社区yum中获取最新的mysql， 操作过程如下</p></blockquote>\n\n<p>1：获取社区的rpm包</p>\n\n<blockquote><p>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</p></blockquote>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nRetrieving http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nPreparing...                          ################################# [100%]\nUpdating / installing...\n1:mysql-community-release-el7-5    ################################# [100%]\n[cuixiaohuan@cuihuan ~]# yum repolist enabled | grep \"mysql.*-community.*\"\n</code></pre>\n\n<p>2:查询可用的mysql和mysqlserver</p>\n\n<pre><code>yum search mysql\nmysql-connectors-community/x86_64 MySQL Connectors Community                 17\nmysql-tools-community/x86_64      MySQL Tools Community                      23\nmysql56-community/x86_64          MySQL 5.6 Community Server                184\n</code></pre>\n\n<p>3：安装</p>\n\n<pre><code>yum -y install mysql-community-server\n</code></pre>\n\n<p>4：进行基本配置，开机自动启动，启动进程【此处略去】。</p>\n\n<h4>三：环境配置和优化</h4>\n\n<p>1：apache多端口配置：</p>\n\n<p>apache一个服务器下多个端口承载不同的开发和分布任务，对于初期开发尤为重要</p>\n\n<p>在httpd.conf 增加 以下端口</p>\n\n<pre><code>Listen 1314\n&lt;VirtualHost *:1314&gt;\n    ServerAdmin cuihuan\n    DocumentRoot /var/www/1314/\n    #ServerName 1314\n    #Alias \"/var/www/1314/\"\n&lt;Directory \"/var/www/1314\"&gt;\n    Options All\n    AllowOverride All\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>重启之后基本端口对应网站搭建成功如下</p>\n\n<p>2：mysql 密码和基本配置</p>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# mysqladmin -uroot password\nNew password:\nConfirm new password:\n[cuixiaohuan@cuihuan ~]# mysql -uroot -p\n</code></pre>\n\n<p>3:开放设置mysql 远程访问权限</p>\n\n<pre><code>mysql&gt; grant all privileges on db.* to ‘用户名'@'%' identified by '密码';\nQuery OK, 0 rows affected (0.00 sec)\nmysql&gt; flush privileges;\n</code></pre>\n\n<p>4：apache 支持php配置</p>\n\n<p>按照之前步骤装载的话，php是直接配置ok的，如下图：</p>\n\n<h4>四：后续开发优化</h4>\n\n<p>安装开发中必须的cvs 和数据库管理phpmyadmin</p>\n\n<p>1：安装svn</p>\n\n<p>两个主要目的：1：是作为项目代码控制，2：文件传输服务器</p>\n\n<p>之后所做的事情就是在上面添加svn，参考：http://www.ha97.com/4467.html</p>\n\n<p>启动：</p>\n\n<pre><code>sudo svnserve -d -r /home/cuixiaohuan/svn\n</code></pre>\n\n<p>2：安装phpadmin 便于管理数据库</p>\n\n<p>绿色包，解压，配置端口即可，包地址：http://pan.baidu.com/s/1qW7pNnY</p>\n\n<p>修改下conf，我的是3606 默认3306端口。</p>\n\n<blockquote><p>通过上面步骤，安装了lamp，svn,phpmyadmin，对于常用的web开发基本都已经ok！\n接下来就可以享受该环境！</p></blockquote>\n</body>\n</html>","source":"wp-content/uploads/2015/10/准备动作.html","raw":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">\n<style>\nbody {\n  font-family: Helvetica, arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.6;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: white;\n  padding: 30px; }\n\nbody > *:first-child {\n  margin-top: 0 !important; }\nbody > *:last-child {\n  margin-bottom: 0 !important; }\n\na {\n  color: #4183C4; }\na.absent {\n  color: #cc0000; }\na.anchor {\n  display: block;\n  padding-left: 30px;\n  margin-left: -30px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0; }\n\nh1, h2, h3, h4, h5, h6 {\n  margin: 20px 0 10px;\n  padding: 0;\n  font-weight: bold;\n  -webkit-font-smoothing: antialiased;\n  cursor: text;\n  position: relative; }\n\nh1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;\n  text-decoration: none; }\n\nh1 tt, h1 code {\n  font-size: inherit; }\n\nh2 tt, h2 code {\n  font-size: inherit; }\n\nh3 tt, h3 code {\n  font-size: inherit; }\n\nh4 tt, h4 code {\n  font-size: inherit; }\n\nh5 tt, h5 code {\n  font-size: inherit; }\n\nh6 tt, h6 code {\n  font-size: inherit; }\n\nh1 {\n  font-size: 28px;\n  color: black; }\n\nh2 {\n  font-size: 24px;\n  border-bottom: 1px solid #cccccc;\n  color: black; }\n\nh3 {\n  font-size: 18px; }\n\nh4 {\n  font-size: 16px; }\n\nh5 {\n  font-size: 14px; }\n\nh6 {\n  color: #777777;\n  font-size: 14px; }\n\np, blockquote, ul, ol, dl, li, table, pre {\n  margin: 15px 0; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #cccccc;\n  height: 4px;\n  padding: 0;\n}\n\nbody > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\nbody > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  body > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\nbody > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 p, h2 p, h3 p, h4 p, h5 p, h6 p {\n  margin-top: 0; }\n\nli p.first {\n  display: inline-block; }\nli {\n  margin: 0; }\nul, ol {\n  padding-left: 30px; }\n\nul :first-child, ol :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #dddddd;\n  padding: 0 15px;\n  color: #777777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 0; }\n\ntable {\n  padding: 0;border-collapse: collapse; }\n  table tr {\n    border-top: 1px solid #cccccc;\n    background-color: white;\n    margin: 0;\n    padding: 0; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n    table tr th {\n      font-weight: bold;\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr td {\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr th :first-child, table tr td :first-child {\n      margin-top: 0; }\n    table tr th :last-child, table tr td :last-child {\n      margin-bottom: 0; }\n\nimg {\n  max-width: 100%; }\n\nspan.frame {\n  display: block;\n  overflow: hidden; }\n  span.frame > span {\n    border: 1px solid #dddddd;\n    display: block;\n    float: left;\n    overflow: hidden;\n    margin: 13px 0 0;\n    padding: 7px;\n    width: auto; }\n  span.frame span img {\n    display: block;\n    float: left; }\n  span.frame span span {\n    clear: both;\n    color: #333333;\n    display: block;\n    padding: 5px 0 0; }\nspan.align-center {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-center > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: center; }\n  span.align-center span img {\n    margin: 0 auto;\n    text-align: center; }\nspan.align-right {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px 0 0;\n    text-align: right; }\n  span.align-right span img {\n    margin: 0;\n    text-align: right; }\nspan.float-left {\n  display: block;\n  margin-right: 13px;\n  overflow: hidden;\n  float: left; }\n  span.float-left span {\n    margin: 13px 0 0; }\nspan.float-right {\n  display: block;\n  margin-left: 13px;\n  overflow: hidden;\n  float: right; }\n  span.float-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: right; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px; }\n\npre code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:0 auto;\n    }\n}\n@media print {\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n\tpre {\n\t\tword-wrap: break-word;\n\t}\n}\n</style>\n<title>准备动作：</title>\n\n</head>\n<body>\n<h3>准备动作：</h3>\n\n<p>首先：你需要有一块阿里云盘，也就几十块钱，学生的话9.9。【对于个人博客，建议购买流量包，一个月也就30来块钱】</p>\n\n<p>然后：你需要有那么一点linux操作基础。</p>\n\n<p>最后：你需要有一颗客服困难和享受技术带来的幸福。</p>\n\n<hr />\n\n<h3>阿里云进行基本的优化【非必须】</h3>\n\n<p>1：修改默认登录路径。阿里云默认是/root，方便每次操作。修改默认登录设在【/home/cuihuan】</p>\n\n<p>2：修复修改路径之后的问题。修改之后会丢失默认路径很多文件，因为，阿里云将默认的配置文件放在/root下面，所以全部拷贝过去 防止再次登录出现名称问题。\n修改之后如下</p>\n\n<pre><code>[cuixiaohuan@cuihuan html]# cd\n[cuixiaohuan@cuihuan ~]# pwd\n/home/cuixiaohuan\n</code></pre>\n\n<h4>一：基于yum 搭建，做yum更新。</h4>\n\n<p>yum update</p>\n\n<p>其他常用命令可以参考：http://blog.csdn.net/phpfengzikai/article/details/7085592</p>\n\n<p>同时，更新全部的信息，用阿里云自带的：http://help.aliyun.com/knowledge_detail.htm?knowledgeId=5974184</p>\n\n<p>注意：即使这样子更新了，也会有很多需要亲自下载，后面会说到</p>\n\n<h4>二：lamp 环境搭建</h4>\n\n<p>一键安装 apache php mysql</p>\n\n<pre><code>yum -y install httpd php mysql mysql-server php-mysql httpd-manual mod_ssl mod_perl mod_auth_mysql php-mcrypt php-gd php-xml php-mbstring php-ldap php-pear php-xmlrpc mysql-connector-odbc mysql-devel libdbi-dbd-mysql\n</code></pre>\n\n<blockquote><p>问题：如果选择的是centos6.0 以上，默认没有mysql，默认是mariadb。所以需要从社区yum中获取最新的mysql， 操作过程如下</p></blockquote>\n\n<p>1：获取社区的rpm包</p>\n\n<blockquote><p>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</p></blockquote>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nRetrieving http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nPreparing...                          ################################# [100%]\nUpdating / installing...\n1:mysql-community-release-el7-5    ################################# [100%]\n[cuixiaohuan@cuihuan ~]# yum repolist enabled | grep \"mysql.*-community.*\"\n</code></pre>\n\n<p>2:查询可用的mysql和mysqlserver</p>\n\n<pre><code>yum search mysql\nmysql-connectors-community/x86_64 MySQL Connectors Community                 17\nmysql-tools-community/x86_64      MySQL Tools Community                      23\nmysql56-community/x86_64          MySQL 5.6 Community Server                184\n</code></pre>\n\n<p>3：安装</p>\n\n<pre><code>yum -y install mysql-community-server\n</code></pre>\n\n<p>4：进行基本配置，开机自动启动，启动进程【此处略去】。</p>\n\n<h4>三：环境配置和优化</h4>\n\n<p>1：apache多端口配置：</p>\n\n<p>apache一个服务器下多个端口承载不同的开发和分布任务，对于初期开发尤为重要</p>\n\n<p>在httpd.conf 增加 以下端口</p>\n\n<pre><code>Listen 1314\n&lt;VirtualHost *:1314&gt;\n    ServerAdmin cuihuan\n    DocumentRoot /var/www/1314/\n    #ServerName 1314\n    #Alias \"/var/www/1314/\"\n&lt;Directory \"/var/www/1314\"&gt;\n    Options All\n    AllowOverride All\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>重启之后基本端口对应网站搭建成功如下</p>\n\n<p>2：mysql 密码和基本配置</p>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# mysqladmin -uroot password\nNew password:\nConfirm new password:\n[cuixiaohuan@cuihuan ~]# mysql -uroot -p\n</code></pre>\n\n<p>3:开放设置mysql 远程访问权限</p>\n\n<pre><code>mysql&gt; grant all privileges on db.* to ‘用户名'@'%' identified by '密码';\nQuery OK, 0 rows affected (0.00 sec)\nmysql&gt; flush privileges;\n</code></pre>\n\n<p>4：apache 支持php配置</p>\n\n<p>按照之前步骤装载的话，php是直接配置ok的，如下图：</p>\n\n<h4>四：后续开发优化</h4>\n\n<p>安装开发中必须的cvs 和数据库管理phpmyadmin</p>\n\n<p>1：安装svn</p>\n\n<p>两个主要目的：1：是作为项目代码控制，2：文件传输服务器</p>\n\n<p>之后所做的事情就是在上面添加svn，参考：http://www.ha97.com/4467.html</p>\n\n<p>启动：</p>\n\n<pre><code>sudo svnserve -d -r /home/cuixiaohuan/svn\n</code></pre>\n\n<p>2：安装phpadmin 便于管理数据库</p>\n\n<p>绿色包，解压，配置端口即可，包地址：http://pan.baidu.com/s/1qW7pNnY</p>\n\n<p>修改下conf，我的是3606 默认3306端口。</p>\n\n<blockquote><p>通过上面步骤，安装了lamp，svn,phpmyadmin，对于常用的web开发基本都已经ok！\n接下来就可以享受该环境！</p></blockquote>\n</body>\n</html>","date":"2017-03-15T03:41:00.000Z","updated":"2017-03-15T03:41:00.000Z","path":"wp-content/uploads/2015/10/准备动作.html","title":"","comments":1,"layout":"page","_id":"cj0af9nz8005v661f2pdq4672","content":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">\n<style>\nbody {\n  font-family: Helvetica, arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.6;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: white;\n  padding: 30px; }\n\nbody > *:first-child {\n  margin-top: 0 !important; }\nbody > *:last-child {\n  margin-bottom: 0 !important; }\n\na {\n  color: #4183C4; }\na.absent {\n  color: #cc0000; }\na.anchor {\n  display: block;\n  padding-left: 30px;\n  margin-left: -30px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0; }\n\nh1, h2, h3, h4, h5, h6 {\n  margin: 20px 0 10px;\n  padding: 0;\n  font-weight: bold;\n  -webkit-font-smoothing: antialiased;\n  cursor: text;\n  position: relative; }\n\nh1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;\n  text-decoration: none; }\n\nh1 tt, h1 code {\n  font-size: inherit; }\n\nh2 tt, h2 code {\n  font-size: inherit; }\n\nh3 tt, h3 code {\n  font-size: inherit; }\n\nh4 tt, h4 code {\n  font-size: inherit; }\n\nh5 tt, h5 code {\n  font-size: inherit; }\n\nh6 tt, h6 code {\n  font-size: inherit; }\n\nh1 {\n  font-size: 28px;\n  color: black; }\n\nh2 {\n  font-size: 24px;\n  border-bottom: 1px solid #cccccc;\n  color: black; }\n\nh3 {\n  font-size: 18px; }\n\nh4 {\n  font-size: 16px; }\n\nh5 {\n  font-size: 14px; }\n\nh6 {\n  color: #777777;\n  font-size: 14px; }\n\np, blockquote, ul, ol, dl, li, table, pre {\n  margin: 15px 0; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #cccccc;\n  height: 4px;\n  padding: 0;\n}\n\nbody > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\nbody > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  body > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\nbody > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 p, h2 p, h3 p, h4 p, h5 p, h6 p {\n  margin-top: 0; }\n\nli p.first {\n  display: inline-block; }\nli {\n  margin: 0; }\nul, ol {\n  padding-left: 30px; }\n\nul :first-child, ol :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #dddddd;\n  padding: 0 15px;\n  color: #777777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 0; }\n\ntable {\n  padding: 0;border-collapse: collapse; }\n  table tr {\n    border-top: 1px solid #cccccc;\n    background-color: white;\n    margin: 0;\n    padding: 0; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n    table tr th {\n      font-weight: bold;\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr td {\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr th :first-child, table tr td :first-child {\n      margin-top: 0; }\n    table tr th :last-child, table tr td :last-child {\n      margin-bottom: 0; }\n\nimg {\n  max-width: 100%; }\n\nspan.frame {\n  display: block;\n  overflow: hidden; }\n  span.frame > span {\n    border: 1px solid #dddddd;\n    display: block;\n    float: left;\n    overflow: hidden;\n    margin: 13px 0 0;\n    padding: 7px;\n    width: auto; }\n  span.frame span img {\n    display: block;\n    float: left; }\n  span.frame span span {\n    clear: both;\n    color: #333333;\n    display: block;\n    padding: 5px 0 0; }\nspan.align-center {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-center > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: center; }\n  span.align-center span img {\n    margin: 0 auto;\n    text-align: center; }\nspan.align-right {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px 0 0;\n    text-align: right; }\n  span.align-right span img {\n    margin: 0;\n    text-align: right; }\nspan.float-left {\n  display: block;\n  margin-right: 13px;\n  overflow: hidden;\n  float: left; }\n  span.float-left span {\n    margin: 13px 0 0; }\nspan.float-right {\n  display: block;\n  margin-left: 13px;\n  overflow: hidden;\n  float: right; }\n  span.float-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: right; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px; }\n\npre code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:0 auto;\n    }\n}\n@media print {\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n\tpre {\n\t\tword-wrap: break-word;\n\t}\n}\n</style>\n<title>准备动作：</title>\n\n</head>\n<body>\n<h3>准备动作：</h3>\n\n<p>首先：你需要有一块阿里云盘，也就几十块钱，学生的话9.9。【对于个人博客，建议购买流量包，一个月也就30来块钱】</p>\n\n<p>然后：你需要有那么一点linux操作基础。</p>\n\n<p>最后：你需要有一颗客服困难和享受技术带来的幸福。</p>\n\n<hr>\n\n<h3>阿里云进行基本的优化【非必须】</h3>\n\n<p>1：修改默认登录路径。阿里云默认是/root，方便每次操作。修改默认登录设在【/home/cuihuan】</p>\n\n<p>2：修复修改路径之后的问题。修改之后会丢失默认路径很多文件，因为，阿里云将默认的配置文件放在/root下面，所以全部拷贝过去 防止再次登录出现名称问题。\n修改之后如下</p>\n\n<pre><code>[cuixiaohuan@cuihuan html]# cd\n[cuixiaohuan@cuihuan ~]# pwd\n/home/cuixiaohuan\n</code></pre>\n\n<h4>一：基于yum 搭建，做yum更新。</h4>\n\n<p>yum update</p>\n\n<p>其他常用命令可以参考：http://blog.csdn.net/phpfengzikai/article/details/7085592</p>\n\n<p>同时，更新全部的信息，用阿里云自带的：http://help.aliyun.com/knowledge_detail.htm?knowledgeId=5974184</p>\n\n<p>注意：即使这样子更新了，也会有很多需要亲自下载，后面会说到</p>\n\n<h4>二：lamp 环境搭建</h4>\n\n<p>一键安装 apache php mysql</p>\n\n<pre><code>yum -y install httpd php mysql mysql-server php-mysql httpd-manual mod_ssl mod_perl mod_auth_mysql php-mcrypt php-gd php-xml php-mbstring php-ldap php-pear php-xmlrpc mysql-connector-odbc mysql-devel libdbi-dbd-mysql\n</code></pre>\n\n<blockquote><p>问题：如果选择的是centos6.0 以上，默认没有mysql，默认是mariadb。所以需要从社区yum中获取最新的mysql， 操作过程如下</p></blockquote>\n\n<p>1：获取社区的rpm包</p>\n\n<blockquote><p>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</p></blockquote>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nRetrieving http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nPreparing...                          ################################# [100%]\nUpdating / installing...\n1:mysql-community-release-el7-5    ################################# [100%]\n[cuixiaohuan@cuihuan ~]# yum repolist enabled | grep \"mysql.*-community.*\"\n</code></pre>\n\n<p>2:查询可用的mysql和mysqlserver</p>\n\n<pre><code>yum search mysql\nmysql-connectors-community/x86_64 MySQL Connectors Community                 17\nmysql-tools-community/x86_64      MySQL Tools Community                      23\nmysql56-community/x86_64          MySQL 5.6 Community Server                184\n</code></pre>\n\n<p>3：安装</p>\n\n<pre><code>yum -y install mysql-community-server\n</code></pre>\n\n<p>4：进行基本配置，开机自动启动，启动进程【此处略去】。</p>\n\n<h4>三：环境配置和优化</h4>\n\n<p>1：apache多端口配置：</p>\n\n<p>apache一个服务器下多个端口承载不同的开发和分布任务，对于初期开发尤为重要</p>\n\n<p>在httpd.conf 增加 以下端口</p>\n\n<pre><code>Listen 1314\n&lt;VirtualHost *:1314&gt;\n    ServerAdmin cuihuan\n    DocumentRoot /var/www/1314/\n    #ServerName 1314\n    #Alias \"/var/www/1314/\"\n&lt;Directory \"/var/www/1314\"&gt;\n    Options All\n    AllowOverride All\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>重启之后基本端口对应网站搭建成功如下</p>\n\n<p>2：mysql 密码和基本配置</p>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# mysqladmin -uroot password\nNew password:\nConfirm new password:\n[cuixiaohuan@cuihuan ~]# mysql -uroot -p\n</code></pre>\n\n<p>3:开放设置mysql 远程访问权限</p>\n\n<pre><code>mysql&gt; grant all privileges on db.* to ‘用户名'@'%' identified by '密码';\nQuery OK, 0 rows affected (0.00 sec)\nmysql&gt; flush privileges;\n</code></pre>\n\n<p>4：apache 支持php配置</p>\n\n<p>按照之前步骤装载的话，php是直接配置ok的，如下图：</p>\n\n<h4>四：后续开发优化</h4>\n\n<p>安装开发中必须的cvs 和数据库管理phpmyadmin</p>\n\n<p>1：安装svn</p>\n\n<p>两个主要目的：1：是作为项目代码控制，2：文件传输服务器</p>\n\n<p>之后所做的事情就是在上面添加svn，参考：http://www.ha97.com/4467.html</p>\n\n<p>启动：</p>\n\n<pre><code>sudo svnserve -d -r /home/cuixiaohuan/svn\n</code></pre>\n\n<p>2：安装phpadmin 便于管理数据库</p>\n\n<p>绿色包，解压，配置端口即可，包地址：http://pan.baidu.com/s/1qW7pNnY</p>\n\n<p>修改下conf，我的是3606 默认3306端口。</p>\n\n<blockquote><p>通过上面步骤，安装了lamp，svn,phpmyadmin，对于常用的web开发基本都已经ok！\n接下来就可以享受该环境！</p></blockquote>\n</body>\n</html>","excerpt":"","more":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">\n<style>\nbody {\n  font-family: Helvetica, arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.6;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: white;\n  padding: 30px; }\n\nbody > *:first-child {\n  margin-top: 0 !important; }\nbody > *:last-child {\n  margin-bottom: 0 !important; }\n\na {\n  color: #4183C4; }\na.absent {\n  color: #cc0000; }\na.anchor {\n  display: block;\n  padding-left: 30px;\n  margin-left: -30px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0; }\n\nh1, h2, h3, h4, h5, h6 {\n  margin: 20px 0 10px;\n  padding: 0;\n  font-weight: bold;\n  -webkit-font-smoothing: antialiased;\n  cursor: text;\n  position: relative; }\n\nh1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;\n  text-decoration: none; }\n\nh1 tt, h1 code {\n  font-size: inherit; }\n\nh2 tt, h2 code {\n  font-size: inherit; }\n\nh3 tt, h3 code {\n  font-size: inherit; }\n\nh4 tt, h4 code {\n  font-size: inherit; }\n\nh5 tt, h5 code {\n  font-size: inherit; }\n\nh6 tt, h6 code {\n  font-size: inherit; }\n\nh1 {\n  font-size: 28px;\n  color: black; }\n\nh2 {\n  font-size: 24px;\n  border-bottom: 1px solid #cccccc;\n  color: black; }\n\nh3 {\n  font-size: 18px; }\n\nh4 {\n  font-size: 16px; }\n\nh5 {\n  font-size: 14px; }\n\nh6 {\n  color: #777777;\n  font-size: 14px; }\n\np, blockquote, ul, ol, dl, li, table, pre {\n  margin: 15px 0; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #cccccc;\n  height: 4px;\n  padding: 0;\n}\n\nbody > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\nbody > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  body > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\nbody > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 p, h2 p, h3 p, h4 p, h5 p, h6 p {\n  margin-top: 0; }\n\nli p.first {\n  display: inline-block; }\nli {\n  margin: 0; }\nul, ol {\n  padding-left: 30px; }\n\nul :first-child, ol :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #dddddd;\n  padding: 0 15px;\n  color: #777777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 0; }\n\ntable {\n  padding: 0;border-collapse: collapse; }\n  table tr {\n    border-top: 1px solid #cccccc;\n    background-color: white;\n    margin: 0;\n    padding: 0; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n    table tr th {\n      font-weight: bold;\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr td {\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr th :first-child, table tr td :first-child {\n      margin-top: 0; }\n    table tr th :last-child, table tr td :last-child {\n      margin-bottom: 0; }\n\nimg {\n  max-width: 100%; }\n\nspan.frame {\n  display: block;\n  overflow: hidden; }\n  span.frame > span {\n    border: 1px solid #dddddd;\n    display: block;\n    float: left;\n    overflow: hidden;\n    margin: 13px 0 0;\n    padding: 7px;\n    width: auto; }\n  span.frame span img {\n    display: block;\n    float: left; }\n  span.frame span span {\n    clear: both;\n    color: #333333;\n    display: block;\n    padding: 5px 0 0; }\nspan.align-center {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-center > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: center; }\n  span.align-center span img {\n    margin: 0 auto;\n    text-align: center; }\nspan.align-right {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px 0 0;\n    text-align: right; }\n  span.align-right span img {\n    margin: 0;\n    text-align: right; }\nspan.float-left {\n  display: block;\n  margin-right: 13px;\n  overflow: hidden;\n  float: left; }\n  span.float-left span {\n    margin: 13px 0 0; }\nspan.float-right {\n  display: block;\n  margin-left: 13px;\n  overflow: hidden;\n  float: right; }\n  span.float-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: right; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px; }\n\npre code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:0 auto;\n    }\n}\n@media print {\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n\tpre {\n\t\tword-wrap: break-word;\n\t}\n}\n</style>\n<title>准备动作：</title>\n\n</head>\n<body>\n<h3>准备动作：</h3>\n\n<p>首先：你需要有一块阿里云盘，也就几十块钱，学生的话9.9。【对于个人博客，建议购买流量包，一个月也就30来块钱】</p>\n\n<p>然后：你需要有那么一点linux操作基础。</p>\n\n<p>最后：你需要有一颗客服困难和享受技术带来的幸福。</p>\n\n<hr />\n\n<h3>阿里云进行基本的优化【非必须】</h3>\n\n<p>1：修改默认登录路径。阿里云默认是/root，方便每次操作。修改默认登录设在【/home/cuihuan】</p>\n\n<p>2：修复修改路径之后的问题。修改之后会丢失默认路径很多文件，因为，阿里云将默认的配置文件放在/root下面，所以全部拷贝过去 防止再次登录出现名称问题。\n修改之后如下</p>\n\n<pre><code>[cuixiaohuan@cuihuan html]# cd\n[cuixiaohuan@cuihuan ~]# pwd\n/home/cuixiaohuan\n</code></pre>\n\n<h4>一：基于yum 搭建，做yum更新。</h4>\n\n<p>yum update</p>\n\n<p>其他常用命令可以参考：http://blog.csdn.net/phpfengzikai/article/details/7085592</p>\n\n<p>同时，更新全部的信息，用阿里云自带的：http://help.aliyun.com/knowledge_detail.htm?knowledgeId=5974184</p>\n\n<p>注意：即使这样子更新了，也会有很多需要亲自下载，后面会说到</p>\n\n<h4>二：lamp 环境搭建</h4>\n\n<p>一键安装 apache php mysql</p>\n\n<pre><code>yum -y install httpd php mysql mysql-server php-mysql httpd-manual mod_ssl mod_perl mod_auth_mysql php-mcrypt php-gd php-xml php-mbstring php-ldap php-pear php-xmlrpc mysql-connector-odbc mysql-devel libdbi-dbd-mysql\n</code></pre>\n\n<blockquote><p>问题：如果选择的是centos6.0 以上，默认没有mysql，默认是mariadb。所以需要从社区yum中获取最新的mysql， 操作过程如下</p></blockquote>\n\n<p>1：获取社区的rpm包</p>\n\n<blockquote><p>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</p></blockquote>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nRetrieving http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nPreparing...                          ################################# [100%]\nUpdating / installing...\n1:mysql-community-release-el7-5    ################################# [100%]\n[cuixiaohuan@cuihuan ~]# yum repolist enabled | grep \"mysql.*-community.*\"\n</code></pre>\n\n<p>2:查询可用的mysql和mysqlserver</p>\n\n<pre><code>yum search mysql\nmysql-connectors-community/x86_64 MySQL Connectors Community                 17\nmysql-tools-community/x86_64      MySQL Tools Community                      23\nmysql56-community/x86_64          MySQL 5.6 Community Server                184\n</code></pre>\n\n<p>3：安装</p>\n\n<pre><code>yum -y install mysql-community-server\n</code></pre>\n\n<p>4：进行基本配置，开机自动启动，启动进程【此处略去】。</p>\n\n<h4>三：环境配置和优化</h4>\n\n<p>1：apache多端口配置：</p>\n\n<p>apache一个服务器下多个端口承载不同的开发和分布任务，对于初期开发尤为重要</p>\n\n<p>在httpd.conf 增加 以下端口</p>\n\n<pre><code>Listen 1314\n&lt;VirtualHost *:1314&gt;\n    ServerAdmin cuihuan\n    DocumentRoot /var/www/1314/\n    #ServerName 1314\n    #Alias \"/var/www/1314/\"\n&lt;Directory \"/var/www/1314\"&gt;\n    Options All\n    AllowOverride All\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>重启之后基本端口对应网站搭建成功如下</p>\n\n<p>2：mysql 密码和基本配置</p>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# mysqladmin -uroot password\nNew password:\nConfirm new password:\n[cuixiaohuan@cuihuan ~]# mysql -uroot -p\n</code></pre>\n\n<p>3:开放设置mysql 远程访问权限</p>\n\n<pre><code>mysql&gt; grant all privileges on db.* to ‘用户名'@'%' identified by '密码';\nQuery OK, 0 rows affected (0.00 sec)\nmysql&gt; flush privileges;\n</code></pre>\n\n<p>4：apache 支持php配置</p>\n\n<p>按照之前步骤装载的话，php是直接配置ok的，如下图：</p>\n\n<h4>四：后续开发优化</h4>\n\n<p>安装开发中必须的cvs 和数据库管理phpmyadmin</p>\n\n<p>1：安装svn</p>\n\n<p>两个主要目的：1：是作为项目代码控制，2：文件传输服务器</p>\n\n<p>之后所做的事情就是在上面添加svn，参考：http://www.ha97.com/4467.html</p>\n\n<p>启动：</p>\n\n<pre><code>sudo svnserve -d -r /home/cuixiaohuan/svn\n</code></pre>\n\n<p>2：安装phpadmin 便于管理数据库</p>\n\n<p>绿色包，解压，配置端口即可，包地址：http://pan.baidu.com/s/1qW7pNnY</p>\n\n<p>修改下conf，我的是3606 默认3306端口。</p>\n\n<blockquote><p>通过上面步骤，安装了lamp，svn,phpmyadmin，对于常用的web开发基本都已经ok！\n接下来就可以享受该环境！</p></blockquote>\n</body>\n</html>"},{"_content":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">\n<style>\nbody {\n  font-family: Helvetica, arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.6;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: white;\n  padding: 30px; }\n\nbody > *:first-child {\n  margin-top: 0 !important; }\nbody > *:last-child {\n  margin-bottom: 0 !important; }\n\na {\n  color: #4183C4; }\na.absent {\n  color: #cc0000; }\na.anchor {\n  display: block;\n  padding-left: 30px;\n  margin-left: -30px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0; }\n\nh1, h2, h3, h4, h5, h6 {\n  margin: 20px 0 10px;\n  padding: 0;\n  font-weight: bold;\n  -webkit-font-smoothing: antialiased;\n  cursor: text;\n  position: relative; }\n\nh1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;\n  text-decoration: none; }\n\nh1 tt, h1 code {\n  font-size: inherit; }\n\nh2 tt, h2 code {\n  font-size: inherit; }\n\nh3 tt, h3 code {\n  font-size: inherit; }\n\nh4 tt, h4 code {\n  font-size: inherit; }\n\nh5 tt, h5 code {\n  font-size: inherit; }\n\nh6 tt, h6 code {\n  font-size: inherit; }\n\nh1 {\n  font-size: 28px;\n  color: black; }\n\nh2 {\n  font-size: 24px;\n  border-bottom: 1px solid #cccccc;\n  color: black; }\n\nh3 {\n  font-size: 18px; }\n\nh4 {\n  font-size: 16px; }\n\nh5 {\n  font-size: 14px; }\n\nh6 {\n  color: #777777;\n  font-size: 14px; }\n\np, blockquote, ul, ol, dl, li, table, pre {\n  margin: 15px 0; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #cccccc;\n  height: 4px;\n  padding: 0;\n}\n\nbody > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\nbody > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  body > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\nbody > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 p, h2 p, h3 p, h4 p, h5 p, h6 p {\n  margin-top: 0; }\n\nli p.first {\n  display: inline-block; }\nli {\n  margin: 0; }\nul, ol {\n  padding-left: 30px; }\n\nul :first-child, ol :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #dddddd;\n  padding: 0 15px;\n  color: #777777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 0; }\n\ntable {\n  padding: 0;border-collapse: collapse; }\n  table tr {\n    border-top: 1px solid #cccccc;\n    background-color: white;\n    margin: 0;\n    padding: 0; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n    table tr th {\n      font-weight: bold;\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr td {\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr th :first-child, table tr td :first-child {\n      margin-top: 0; }\n    table tr th :last-child, table tr td :last-child {\n      margin-bottom: 0; }\n\nimg {\n  max-width: 100%; }\n\nspan.frame {\n  display: block;\n  overflow: hidden; }\n  span.frame > span {\n    border: 1px solid #dddddd;\n    display: block;\n    float: left;\n    overflow: hidden;\n    margin: 13px 0 0;\n    padding: 7px;\n    width: auto; }\n  span.frame span img {\n    display: block;\n    float: left; }\n  span.frame span span {\n    clear: both;\n    color: #333333;\n    display: block;\n    padding: 5px 0 0; }\nspan.align-center {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-center > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: center; }\n  span.align-center span img {\n    margin: 0 auto;\n    text-align: center; }\nspan.align-right {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px 0 0;\n    text-align: right; }\n  span.align-right span img {\n    margin: 0;\n    text-align: right; }\nspan.float-left {\n  display: block;\n  margin-right: 13px;\n  overflow: hidden;\n  float: left; }\n  span.float-left span {\n    margin: 13px 0 0; }\nspan.float-right {\n  display: block;\n  margin-left: 13px;\n  overflow: hidden;\n  float: right; }\n  span.float-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: right; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px; }\n\npre code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:0 auto;\n    }\n}\n@media print {\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n\tpre {\n\t\tword-wrap: break-word;\n\t}\n}\n</style>\n<title>准备动作：</title>\n\n</head>\n<body>\n<h3>准备动作：</h3>\n\n<p>首先：你需要有一块阿里云盘，也就几十块钱，学生的话9.9。【对于个人博客，建议购买流量包，一个月也就30来块钱】</p>\n\n<p>然后：你需要有那么一点linux操作基础。</p>\n\n<p>最后：你需要有一颗客服困难和享受技术带来的幸福。</p>\n\n<hr />\n\n<h3>阿里云进行基本的优化【非必须】</h3>\n\n<p>1：修改默认登录路径。阿里云默认是/root，方便每次操作。修改默认登录设在【/home/cuihuan】</p>\n\n<p>2：修复修改路径之后的问题。修改之后会丢失默认路径很多文件，因为，阿里云将默认的配置文件放在/root下面，所以全部拷贝过去 防止再次登录出现名称问题。\n修改之后如下</p>\n\n<pre><code>[cuixiaohuan@cuihuan html]# cd\n[cuixiaohuan@cuihuan ~]# pwd\n/home/cuixiaohuan\n</code></pre>\n\n<h4>一：基于yum 搭建，做yum更新。</h4>\n\n<p>yum update</p>\n\n<p>其他常用命令可以参考：http://blog.csdn.net/phpfengzikai/article/details/7085592</p>\n\n<p>同时，更新全部的信息，用阿里云自带的：http://help.aliyun.com/knowledge_detail.htm?knowledgeId=5974184</p>\n\n<p>注意：即使这样子更新了，也会有很多需要亲自下载，后面会说到</p>\n\n<h4>二：lamp 环境搭建</h4>\n\n<p>一键安装 apache php mysql</p>\n\n<pre><code>yum -y install httpd php mysql mysql-server php-mysql httpd-manual mod_ssl mod_perl mod_auth_mysql php-mcrypt php-gd php-xml php-mbstring php-ldap php-pear php-xmlrpc mysql-connector-odbc mysql-devel libdbi-dbd-mysql\n</code></pre>\n\n<blockquote><p>问题：如果选择的是centos6.0 以上，默认没有mysql，默认是mariadb。所以需要从社区yum中获取最新的mysql， 操作过程如下</p></blockquote>\n\n<p>1：获取社区的rpm包</p>\n\n<blockquote><p>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</p></blockquote>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nRetrieving http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nPreparing...                          ################################# [100%]\nUpdating / installing...\n1:mysql-community-release-el7-5    ################################# [100%]\n[cuixiaohuan@cuihuan ~]# yum repolist enabled | grep \"mysql.*-community.*\"\n</code></pre>\n\n<p>2:查询可用的mysql和mysqlserver</p>\n\n<pre><code>yum search mysql\nmysql-connectors-community/x86_64 MySQL Connectors Community                 17\nmysql-tools-community/x86_64      MySQL Tools Community                      23\nmysql56-community/x86_64          MySQL 5.6 Community Server                184\n</code></pre>\n\n<p>3：安装</p>\n\n<pre><code>yum -y install mysql-community-server\n</code></pre>\n\n<p>4：进行基本配置，开机自动启动，启动进程【此处略去】。</p>\n\n<h4>三：环境配置和优化</h4>\n\n<p>1：apache多端口配置：</p>\n\n<p>apache一个服务器下多个端口承载不同的开发和分布任务，对于初期开发尤为重要</p>\n\n<p>在httpd.conf 增加 以下端口</p>\n\n<pre><code>Listen 1314\n&lt;VirtualHost *:1314&gt;\n    ServerAdmin cuihuan\n    DocumentRoot /var/www/1314/\n    #ServerName 1314\n    #Alias \"/var/www/1314/\"\n&lt;Directory \"/var/www/1314\"&gt;\n    Options All\n    AllowOverride All\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>重启之后基本端口对应网站搭建成功如下</p>\n\n<p>2：mysql 密码和基本配置</p>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# mysqladmin -uroot password\nNew password:\nConfirm new password:\n[cuixiaohuan@cuihuan ~]# mysql -uroot -p\n</code></pre>\n\n<p>3:开放设置mysql 远程访问权限</p>\n\n<pre><code>mysql&gt; grant all privileges on db.* to ‘用户名'@'%' identified by '密码';\nQuery OK, 0 rows affected (0.00 sec)\nmysql&gt; flush privileges;\n</code></pre>\n\n<p>4：apache 支持php配置</p>\n\n<p>按照之前步骤装载的话，php是直接配置ok的，如下图：</p>\n\n<h4>四：后续开发优化</h4>\n\n<p>安装开发中必须的cvs 和数据库管理phpmyadmin</p>\n\n<p>1：安装svn</p>\n\n<p>两个主要目的：1：是作为项目代码控制，2：文件传输服务器</p>\n\n<p>之后所做的事情就是在上面添加svn，参考：http://www.ha97.com/4467.html</p>\n\n<p>启动：</p>\n\n<pre><code>sudo svnserve -d -r /home/cuixiaohuan/svn\n</code></pre>\n\n<p>2：安装phpadmin 便于管理数据库</p>\n\n<p>绿色包，解压，配置端口即可，包地址：http://pan.baidu.com/s/1qW7pNnY</p>\n\n<p>修改下conf，我的是3606 默认3306端口。</p>\n\n<blockquote><p>通过上面步骤，安装了lamp，svn,phpmyadmin，对于常用的web开发基本都已经ok！\n接下来就可以享受该环境！</p></blockquote>\n</body>\n</html>","source":"wp_content/uploads/2015/10/准备动作.html","raw":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">\n<style>\nbody {\n  font-family: Helvetica, arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.6;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: white;\n  padding: 30px; }\n\nbody > *:first-child {\n  margin-top: 0 !important; }\nbody > *:last-child {\n  margin-bottom: 0 !important; }\n\na {\n  color: #4183C4; }\na.absent {\n  color: #cc0000; }\na.anchor {\n  display: block;\n  padding-left: 30px;\n  margin-left: -30px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0; }\n\nh1, h2, h3, h4, h5, h6 {\n  margin: 20px 0 10px;\n  padding: 0;\n  font-weight: bold;\n  -webkit-font-smoothing: antialiased;\n  cursor: text;\n  position: relative; }\n\nh1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;\n  text-decoration: none; }\n\nh1 tt, h1 code {\n  font-size: inherit; }\n\nh2 tt, h2 code {\n  font-size: inherit; }\n\nh3 tt, h3 code {\n  font-size: inherit; }\n\nh4 tt, h4 code {\n  font-size: inherit; }\n\nh5 tt, h5 code {\n  font-size: inherit; }\n\nh6 tt, h6 code {\n  font-size: inherit; }\n\nh1 {\n  font-size: 28px;\n  color: black; }\n\nh2 {\n  font-size: 24px;\n  border-bottom: 1px solid #cccccc;\n  color: black; }\n\nh3 {\n  font-size: 18px; }\n\nh4 {\n  font-size: 16px; }\n\nh5 {\n  font-size: 14px; }\n\nh6 {\n  color: #777777;\n  font-size: 14px; }\n\np, blockquote, ul, ol, dl, li, table, pre {\n  margin: 15px 0; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #cccccc;\n  height: 4px;\n  padding: 0;\n}\n\nbody > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\nbody > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  body > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\nbody > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 p, h2 p, h3 p, h4 p, h5 p, h6 p {\n  margin-top: 0; }\n\nli p.first {\n  display: inline-block; }\nli {\n  margin: 0; }\nul, ol {\n  padding-left: 30px; }\n\nul :first-child, ol :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #dddddd;\n  padding: 0 15px;\n  color: #777777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 0; }\n\ntable {\n  padding: 0;border-collapse: collapse; }\n  table tr {\n    border-top: 1px solid #cccccc;\n    background-color: white;\n    margin: 0;\n    padding: 0; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n    table tr th {\n      font-weight: bold;\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr td {\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr th :first-child, table tr td :first-child {\n      margin-top: 0; }\n    table tr th :last-child, table tr td :last-child {\n      margin-bottom: 0; }\n\nimg {\n  max-width: 100%; }\n\nspan.frame {\n  display: block;\n  overflow: hidden; }\n  span.frame > span {\n    border: 1px solid #dddddd;\n    display: block;\n    float: left;\n    overflow: hidden;\n    margin: 13px 0 0;\n    padding: 7px;\n    width: auto; }\n  span.frame span img {\n    display: block;\n    float: left; }\n  span.frame span span {\n    clear: both;\n    color: #333333;\n    display: block;\n    padding: 5px 0 0; }\nspan.align-center {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-center > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: center; }\n  span.align-center span img {\n    margin: 0 auto;\n    text-align: center; }\nspan.align-right {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px 0 0;\n    text-align: right; }\n  span.align-right span img {\n    margin: 0;\n    text-align: right; }\nspan.float-left {\n  display: block;\n  margin-right: 13px;\n  overflow: hidden;\n  float: left; }\n  span.float-left span {\n    margin: 13px 0 0; }\nspan.float-right {\n  display: block;\n  margin-left: 13px;\n  overflow: hidden;\n  float: right; }\n  span.float-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: right; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px; }\n\npre code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:0 auto;\n    }\n}\n@media print {\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n\tpre {\n\t\tword-wrap: break-word;\n\t}\n}\n</style>\n<title>准备动作：</title>\n\n</head>\n<body>\n<h3>准备动作：</h3>\n\n<p>首先：你需要有一块阿里云盘，也就几十块钱，学生的话9.9。【对于个人博客，建议购买流量包，一个月也就30来块钱】</p>\n\n<p>然后：你需要有那么一点linux操作基础。</p>\n\n<p>最后：你需要有一颗客服困难和享受技术带来的幸福。</p>\n\n<hr />\n\n<h3>阿里云进行基本的优化【非必须】</h3>\n\n<p>1：修改默认登录路径。阿里云默认是/root，方便每次操作。修改默认登录设在【/home/cuihuan】</p>\n\n<p>2：修复修改路径之后的问题。修改之后会丢失默认路径很多文件，因为，阿里云将默认的配置文件放在/root下面，所以全部拷贝过去 防止再次登录出现名称问题。\n修改之后如下</p>\n\n<pre><code>[cuixiaohuan@cuihuan html]# cd\n[cuixiaohuan@cuihuan ~]# pwd\n/home/cuixiaohuan\n</code></pre>\n\n<h4>一：基于yum 搭建，做yum更新。</h4>\n\n<p>yum update</p>\n\n<p>其他常用命令可以参考：http://blog.csdn.net/phpfengzikai/article/details/7085592</p>\n\n<p>同时，更新全部的信息，用阿里云自带的：http://help.aliyun.com/knowledge_detail.htm?knowledgeId=5974184</p>\n\n<p>注意：即使这样子更新了，也会有很多需要亲自下载，后面会说到</p>\n\n<h4>二：lamp 环境搭建</h4>\n\n<p>一键安装 apache php mysql</p>\n\n<pre><code>yum -y install httpd php mysql mysql-server php-mysql httpd-manual mod_ssl mod_perl mod_auth_mysql php-mcrypt php-gd php-xml php-mbstring php-ldap php-pear php-xmlrpc mysql-connector-odbc mysql-devel libdbi-dbd-mysql\n</code></pre>\n\n<blockquote><p>问题：如果选择的是centos6.0 以上，默认没有mysql，默认是mariadb。所以需要从社区yum中获取最新的mysql， 操作过程如下</p></blockquote>\n\n<p>1：获取社区的rpm包</p>\n\n<blockquote><p>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</p></blockquote>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nRetrieving http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nPreparing...                          ################################# [100%]\nUpdating / installing...\n1:mysql-community-release-el7-5    ################################# [100%]\n[cuixiaohuan@cuihuan ~]# yum repolist enabled | grep \"mysql.*-community.*\"\n</code></pre>\n\n<p>2:查询可用的mysql和mysqlserver</p>\n\n<pre><code>yum search mysql\nmysql-connectors-community/x86_64 MySQL Connectors Community                 17\nmysql-tools-community/x86_64      MySQL Tools Community                      23\nmysql56-community/x86_64          MySQL 5.6 Community Server                184\n</code></pre>\n\n<p>3：安装</p>\n\n<pre><code>yum -y install mysql-community-server\n</code></pre>\n\n<p>4：进行基本配置，开机自动启动，启动进程【此处略去】。</p>\n\n<h4>三：环境配置和优化</h4>\n\n<p>1：apache多端口配置：</p>\n\n<p>apache一个服务器下多个端口承载不同的开发和分布任务，对于初期开发尤为重要</p>\n\n<p>在httpd.conf 增加 以下端口</p>\n\n<pre><code>Listen 1314\n&lt;VirtualHost *:1314&gt;\n    ServerAdmin cuihuan\n    DocumentRoot /var/www/1314/\n    #ServerName 1314\n    #Alias \"/var/www/1314/\"\n&lt;Directory \"/var/www/1314\"&gt;\n    Options All\n    AllowOverride All\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>重启之后基本端口对应网站搭建成功如下</p>\n\n<p>2：mysql 密码和基本配置</p>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# mysqladmin -uroot password\nNew password:\nConfirm new password:\n[cuixiaohuan@cuihuan ~]# mysql -uroot -p\n</code></pre>\n\n<p>3:开放设置mysql 远程访问权限</p>\n\n<pre><code>mysql&gt; grant all privileges on db.* to ‘用户名'@'%' identified by '密码';\nQuery OK, 0 rows affected (0.00 sec)\nmysql&gt; flush privileges;\n</code></pre>\n\n<p>4：apache 支持php配置</p>\n\n<p>按照之前步骤装载的话，php是直接配置ok的，如下图：</p>\n\n<h4>四：后续开发优化</h4>\n\n<p>安装开发中必须的cvs 和数据库管理phpmyadmin</p>\n\n<p>1：安装svn</p>\n\n<p>两个主要目的：1：是作为项目代码控制，2：文件传输服务器</p>\n\n<p>之后所做的事情就是在上面添加svn，参考：http://www.ha97.com/4467.html</p>\n\n<p>启动：</p>\n\n<pre><code>sudo svnserve -d -r /home/cuixiaohuan/svn\n</code></pre>\n\n<p>2：安装phpadmin 便于管理数据库</p>\n\n<p>绿色包，解压，配置端口即可，包地址：http://pan.baidu.com/s/1qW7pNnY</p>\n\n<p>修改下conf，我的是3606 默认3306端口。</p>\n\n<blockquote><p>通过上面步骤，安装了lamp，svn,phpmyadmin，对于常用的web开发基本都已经ok！\n接下来就可以享受该环境！</p></blockquote>\n</body>\n</html>","date":"2017-03-15T03:41:00.000Z","updated":"2017-03-15T03:41:00.000Z","path":"wp_content/uploads/2015/10/准备动作.html","title":"","comments":1,"layout":"page","_id":"cj0af9nz9005w661f91q6htwb","content":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">\n<style>\nbody {\n  font-family: Helvetica, arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.6;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: white;\n  padding: 30px; }\n\nbody > *:first-child {\n  margin-top: 0 !important; }\nbody > *:last-child {\n  margin-bottom: 0 !important; }\n\na {\n  color: #4183C4; }\na.absent {\n  color: #cc0000; }\na.anchor {\n  display: block;\n  padding-left: 30px;\n  margin-left: -30px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0; }\n\nh1, h2, h3, h4, h5, h6 {\n  margin: 20px 0 10px;\n  padding: 0;\n  font-weight: bold;\n  -webkit-font-smoothing: antialiased;\n  cursor: text;\n  position: relative; }\n\nh1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;\n  text-decoration: none; }\n\nh1 tt, h1 code {\n  font-size: inherit; }\n\nh2 tt, h2 code {\n  font-size: inherit; }\n\nh3 tt, h3 code {\n  font-size: inherit; }\n\nh4 tt, h4 code {\n  font-size: inherit; }\n\nh5 tt, h5 code {\n  font-size: inherit; }\n\nh6 tt, h6 code {\n  font-size: inherit; }\n\nh1 {\n  font-size: 28px;\n  color: black; }\n\nh2 {\n  font-size: 24px;\n  border-bottom: 1px solid #cccccc;\n  color: black; }\n\nh3 {\n  font-size: 18px; }\n\nh4 {\n  font-size: 16px; }\n\nh5 {\n  font-size: 14px; }\n\nh6 {\n  color: #777777;\n  font-size: 14px; }\n\np, blockquote, ul, ol, dl, li, table, pre {\n  margin: 15px 0; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #cccccc;\n  height: 4px;\n  padding: 0;\n}\n\nbody > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\nbody > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  body > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\nbody > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 p, h2 p, h3 p, h4 p, h5 p, h6 p {\n  margin-top: 0; }\n\nli p.first {\n  display: inline-block; }\nli {\n  margin: 0; }\nul, ol {\n  padding-left: 30px; }\n\nul :first-child, ol :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #dddddd;\n  padding: 0 15px;\n  color: #777777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 0; }\n\ntable {\n  padding: 0;border-collapse: collapse; }\n  table tr {\n    border-top: 1px solid #cccccc;\n    background-color: white;\n    margin: 0;\n    padding: 0; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n    table tr th {\n      font-weight: bold;\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr td {\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr th :first-child, table tr td :first-child {\n      margin-top: 0; }\n    table tr th :last-child, table tr td :last-child {\n      margin-bottom: 0; }\n\nimg {\n  max-width: 100%; }\n\nspan.frame {\n  display: block;\n  overflow: hidden; }\n  span.frame > span {\n    border: 1px solid #dddddd;\n    display: block;\n    float: left;\n    overflow: hidden;\n    margin: 13px 0 0;\n    padding: 7px;\n    width: auto; }\n  span.frame span img {\n    display: block;\n    float: left; }\n  span.frame span span {\n    clear: both;\n    color: #333333;\n    display: block;\n    padding: 5px 0 0; }\nspan.align-center {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-center > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: center; }\n  span.align-center span img {\n    margin: 0 auto;\n    text-align: center; }\nspan.align-right {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px 0 0;\n    text-align: right; }\n  span.align-right span img {\n    margin: 0;\n    text-align: right; }\nspan.float-left {\n  display: block;\n  margin-right: 13px;\n  overflow: hidden;\n  float: left; }\n  span.float-left span {\n    margin: 13px 0 0; }\nspan.float-right {\n  display: block;\n  margin-left: 13px;\n  overflow: hidden;\n  float: right; }\n  span.float-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: right; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px; }\n\npre code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:0 auto;\n    }\n}\n@media print {\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n\tpre {\n\t\tword-wrap: break-word;\n\t}\n}\n</style>\n<title>准备动作：</title>\n\n</head>\n<body>\n<h3>准备动作：</h3>\n\n<p>首先：你需要有一块阿里云盘，也就几十块钱，学生的话9.9。【对于个人博客，建议购买流量包，一个月也就30来块钱】</p>\n\n<p>然后：你需要有那么一点linux操作基础。</p>\n\n<p>最后：你需要有一颗客服困难和享受技术带来的幸福。</p>\n\n<hr>\n\n<h3>阿里云进行基本的优化【非必须】</h3>\n\n<p>1：修改默认登录路径。阿里云默认是/root，方便每次操作。修改默认登录设在【/home/cuihuan】</p>\n\n<p>2：修复修改路径之后的问题。修改之后会丢失默认路径很多文件，因为，阿里云将默认的配置文件放在/root下面，所以全部拷贝过去 防止再次登录出现名称问题。\n修改之后如下</p>\n\n<pre><code>[cuixiaohuan@cuihuan html]# cd\n[cuixiaohuan@cuihuan ~]# pwd\n/home/cuixiaohuan\n</code></pre>\n\n<h4>一：基于yum 搭建，做yum更新。</h4>\n\n<p>yum update</p>\n\n<p>其他常用命令可以参考：http://blog.csdn.net/phpfengzikai/article/details/7085592</p>\n\n<p>同时，更新全部的信息，用阿里云自带的：http://help.aliyun.com/knowledge_detail.htm?knowledgeId=5974184</p>\n\n<p>注意：即使这样子更新了，也会有很多需要亲自下载，后面会说到</p>\n\n<h4>二：lamp 环境搭建</h4>\n\n<p>一键安装 apache php mysql</p>\n\n<pre><code>yum -y install httpd php mysql mysql-server php-mysql httpd-manual mod_ssl mod_perl mod_auth_mysql php-mcrypt php-gd php-xml php-mbstring php-ldap php-pear php-xmlrpc mysql-connector-odbc mysql-devel libdbi-dbd-mysql\n</code></pre>\n\n<blockquote><p>问题：如果选择的是centos6.0 以上，默认没有mysql，默认是mariadb。所以需要从社区yum中获取最新的mysql， 操作过程如下</p></blockquote>\n\n<p>1：获取社区的rpm包</p>\n\n<blockquote><p>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</p></blockquote>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nRetrieving http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nPreparing...                          ################################# [100%]\nUpdating / installing...\n1:mysql-community-release-el7-5    ################################# [100%]\n[cuixiaohuan@cuihuan ~]# yum repolist enabled | grep \"mysql.*-community.*\"\n</code></pre>\n\n<p>2:查询可用的mysql和mysqlserver</p>\n\n<pre><code>yum search mysql\nmysql-connectors-community/x86_64 MySQL Connectors Community                 17\nmysql-tools-community/x86_64      MySQL Tools Community                      23\nmysql56-community/x86_64          MySQL 5.6 Community Server                184\n</code></pre>\n\n<p>3：安装</p>\n\n<pre><code>yum -y install mysql-community-server\n</code></pre>\n\n<p>4：进行基本配置，开机自动启动，启动进程【此处略去】。</p>\n\n<h4>三：环境配置和优化</h4>\n\n<p>1：apache多端口配置：</p>\n\n<p>apache一个服务器下多个端口承载不同的开发和分布任务，对于初期开发尤为重要</p>\n\n<p>在httpd.conf 增加 以下端口</p>\n\n<pre><code>Listen 1314\n&lt;VirtualHost *:1314&gt;\n    ServerAdmin cuihuan\n    DocumentRoot /var/www/1314/\n    #ServerName 1314\n    #Alias \"/var/www/1314/\"\n&lt;Directory \"/var/www/1314\"&gt;\n    Options All\n    AllowOverride All\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>重启之后基本端口对应网站搭建成功如下</p>\n\n<p>2：mysql 密码和基本配置</p>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# mysqladmin -uroot password\nNew password:\nConfirm new password:\n[cuixiaohuan@cuihuan ~]# mysql -uroot -p\n</code></pre>\n\n<p>3:开放设置mysql 远程访问权限</p>\n\n<pre><code>mysql&gt; grant all privileges on db.* to ‘用户名'@'%' identified by '密码';\nQuery OK, 0 rows affected (0.00 sec)\nmysql&gt; flush privileges;\n</code></pre>\n\n<p>4：apache 支持php配置</p>\n\n<p>按照之前步骤装载的话，php是直接配置ok的，如下图：</p>\n\n<h4>四：后续开发优化</h4>\n\n<p>安装开发中必须的cvs 和数据库管理phpmyadmin</p>\n\n<p>1：安装svn</p>\n\n<p>两个主要目的：1：是作为项目代码控制，2：文件传输服务器</p>\n\n<p>之后所做的事情就是在上面添加svn，参考：http://www.ha97.com/4467.html</p>\n\n<p>启动：</p>\n\n<pre><code>sudo svnserve -d -r /home/cuixiaohuan/svn\n</code></pre>\n\n<p>2：安装phpadmin 便于管理数据库</p>\n\n<p>绿色包，解压，配置端口即可，包地址：http://pan.baidu.com/s/1qW7pNnY</p>\n\n<p>修改下conf，我的是3606 默认3306端口。</p>\n\n<blockquote><p>通过上面步骤，安装了lamp，svn,phpmyadmin，对于常用的web开发基本都已经ok！\n接下来就可以享受该环境！</p></blockquote>\n</body>\n</html>","excerpt":"","more":"<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">\n<style>\nbody {\n  font-family: Helvetica, arial, sans-serif;\n  font-size: 14px;\n  line-height: 1.6;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  background-color: white;\n  padding: 30px; }\n\nbody > *:first-child {\n  margin-top: 0 !important; }\nbody > *:last-child {\n  margin-bottom: 0 !important; }\n\na {\n  color: #4183C4; }\na.absent {\n  color: #cc0000; }\na.anchor {\n  display: block;\n  padding-left: 30px;\n  margin-left: -30px;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0; }\n\nh1, h2, h3, h4, h5, h6 {\n  margin: 20px 0 10px;\n  padding: 0;\n  font-weight: bold;\n  -webkit-font-smoothing: antialiased;\n  cursor: text;\n  position: relative; }\n\nh1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;\n  text-decoration: none; }\n\nh1 tt, h1 code {\n  font-size: inherit; }\n\nh2 tt, h2 code {\n  font-size: inherit; }\n\nh3 tt, h3 code {\n  font-size: inherit; }\n\nh4 tt, h4 code {\n  font-size: inherit; }\n\nh5 tt, h5 code {\n  font-size: inherit; }\n\nh6 tt, h6 code {\n  font-size: inherit; }\n\nh1 {\n  font-size: 28px;\n  color: black; }\n\nh2 {\n  font-size: 24px;\n  border-bottom: 1px solid #cccccc;\n  color: black; }\n\nh3 {\n  font-size: 18px; }\n\nh4 {\n  font-size: 16px; }\n\nh5 {\n  font-size: 14px; }\n\nh6 {\n  color: #777777;\n  font-size: 14px; }\n\np, blockquote, ul, ol, dl, li, table, pre {\n  margin: 15px 0; }\n\nhr {\n  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;\n  border: 0 none;\n  color: #cccccc;\n  height: 4px;\n  padding: 0;\n}\n\nbody > h2:first-child {\n  margin-top: 0;\n  padding-top: 0; }\nbody > h1:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n  body > h1:first-child + h2 {\n    margin-top: 0;\n    padding-top: 0; }\nbody > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {\n  margin-top: 0;\n  padding-top: 0; }\n\na:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {\n  margin-top: 0;\n  padding-top: 0; }\n\nh1 p, h2 p, h3 p, h4 p, h5 p, h6 p {\n  margin-top: 0; }\n\nli p.first {\n  display: inline-block; }\nli {\n  margin: 0; }\nul, ol {\n  padding-left: 30px; }\n\nul :first-child, ol :first-child {\n  margin-top: 0; }\n\ndl {\n  padding: 0; }\n  dl dt {\n    font-size: 14px;\n    font-weight: bold;\n    font-style: italic;\n    padding: 0;\n    margin: 15px 0 5px; }\n    dl dt:first-child {\n      padding: 0; }\n    dl dt > :first-child {\n      margin-top: 0; }\n    dl dt > :last-child {\n      margin-bottom: 0; }\n  dl dd {\n    margin: 0 0 15px;\n    padding: 0 15px; }\n    dl dd > :first-child {\n      margin-top: 0; }\n    dl dd > :last-child {\n      margin-bottom: 0; }\n\nblockquote {\n  border-left: 4px solid #dddddd;\n  padding: 0 15px;\n  color: #777777; }\n  blockquote > :first-child {\n    margin-top: 0; }\n  blockquote > :last-child {\n    margin-bottom: 0; }\n\ntable {\n  padding: 0;border-collapse: collapse; }\n  table tr {\n    border-top: 1px solid #cccccc;\n    background-color: white;\n    margin: 0;\n    padding: 0; }\n    table tr:nth-child(2n) {\n      background-color: #f8f8f8; }\n    table tr th {\n      font-weight: bold;\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr td {\n      border: 1px solid #cccccc;\n      margin: 0;\n      padding: 6px 13px; }\n    table tr th :first-child, table tr td :first-child {\n      margin-top: 0; }\n    table tr th :last-child, table tr td :last-child {\n      margin-bottom: 0; }\n\nimg {\n  max-width: 100%; }\n\nspan.frame {\n  display: block;\n  overflow: hidden; }\n  span.frame > span {\n    border: 1px solid #dddddd;\n    display: block;\n    float: left;\n    overflow: hidden;\n    margin: 13px 0 0;\n    padding: 7px;\n    width: auto; }\n  span.frame span img {\n    display: block;\n    float: left; }\n  span.frame span span {\n    clear: both;\n    color: #333333;\n    display: block;\n    padding: 5px 0 0; }\nspan.align-center {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-center > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: center; }\n  span.align-center span img {\n    margin: 0 auto;\n    text-align: center; }\nspan.align-right {\n  display: block;\n  overflow: hidden;\n  clear: both; }\n  span.align-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px 0 0;\n    text-align: right; }\n  span.align-right span img {\n    margin: 0;\n    text-align: right; }\nspan.float-left {\n  display: block;\n  margin-right: 13px;\n  overflow: hidden;\n  float: left; }\n  span.float-left span {\n    margin: 13px 0 0; }\nspan.float-right {\n  display: block;\n  margin-left: 13px;\n  overflow: hidden;\n  float: right; }\n  span.float-right > span {\n    display: block;\n    overflow: hidden;\n    margin: 13px auto 0;\n    text-align: right; }\n\ncode, tt {\n  margin: 0 2px;\n  padding: 0 5px;\n  white-space: nowrap;\n  border: 1px solid #eaeaea;\n  background-color: #f8f8f8;\n  border-radius: 3px; }\n\npre code {\n  margin: 0;\n  padding: 0;\n  white-space: pre;\n  border: none;\n  background: transparent; }\n\n.highlight pre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n\npre {\n  background-color: #f8f8f8;\n  border: 1px solid #cccccc;\n  font-size: 13px;\n  line-height: 19px;\n  overflow: auto;\n  padding: 6px 10px;\n  border-radius: 3px; }\n  pre code, pre tt {\n    background-color: transparent;\n    border: none; }\n\nsup {\n    font-size: 0.83em;\n    vertical-align: super;\n    line-height: 0;\n}\n* {\n\t-webkit-print-color-adjust: exact;\n}\n@media screen and (min-width: 914px) {\n    body {\n        width: 854px;\n        margin:0 auto;\n    }\n}\n@media print {\n\ttable, pre {\n\t\tpage-break-inside: avoid;\n\t}\n\tpre {\n\t\tword-wrap: break-word;\n\t}\n}\n</style>\n<title>准备动作：</title>\n\n</head>\n<body>\n<h3>准备动作：</h3>\n\n<p>首先：你需要有一块阿里云盘，也就几十块钱，学生的话9.9。【对于个人博客，建议购买流量包，一个月也就30来块钱】</p>\n\n<p>然后：你需要有那么一点linux操作基础。</p>\n\n<p>最后：你需要有一颗客服困难和享受技术带来的幸福。</p>\n\n<hr />\n\n<h3>阿里云进行基本的优化【非必须】</h3>\n\n<p>1：修改默认登录路径。阿里云默认是/root，方便每次操作。修改默认登录设在【/home/cuihuan】</p>\n\n<p>2：修复修改路径之后的问题。修改之后会丢失默认路径很多文件，因为，阿里云将默认的配置文件放在/root下面，所以全部拷贝过去 防止再次登录出现名称问题。\n修改之后如下</p>\n\n<pre><code>[cuixiaohuan@cuihuan html]# cd\n[cuixiaohuan@cuihuan ~]# pwd\n/home/cuixiaohuan\n</code></pre>\n\n<h4>一：基于yum 搭建，做yum更新。</h4>\n\n<p>yum update</p>\n\n<p>其他常用命令可以参考：http://blog.csdn.net/phpfengzikai/article/details/7085592</p>\n\n<p>同时，更新全部的信息，用阿里云自带的：http://help.aliyun.com/knowledge_detail.htm?knowledgeId=5974184</p>\n\n<p>注意：即使这样子更新了，也会有很多需要亲自下载，后面会说到</p>\n\n<h4>二：lamp 环境搭建</h4>\n\n<p>一键安装 apache php mysql</p>\n\n<pre><code>yum -y install httpd php mysql mysql-server php-mysql httpd-manual mod_ssl mod_perl mod_auth_mysql php-mcrypt php-gd php-xml php-mbstring php-ldap php-pear php-xmlrpc mysql-connector-odbc mysql-devel libdbi-dbd-mysql\n</code></pre>\n\n<blockquote><p>问题：如果选择的是centos6.0 以上，默认没有mysql，默认是mariadb。所以需要从社区yum中获取最新的mysql， 操作过程如下</p></blockquote>\n\n<p>1：获取社区的rpm包</p>\n\n<blockquote><p>rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm</p></blockquote>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# rpm -Uvh http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nRetrieving http://dev.mysql.com/get/mysql-community-release-el7-5.noarch.rpm\nPreparing...                          ################################# [100%]\nUpdating / installing...\n1:mysql-community-release-el7-5    ################################# [100%]\n[cuixiaohuan@cuihuan ~]# yum repolist enabled | grep \"mysql.*-community.*\"\n</code></pre>\n\n<p>2:查询可用的mysql和mysqlserver</p>\n\n<pre><code>yum search mysql\nmysql-connectors-community/x86_64 MySQL Connectors Community                 17\nmysql-tools-community/x86_64      MySQL Tools Community                      23\nmysql56-community/x86_64          MySQL 5.6 Community Server                184\n</code></pre>\n\n<p>3：安装</p>\n\n<pre><code>yum -y install mysql-community-server\n</code></pre>\n\n<p>4：进行基本配置，开机自动启动，启动进程【此处略去】。</p>\n\n<h4>三：环境配置和优化</h4>\n\n<p>1：apache多端口配置：</p>\n\n<p>apache一个服务器下多个端口承载不同的开发和分布任务，对于初期开发尤为重要</p>\n\n<p>在httpd.conf 增加 以下端口</p>\n\n<pre><code>Listen 1314\n&lt;VirtualHost *:1314&gt;\n    ServerAdmin cuihuan\n    DocumentRoot /var/www/1314/\n    #ServerName 1314\n    #Alias \"/var/www/1314/\"\n&lt;Directory \"/var/www/1314\"&gt;\n    Options All\n    AllowOverride All\n    Order allow,deny\n    allow from all\n&lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p>重启之后基本端口对应网站搭建成功如下</p>\n\n<p>2：mysql 密码和基本配置</p>\n\n<pre><code>[cuixiaohuan@cuihuan ~]# mysqladmin -uroot password\nNew password:\nConfirm new password:\n[cuixiaohuan@cuihuan ~]# mysql -uroot -p\n</code></pre>\n\n<p>3:开放设置mysql 远程访问权限</p>\n\n<pre><code>mysql&gt; grant all privileges on db.* to ‘用户名'@'%' identified by '密码';\nQuery OK, 0 rows affected (0.00 sec)\nmysql&gt; flush privileges;\n</code></pre>\n\n<p>4：apache 支持php配置</p>\n\n<p>按照之前步骤装载的话，php是直接配置ok的，如下图：</p>\n\n<h4>四：后续开发优化</h4>\n\n<p>安装开发中必须的cvs 和数据库管理phpmyadmin</p>\n\n<p>1：安装svn</p>\n\n<p>两个主要目的：1：是作为项目代码控制，2：文件传输服务器</p>\n\n<p>之后所做的事情就是在上面添加svn，参考：http://www.ha97.com/4467.html</p>\n\n<p>启动：</p>\n\n<pre><code>sudo svnserve -d -r /home/cuixiaohuan/svn\n</code></pre>\n\n<p>2：安装phpadmin 便于管理数据库</p>\n\n<p>绿色包，解压，配置端口即可，包地址：http://pan.baidu.com/s/1qW7pNnY</p>\n\n<p>修改下conf，我的是3606 默认3306端口。</p>\n\n<blockquote><p>通过上面步骤，安装了lamp，svn,phpmyadmin，对于常用的web开发基本都已经ok！\n接下来就可以享受该环境！</p></blockquote>\n</body>\n</html>"}],"Post":[{"title":"Nginx实践一：centos apache更换为nginx","date":"2015-11-18T09:21:35.000Z","_content":"\n> 背景介绍： 阿里云，512M内存（最屌丝配置），搭建lamp 环境，除去 mysql分配了100M左右（这个不能再少了），http竟然占用了200多M，太庞大，决定换为较轻量级，高并发的nginx。\n\n### 背景数据\n\n如下图所示：系统也就500M ,出了mysql占用的100M, httpd 占了1/2 还多（经常达到十几个进程），剩余50M，有时更少不能忍，经常造成数据库崩掉，写了个自动重启脚本，但觉的不是治本之策\n     \n    # 统计apache 进程个数\n    ps aux|grep httpd | wc –l\n    \n[![ngnix 服务器占用](http://cuihuan.net/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png)](http://cuihuan.net/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png)\n\n### 解决策略\n\n* 1：针对Apache进行优化。包括优化worker运行方式等等。可以参考[ apache优化 ](https://linux.cn/article-5294-2.html)\n* 2 :更换轻量级服务器。采用nginx 或者lighthttpd等更轻量的服务器。传说中Nginx大法负载均衡和高并发略胜一筹，决定实践一把。\n\n### apache替换为nginx\n\n* 1： 停掉apache\n    sudo service httpd stop\n    \n 注意：以防万一，最好不好提前卸掉。\n* 2：安装nginx\n    yum install nginx\n    \n* 3：启动nginx\n    sudo nginx\n    \n 安装成功之后，启动成功如下图 [![CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2](http://cuihuan.net/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png)](http://cuihuan.net/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png)\n* 4：简单配置nginx\n 主要是简单修改下log【方便追查问题】 和 web_root 对应文件【快速启用网站】\n* 5：重启nginx\n    [root@iZ25xlozdf2Z nginx]# nginx -s quit\n    [root@iZ25xlozdf2Z nginx]# nginx\n    \n 如下图，配置web目录成功！ [![BAEF603F-CA9C-436E-B870-3E70C11542D0](http://cuihuan.net/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png)](http://cuihuan.net/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png)\n* 6：添加php 支持\n 安装php-fpm\n    yum install php-fpm\n    \n nginx.conf设置\n    location ~ \\.php$ {\n        root /var/www/html;\n        fastcgi_pass 127.0.0.1:9000;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME         /var/www/html$fastcgi_script_name;\n        include fastcgi_params;\n    }\n    \n* 7：重新启动服务，网站回复。\n [![A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3](http://cuihuan.net/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png)](http://cuihuan.net/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png)\n* 8：耗存简单对比 如下图：基本上节省了200M，虽然这个可能是运行初期数据；但是，还是确实轻了不少，每个服务占存基本上1/4，线程也少了不少。内存占用方面表现，感觉尚可，接下就看性能了 [![E773D2EE-2F51-4113-AAE1-939CD88DCAEE](http://cuihuan.net/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png)](http://cuihuan.net/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png)\n\n### 后续\n\n初次接触nginx，整体感觉还不错。后续，进行基本的防攻击，多端口设置，和性能配置。\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=225)\n","source":"_posts/Nginx实践一：centos apache更换为nginx.md","raw":"---\ntitle: Nginx实践一：centos apache更换为nginx \ndate: 2015-11-18 17:21:35\ntags: \n- nginx\n- apache\n- php\n---\n\n> 背景介绍： 阿里云，512M内存（最屌丝配置），搭建lamp 环境，除去 mysql分配了100M左右（这个不能再少了），http竟然占用了200多M，太庞大，决定换为较轻量级，高并发的nginx。\n\n### 背景数据\n\n如下图所示：系统也就500M ,出了mysql占用的100M, httpd 占了1/2 还多（经常达到十几个进程），剩余50M，有时更少不能忍，经常造成数据库崩掉，写了个自动重启脚本，但觉的不是治本之策\n     \n    # 统计apache 进程个数\n    ps aux|grep httpd | wc –l\n    \n[![ngnix 服务器占用](http://cuihuan.net/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png)](http://cuihuan.net/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png)\n\n### 解决策略\n\n* 1：针对Apache进行优化。包括优化worker运行方式等等。可以参考[ apache优化 ](https://linux.cn/article-5294-2.html)\n* 2 :更换轻量级服务器。采用nginx 或者lighthttpd等更轻量的服务器。传说中Nginx大法负载均衡和高并发略胜一筹，决定实践一把。\n\n### apache替换为nginx\n\n* 1： 停掉apache\n    sudo service httpd stop\n    \n 注意：以防万一，最好不好提前卸掉。\n* 2：安装nginx\n    yum install nginx\n    \n* 3：启动nginx\n    sudo nginx\n    \n 安装成功之后，启动成功如下图 [![CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2](http://cuihuan.net/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png)](http://cuihuan.net/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png)\n* 4：简单配置nginx\n 主要是简单修改下log【方便追查问题】 和 web_root 对应文件【快速启用网站】\n* 5：重启nginx\n    [root@iZ25xlozdf2Z nginx]# nginx -s quit\n    [root@iZ25xlozdf2Z nginx]# nginx\n    \n 如下图，配置web目录成功！ [![BAEF603F-CA9C-436E-B870-3E70C11542D0](http://cuihuan.net/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png)](http://cuihuan.net/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png)\n* 6：添加php 支持\n 安装php-fpm\n    yum install php-fpm\n    \n nginx.conf设置\n    location ~ \\.php$ {\n        root /var/www/html;\n        fastcgi_pass 127.0.0.1:9000;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME         /var/www/html$fastcgi_script_name;\n        include fastcgi_params;\n    }\n    \n* 7：重新启动服务，网站回复。\n [![A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3](http://cuihuan.net/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png)](http://cuihuan.net/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png)\n* 8：耗存简单对比 如下图：基本上节省了200M，虽然这个可能是运行初期数据；但是，还是确实轻了不少，每个服务占存基本上1/4，线程也少了不少。内存占用方面表现，感觉尚可，接下就看性能了 [![E773D2EE-2F51-4113-AAE1-939CD88DCAEE](http://cuihuan.net/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png)](http://cuihuan.net/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png)\n\n### 后续\n\n初次接触nginx，整体感觉还不错。后续，进行基本的防攻击，多端口设置，和性能配置。\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=225)\n","slug":"Nginx实践一：centos apache更换为nginx","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nib0001661fet4d6k52","content":"<blockquote>\n<p>背景介绍： 阿里云，512M内存（最屌丝配置），搭建lamp 环境，除去 mysql分配了100M左右（这个不能再少了），http竟然占用了200多M，太庞大，决定换为较轻量级，高并发的nginx。</p>\n</blockquote>\n<h3 id=\"背景数据\"><a href=\"#背景数据\" class=\"headerlink\" title=\"背景数据\"></a>背景数据</h3><p>如下图所示：系统也就500M ,出了mysql占用的100M, httpd 占了1/2 还多（经常达到十几个进程），剩余50M，有时更少不能忍，经常造成数据库崩掉，写了个自动重启脚本，但觉的不是治本之策</p>\n<pre><code># 统计apache 进程个数\nps aux|grep httpd | wc –l\n</code></pre><p><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png\" alt=\"ngnix 服务器占用\"></a></p>\n<h3 id=\"解决策略\"><a href=\"#解决策略\" class=\"headerlink\" title=\"解决策略\"></a>解决策略</h3><ul>\n<li>1：针对Apache进行优化。包括优化worker运行方式等等。可以参考<a href=\"https://linux.cn/article-5294-2.html\" target=\"_blank\" rel=\"external\"> apache优化 </a></li>\n<li>2 :更换轻量级服务器。采用nginx 或者lighthttpd等更轻量的服务器。传说中Nginx大法负载均衡和高并发略胜一筹，决定实践一把。</li>\n</ul>\n<h3 id=\"apache替换为nginx\"><a href=\"#apache替换为nginx\" class=\"headerlink\" title=\"apache替换为nginx\"></a>apache替换为nginx</h3><ul>\n<li><p>1： 停掉apache<br>  sudo service httpd stop</p>\n<p>注意：以防万一，最好不好提前卸掉。</p>\n</li>\n<li><p>2：安装nginx<br>  yum install nginx</p>\n</li>\n<li><p>3：启动nginx<br>  sudo nginx</p>\n<p>安装成功之后，启动成功如下图 <a href=\"http://cuihuan.net/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png\" alt=\"CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2\"></a></p>\n</li>\n<li>4：简单配置nginx<br>主要是简单修改下log【方便追查问题】 和 web_root 对应文件【快速启用网站】</li>\n<li><p>5：重启nginx<br>  [root@iZ25xlozdf2Z nginx]# nginx -s quit<br>  [root@iZ25xlozdf2Z nginx]# nginx</p>\n<p>如下图，配置web目录成功！ <a href=\"http://cuihuan.net/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png\" alt=\"BAEF603F-CA9C-436E-B870-3E70C11542D0\"></a></p>\n</li>\n<li><p>6：添加php 支持<br>安装php-fpm<br>  yum install php-fpm</p>\n<p>nginx.conf设置<br>  location ~ .php$ {</p>\n<pre><code>root /var/www/html;\nfastcgi_pass 127.0.0.1:9000;\nfastcgi_index index.php;\nfastcgi_param SCRIPT_FILENAME         /var/www/html$fastcgi_script_name;\ninclude fastcgi_params;\n</code></pre><p>  }</p>\n</li>\n<li><p>7：重新启动服务，网站回复。<br><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png\" alt=\"A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3\"></a></p>\n</li>\n<li>8：耗存简单对比 如下图：基本上节省了200M，虽然这个可能是运行初期数据；但是，还是确实轻了不少，每个服务占存基本上1/4，线程也少了不少。内存占用方面表现，感觉尚可，接下就看性能了 <a href=\"http://cuihuan.net/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png\" alt=\"E773D2EE-2F51-4113-AAE1-939CD88DCAEE\"></a></li>\n</ul>\n<h3 id=\"后续\"><a href=\"#后续\" class=\"headerlink\" title=\"后续\"></a>后续</h3><p>初次接触nginx，整体感觉还不错。后续，进行基本的防攻击，多端口设置，和性能配置。</p>\n<p><a href=\"http://cuihuan.net/?p=225\"> 个人小站原文链接 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>背景介绍： 阿里云，512M内存（最屌丝配置），搭建lamp 环境，除去 mysql分配了100M左右（这个不能再少了），http竟然占用了200多M，太庞大，决定换为较轻量级，高并发的nginx。</p>\n</blockquote>\n<h3 id=\"背景数据\"><a href=\"#背景数据\" class=\"headerlink\" title=\"背景数据\"></a>背景数据</h3><p>如下图所示：系统也就500M ,出了mysql占用的100M, httpd 占了1/2 还多（经常达到十几个进程），剩余50M，有时更少不能忍，经常造成数据库崩掉，写了个自动重启脚本，但觉的不是治本之策</p>\n<pre><code># 统计apache 进程个数\nps aux|grep httpd | wc –l\n</code></pre><p><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/8C2E5AE4-0A5E-479E-8C20-1CFF0C35F6D7-1024x621.png\" alt=\"ngnix 服务器占用\"></a></p>\n<h3 id=\"解决策略\"><a href=\"#解决策略\" class=\"headerlink\" title=\"解决策略\"></a>解决策略</h3><ul>\n<li>1：针对Apache进行优化。包括优化worker运行方式等等。可以参考<a href=\"https://linux.cn/article-5294-2.html\"> apache优化 </a></li>\n<li>2 :更换轻量级服务器。采用nginx 或者lighthttpd等更轻量的服务器。传说中Nginx大法负载均衡和高并发略胜一筹，决定实践一把。</li>\n</ul>\n<h3 id=\"apache替换为nginx\"><a href=\"#apache替换为nginx\" class=\"headerlink\" title=\"apache替换为nginx\"></a>apache替换为nginx</h3><ul>\n<li><p>1： 停掉apache<br>  sudo service httpd stop</p>\n<p>注意：以防万一，最好不好提前卸掉。</p>\n</li>\n<li><p>2：安装nginx<br>  yum install nginx</p>\n</li>\n<li><p>3：启动nginx<br>  sudo nginx</p>\n<p>安装成功之后，启动成功如下图 <a href=\"http://cuihuan.net/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2-1024x302.png\" alt=\"CB5A50FB-8B68-4F21-A6F4-BDC7AF6C93B2\"></a></p>\n</li>\n<li>4：简单配置nginx<br>主要是简单修改下log【方便追查问题】 和 web_root 对应文件【快速启用网站】</li>\n<li><p>5：重启nginx<br>  [root@iZ25xlozdf2Z nginx]# nginx -s quit<br>  [root@iZ25xlozdf2Z nginx]# nginx</p>\n<p>如下图，配置web目录成功！ <a href=\"http://cuihuan.net/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/BAEF603F-CA9C-436E-B870-3E70C11542D0.png\" alt=\"BAEF603F-CA9C-436E-B870-3E70C11542D0\"></a></p>\n</li>\n<li><p>6：添加php 支持<br>安装php-fpm<br>  yum install php-fpm</p>\n<p>nginx.conf设置<br>  location ~ .php$ {</p>\n<pre><code>root /var/www/html;\nfastcgi_pass 127.0.0.1:9000;\nfastcgi_index index.php;\nfastcgi_param SCRIPT_FILENAME         /var/www/html$fastcgi_script_name;\ninclude fastcgi_params;\n</code></pre><p>  }</p>\n</li>\n<li><p>7：重新启动服务，网站回复。<br><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3-1024x718.png\" alt=\"A8D2AD14-7AB9-4421-AF40-B1BE0A5355C3\"></a></p>\n</li>\n<li>8：耗存简单对比 如下图：基本上节省了200M，虽然这个可能是运行初期数据；但是，还是确实轻了不少，每个服务占存基本上1/4，线程也少了不少。内存占用方面表现，感觉尚可，接下就看性能了 <a href=\"http://cuihuan.net/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/E773D2EE-2F51-4113-AAE1-939CD88DCAEE-1024x667.png\" alt=\"E773D2EE-2F51-4113-AAE1-939CD88DCAEE\"></a></li>\n</ul>\n<h3 id=\"后续\"><a href=\"#后续\" class=\"headerlink\" title=\"后续\"></a>后续</h3><p>初次接触nginx，整体感觉还不错。后续，进行基本的防攻击，多端口设置，和性能配置。</p>\n<p><a href=\"http://cuihuan.net/?p=225\"> 个人小站原文链接 </a></p>\n"},{"title":"YII2数据库查询实践","date":"2016-01-10T09:21:35.000Z","_content":"\n> 初探yii2框架，对增删改查，关联查询等数据库基本操作的简单实践。\n\n## 数据库配置。\n/config/db.php 进行数据库配置\n配置可以参考[ yii文档 ](http://www.yiichina.com/doc/guide/2.0/start-databases)\n实践过程中有个test库-》test表-》两条记录如下\n```\nmysql> select * from test;\n+----+--------+\n| id | name   |\n+----+--------+\n|  1 | zhuai  |\n|  2 | heng   | \n+----+--------+\n18 rows in set (0.00 sec)\n```\n\n## sql 查询方式\nyii2 提供了原始的数据库查询方式findBySql；同时，`通过占位符的方式，自动进行了基本的sql注入防御`。上码\n```\n// 最基本的查询方式\n$sql = \"select * from test where 1\";\n$res = Test::findBySql($sql)->all();\nvar_dump(count($res));    // res->2 \n\n// findbysql 防止sql注入方式\n$id = '1 or 1=1';\n$sql = \"select * from test where id = \" . $id;\n$res = Test::findBySql($sql)->all();\nvar_dump(count($res));   // res-> 2\n\n$sql = \"select * from test where id = :id\";\n// 定位符会自动防止sql 注入\n$res = Test::findBySql($sql,array(\":id\"=>$id))->all();\nvar_dump(count($res));  // res->1\n\n```\n\n## activeRecord查询方式\n每个框架除了原有的sql方式，都会提供相应的封装的查询方式，yii2亦然。\n### 创建model\nyii的model基本方式如下，代码如下不赘述。\n```\n<?php\n\nnamespace app\\models;\n\nuse Yii;\nuse yii\\db\\ActiveRecord;\n\n\nclass Test extends ActiveRecord\n{\n    // 可无，对应表：默认类名和表名匹配，则无需此函数\n    public static function tableName()\n    {\n        return 'test';\n    }\n\n    // 可无，验证器：主要用于校验各个字段\n    public function rules(){\n        return [\n            ['id', 'integer'],\n            ['name', 'string', 'length' => [0, 100]],\n        ];\n    }\n}\n```\n使用的时候需要引入model\n```\nuse app\\models\\Test;\n```\n\n### 增加操作\n```\n// add 操作\n$test = new Test();\n$test->name = 'test';\n\n// 合法性校验\n$test->validate();\nif($test->hasErrors()){\n    echo \"数据不合法\";\n    die;\n}\n$test->save();\n```\n### 查询操作\n查询操作先上官方文档\n[ activeRecord doc](http://www.yiichina.com/doc/api/2.0/yii-db-activerecord)\n[ where doc](http://www.yiichina.com/doc/api/2.0/yii-db-query#where(-detail)\n需要强调的是：yii查询提供了特别多丰富的库，例如代码中的批量查询处理等等，细节可以看文档。\n\n```\n// select\n// id = 1\n$res = Test::find()->where(['id' => 1])->all();\nvar_dump(count($res));  //1\n\n// id > 0\n$res = Test::find()->where(['>','id',0])->all();\nvar_dump(count($res));  //2\n\n// id > =1 id <=2\n$res = Test::find()->where(['between','id',1,2])->all();\nvar_dump(count($res));  //2\n\n// name字段like\n$res = Test::find()->where(['like', 'name', 'cuihuan'])->all();\nvar_dump(count($res));  //2\n\n\n// 查询的使用 obj->array\n$res = Test::find()->where(['between','id',1,2])->asArray()->all();\nvar_dump($res[0]['id']);  //2\n\n// 批量查询,对于大内存操作的批量查询\nforeach (Test::find()->batch(1) as $test) {\n    var_dump(count($test));\n}\n```\n### 删除操作\n```\n// delete \n// 选出来删除\n$res = Test::find()->where(['id'=>1])->all();\n$res[0]->delete();\n\n// 直接删除\nvar_dump(Test::deleteAll('id>:id', array(':id' => 2)));\n```\n\n### 修改操作\n除了代码中方式，yii2直接提供update操作。\n```\n// 活动记录修改\n$res = Test::find()->where(['id'=>4])->one();\n$res->name = \"update\";\n$res->save();\n```\n\n### 关联查询操作\n关联查询示例中两个表:\n一个学生表(student):id ，name;\n一个分数表(score)：id,stu_id,score\n```\n// 相应学生的所有score\n$stu = Student::find()->where(['name'=>'xiaozhuai'])->one();\nvar_dump($stu->id);\n\n// 基本获取\n$scores_1 = $stu->hasMany('app\\model\\Score',['stu_id'=>$stu->id])->asArray()->all();\n$scores_2 = $stu->hasMany(Score::className(),['stu_id'=>'id'])->asArray()->all();\nvar_dump($scores_1);\nvar_dump($scores_2);\n```\n两种关联查询方式；但是，在controller进行相关操作，代码显的过于混乱，在model中封装调用\n\n首先在student model中封装相关关联调用函数\n```\n<?php\n\nnamespace app\\models;\n\nuse Yii;\nuse yii\\db\\ActiveRecord;\n\n\nclass Student extends ActiveRecord\n{\n    public static function tableName()\n    {\n        return 'student';\n    }\n\n    // 获取分数信息\n    public function getScores()\n    {\n        $scores = $this->hasMany(Score::className(), ['stu_id' => 'id'])->asArray()->all();\n\n        return $scores;\n    }\n\n}\n\n```\n之后直接调用，两种调用方式\n```\n// 函数封装之后调用\n$scores = $stu->getScores();\nvar_dump($scores);\n\n// 利用__get 的自动调用的方式\n$scores = $stu->scores;\nvar_dump($scores);\n\n```\n\n## 最后\n上面在yii2的部署和使用过程中的一些基本的增删改查，关联查询等操作。但是如果想要将yii2的db操作使用好，还要看文档大法：\n[ activeRecord doc](http://www.yiichina.com/doc/api/2.0/yii-db-activerecord)\n\n【转载请注明：[YII2数据库查询实践](http://cuihuan.net/article/yii2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E5%AE%9E%E8%B7%B5.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n\n\n\n\n\n\n\n","source":"_posts/YII2数据库查询实践.md","raw":"---\ntitle: YII2数据库查询实践 \ndate: 2016-01-10 17:21:35\ntags: \n- db\n- active record\n- yii2\n---\n\n> 初探yii2框架，对增删改查，关联查询等数据库基本操作的简单实践。\n\n## 数据库配置。\n/config/db.php 进行数据库配置\n配置可以参考[ yii文档 ](http://www.yiichina.com/doc/guide/2.0/start-databases)\n实践过程中有个test库-》test表-》两条记录如下\n```\nmysql> select * from test;\n+----+--------+\n| id | name   |\n+----+--------+\n|  1 | zhuai  |\n|  2 | heng   | \n+----+--------+\n18 rows in set (0.00 sec)\n```\n\n## sql 查询方式\nyii2 提供了原始的数据库查询方式findBySql；同时，`通过占位符的方式，自动进行了基本的sql注入防御`。上码\n```\n// 最基本的查询方式\n$sql = \"select * from test where 1\";\n$res = Test::findBySql($sql)->all();\nvar_dump(count($res));    // res->2 \n\n// findbysql 防止sql注入方式\n$id = '1 or 1=1';\n$sql = \"select * from test where id = \" . $id;\n$res = Test::findBySql($sql)->all();\nvar_dump(count($res));   // res-> 2\n\n$sql = \"select * from test where id = :id\";\n// 定位符会自动防止sql 注入\n$res = Test::findBySql($sql,array(\":id\"=>$id))->all();\nvar_dump(count($res));  // res->1\n\n```\n\n## activeRecord查询方式\n每个框架除了原有的sql方式，都会提供相应的封装的查询方式，yii2亦然。\n### 创建model\nyii的model基本方式如下，代码如下不赘述。\n```\n<?php\n\nnamespace app\\models;\n\nuse Yii;\nuse yii\\db\\ActiveRecord;\n\n\nclass Test extends ActiveRecord\n{\n    // 可无，对应表：默认类名和表名匹配，则无需此函数\n    public static function tableName()\n    {\n        return 'test';\n    }\n\n    // 可无，验证器：主要用于校验各个字段\n    public function rules(){\n        return [\n            ['id', 'integer'],\n            ['name', 'string', 'length' => [0, 100]],\n        ];\n    }\n}\n```\n使用的时候需要引入model\n```\nuse app\\models\\Test;\n```\n\n### 增加操作\n```\n// add 操作\n$test = new Test();\n$test->name = 'test';\n\n// 合法性校验\n$test->validate();\nif($test->hasErrors()){\n    echo \"数据不合法\";\n    die;\n}\n$test->save();\n```\n### 查询操作\n查询操作先上官方文档\n[ activeRecord doc](http://www.yiichina.com/doc/api/2.0/yii-db-activerecord)\n[ where doc](http://www.yiichina.com/doc/api/2.0/yii-db-query#where(-detail)\n需要强调的是：yii查询提供了特别多丰富的库，例如代码中的批量查询处理等等，细节可以看文档。\n\n```\n// select\n// id = 1\n$res = Test::find()->where(['id' => 1])->all();\nvar_dump(count($res));  //1\n\n// id > 0\n$res = Test::find()->where(['>','id',0])->all();\nvar_dump(count($res));  //2\n\n// id > =1 id <=2\n$res = Test::find()->where(['between','id',1,2])->all();\nvar_dump(count($res));  //2\n\n// name字段like\n$res = Test::find()->where(['like', 'name', 'cuihuan'])->all();\nvar_dump(count($res));  //2\n\n\n// 查询的使用 obj->array\n$res = Test::find()->where(['between','id',1,2])->asArray()->all();\nvar_dump($res[0]['id']);  //2\n\n// 批量查询,对于大内存操作的批量查询\nforeach (Test::find()->batch(1) as $test) {\n    var_dump(count($test));\n}\n```\n### 删除操作\n```\n// delete \n// 选出来删除\n$res = Test::find()->where(['id'=>1])->all();\n$res[0]->delete();\n\n// 直接删除\nvar_dump(Test::deleteAll('id>:id', array(':id' => 2)));\n```\n\n### 修改操作\n除了代码中方式，yii2直接提供update操作。\n```\n// 活动记录修改\n$res = Test::find()->where(['id'=>4])->one();\n$res->name = \"update\";\n$res->save();\n```\n\n### 关联查询操作\n关联查询示例中两个表:\n一个学生表(student):id ，name;\n一个分数表(score)：id,stu_id,score\n```\n// 相应学生的所有score\n$stu = Student::find()->where(['name'=>'xiaozhuai'])->one();\nvar_dump($stu->id);\n\n// 基本获取\n$scores_1 = $stu->hasMany('app\\model\\Score',['stu_id'=>$stu->id])->asArray()->all();\n$scores_2 = $stu->hasMany(Score::className(),['stu_id'=>'id'])->asArray()->all();\nvar_dump($scores_1);\nvar_dump($scores_2);\n```\n两种关联查询方式；但是，在controller进行相关操作，代码显的过于混乱，在model中封装调用\n\n首先在student model中封装相关关联调用函数\n```\n<?php\n\nnamespace app\\models;\n\nuse Yii;\nuse yii\\db\\ActiveRecord;\n\n\nclass Student extends ActiveRecord\n{\n    public static function tableName()\n    {\n        return 'student';\n    }\n\n    // 获取分数信息\n    public function getScores()\n    {\n        $scores = $this->hasMany(Score::className(), ['stu_id' => 'id'])->asArray()->all();\n\n        return $scores;\n    }\n\n}\n\n```\n之后直接调用，两种调用方式\n```\n// 函数封装之后调用\n$scores = $stu->getScores();\nvar_dump($scores);\n\n// 利用__get 的自动调用的方式\n$scores = $stu->scores;\nvar_dump($scores);\n\n```\n\n## 最后\n上面在yii2的部署和使用过程中的一些基本的增删改查，关联查询等操作。但是如果想要将yii2的db操作使用好，还要看文档大法：\n[ activeRecord doc](http://www.yiichina.com/doc/api/2.0/yii-db-activerecord)\n\n【转载请注明：[YII2数据库查询实践](http://cuihuan.net/article/yii2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E5%AE%9E%E8%B7%B5.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n\n\n\n\n\n\n\n","slug":"YII2数据库查询实践","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nig0003661f5f7h96eg","content":"<blockquote>\n<p>初探yii2框架，对增删改查，关联查询等数据库基本操作的简单实践。</p>\n</blockquote>\n<h2 id=\"数据库配置。\"><a href=\"#数据库配置。\" class=\"headerlink\" title=\"数据库配置。\"></a>数据库配置。</h2><p>/config/db.php 进行数据库配置<br>配置可以参考<a href=\"http://www.yiichina.com/doc/guide/2.0/start-databases\" target=\"_blank\" rel=\"external\"> yii文档 </a><br>实践过程中有个test库-》test表-》两条记录如下<br><figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">mysql&gt; select * from test;</span></div><div class=\"line\">+----+--------+</div><div class=\"line\"><span class=\"section\">| id | name   |</span></div><div class=\"line\">+----+--------+</div><div class=\"line\">|  1 | zhuai  |</div><div class=\"line\"><span class=\"section\">|  2 | heng   | </span></div><div class=\"line\">+----+--------+</div><div class=\"line\">18 rows in set (0.00 sec)</div></pre></td></tr></table></figure></p>\n<h2 id=\"sql-查询方式\"><a href=\"#sql-查询方式\" class=\"headerlink\" title=\"sql 查询方式\"></a>sql 查询方式</h2><p>yii2 提供了原始的数据库查询方式findBySql；同时，<code>通过占位符的方式，自动进行了基本的sql注入防御</code>。上码<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 最基本的查询方式</span></div><div class=\"line\">$sql = <span class=\"string\">\"select * from test where 1\"</span>;</div><div class=\"line\">$res = Test::findBySql($sql)-&gt;all();</div><div class=\"line\">var_dump(count($res));    <span class=\"comment\">// res-&gt;2 </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// findbysql 防止sql注入方式</span></div><div class=\"line\">$id = <span class=\"string\">'1 or 1=1'</span>;</div><div class=\"line\">$sql = <span class=\"string\">\"select * from test where id = \"</span> . $id;</div><div class=\"line\">$res = Test::findBySql($sql)-&gt;all();</div><div class=\"line\">var_dump(count($res));   <span class=\"comment\">// res-&gt; 2</span></div><div class=\"line\"></div><div class=\"line\">$sql = <span class=\"string\">\"select * from test where id = :id\"</span>;</div><div class=\"line\"><span class=\"comment\">// 定位符会自动防止sql 注入</span></div><div class=\"line\">$res = Test::findBySql($sql,<span class=\"keyword\">array</span>(<span class=\"string\">\":id\"</span>=&gt;$id))-&gt;all();</div><div class=\"line\">var_dump(count($res));  <span class=\"comment\">// res-&gt;1</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"activeRecord查询方式\"><a href=\"#activeRecord查询方式\" class=\"headerlink\" title=\"activeRecord查询方式\"></a>activeRecord查询方式</h2><p>每个框架除了原有的sql方式，都会提供相应的封装的查询方式，yii2亦然。</p>\n<h3 id=\"创建model\"><a href=\"#创建model\" class=\"headerlink\" title=\"创建model\"></a>创建model</h3><p>yii的model基本方式如下，代码如下不赘述。<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">app</span>\\<span class=\"title\">models</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Yii</span>;</div><div class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">yii</span>\\<span class=\"title\">db</span>\\<span class=\"title\">ActiveRecord</span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> <span class=\"keyword\">extends</span> <span class=\"title\">ActiveRecord</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"comment\">// 可无，对应表：默认类名和表名匹配，则无需此函数</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tableName</span><span class=\"params\">()</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'test'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 可无，验证器：主要用于校验各个字段</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">rules</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> [</div><div class=\"line\">            [<span class=\"string\">'id'</span>, <span class=\"string\">'integer'</span>],</div><div class=\"line\">            [<span class=\"string\">'name'</span>, <span class=\"string\">'string'</span>, <span class=\"string\">'length'</span> =&gt; [<span class=\"number\">0</span>, <span class=\"number\">100</span>]],</div><div class=\"line\">        ];</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>使用的时候需要引入model<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">use</span> app\\models\\<span class=\"keyword\">Test</span>;</div></pre></td></tr></table></figure></p>\n<h3 id=\"增加操作\"><a href=\"#增加操作\" class=\"headerlink\" title=\"增加操作\"></a>增加操作</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// add 操作</span></div><div class=\"line\">$test = <span class=\"keyword\">new</span> Test();</div><div class=\"line\">$test-&gt;name = <span class=\"string\">'test'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 合法性校验</span></div><div class=\"line\">$test-&gt;validate();</div><div class=\"line\"><span class=\"keyword\">if</span>($test-&gt;hasErrors())&#123;</div><div class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">\"数据不合法\"</span>;</div><div class=\"line\">    <span class=\"keyword\">die</span>;</div><div class=\"line\">&#125;</div><div class=\"line\">$test-&gt;save();</div></pre></td></tr></table></figure>\n<h3 id=\"查询操作\"><a href=\"#查询操作\" class=\"headerlink\" title=\"查询操作\"></a>查询操作</h3><p>查询操作先上官方文档<br><a href=\"http://www.yiichina.com/doc/api/2.0/yii-db-activerecord\" target=\"_blank\" rel=\"external\"> activeRecord doc</a><br><a href=\"http://www.yiichina.com/doc/api/2.0/yii-db-query#where(-detail\" target=\"_blank\" rel=\"external\"> where doc</a><br>需要强调的是：yii查询提供了特别多丰富的库，例如代码中的批量查询处理等等，细节可以看文档。</p>\n<figure class=\"highlight livescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"regexp\">// select</span></div><div class=\"line\">// id = <span class=\"number\">1</span></div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'id'</span> =&gt; <span class=\"number\">1</span>])</span>-&gt;</span>all();</div><div class=\"line\">var_dump(count($res));  <span class=\"regexp\">//1</span></div><div class=\"line\"></div><div class=\"line\">// id &gt; <span class=\"number\">0</span></div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'&gt;'</span>,<span class=\"string\">'id'</span>,<span class=\"number\">0</span>])</span>-&gt;</span>all();</div><div class=\"line\">var_dump(count($res));  <span class=\"regexp\">//2</span></div><div class=\"line\"></div><div class=\"line\">// id &gt; =<span class=\"number\">1</span> id &lt;=<span class=\"number\">2</span></div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'between'</span>,<span class=\"string\">'id'</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>])</span>-&gt;</span>all();</div><div class=\"line\">var_dump(count($res));  <span class=\"regexp\">//2</span></div><div class=\"line\"></div><div class=\"line\">// name字段like</div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'like'</span>, <span class=\"string\">'name'</span>, <span class=\"string\">'cuihuan'</span>])</span>-&gt;</span>all();</div><div class=\"line\">var_dump(count($res));  <span class=\"regexp\">//2</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">// 查询的使用 obj-&gt;array</div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'between'</span>,<span class=\"string\">'id'</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>])</span>-&gt;</span>asArray<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>all();</div><div class=\"line\">var_dump($res[<span class=\"number\">0</span>][<span class=\"string\">'id'</span>]);  <span class=\"regexp\">//2</span></div><div class=\"line\"></div><div class=\"line\">// 批量查询,对于大内存操作的批量查询</div><div class=\"line\">foreach <span class=\"function\"><span class=\"params\">(Test::find()-&gt;batch(<span class=\"number\">1</span>) as $test)</span> &#123;</span></div><div class=\"line\">    <span class=\"title\">var_dump</span><span class=\"params\">(count($test))</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"删除操作\"><a href=\"#删除操作\" class=\"headerlink\" title=\"删除操作\"></a>删除操作</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// delete </span></div><div class=\"line\"><span class=\"comment\">// 选出来删除</span></div><div class=\"line\">$res = Test::find()-&gt;where([<span class=\"string\">'id'</span>=&gt;<span class=\"number\">1</span>])-&gt;all();</div><div class=\"line\">$res[<span class=\"number\">0</span>]-&gt;delete();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 直接删除</span></div><div class=\"line\">var_dump(Test::deleteAll(<span class=\"string\">'id&gt;:id'</span>, <span class=\"keyword\">array</span>(<span class=\"string\">':id'</span> =&gt; <span class=\"number\">2</span>)));</div></pre></td></tr></table></figure>\n<h3 id=\"修改操作\"><a href=\"#修改操作\" class=\"headerlink\" title=\"修改操作\"></a>修改操作</h3><p>除了代码中方式，yii2直接提供update操作。<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 活动记录修改</span></div><div class=\"line\">$res = Test::find()-&gt;where([<span class=\"string\">'id'</span>=&gt;<span class=\"number\">4</span>])-&gt;one();</div><div class=\"line\">$res-&gt;name = <span class=\"string\">\"update\"</span>;</div><div class=\"line\">$res-&gt;save();</div></pre></td></tr></table></figure></p>\n<h3 id=\"关联查询操作\"><a href=\"#关联查询操作\" class=\"headerlink\" title=\"关联查询操作\"></a>关联查询操作</h3><p>关联查询示例中两个表:<br>一个学生表(student):id ，name;<br>一个分数表(score)：id,stu_id,score<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 相应学生的所有score</span></div><div class=\"line\">$stu = Student::find()-&gt;where([<span class=\"string\">'name'</span>=&gt;<span class=\"string\">'xiaozhuai'</span>])-&gt;one();</div><div class=\"line\">var_dump($stu-&gt;id);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 基本获取</span></div><div class=\"line\">$scores_1 = $stu-&gt;hasMany(<span class=\"string\">'app\\model\\Score'</span>,[<span class=\"string\">'stu_id'</span>=&gt;$stu-&gt;id])-&gt;asArray()-&gt;all();</div><div class=\"line\">$scores_2 = $stu-&gt;hasMany(Score::className(),[<span class=\"string\">'stu_id'</span>=&gt;<span class=\"string\">'id'</span>])-&gt;asArray()-&gt;all();</div><div class=\"line\">var_dump($scores_1);</div><div class=\"line\">var_dump($scores_2);</div></pre></td></tr></table></figure></p>\n<p>两种关联查询方式；但是，在controller进行相关操作，代码显的过于混乱，在model中封装调用</p>\n<p>首先在student model中封装相关关联调用函数<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">app</span>\\<span class=\"title\">models</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Yii</span>;</div><div class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">yii</span>\\<span class=\"title\">db</span>\\<span class=\"title\">ActiveRecord</span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span> <span class=\"keyword\">extends</span> <span class=\"title\">ActiveRecord</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tableName</span><span class=\"params\">()</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'student'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 获取分数信息</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getScores</span><span class=\"params\">()</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        $scores = <span class=\"keyword\">$this</span>-&gt;hasMany(Score::className(), [<span class=\"string\">'stu_id'</span> =&gt; <span class=\"string\">'id'</span>])-&gt;asArray()-&gt;all();</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> $scores;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>之后直接调用，两种调用方式<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 函数封装之后调用</span></div><div class=\"line\">$scores = $stu-&gt;getScores();</div><div class=\"line\">var_dump($scores);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 利用__get 的自动调用的方式</span></div><div class=\"line\">$scores = $stu-&gt;scores;</div><div class=\"line\">var_dump($scores);</div></pre></td></tr></table></figure></p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>上面在yii2的部署和使用过程中的一些基本的增删改查，关联查询等操作。但是如果想要将yii2的db操作使用好，还要看文档大法：<br><a href=\"http://www.yiichina.com/doc/api/2.0/yii-db-activerecord\" target=\"_blank\" rel=\"external\"> activeRecord doc</a></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/yii2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E5%AE%9E%E8%B7%B5.html\">YII2数据库查询实践</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>初探yii2框架，对增删改查，关联查询等数据库基本操作的简单实践。</p>\n</blockquote>\n<h2 id=\"数据库配置。\"><a href=\"#数据库配置。\" class=\"headerlink\" title=\"数据库配置。\"></a>数据库配置。</h2><p>/config/db.php 进行数据库配置<br>配置可以参考<a href=\"http://www.yiichina.com/doc/guide/2.0/start-databases\"> yii文档 </a><br>实践过程中有个test库-》test表-》两条记录如下<br><figure class=\"highlight asciidoc\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">mysql&gt; select * from test;</div><div class=\"line\">+----+--------+</span></div><div class=\"line\"><span class=\"section\">| id | name   |</div><div class=\"line\">+----+--------+</span></div><div class=\"line\">|  1 | zhuai  |</div><div class=\"line\"><span class=\"section\">|  2 | heng   | </div><div class=\"line\">+----+--------+</span></div><div class=\"line\">18 rows in set (0.00 sec)</div></pre></td></tr></table></figure></p>\n<h2 id=\"sql-查询方式\"><a href=\"#sql-查询方式\" class=\"headerlink\" title=\"sql 查询方式\"></a>sql 查询方式</h2><p>yii2 提供了原始的数据库查询方式findBySql；同时，<code>通过占位符的方式，自动进行了基本的sql注入防御</code>。上码<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 最基本的查询方式</span></div><div class=\"line\">$sql = <span class=\"string\">\"select * from test where 1\"</span>;</div><div class=\"line\">$res = Test::findBySql($sql)-&gt;all();</div><div class=\"line\">var_dump(count($res));    <span class=\"comment\">// res-&gt;2 </span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// findbysql 防止sql注入方式</span></div><div class=\"line\">$id = <span class=\"string\">'1 or 1=1'</span>;</div><div class=\"line\">$sql = <span class=\"string\">\"select * from test where id = \"</span> . $id;</div><div class=\"line\">$res = Test::findBySql($sql)-&gt;all();</div><div class=\"line\">var_dump(count($res));   <span class=\"comment\">// res-&gt; 2</span></div><div class=\"line\"></div><div class=\"line\">$sql = <span class=\"string\">\"select * from test where id = :id\"</span>;</div><div class=\"line\"><span class=\"comment\">// 定位符会自动防止sql 注入</span></div><div class=\"line\">$res = Test::findBySql($sql,<span class=\"keyword\">array</span>(<span class=\"string\">\":id\"</span>=&gt;$id))-&gt;all();</div><div class=\"line\">var_dump(count($res));  <span class=\"comment\">// res-&gt;1</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"activeRecord查询方式\"><a href=\"#activeRecord查询方式\" class=\"headerlink\" title=\"activeRecord查询方式\"></a>activeRecord查询方式</h2><p>每个框架除了原有的sql方式，都会提供相应的封装的查询方式，yii2亦然。</p>\n<h3 id=\"创建model\"><a href=\"#创建model\" class=\"headerlink\" title=\"创建model\"></a>创建model</h3><p>yii的model基本方式如下，代码如下不赘述。<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">app</span>\\<span class=\"title\">models</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Yii</span>;</div><div class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">yii</span>\\<span class=\"title\">db</span>\\<span class=\"title\">ActiveRecord</span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test</span> <span class=\"keyword\">extends</span> <span class=\"title\">ActiveRecord</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"comment\">// 可无，对应表：默认类名和表名匹配，则无需此函数</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tableName</span><span class=\"params\">()</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'test'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 可无，验证器：主要用于校验各个字段</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">rules</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> [</div><div class=\"line\">            [<span class=\"string\">'id'</span>, <span class=\"string\">'integer'</span>],</div><div class=\"line\">            [<span class=\"string\">'name'</span>, <span class=\"string\">'string'</span>, <span class=\"string\">'length'</span> =&gt; [<span class=\"number\">0</span>, <span class=\"number\">100</span>]],</div><div class=\"line\">        ];</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure></p>\n<p>使用的时候需要引入model<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">use</span> app\\models\\<span class=\"keyword\">Test</span>;</div></pre></td></tr></table></figure></p>\n<h3 id=\"增加操作\"><a href=\"#增加操作\" class=\"headerlink\" title=\"增加操作\"></a>增加操作</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// add 操作</span></div><div class=\"line\">$test = <span class=\"keyword\">new</span> Test();</div><div class=\"line\">$test-&gt;name = <span class=\"string\">'test'</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 合法性校验</span></div><div class=\"line\">$test-&gt;validate();</div><div class=\"line\"><span class=\"keyword\">if</span>($test-&gt;hasErrors())&#123;</div><div class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">\"数据不合法\"</span>;</div><div class=\"line\">    <span class=\"keyword\">die</span>;</div><div class=\"line\">&#125;</div><div class=\"line\">$test-&gt;save();</div></pre></td></tr></table></figure>\n<h3 id=\"查询操作\"><a href=\"#查询操作\" class=\"headerlink\" title=\"查询操作\"></a>查询操作</h3><p>查询操作先上官方文档<br><a href=\"http://www.yiichina.com/doc/api/2.0/yii-db-activerecord\"> activeRecord doc</a><br><a href=\"http://www.yiichina.com/doc/api/2.0/yii-db-query#where(-detail\"> where doc</a><br>需要强调的是：yii查询提供了特别多丰富的库，例如代码中的批量查询处理等等，细节可以看文档。</p>\n<figure class=\"highlight livescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"regexp\">// select</div><div class=\"line\">//</span> id = <span class=\"number\">1</span></div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'id'</span> =&gt; <span class=\"number\">1</span>])</span>-&gt;</span>all();</div><div class=\"line\">var_dump(count($res));  <span class=\"regexp\">//1</div><div class=\"line\"></div><div class=\"line\">//</span> id &gt; <span class=\"number\">0</span></div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'&gt;'</span>,<span class=\"string\">'id'</span>,<span class=\"number\">0</span>])</span>-&gt;</span>all();</div><div class=\"line\">var_dump(count($res));  <span class=\"regexp\">//2</div><div class=\"line\"></div><div class=\"line\">//</span> id &gt; =<span class=\"number\">1</span> id &lt;=<span class=\"number\">2</span></div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'between'</span>,<span class=\"string\">'id'</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>])</span>-&gt;</span>all();</div><div class=\"line\">var_dump(count($res));  <span class=\"regexp\">//2</div><div class=\"line\"></div><div class=\"line\">//</span> name字段like</div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'like'</span>, <span class=\"string\">'name'</span>, <span class=\"string\">'cuihuan'</span>])</span>-&gt;</span>all();</div><div class=\"line\">var_dump(count($res));  <span class=\"regexp\">//2</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">//</span> 查询的使用 obj-&gt;array</div><div class=\"line\">$res = Test::find<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>where<span class=\"function\"><span class=\"params\">([<span class=\"string\">'between'</span>,<span class=\"string\">'id'</span>,<span class=\"number\">1</span>,<span class=\"number\">2</span>])</span>-&gt;</span>asArray<span class=\"function\"><span class=\"params\">()</span>-&gt;</span>all();</div><div class=\"line\">var_dump($res[<span class=\"number\">0</span>][<span class=\"string\">'id'</span>]);  <span class=\"regexp\">//2</div><div class=\"line\"></div><div class=\"line\">//</span> 批量查询,对于大内存操作的批量查询</div><div class=\"line\">foreach <span class=\"function\"><span class=\"params\">(Test::find()-&gt;batch(<span class=\"number\">1</span>) as $test)</span> &#123;</div><div class=\"line\">    <span class=\"title\">var_dump</span><span class=\"params\">(count($test))</span>;</div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure>\n<h3 id=\"删除操作\"><a href=\"#删除操作\" class=\"headerlink\" title=\"删除操作\"></a>删除操作</h3><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// delete </span></div><div class=\"line\"><span class=\"comment\">// 选出来删除</span></div><div class=\"line\">$res = Test::find()-&gt;where([<span class=\"string\">'id'</span>=&gt;<span class=\"number\">1</span>])-&gt;all();</div><div class=\"line\">$res[<span class=\"number\">0</span>]-&gt;delete();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 直接删除</span></div><div class=\"line\">var_dump(Test::deleteAll(<span class=\"string\">'id&gt;:id'</span>, <span class=\"keyword\">array</span>(<span class=\"string\">':id'</span> =&gt; <span class=\"number\">2</span>)));</div></pre></td></tr></table></figure>\n<h3 id=\"修改操作\"><a href=\"#修改操作\" class=\"headerlink\" title=\"修改操作\"></a>修改操作</h3><p>除了代码中方式，yii2直接提供update操作。<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 活动记录修改</span></div><div class=\"line\">$res = Test::find()-&gt;where([<span class=\"string\">'id'</span>=&gt;<span class=\"number\">4</span>])-&gt;one();</div><div class=\"line\">$res-&gt;name = <span class=\"string\">\"update\"</span>;</div><div class=\"line\">$res-&gt;save();</div></pre></td></tr></table></figure></p>\n<h3 id=\"关联查询操作\"><a href=\"#关联查询操作\" class=\"headerlink\" title=\"关联查询操作\"></a>关联查询操作</h3><p>关联查询示例中两个表:<br>一个学生表(student):id ，name;<br>一个分数表(score)：id,stu_id,score<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 相应学生的所有score</span></div><div class=\"line\">$stu = Student::find()-&gt;where([<span class=\"string\">'name'</span>=&gt;<span class=\"string\">'xiaozhuai'</span>])-&gt;one();</div><div class=\"line\">var_dump($stu-&gt;id);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 基本获取</span></div><div class=\"line\">$scores_1 = $stu-&gt;hasMany(<span class=\"string\">'app\\model\\Score'</span>,[<span class=\"string\">'stu_id'</span>=&gt;$stu-&gt;id])-&gt;asArray()-&gt;all();</div><div class=\"line\">$scores_2 = $stu-&gt;hasMany(Score::className(),[<span class=\"string\">'stu_id'</span>=&gt;<span class=\"string\">'id'</span>])-&gt;asArray()-&gt;all();</div><div class=\"line\">var_dump($scores_1);</div><div class=\"line\">var_dump($scores_2);</div></pre></td></tr></table></figure></p>\n<p>两种关联查询方式；但是，在controller进行相关操作，代码显的过于混乱，在model中封装调用</p>\n<p>首先在student model中封装相关关联调用函数<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">namespace</span> <span class=\"title\">app</span>\\<span class=\"title\">models</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">Yii</span>;</div><div class=\"line\"><span class=\"keyword\">use</span> <span class=\"title\">yii</span>\\<span class=\"title\">db</span>\\<span class=\"title\">ActiveRecord</span>;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span> <span class=\"keyword\">extends</span> <span class=\"title\">ActiveRecord</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">tableName</span><span class=\"params\">()</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'student'</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 获取分数信息</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getScores</span><span class=\"params\">()</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        $scores = <span class=\"keyword\">$this</span>-&gt;hasMany(Score::className(), [<span class=\"string\">'stu_id'</span> =&gt; <span class=\"string\">'id'</span>])-&gt;asArray()-&gt;all();</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> $scores;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure></p>\n<p>之后直接调用，两种调用方式<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 函数封装之后调用</span></div><div class=\"line\">$scores = $stu-&gt;getScores();</div><div class=\"line\">var_dump($scores);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 利用__get 的自动调用的方式</span></div><div class=\"line\">$scores = $stu-&gt;scores;</div><div class=\"line\">var_dump($scores);</div></pre></td></tr></table></figure></p>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>上面在yii2的部署和使用过程中的一些基本的增删改查，关联查询等操作。但是如果想要将yii2的db操作使用好，还要看文档大法：<br><a href=\"http://www.yiichina.com/doc/api/2.0/yii-db-activerecord\"> activeRecord doc</a></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/yii2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2%E5%AE%9E%E8%B7%B5.html\">YII2数据库查询实践</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"canvas 生成和合并图片","date":"2015-11-23T09:21:35.000Z","_content":"> 先说背景：工作中遇到一个问题，file组件上传图片，file是可以上传n张图片；但是，后台逻辑历史原因，只能展现一张。因此：考虑到成本，决定在前端**将多张图片合并成一张给后端**。\n\n### 先上代码\n```\n_mergeImage2Canvas:function() {\n    // 获取file上传和展现的图片。一般file上传之后，有个小图标展现。\n    var imgs = $(\".img_files\");\n    if (!imgs) {\n        return false;\n    }\n\n    // 创建原始图像\n    // 原因：file上传之后，展现往往是个缩略图，无法取到真正大小\n    for (var i = 0; i < imgs.length; i++) {\n        var fbwImg   = document.createElement(\"img\");\n        var fbwImgID = \"temp_img_id\" + i;\n        $(\"#\" + fbwImgID).remove();\n        fbwImg.src   = imgs[i].src;\n        fbwImg.className     = \"temp-img-class\";\n        // 不显示，仅供调用\n        fbwImg.style.display = \"none\";\n\n        // 临时区域扩展\n        $(\"#temp_section\").append(fbwImg);\n    }\n\n    // 合并原始图片，生成一个新的base64 图片\n    var getOriginImgBase64 = function (oriImgs) {\n        if (!oriImgs) {\n            return false;\n        }\n        \n        // 获取canvas的宽高\n        // 原因：canvas需要首先指定宽高，所以需要提前获取最终的宽高\n        var maxWidth = 0;\n        var height = 0;\n        for (var i = 0; i < oriImgs.length; i++) {\n            var img = oriImgs[i];\n            if (img.width > maxWidth) {\n                maxWidth = img.width;\n            }\n            height += img.height;\n        }\n\n        // 设定canvas\n        var canvas    = document.createElement(\"canvas\");\n        canvas.width  = maxWidth + 10;\n        canvas.height = height + 10;\n        var ctx       = canvas.getContext(\"2d\");\n\n        // 留5margin\n        var dheight = 5;\n        for (var j = 0; j < oriImgs.length; j++) {\n            var img     = oriImgs[j];\n            var cheight = img.height;\n            var cwidth  = img.width;\n\n            // 留5 margin\n            ctx.drawImage(img, 5, dheight, cwidth, cheight);\n\n            dheight = dheight + cheight + 5;\n        }\n\n        // 生成的base64 放在需要的一个全局变量中。\n        fbw_img_data = canvas.toDataURL('image/png');\n        \n        // 清理\n        $(\".temp_img_class\").remove();\n    };\n\n    // 之所以使用timer，考虑到dom树如果没有加载完成，会取到高度有误差\n    var imgTimer = null;\n    imgTimer = setTimeout(function () {\n        getOriginImgBase64($(\".temp_img_class\"));\n\n        if (imgTimer) {\n            clearTimeout(imgTimer);\n        }\n    }, 300);\n}\n```\n### 合成效果\n图片一：小站logo\n\n[![cuihuan_title (1)](http://cuihuan.net/wp-content/uploads/2015/11/cuihuan_title-1.jpg)](http://cuihuan.net/wp-content/uploads/2015/11/cuihuan_title-1.jpg) \n\n图片二：小图标：\n[![del](http://cuihuan.net/wp-content/uploads/2015/11/del.png)](http://cuihuan.net/wp-content/uploads/2015/11/del.png)\n\n合成效果：\n\n [![下载](http://cuihuan.net/wp-content/uploads/2015/11/下载.png)](http://cuihuan.net/wp-content/uploads/2015/11/下载.png)\n\n\n### 原理简介\n主要是通过canvas 获取多个图片的base64编码，之后通过drawImage 函数合并和toDataUrl的方式合成。\n\n### 问题思考\n- 问题一：必须支持canvas，否则还需要后台统一跑脚本处理。\n- 问题二：性能消耗过大。append img 和base64代码对dom的消耗都挺大，尤其是在移动端，很容易造成崩溃。解决办法：设定最大宽度，将图片等比缩放，这样子就少了向dom扩展元素这部分的损耗。\n- 问题三：base64 在传输上性能消耗也挺大，没有file原生的好。\n\n因此：出了必须前端搞定，最好的方式，还是在后台跑脚本运行合并。\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=253)\n","source":"_posts/canvas_combine_pic.md","raw":"---\ntitle: canvas 生成和合并图片 \ndate: 2015-11-23 17:21:35\ntags: \n- 合成图片\n- canvas\n- javascript\n---\n> 先说背景：工作中遇到一个问题，file组件上传图片，file是可以上传n张图片；但是，后台逻辑历史原因，只能展现一张。因此：考虑到成本，决定在前端**将多张图片合并成一张给后端**。\n\n### 先上代码\n```\n_mergeImage2Canvas:function() {\n    // 获取file上传和展现的图片。一般file上传之后，有个小图标展现。\n    var imgs = $(\".img_files\");\n    if (!imgs) {\n        return false;\n    }\n\n    // 创建原始图像\n    // 原因：file上传之后，展现往往是个缩略图，无法取到真正大小\n    for (var i = 0; i < imgs.length; i++) {\n        var fbwImg   = document.createElement(\"img\");\n        var fbwImgID = \"temp_img_id\" + i;\n        $(\"#\" + fbwImgID).remove();\n        fbwImg.src   = imgs[i].src;\n        fbwImg.className     = \"temp-img-class\";\n        // 不显示，仅供调用\n        fbwImg.style.display = \"none\";\n\n        // 临时区域扩展\n        $(\"#temp_section\").append(fbwImg);\n    }\n\n    // 合并原始图片，生成一个新的base64 图片\n    var getOriginImgBase64 = function (oriImgs) {\n        if (!oriImgs) {\n            return false;\n        }\n        \n        // 获取canvas的宽高\n        // 原因：canvas需要首先指定宽高，所以需要提前获取最终的宽高\n        var maxWidth = 0;\n        var height = 0;\n        for (var i = 0; i < oriImgs.length; i++) {\n            var img = oriImgs[i];\n            if (img.width > maxWidth) {\n                maxWidth = img.width;\n            }\n            height += img.height;\n        }\n\n        // 设定canvas\n        var canvas    = document.createElement(\"canvas\");\n        canvas.width  = maxWidth + 10;\n        canvas.height = height + 10;\n        var ctx       = canvas.getContext(\"2d\");\n\n        // 留5margin\n        var dheight = 5;\n        for (var j = 0; j < oriImgs.length; j++) {\n            var img     = oriImgs[j];\n            var cheight = img.height;\n            var cwidth  = img.width;\n\n            // 留5 margin\n            ctx.drawImage(img, 5, dheight, cwidth, cheight);\n\n            dheight = dheight + cheight + 5;\n        }\n\n        // 生成的base64 放在需要的一个全局变量中。\n        fbw_img_data = canvas.toDataURL('image/png');\n        \n        // 清理\n        $(\".temp_img_class\").remove();\n    };\n\n    // 之所以使用timer，考虑到dom树如果没有加载完成，会取到高度有误差\n    var imgTimer = null;\n    imgTimer = setTimeout(function () {\n        getOriginImgBase64($(\".temp_img_class\"));\n\n        if (imgTimer) {\n            clearTimeout(imgTimer);\n        }\n    }, 300);\n}\n```\n### 合成效果\n图片一：小站logo\n\n[![cuihuan_title (1)](http://cuihuan.net/wp-content/uploads/2015/11/cuihuan_title-1.jpg)](http://cuihuan.net/wp-content/uploads/2015/11/cuihuan_title-1.jpg) \n\n图片二：小图标：\n[![del](http://cuihuan.net/wp-content/uploads/2015/11/del.png)](http://cuihuan.net/wp-content/uploads/2015/11/del.png)\n\n合成效果：\n\n [![下载](http://cuihuan.net/wp-content/uploads/2015/11/下载.png)](http://cuihuan.net/wp-content/uploads/2015/11/下载.png)\n\n\n### 原理简介\n主要是通过canvas 获取多个图片的base64编码，之后通过drawImage 函数合并和toDataUrl的方式合成。\n\n### 问题思考\n- 问题一：必须支持canvas，否则还需要后台统一跑脚本处理。\n- 问题二：性能消耗过大。append img 和base64代码对dom的消耗都挺大，尤其是在移动端，很容易造成崩溃。解决办法：设定最大宽度，将图片等比缩放，这样子就少了向dom扩展元素这部分的损耗。\n- 问题三：base64 在传输上性能消耗也挺大，没有file原生的好。\n\n因此：出了必须前端搞定，最好的方式，还是在后台跑脚本运行合并。\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=253)\n","slug":"canvas_combine_pic","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nir0006661fd5dr6kzg","content":"<blockquote>\n<p>先说背景：工作中遇到一个问题，file组件上传图片，file是可以上传n张图片；但是，后台逻辑历史原因，只能展现一张。因此：考虑到成本，决定在前端<strong>将多张图片合并成一张给后端</strong>。</p>\n</blockquote>\n<h3 id=\"先上代码\"><a href=\"#先上代码\" class=\"headerlink\" title=\"先上代码\"></a>先上代码</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div></pre></td><td class=\"code\"><pre><div class=\"line\">_mergeImage2Canvas:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// 获取file上传和展现的图片。一般file上传之后，有个小图标展现。</span></div><div class=\"line\">    <span class=\"keyword\">var</span> imgs = $(<span class=\"string\">\".img_files\"</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!imgs) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 创建原始图像</span></div><div class=\"line\">    <span class=\"comment\">// 原因：file上传之后，展现往往是个缩略图，无法取到真正大小</span></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; imgs.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> fbwImg   = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"img\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> fbwImgID = <span class=\"string\">\"temp_img_id\"</span> + i;</div><div class=\"line\">        $(<span class=\"string\">\"#\"</span> + fbwImgID).remove();</div><div class=\"line\">        fbwImg.src   = imgs[i].src;</div><div class=\"line\">        fbwImg.className     = <span class=\"string\">\"temp-img-class\"</span>;</div><div class=\"line\">        <span class=\"comment\">// 不显示，仅供调用</span></div><div class=\"line\">        fbwImg.style.display = <span class=\"string\">\"none\"</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 临时区域扩展</span></div><div class=\"line\">        $(<span class=\"string\">\"#temp_section\"</span>).append(fbwImg);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 合并原始图片，生成一个新的base64 图片</span></div><div class=\"line\">    <span class=\"keyword\">var</span> getOriginImgBase64 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">oriImgs</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!oriImgs) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">// 获取canvas的宽高</span></div><div class=\"line\">        <span class=\"comment\">// 原因：canvas需要首先指定宽高，所以需要提前获取最终的宽高</span></div><div class=\"line\">        <span class=\"keyword\">var</span> maxWidth = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> height = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; oriImgs.length; i++) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> img = oriImgs[i];</div><div class=\"line\">            <span class=\"keyword\">if</span> (img.width &gt; maxWidth) &#123;</div><div class=\"line\">                maxWidth = img.width;</div><div class=\"line\">            &#125;</div><div class=\"line\">            height += img.height;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 设定canvas</span></div><div class=\"line\">        <span class=\"keyword\">var</span> canvas    = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"canvas\"</span>);</div><div class=\"line\">        canvas.width  = maxWidth + <span class=\"number\">10</span>;</div><div class=\"line\">        canvas.height = height + <span class=\"number\">10</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> ctx       = canvas.getContext(<span class=\"string\">\"2d\"</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 留5margin</span></div><div class=\"line\">        <span class=\"keyword\">var</span> dheight = <span class=\"number\">5</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; oriImgs.length; j++) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> img     = oriImgs[j];</div><div class=\"line\">            <span class=\"keyword\">var</span> cheight = img.height;</div><div class=\"line\">            <span class=\"keyword\">var</span> cwidth  = img.width;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 留5 margin</span></div><div class=\"line\">            ctx.drawImage(img, <span class=\"number\">5</span>, dheight, cwidth, cheight);</div><div class=\"line\"></div><div class=\"line\">            dheight = dheight + cheight + <span class=\"number\">5</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 生成的base64 放在需要的一个全局变量中。</span></div><div class=\"line\">        fbw_img_data = canvas.toDataURL(<span class=\"string\">'image/png'</span>);</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">// 清理</span></div><div class=\"line\">        $(<span class=\"string\">\".temp_img_class\"</span>).remove();</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 之所以使用timer，考虑到dom树如果没有加载完成，会取到高度有误差</span></div><div class=\"line\">    <span class=\"keyword\">var</span> imgTimer = <span class=\"literal\">null</span>;</div><div class=\"line\">    imgTimer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        getOriginImgBase64($(<span class=\"string\">\".temp_img_class\"</span>));</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (imgTimer) &#123;</div><div class=\"line\">            clearTimeout(imgTimer);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;, <span class=\"number\">300</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"合成效果\"><a href=\"#合成效果\" class=\"headerlink\" title=\"合成效果\"></a>合成效果</h3><p>图片一：小站logo</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/cuihuan_title-1.jpg\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/cuihuan_title-1.jpg\" alt=\"cuihuan_title (1)\"></a> </p>\n<p>图片二：小图标：<br><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/del.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/del.png\" alt=\"del\"></a></p>\n<p>合成效果：</p>\n<p> <a href=\"http://cuihuan.net/wp-content/uploads/2015/11/下载.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/下载.png\" alt=\"下载\"></a></p>\n<h3 id=\"原理简介\"><a href=\"#原理简介\" class=\"headerlink\" title=\"原理简介\"></a>原理简介</h3><p>主要是通过canvas 获取多个图片的base64编码，之后通过drawImage 函数合并和toDataUrl的方式合成。</p>\n<h3 id=\"问题思考\"><a href=\"#问题思考\" class=\"headerlink\" title=\"问题思考\"></a>问题思考</h3><ul>\n<li>问题一：必须支持canvas，否则还需要后台统一跑脚本处理。</li>\n<li>问题二：性能消耗过大。append img 和base64代码对dom的消耗都挺大，尤其是在移动端，很容易造成崩溃。解决办法：设定最大宽度，将图片等比缩放，这样子就少了向dom扩展元素这部分的损耗。</li>\n<li>问题三：base64 在传输上性能消耗也挺大，没有file原生的好。</li>\n</ul>\n<p>因此：出了必须前端搞定，最好的方式，还是在后台跑脚本运行合并。</p>\n<p><a href=\"http://cuihuan.net/?p=253\"> 个人小站原文链接 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>先说背景：工作中遇到一个问题，file组件上传图片，file是可以上传n张图片；但是，后台逻辑历史原因，只能展现一张。因此：考虑到成本，决定在前端<strong>将多张图片合并成一张给后端</strong>。</p>\n</blockquote>\n<h3 id=\"先上代码\"><a href=\"#先上代码\" class=\"headerlink\" title=\"先上代码\"></a>先上代码</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div></pre></td><td class=\"code\"><pre><div class=\"line\">_mergeImage2Canvas:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// 获取file上传和展现的图片。一般file上传之后，有个小图标展现。</span></div><div class=\"line\">    <span class=\"keyword\">var</span> imgs = $(<span class=\"string\">\".img_files\"</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!imgs) &#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 创建原始图像</span></div><div class=\"line\">    <span class=\"comment\">// 原因：file上传之后，展现往往是个缩略图，无法取到真正大小</span></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; imgs.length; i++) &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> fbwImg   = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"img\"</span>);</div><div class=\"line\">        <span class=\"keyword\">var</span> fbwImgID = <span class=\"string\">\"temp_img_id\"</span> + i;</div><div class=\"line\">        $(<span class=\"string\">\"#\"</span> + fbwImgID).remove();</div><div class=\"line\">        fbwImg.src   = imgs[i].src;</div><div class=\"line\">        fbwImg.className     = <span class=\"string\">\"temp-img-class\"</span>;</div><div class=\"line\">        <span class=\"comment\">// 不显示，仅供调用</span></div><div class=\"line\">        fbwImg.style.display = <span class=\"string\">\"none\"</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 临时区域扩展</span></div><div class=\"line\">        $(<span class=\"string\">\"#temp_section\"</span>).append(fbwImg);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 合并原始图片，生成一个新的base64 图片</span></div><div class=\"line\">    <span class=\"keyword\">var</span> getOriginImgBase64 = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">oriImgs</span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (!oriImgs) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">// 获取canvas的宽高</span></div><div class=\"line\">        <span class=\"comment\">// 原因：canvas需要首先指定宽高，所以需要提前获取最终的宽高</span></div><div class=\"line\">        <span class=\"keyword\">var</span> maxWidth = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> height = <span class=\"number\">0</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; oriImgs.length; i++) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> img = oriImgs[i];</div><div class=\"line\">            <span class=\"keyword\">if</span> (img.width &gt; maxWidth) &#123;</div><div class=\"line\">                maxWidth = img.width;</div><div class=\"line\">            &#125;</div><div class=\"line\">            height += img.height;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 设定canvas</span></div><div class=\"line\">        <span class=\"keyword\">var</span> canvas    = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"canvas\"</span>);</div><div class=\"line\">        canvas.width  = maxWidth + <span class=\"number\">10</span>;</div><div class=\"line\">        canvas.height = height + <span class=\"number\">10</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> ctx       = canvas.getContext(<span class=\"string\">\"2d\"</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 留5margin</span></div><div class=\"line\">        <span class=\"keyword\">var</span> dheight = <span class=\"number\">5</span>;</div><div class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> j = <span class=\"number\">0</span>; j &lt; oriImgs.length; j++) &#123;</div><div class=\"line\">            <span class=\"keyword\">var</span> img     = oriImgs[j];</div><div class=\"line\">            <span class=\"keyword\">var</span> cheight = img.height;</div><div class=\"line\">            <span class=\"keyword\">var</span> cwidth  = img.width;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 留5 margin</span></div><div class=\"line\">            ctx.drawImage(img, <span class=\"number\">5</span>, dheight, cwidth, cheight);</div><div class=\"line\"></div><div class=\"line\">            dheight = dheight + cheight + <span class=\"number\">5</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 生成的base64 放在需要的一个全局变量中。</span></div><div class=\"line\">        fbw_img_data = canvas.toDataURL(<span class=\"string\">'image/png'</span>);</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">// 清理</span></div><div class=\"line\">        $(<span class=\"string\">\".temp_img_class\"</span>).remove();</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 之所以使用timer，考虑到dom树如果没有加载完成，会取到高度有误差</span></div><div class=\"line\">    <span class=\"keyword\">var</span> imgTimer = <span class=\"literal\">null</span>;</div><div class=\"line\">    imgTimer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        getOriginImgBase64($(<span class=\"string\">\".temp_img_class\"</span>));</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (imgTimer) &#123;</div><div class=\"line\">            clearTimeout(imgTimer);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;, <span class=\"number\">300</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h3 id=\"合成效果\"><a href=\"#合成效果\" class=\"headerlink\" title=\"合成效果\"></a>合成效果</h3><p>图片一：小站logo</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/cuihuan_title-1.jpg\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/cuihuan_title-1.jpg\" alt=\"cuihuan_title (1)\"></a> </p>\n<p>图片二：小图标：<br><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/del.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/del.png\" alt=\"del\"></a></p>\n<p>合成效果：</p>\n<p> <a href=\"http://cuihuan.net/wp-content/uploads/2015/11/下载.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/下载.png\" alt=\"下载\"></a></p>\n<h3 id=\"原理简介\"><a href=\"#原理简介\" class=\"headerlink\" title=\"原理简介\"></a>原理简介</h3><p>主要是通过canvas 获取多个图片的base64编码，之后通过drawImage 函数合并和toDataUrl的方式合成。</p>\n<h3 id=\"问题思考\"><a href=\"#问题思考\" class=\"headerlink\" title=\"问题思考\"></a>问题思考</h3><ul>\n<li>问题一：必须支持canvas，否则还需要后台统一跑脚本处理。</li>\n<li>问题二：性能消耗过大。append img 和base64代码对dom的消耗都挺大，尤其是在移动端，很容易造成崩溃。解决办法：设定最大宽度，将图片等比缩放，这样子就少了向dom扩展元素这部分的损耗。</li>\n<li>问题三：base64 在传输上性能消耗也挺大，没有file原生的好。</li>\n</ul>\n<p>因此：出了必须前端搞定，最好的方式，还是在后台跑脚本运行合并。</p>\n<p><a href=\"http://cuihuan.net/?p=253\"> 个人小站原文链接 </a></p>\n"},{"title":"【chrome 插件一】开发一个简单chrome浏览器插件","date":"2016-04-26T09:21:35.000Z","_content":"> chrome 之所以越来越好用，很大一部分原因归功于功能丰富的插件；对于chrome忠实用户来说，了解和开发一款适合自己的chrome插件，确实是一件很cool的事情。\n\n## 了解chrome 插件\nchrome 插件个人理解：`就是一个html + js +css + image的一个web应用`；不同于普通的web应用，`chrome插件除了兼容普通的js，json，h5等api，还可以调用一些浏览器级别的api，例如收藏夹，历史记录等。`\n\n推荐两个网站了解和入门\n谷歌官方API：https://developer.chrome.com/extensions/getstarted\n360的文档：http://open.chrome.360.cn/extension_dev/overview.html\n\n## 开始写第一个插件\n### 文件结构\n一个简单的demo，文件目录如下\n[![7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA](http://cuihuan.net/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png)](http://cuihuan.net/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png)\n和普通的web文件没有什么区别，简单介绍下\n- html:存放html页面\n- js :存放js\n- locales ：存放了一个多语言的兼容【可无】\n- image ：放了两张图片【初期图标】\n- manifest ：核心入口文件\n\n### 写一个manifest\napi参考文档 :http://open.chrome.360.cn/extension_dev/manifest.html\n\n直接上代码：\n```\n{\n  \"name\": \"hijack analyse plug\",\n  \"version\": \"0.0.1\",\n  \"manifest_version\": 2,\n\n  // 简单描述\n  \"description\": \"chrome plug analyse and guard the http hijack\",\n  \"icons\": {\n    \"16\": \"image/icon16.png\",\n    \"48\": \"image/icon48.png\"\n  },\n  // 选择默认语言\n  \"default_locale\": \"en\",\n\n  // 浏览器小图表部分\n  \"browser_action\": {\n    \"default_title\": \"反劫持\",\n    \"default_icon\": \"image/icon16.png\",\n    \"default_popup\": \"html/test.html\"\n  },\n\n  // 引入一个脚本\n  \"content_scripts\": [\n    {\n      \"js\": [\"script/test.js\"],\n      // 在什么情况下使用该脚本\n      \"matches\": [\n        \"http://*/*\",\n        \"https://*/*\"\n      ],\n      // 什么情况下运行【文档加载开始】\n      \"run_at\": \"document_start\"\n    }\n  ],\n  // 应用协议页面\n  \"permissions\": [\n    \"http://*/*\",\n    \"https://*/*\"\n  ]\n}\n```\n\ntest.js 文件\n```\n/**\n * @author: cuixiaohuan\n * Date: 16/4/13\n * Time: 下午8:41\n */\n(function(){\n    /**\n     * just test for run by self\n     */\n    console.log('begin');\n})();\n```\n\ntest.html 文件\n```\n<!DOCTYPE html>\n<html>\n<head lang=\"en\">\n    <meta charset=\"UTF-8\">\n    <title>just for test</title>\n</head>\n<body>\n<h3>test</h3>\n</body>\n</html>\n```\n### 运行插件\nchrome 中输入：chrome://extensions\n选择加载已解压的插件-》选择文件根目录即可。\n效果如下：\n\n[![生效插件](http://cuihuan.net/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png)](http://cuihuan.net/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png)\n一个基本的插件变完成了，勾选已启用，随便打开一个网页，会看到log中输出如下\n\n[![运行效果](http://cuihuan.net/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png)](http://cuihuan.net/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png)\n\n点击页面上面的小图标如下图：\n[![右侧展示](http://cuihuan.net/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png)](http://cuihuan.net/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png)\n\n## 优化建议\n一个小的插件已经完成，但是还有更多的api和有趣的事情可以去做。下面是360文档中给出一些优化建议，共勉。\n- 确认 Browser actions 只使用在大多数网站都有功能需求的场景下。确认 Browser actions 没有使用在少数网页才有功能的场景， 此场景请使用page actions。\n- 确认你的图标尺寸尽量占满19x19的像素空间。 Browser action 的图标应该看起来比page action的图标更大更重。\n- 尽量使用alpha通道并且柔滑你的图标边缘，因为很多用户使用themes，你的图标应该在在各种背景下都表现不错。不要不停的闪动你的图标，这很惹人反感。\n\n【转载请注明：[【chrome 插件一】开发一个简单chrome浏览器插件](http://cuihuan.net/article/postmessage%E5%A4%84%E7%90%86iframe-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html) | [靠谱崔小拽](http://cuihuan.net) 】\n","source":"_posts/chrome_1.md","raw":"---\ntitle: 【chrome 插件一】开发一个简单chrome浏览器插件 \ndate: 2016-04-26 17:21:35\ntags: \n- chrome-extension\n- chrome\n- javascript\n---\n> chrome 之所以越来越好用，很大一部分原因归功于功能丰富的插件；对于chrome忠实用户来说，了解和开发一款适合自己的chrome插件，确实是一件很cool的事情。\n\n## 了解chrome 插件\nchrome 插件个人理解：`就是一个html + js +css + image的一个web应用`；不同于普通的web应用，`chrome插件除了兼容普通的js，json，h5等api，还可以调用一些浏览器级别的api，例如收藏夹，历史记录等。`\n\n推荐两个网站了解和入门\n谷歌官方API：https://developer.chrome.com/extensions/getstarted\n360的文档：http://open.chrome.360.cn/extension_dev/overview.html\n\n## 开始写第一个插件\n### 文件结构\n一个简单的demo，文件目录如下\n[![7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA](http://cuihuan.net/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png)](http://cuihuan.net/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png)\n和普通的web文件没有什么区别，简单介绍下\n- html:存放html页面\n- js :存放js\n- locales ：存放了一个多语言的兼容【可无】\n- image ：放了两张图片【初期图标】\n- manifest ：核心入口文件\n\n### 写一个manifest\napi参考文档 :http://open.chrome.360.cn/extension_dev/manifest.html\n\n直接上代码：\n```\n{\n  \"name\": \"hijack analyse plug\",\n  \"version\": \"0.0.1\",\n  \"manifest_version\": 2,\n\n  // 简单描述\n  \"description\": \"chrome plug analyse and guard the http hijack\",\n  \"icons\": {\n    \"16\": \"image/icon16.png\",\n    \"48\": \"image/icon48.png\"\n  },\n  // 选择默认语言\n  \"default_locale\": \"en\",\n\n  // 浏览器小图表部分\n  \"browser_action\": {\n    \"default_title\": \"反劫持\",\n    \"default_icon\": \"image/icon16.png\",\n    \"default_popup\": \"html/test.html\"\n  },\n\n  // 引入一个脚本\n  \"content_scripts\": [\n    {\n      \"js\": [\"script/test.js\"],\n      // 在什么情况下使用该脚本\n      \"matches\": [\n        \"http://*/*\",\n        \"https://*/*\"\n      ],\n      // 什么情况下运行【文档加载开始】\n      \"run_at\": \"document_start\"\n    }\n  ],\n  // 应用协议页面\n  \"permissions\": [\n    \"http://*/*\",\n    \"https://*/*\"\n  ]\n}\n```\n\ntest.js 文件\n```\n/**\n * @author: cuixiaohuan\n * Date: 16/4/13\n * Time: 下午8:41\n */\n(function(){\n    /**\n     * just test for run by self\n     */\n    console.log('begin');\n})();\n```\n\ntest.html 文件\n```\n<!DOCTYPE html>\n<html>\n<head lang=\"en\">\n    <meta charset=\"UTF-8\">\n    <title>just for test</title>\n</head>\n<body>\n<h3>test</h3>\n</body>\n</html>\n```\n### 运行插件\nchrome 中输入：chrome://extensions\n选择加载已解压的插件-》选择文件根目录即可。\n效果如下：\n\n[![生效插件](http://cuihuan.net/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png)](http://cuihuan.net/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png)\n一个基本的插件变完成了，勾选已启用，随便打开一个网页，会看到log中输出如下\n\n[![运行效果](http://cuihuan.net/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png)](http://cuihuan.net/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png)\n\n点击页面上面的小图标如下图：\n[![右侧展示](http://cuihuan.net/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png)](http://cuihuan.net/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png)\n\n## 优化建议\n一个小的插件已经完成，但是还有更多的api和有趣的事情可以去做。下面是360文档中给出一些优化建议，共勉。\n- 确认 Browser actions 只使用在大多数网站都有功能需求的场景下。确认 Browser actions 没有使用在少数网页才有功能的场景， 此场景请使用page actions。\n- 确认你的图标尺寸尽量占满19x19的像素空间。 Browser action 的图标应该看起来比page action的图标更大更重。\n- 尽量使用alpha通道并且柔滑你的图标边缘，因为很多用户使用themes，你的图标应该在在各种背景下都表现不错。不要不停的闪动你的图标，这很惹人反感。\n\n【转载请注明：[【chrome 插件一】开发一个简单chrome浏览器插件](http://cuihuan.net/article/postmessage%E5%A4%84%E7%90%86iframe-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html) | [靠谱崔小拽](http://cuihuan.net) 】\n","slug":"chrome_1","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9niy0008661fbgzm3w7b","content":"<blockquote>\n<p>chrome 之所以越来越好用，很大一部分原因归功于功能丰富的插件；对于chrome忠实用户来说，了解和开发一款适合自己的chrome插件，确实是一件很cool的事情。</p>\n</blockquote>\n<h2 id=\"了解chrome-插件\"><a href=\"#了解chrome-插件\" class=\"headerlink\" title=\"了解chrome 插件\"></a>了解chrome 插件</h2><p>chrome 插件个人理解：<code>就是一个html + js +css + image的一个web应用</code>；不同于普通的web应用，<code>chrome插件除了兼容普通的js，json，h5等api，还可以调用一些浏览器级别的api，例如收藏夹，历史记录等。</code></p>\n<p>推荐两个网站了解和入门<br>谷歌官方API：<a href=\"https://developer.chrome.com/extensions/getstarted\" target=\"_blank\" rel=\"external\">https://developer.chrome.com/extensions/getstarted</a><br>360的文档：<a href=\"http://open.chrome.360.cn/extension_dev/overview.html\" target=\"_blank\" rel=\"external\">http://open.chrome.360.cn/extension_dev/overview.html</a></p>\n<h2 id=\"开始写第一个插件\"><a href=\"#开始写第一个插件\" class=\"headerlink\" title=\"开始写第一个插件\"></a>开始写第一个插件</h2><h3 id=\"文件结构\"><a href=\"#文件结构\" class=\"headerlink\" title=\"文件结构\"></a>文件结构</h3><p>一个简单的demo，文件目录如下<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png\" alt=\"7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA\"></a><br>和普通的web文件没有什么区别，简单介绍下</p>\n<ul>\n<li>html:存放html页面</li>\n<li>js :存放js</li>\n<li>locales ：存放了一个多语言的兼容【可无】</li>\n<li>image ：放了两张图片【初期图标】</li>\n<li>manifest ：核心入口文件</li>\n</ul>\n<h3 id=\"写一个manifest\"><a href=\"#写一个manifest\" class=\"headerlink\" title=\"写一个manifest\"></a>写一个manifest</h3><p>api参考文档 :<a href=\"http://open.chrome.360.cn/extension_dev/manifest.html\" target=\"_blank\" rel=\"external\">http://open.chrome.360.cn/extension_dev/manifest.html</a></p>\n<p>直接上代码：<br><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"hijack analyse plug\"</span>,</div><div class=\"line\">  <span class=\"string\">\"version\"</span>: <span class=\"string\">\"0.0.1\"</span>,</div><div class=\"line\">  <span class=\"string\">\"manifest_version\"</span>: <span class=\"number\">2</span>,</div><div class=\"line\"></div><div class=\"line\">  // 简单描述</div><div class=\"line\">  <span class=\"string\">\"description\"</span>: <span class=\"string\">\"chrome plug analyse and guard the http hijack\"</span>,</div><div class=\"line\">  <span class=\"string\">\"icons\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"16\"</span>: <span class=\"string\">\"image/icon16.png\"</span>,</div><div class=\"line\">    <span class=\"string\">\"48\"</span>: <span class=\"string\">\"image/icon48.png\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  // 选择默认语言</div><div class=\"line\">  <span class=\"string\">\"default_locale\"</span>: <span class=\"string\">\"en\"</span>,</div><div class=\"line\"></div><div class=\"line\">  // 浏览器小图表部分</div><div class=\"line\">  <span class=\"string\">\"browser_action\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"default_title\"</span>: <span class=\"string\">\"反劫持\"</span>,</div><div class=\"line\">    <span class=\"string\">\"default_icon\"</span>: <span class=\"string\">\"image/icon16.png\"</span>,</div><div class=\"line\">    <span class=\"string\">\"default_popup\"</span>: <span class=\"string\">\"html/test.html\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  // 引入一个脚本</div><div class=\"line\">  <span class=\"string\">\"content_scripts\"</span>: [</div><div class=\"line\">    &#123;</div><div class=\"line\">      <span class=\"string\">\"js\"</span>: [<span class=\"string\">\"script/test.js\"</span>],</div><div class=\"line\">      // 在什么情况下使用该脚本</div><div class=\"line\">      <span class=\"string\">\"matches\"</span>: [</div><div class=\"line\">        <span class=\"string\">\"http://*/*\"</span>,</div><div class=\"line\">        <span class=\"string\">\"https://*/*\"</span></div><div class=\"line\">      ],</div><div class=\"line\">      // 什么情况下运行【文档加载开始】</div><div class=\"line\">      <span class=\"string\">\"run_at\"</span>: <span class=\"string\">\"document_start\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  ],</div><div class=\"line\">  // 应用协议页面</div><div class=\"line\">  <span class=\"string\">\"permissions\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"http://*/*\"</span>,</div><div class=\"line\">    <span class=\"string\">\"https://*/*\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>test.js 文件<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * @author: cuixiaohuan</div><div class=\"line\"> * Date: 16/4/13</div><div class=\"line\"> * Time: 下午8:41</div><div class=\"line\"> */</div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * just test for run by self</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'begin'</span>);</div><div class=\"line\">&#125;)();</div></pre></td></tr></table></figure></p>\n<p>test.html 文件<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>just for test<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"运行插件\"><a href=\"#运行插件\" class=\"headerlink\" title=\"运行插件\"></a>运行插件</h3><p>chrome 中输入：chrome://extensions<br>选择加载已解压的插件-》选择文件根目录即可。<br>效果如下：</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png\" alt=\"生效插件\"></a><br>一个基本的插件变完成了，勾选已启用，随便打开一个网页，会看到log中输出如下</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png\" alt=\"运行效果\"></a></p>\n<p>点击页面上面的小图标如下图：<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png\" alt=\"右侧展示\"></a></p>\n<h2 id=\"优化建议\"><a href=\"#优化建议\" class=\"headerlink\" title=\"优化建议\"></a>优化建议</h2><p>一个小的插件已经完成，但是还有更多的api和有趣的事情可以去做。下面是360文档中给出一些优化建议，共勉。</p>\n<ul>\n<li>确认 Browser actions 只使用在大多数网站都有功能需求的场景下。确认 Browser actions 没有使用在少数网页才有功能的场景， 此场景请使用page actions。</li>\n<li>确认你的图标尺寸尽量占满19x19的像素空间。 Browser action 的图标应该看起来比page action的图标更大更重。</li>\n<li>尽量使用alpha通道并且柔滑你的图标边缘，因为很多用户使用themes，你的图标应该在在各种背景下都表现不错。不要不停的闪动你的图标，这很惹人反感。</li>\n</ul>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/postmessage%E5%A4%84%E7%90%86iframe-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html\">【chrome 插件一】开发一个简单chrome浏览器插件</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>chrome 之所以越来越好用，很大一部分原因归功于功能丰富的插件；对于chrome忠实用户来说，了解和开发一款适合自己的chrome插件，确实是一件很cool的事情。</p>\n</blockquote>\n<h2 id=\"了解chrome-插件\"><a href=\"#了解chrome-插件\" class=\"headerlink\" title=\"了解chrome 插件\"></a>了解chrome 插件</h2><p>chrome 插件个人理解：<code>就是一个html + js +css + image的一个web应用</code>；不同于普通的web应用，<code>chrome插件除了兼容普通的js，json，h5等api，还可以调用一些浏览器级别的api，例如收藏夹，历史记录等。</code></p>\n<p>推荐两个网站了解和入门<br>谷歌官方API：<a href=\"https://developer.chrome.com/extensions/getstarted\">https://developer.chrome.com/extensions/getstarted</a><br>360的文档：<a href=\"http://open.chrome.360.cn/extension_dev/overview.html\">http://open.chrome.360.cn/extension_dev/overview.html</a></p>\n<h2 id=\"开始写第一个插件\"><a href=\"#开始写第一个插件\" class=\"headerlink\" title=\"开始写第一个插件\"></a>开始写第一个插件</h2><h3 id=\"文件结构\"><a href=\"#文件结构\" class=\"headerlink\" title=\"文件结构\"></a>文件结构</h3><p>一个简单的demo，文件目录如下<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA.png\" alt=\"7A980C32-7D7B-44F6-AC5D-C0CC02F79ACA\"></a><br>和普通的web文件没有什么区别，简单介绍下</p>\n<ul>\n<li>html:存放html页面</li>\n<li>js :存放js</li>\n<li>locales ：存放了一个多语言的兼容【可无】</li>\n<li>image ：放了两张图片【初期图标】</li>\n<li>manifest ：核心入口文件</li>\n</ul>\n<h3 id=\"写一个manifest\"><a href=\"#写一个manifest\" class=\"headerlink\" title=\"写一个manifest\"></a>写一个manifest</h3><p>api参考文档 :<a href=\"http://open.chrome.360.cn/extension_dev/manifest.html\">http://open.chrome.360.cn/extension_dev/manifest.html</a></p>\n<p>直接上代码：<br><figure class=\"highlight clojure\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div></pre></td><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"hijack analyse plug\"</span>,</div><div class=\"line\">  <span class=\"string\">\"version\"</span>: <span class=\"string\">\"0.0.1\"</span>,</div><div class=\"line\">  <span class=\"string\">\"manifest_version\"</span>: <span class=\"number\">2</span>,</div><div class=\"line\"></div><div class=\"line\">  // 简单描述</div><div class=\"line\">  <span class=\"string\">\"description\"</span>: <span class=\"string\">\"chrome plug analyse and guard the http hijack\"</span>,</div><div class=\"line\">  <span class=\"string\">\"icons\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"16\"</span>: <span class=\"string\">\"image/icon16.png\"</span>,</div><div class=\"line\">    <span class=\"string\">\"48\"</span>: <span class=\"string\">\"image/icon48.png\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  // 选择默认语言</div><div class=\"line\">  <span class=\"string\">\"default_locale\"</span>: <span class=\"string\">\"en\"</span>,</div><div class=\"line\"></div><div class=\"line\">  // 浏览器小图表部分</div><div class=\"line\">  <span class=\"string\">\"browser_action\"</span>: &#123;</div><div class=\"line\">    <span class=\"string\">\"default_title\"</span>: <span class=\"string\">\"反劫持\"</span>,</div><div class=\"line\">    <span class=\"string\">\"default_icon\"</span>: <span class=\"string\">\"image/icon16.png\"</span>,</div><div class=\"line\">    <span class=\"string\">\"default_popup\"</span>: <span class=\"string\">\"html/test.html\"</span></div><div class=\"line\">  &#125;,</div><div class=\"line\"></div><div class=\"line\">  // 引入一个脚本</div><div class=\"line\">  <span class=\"string\">\"content_scripts\"</span>: [</div><div class=\"line\">    &#123;</div><div class=\"line\">      <span class=\"string\">\"js\"</span>: [<span class=\"string\">\"script/test.js\"</span>],</div><div class=\"line\">      // 在什么情况下使用该脚本</div><div class=\"line\">      <span class=\"string\">\"matches\"</span>: [</div><div class=\"line\">        <span class=\"string\">\"http://*/*\"</span>,</div><div class=\"line\">        <span class=\"string\">\"https://*/*\"</span></div><div class=\"line\">      ],</div><div class=\"line\">      // 什么情况下运行【文档加载开始】</div><div class=\"line\">      <span class=\"string\">\"run_at\"</span>: <span class=\"string\">\"document_start\"</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  ],</div><div class=\"line\">  // 应用协议页面</div><div class=\"line\">  <span class=\"string\">\"permissions\"</span>: [</div><div class=\"line\">    <span class=\"string\">\"http://*/*\"</span>,</div><div class=\"line\">    <span class=\"string\">\"https://*/*\"</span></div><div class=\"line\">  ]</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>test.js 文件<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * @author: cuixiaohuan</div><div class=\"line\"> * Date: 16/4/13</div><div class=\"line\"> * Time: 下午8:41</div><div class=\"line\"> */</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * just test for run by self</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'begin'</span>);</div><div class=\"line\">&#125;)();</div></pre></td></tr></table></figure></p>\n<p>test.html 文件<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!DOCTYPE html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>just for test<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>test<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"运行插件\"><a href=\"#运行插件\" class=\"headerlink\" title=\"运行插件\"></a>运行插件</h3><p>chrome 中输入：chrome://extensions<br>选择加载已解压的插件-》选择文件根目录即可。<br>效果如下：</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/475BA7E7-29F3-48AF-9990-2B73FF1B4B56.png\" alt=\"生效插件\"></a><br>一个基本的插件变完成了，勾选已启用，随便打开一个网页，会看到log中输出如下</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/50F1039A-71C0-463F-A60D-C95527985C7E.png\" alt=\"运行效果\"></a></p>\n<p>点击页面上面的小图标如下图：<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/25CF59DD-0666-4A6F-ACA3-683D1FEEA346.png\" alt=\"右侧展示\"></a></p>\n<h2 id=\"优化建议\"><a href=\"#优化建议\" class=\"headerlink\" title=\"优化建议\"></a>优化建议</h2><p>一个小的插件已经完成，但是还有更多的api和有趣的事情可以去做。下面是360文档中给出一些优化建议，共勉。</p>\n<ul>\n<li>确认 Browser actions 只使用在大多数网站都有功能需求的场景下。确认 Browser actions 没有使用在少数网页才有功能的场景， 此场景请使用page actions。</li>\n<li>确认你的图标尺寸尽量占满19x19的像素空间。 Browser action 的图标应该看起来比page action的图标更大更重。</li>\n<li>尽量使用alpha通道并且柔滑你的图标边缘，因为很多用户使用themes，你的图标应该在在各种背景下都表现不错。不要不停的闪动你的图标，这很惹人反感。</li>\n</ul>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/postmessage%E5%A4%84%E7%90%86iframe-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html\">【chrome 插件一】开发一个简单chrome浏览器插件</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"crontab 误删除恢复","date":"2015-12-03T09:21:35.000Z","_content":"\n> 操作过程中：crontab被全部干掉了，利用log恢复过程记录。\n\n## 事故原因分析：\n回忆自己操作过程中，未进行crontab的清空，网上查了下原因，并且复现了下。可能原因如下：\n\n**如果在SSH远程终端中敲下“crontab”命令之后，远程连接被一些原因（比如 糟糕的网络，程序异常）意外终止了，那么Crontab计划任务就会被操作系统所清空。听起来很不可思议，但是经过在虚拟机上的多次测试，它确确实实的发生了。测试方式为 用SecureCRT开一个SSH窗口，然后敲下命令“crontab”，接着在“任务管理器”中直接杀掉SecureCRT进程，再通过另外一个SSH窗口执行“crontab -l”，就会发现，所有的计划任务都不存在了。在今天事故发生的时间点上，就有人在服务器上遇到了这样的情况。**\n\n## 恢复操作\n\n-  获取完整日志和cmd日志。\n从日志中恢复出一份最近几天的完整crontab 运行日志和cmd日志，并存储，用于之后完善和核准例行时间。\n```\ncat /var/log/cron | grep -i \"`which cron`\" > ./all_temp\ncat  ./all_temp | grep -v \"<command>” > ./cmd_temp\n```\n\n-  获取所有crontab指令。\n从日志中恢复一份去重的crontab log。【相当于所有的crontab命令】\n```\nawk -F'(' '/crond/{a[$3]=$0}END{for(i in a)print a[i]}' /var/log/cron* >crontab.txt\n```\n- 手工恢复：\n从crontab.txt 中找出每一条指令，然后在cmd_temp 中匹配运行次数，重新编辑crontab 添加\n\n## 反思工作\n防止类似事件再次发生，写个简单shell脚本，每天对crontab进行备份，备份最近15天的数据。过期清楚\n```\n#!/bin/bash\n# 每天对crontab 进行备份 ，同时删除最近15天的数据\nDATE=$(date +%Y%m%d)\n\ncrontab -l > /home/work/bak/crontab_$DATE.bak\nfind /home/work/bak/ -mtime +15 -name '*.bak' -exec rm -rf {} \\;\n```\n[ 本人小站原文链接 ](http://cuihuan.net/?p=282)\n","source":"_posts/crontab 误删除恢复.md","raw":"---\ntitle: crontab 误删除恢复 \ndate: 2015-12-03 17:21:35\ntags: \n- crontab\n- linux\n---\n\n> 操作过程中：crontab被全部干掉了，利用log恢复过程记录。\n\n## 事故原因分析：\n回忆自己操作过程中，未进行crontab的清空，网上查了下原因，并且复现了下。可能原因如下：\n\n**如果在SSH远程终端中敲下“crontab”命令之后，远程连接被一些原因（比如 糟糕的网络，程序异常）意外终止了，那么Crontab计划任务就会被操作系统所清空。听起来很不可思议，但是经过在虚拟机上的多次测试，它确确实实的发生了。测试方式为 用SecureCRT开一个SSH窗口，然后敲下命令“crontab”，接着在“任务管理器”中直接杀掉SecureCRT进程，再通过另外一个SSH窗口执行“crontab -l”，就会发现，所有的计划任务都不存在了。在今天事故发生的时间点上，就有人在服务器上遇到了这样的情况。**\n\n## 恢复操作\n\n-  获取完整日志和cmd日志。\n从日志中恢复出一份最近几天的完整crontab 运行日志和cmd日志，并存储，用于之后完善和核准例行时间。\n```\ncat /var/log/cron | grep -i \"`which cron`\" > ./all_temp\ncat  ./all_temp | grep -v \"<command>” > ./cmd_temp\n```\n\n-  获取所有crontab指令。\n从日志中恢复一份去重的crontab log。【相当于所有的crontab命令】\n```\nawk -F'(' '/crond/{a[$3]=$0}END{for(i in a)print a[i]}' /var/log/cron* >crontab.txt\n```\n- 手工恢复：\n从crontab.txt 中找出每一条指令，然后在cmd_temp 中匹配运行次数，重新编辑crontab 添加\n\n## 反思工作\n防止类似事件再次发生，写个简单shell脚本，每天对crontab进行备份，备份最近15天的数据。过期清楚\n```\n#!/bin/bash\n# 每天对crontab 进行备份 ，同时删除最近15天的数据\nDATE=$(date +%Y%m%d)\n\ncrontab -l > /home/work/bak/crontab_$DATE.bak\nfind /home/work/bak/ -mtime +15 -name '*.bak' -exec rm -rf {} \\;\n```\n[ 本人小站原文链接 ](http://cuihuan.net/?p=282)\n","slug":"crontab 误删除恢复","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nj2000a661fb1kemw7x","content":"<blockquote>\n<p>操作过程中：crontab被全部干掉了，利用log恢复过程记录。</p>\n</blockquote>\n<h2 id=\"事故原因分析：\"><a href=\"#事故原因分析：\" class=\"headerlink\" title=\"事故原因分析：\"></a>事故原因分析：</h2><p>回忆自己操作过程中，未进行crontab的清空，网上查了下原因，并且复现了下。可能原因如下：</p>\n<p><strong>如果在SSH远程终端中敲下“crontab”命令之后，远程连接被一些原因（比如 糟糕的网络，程序异常）意外终止了，那么Crontab计划任务就会被操作系统所清空。听起来很不可思议，但是经过在虚拟机上的多次测试，它确确实实的发生了。测试方式为 用SecureCRT开一个SSH窗口，然后敲下命令“crontab”，接着在“任务管理器”中直接杀掉SecureCRT进程，再通过另外一个SSH窗口执行“crontab -l”，就会发现，所有的计划任务都不存在了。在今天事故发生的时间点上，就有人在服务器上遇到了这样的情况。</strong></p>\n<h2 id=\"恢复操作\"><a href=\"#恢复操作\" class=\"headerlink\" title=\"恢复操作\"></a>恢复操作</h2><ul>\n<li><p>获取完整日志和cmd日志。<br>从日志中恢复出一份最近几天的完整crontab 运行日志和cmd日志，并存储，用于之后完善和核准例行时间。</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cat</span> /var/<span class=\"built_in\">log</span>/cron | <span class=\"keyword\">grep</span> -i <span class=\"string\">\"`which cron`\"</span> &gt; ./all_temp</div><div class=\"line\"><span class=\"keyword\">cat</span>  ./all_temp | <span class=\"keyword\">grep</span> -v <span class=\"comment\">\"&lt;command&gt;” &gt; ./cmd_temp</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>获取所有crontab指令。<br>从日志中恢复一份去重的crontab log。【相当于所有的crontab命令】</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">awk -F'(' '/crond/&#123;a[<span class=\"variable\">$3</span>]=<span class=\"variable\">$0&#125;</span>END&#123;<span class=\"keyword\">for</span>(i <span class=\"keyword\">in</span> a)<span class=\"keyword\">print</span> a[i]&#125;' /<span class=\"keyword\">var</span>/<span class=\"keyword\">log</span>/cron* &gt;crontab.txt</div></pre></td></tr></table></figure>\n</li>\n<li><p>手工恢复：<br>从crontab.txt 中找出每一条指令，然后在cmd_temp 中匹配运行次数，重新编辑crontab 添加</p>\n</li>\n</ul>\n<h2 id=\"反思工作\"><a href=\"#反思工作\" class=\"headerlink\" title=\"反思工作\"></a>反思工作</h2><p>防止类似事件再次发生，写个简单shell脚本，每天对crontab进行备份，备份最近15天的数据。过期清楚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"><span class=\"comment\"># 每天对crontab 进行备份 ，同时删除最近15天的数据</span></div><div class=\"line\">DATE=$(date +%Y%m%d)</div><div class=\"line\"></div><div class=\"line\">crontab <span class=\"_\">-l</span> &gt; /home/work/bak/crontab_<span class=\"variable\">$DATE</span>.bak</div><div class=\"line\">find /home/work/bak/ -mtime +15 -name <span class=\"string\">'*.bak'</span> -exec rm -rf &#123;&#125; \\;</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cuihuan.net/?p=282\"> 本人小站原文链接 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>操作过程中：crontab被全部干掉了，利用log恢复过程记录。</p>\n</blockquote>\n<h2 id=\"事故原因分析：\"><a href=\"#事故原因分析：\" class=\"headerlink\" title=\"事故原因分析：\"></a>事故原因分析：</h2><p>回忆自己操作过程中，未进行crontab的清空，网上查了下原因，并且复现了下。可能原因如下：</p>\n<p><strong>如果在SSH远程终端中敲下“crontab”命令之后，远程连接被一些原因（比如 糟糕的网络，程序异常）意外终止了，那么Crontab计划任务就会被操作系统所清空。听起来很不可思议，但是经过在虚拟机上的多次测试，它确确实实的发生了。测试方式为 用SecureCRT开一个SSH窗口，然后敲下命令“crontab”，接着在“任务管理器”中直接杀掉SecureCRT进程，再通过另外一个SSH窗口执行“crontab -l”，就会发现，所有的计划任务都不存在了。在今天事故发生的时间点上，就有人在服务器上遇到了这样的情况。</strong></p>\n<h2 id=\"恢复操作\"><a href=\"#恢复操作\" class=\"headerlink\" title=\"恢复操作\"></a>恢复操作</h2><ul>\n<li><p>获取完整日志和cmd日志。<br>从日志中恢复出一份最近几天的完整crontab 运行日志和cmd日志，并存储，用于之后完善和核准例行时间。</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">cat</span> /var/<span class=\"built_in\">log</span>/cron | <span class=\"keyword\">grep</span> -i <span class=\"string\">\"`which cron`\"</span> &gt; ./all_temp</div><div class=\"line\"><span class=\"keyword\">cat</span>  ./all_temp | <span class=\"keyword\">grep</span> -v <span class=\"comment\">\"&lt;command&gt;” &gt; ./cmd_temp</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>获取所有crontab指令。<br>从日志中恢复一份去重的crontab log。【相当于所有的crontab命令】</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">awk -F'(' '/crond/&#123;a[<span class=\"variable\">$3</span>]=<span class=\"variable\">$0&#125;</span>END&#123;<span class=\"keyword\">for</span>(i <span class=\"keyword\">in</span> a)<span class=\"keyword\">print</span> a[i]&#125;' /<span class=\"keyword\">var</span>/<span class=\"keyword\">log</span>/cron* &gt;crontab.txt</div></pre></td></tr></table></figure>\n</li>\n<li><p>手工恢复：<br>从crontab.txt 中找出每一条指令，然后在cmd_temp 中匹配运行次数，重新编辑crontab 添加</p>\n</li>\n</ul>\n<h2 id=\"反思工作\"><a href=\"#反思工作\" class=\"headerlink\" title=\"反思工作\"></a>反思工作</h2><p>防止类似事件再次发生，写个简单shell脚本，每天对crontab进行备份，备份最近15天的数据。过期清楚<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"><span class=\"comment\"># 每天对crontab 进行备份 ，同时删除最近15天的数据</span></div><div class=\"line\">DATE=$(date +%Y%m%d)</div><div class=\"line\"></div><div class=\"line\">crontab <span class=\"_\">-l</span> &gt; /home/work/bak/crontab_<span class=\"variable\">$DATE</span>.bak</div><div class=\"line\">find /home/work/bak/ -mtime +15 -name <span class=\"string\">'*.bak'</span> -exec rm -rf &#123;&#125; \\;</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cuihuan.net/?p=282\"> 本人小站原文链接 </a></p>\n"},{"title":"【chrome 插件二】添加菜单和添加消息提醒","date":"2016-04-20T09:21:35.000Z","_content":"> 上一篇中简单的接触了chrome插件，并且草草的制作一个chrome 插件（-_-只中看，不能用）；这次主要学习，`browse action api制作菜单制作和调用系统提醒`。\n\n## browse action\nbrowse action 包括四部分：一个图标，一个tooltip，一个badge和一个pophtml\n先上代码和效果\n```\n \"browser_action\": {\n    \"default_title\": \"反劫持工具\",\n    \"default_icon\": \"image/icon_19.png\",\n    \"default_popup\": \"html/popup.html\"\n  },\n```\n[![red](http://cuihuan.net/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png)](http://cuihuan.net/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png)\n### 图标\n图标优化：`最好是19px，这样基本占满`，可以直接使用图标也可以用h5 canvas element，同时，`图片一定要是背景透明的`。\n\nps处理后页面效果如下：\n\n[![title](http://cuihuan.net/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png)](http://cuihuan.net/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png)\n\n### tooltip\n直接设置default_title 效果是鼠标经过显示标题效果\n\n### badge:\n这个相当于设置图片文字和背景色：提供了两个方法：设置badge文字和颜色可以分别使用setBadgeText()andsetBadgeBackgroundColor()。\n\n### pophtml：创建菜单\n上码：`能用代码说话的，不用文字`\njs\n```\n/**\n * @author: cuixiaohuan\n * Date: 16/4/19\n * Time: 下午9:41\n */\n\n/**\n * 点击菜单的事件\n *\n * @param e\n */\nfunction click(e) {\n    chrome.tabs.executeScript(null,\n        {\n            // 更改背景色\n            code: \"document.body.style.backgroundColor='\" + e.target.id + \"'\"\n        }\n    );\n\n    window.close();\n}\n\n/**\n * 页面加载完成后，监听事件\n */\ndocument.addEventListener('DOMContentLoaded', function () {\n    var divs = document.querySelectorAll('div');\n    for (var i = 0; i < divs.length; i++) {\n        divs[i].addEventListener('click', click);\n    }\n});\n\n\n```\nhtml\n```\n<!doctype html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <title>Set Page Color Popup</title>\n    <style>\n        body {\n            overflow: hidden;\n            margin: 0px;\n            padding: 0px;\n            background: white;\n        }\n\n        div:first-child {\n            margin-top: 0px;\n        }\n\n        div {\n            cursor: pointer;\n            text-align: center;\n            padding: 1px 3px;\n            font-family: sans-serif;\n            font-size: 0.8em;\n            width: 100px;\n            margin-top: 1px;\n            background: #cccccc;\n        }\n\n        div:hover {\n            background: #aaaaaa;\n        }\n\n        #red {\n            border: 1px solid red;\n            color: red;\n        }\n\n        #blue {\n            border: 1px solid blue;\n            color: blue;\n        }\n\n        #green {\n            border: 1px solid green;\n            color: green;\n        }\n\n        #yellow {\n            border: 1px solid yellow;\n            color: yellow;\n        }\n    </style>\n    <script src=\"../script/changeBackgroud.js\"></script>\n</head>\n<body>\n    <div id=\"red\">红色小拽</div>\n    <div id=\"blue\">绿色小拽</div>\n    <div id=\"green\">蓝色小拽</div>\n    <div id=\"yellow\">换色小拽</div>\n  </body>\n</html>\n```\n效果图\n[![blue](http://cuihuan.net/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png)](http://cuihuan.net/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png)\n\n## 调用系统提醒\nnotification api 官方文档:https://developer.chrome.com/extensions/notifications\n注意\n- chrome32 之前的预警接口不太一样，文档中已经说明。\n- 使用预警一定要加上权限统一\n```\n  \"permissions\": [\n    \"notifications\"\n  ],\n```\n调用系统提醒代码\n```\n\n// 用户授权\nif (Notification.permission == \"granted\") {\n    Notification.requestPermission();\n}\n\n/**\n * 调用系统提醒\n * \n * 第一次进入页面需要授权，之后弹出提醒\n */\nfunction notifyMe() {\n    if (!Notification) {\n        alert('Desktop notifications not available in your browser. Try Chromium.');\n        return;\n    }\n\n    if (Notification.permission !== \"granted\"){\n        Notification.requestPermission();\n\n    } else {\n        var notification = new Notification('小拽提醒', {\n            icon: 'http://cuihuan.net/wp-content/themes/quench-master/images/cuihuan_title.jpg',\n            body: \"别点击，点击跳转'靠谱崔小拽'\"\n        });\n\n        notification.onclick = function () {\n            window.open(\"http://cuihuan.net\");\n        };\n\n    }\n}\n\n```\n初次进去提醒，授权\n[![notify_allow](http://cuihuan.net/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png)](http://cuihuan.net/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png)\n\n提醒效果如右上角所示\n[![notify](http://cuihuan.net/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png)](http://cuihuan.net/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png)\n\n通过菜单和提醒，我们基本就可以完成一个简单的闹钟提醒，每隔30分钟提醒，码农扭扭脑袋，伸伸懒腰，小心肩周炎-_-!\n\n\n【转载请注明：[【chrome 插件二】弹出菜单和系统提醒学习](http://cuihuan.net/?p=454) | [靠谱崔小拽](http://cuihuan.net) 】","source":"_posts/chrome_2.md","raw":"---\ntitle: 【chrome 插件二】添加菜单和添加消息提醒 \ndate: 2016-04-20 17:21:35\ntags: \n- chrome-extension\n- chrome\n- javascript\n---\n> 上一篇中简单的接触了chrome插件，并且草草的制作一个chrome 插件（-_-只中看，不能用）；这次主要学习，`browse action api制作菜单制作和调用系统提醒`。\n\n## browse action\nbrowse action 包括四部分：一个图标，一个tooltip，一个badge和一个pophtml\n先上代码和效果\n```\n \"browser_action\": {\n    \"default_title\": \"反劫持工具\",\n    \"default_icon\": \"image/icon_19.png\",\n    \"default_popup\": \"html/popup.html\"\n  },\n```\n[![red](http://cuihuan.net/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png)](http://cuihuan.net/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png)\n### 图标\n图标优化：`最好是19px，这样基本占满`，可以直接使用图标也可以用h5 canvas element，同时，`图片一定要是背景透明的`。\n\nps处理后页面效果如下：\n\n[![title](http://cuihuan.net/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png)](http://cuihuan.net/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png)\n\n### tooltip\n直接设置default_title 效果是鼠标经过显示标题效果\n\n### badge:\n这个相当于设置图片文字和背景色：提供了两个方法：设置badge文字和颜色可以分别使用setBadgeText()andsetBadgeBackgroundColor()。\n\n### pophtml：创建菜单\n上码：`能用代码说话的，不用文字`\njs\n```\n/**\n * @author: cuixiaohuan\n * Date: 16/4/19\n * Time: 下午9:41\n */\n\n/**\n * 点击菜单的事件\n *\n * @param e\n */\nfunction click(e) {\n    chrome.tabs.executeScript(null,\n        {\n            // 更改背景色\n            code: \"document.body.style.backgroundColor='\" + e.target.id + \"'\"\n        }\n    );\n\n    window.close();\n}\n\n/**\n * 页面加载完成后，监听事件\n */\ndocument.addEventListener('DOMContentLoaded', function () {\n    var divs = document.querySelectorAll('div');\n    for (var i = 0; i < divs.length; i++) {\n        divs[i].addEventListener('click', click);\n    }\n});\n\n\n```\nhtml\n```\n<!doctype html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <title>Set Page Color Popup</title>\n    <style>\n        body {\n            overflow: hidden;\n            margin: 0px;\n            padding: 0px;\n            background: white;\n        }\n\n        div:first-child {\n            margin-top: 0px;\n        }\n\n        div {\n            cursor: pointer;\n            text-align: center;\n            padding: 1px 3px;\n            font-family: sans-serif;\n            font-size: 0.8em;\n            width: 100px;\n            margin-top: 1px;\n            background: #cccccc;\n        }\n\n        div:hover {\n            background: #aaaaaa;\n        }\n\n        #red {\n            border: 1px solid red;\n            color: red;\n        }\n\n        #blue {\n            border: 1px solid blue;\n            color: blue;\n        }\n\n        #green {\n            border: 1px solid green;\n            color: green;\n        }\n\n        #yellow {\n            border: 1px solid yellow;\n            color: yellow;\n        }\n    </style>\n    <script src=\"../script/changeBackgroud.js\"></script>\n</head>\n<body>\n    <div id=\"red\">红色小拽</div>\n    <div id=\"blue\">绿色小拽</div>\n    <div id=\"green\">蓝色小拽</div>\n    <div id=\"yellow\">换色小拽</div>\n  </body>\n</html>\n```\n效果图\n[![blue](http://cuihuan.net/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png)](http://cuihuan.net/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png)\n\n## 调用系统提醒\nnotification api 官方文档:https://developer.chrome.com/extensions/notifications\n注意\n- chrome32 之前的预警接口不太一样，文档中已经说明。\n- 使用预警一定要加上权限统一\n```\n  \"permissions\": [\n    \"notifications\"\n  ],\n```\n调用系统提醒代码\n```\n\n// 用户授权\nif (Notification.permission == \"granted\") {\n    Notification.requestPermission();\n}\n\n/**\n * 调用系统提醒\n * \n * 第一次进入页面需要授权，之后弹出提醒\n */\nfunction notifyMe() {\n    if (!Notification) {\n        alert('Desktop notifications not available in your browser. Try Chromium.');\n        return;\n    }\n\n    if (Notification.permission !== \"granted\"){\n        Notification.requestPermission();\n\n    } else {\n        var notification = new Notification('小拽提醒', {\n            icon: 'http://cuihuan.net/wp-content/themes/quench-master/images/cuihuan_title.jpg',\n            body: \"别点击，点击跳转'靠谱崔小拽'\"\n        });\n\n        notification.onclick = function () {\n            window.open(\"http://cuihuan.net\");\n        };\n\n    }\n}\n\n```\n初次进去提醒，授权\n[![notify_allow](http://cuihuan.net/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png)](http://cuihuan.net/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png)\n\n提醒效果如右上角所示\n[![notify](http://cuihuan.net/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png)](http://cuihuan.net/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png)\n\n通过菜单和提醒，我们基本就可以完成一个简单的闹钟提醒，每隔30分钟提醒，码农扭扭脑袋，伸伸懒腰，小心肩周炎-_-!\n\n\n【转载请注明：[【chrome 插件二】弹出菜单和系统提醒学习](http://cuihuan.net/?p=454) | [靠谱崔小拽](http://cuihuan.net) 】","slug":"chrome_2","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nj4000c661fpdl2eos3","content":"<blockquote>\n<p>上一篇中简单的接触了chrome插件，并且草草的制作一个chrome 插件（-_-只中看，不能用）；这次主要学习，<code>browse action api制作菜单制作和调用系统提醒</code>。</p>\n</blockquote>\n<h2 id=\"browse-action\"><a href=\"#browse-action\" class=\"headerlink\" title=\"browse action\"></a>browse action</h2><p>browse action 包括四部分：一个图标，一个tooltip，一个badge和一个pophtml<br>先上代码和效果<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"browser_action\"</span>: &#123;</div><div class=\"line\">   <span class=\"string\">\"default_title\"</span>: <span class=\"string\">\"反劫持工具\"</span>,</div><div class=\"line\">   <span class=\"string\">\"default_icon\"</span>: <span class=\"string\">\"image/icon_19.png\"</span>,</div><div class=\"line\">   <span class=\"string\">\"default_popup\"</span>: <span class=\"string\">\"html/popup.html\"</span></div><div class=\"line\"> &#125;,</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png\" alt=\"red\"></a></p>\n<h3 id=\"图标\"><a href=\"#图标\" class=\"headerlink\" title=\"图标\"></a>图标</h3><p>图标优化：<code>最好是19px，这样基本占满</code>，可以直接使用图标也可以用h5 canvas element，同时，<code>图片一定要是背景透明的</code>。</p>\n<p>ps处理后页面效果如下：</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png\" alt=\"title\"></a></p>\n<h3 id=\"tooltip\"><a href=\"#tooltip\" class=\"headerlink\" title=\"tooltip\"></a>tooltip</h3><p>直接设置default_title 效果是鼠标经过显示标题效果</p>\n<h3 id=\"badge\"><a href=\"#badge\" class=\"headerlink\" title=\"badge:\"></a>badge:</h3><p>这个相当于设置图片文字和背景色：提供了两个方法：设置badge文字和颜色可以分别使用setBadgeText()andsetBadgeBackgroundColor()。</p>\n<h3 id=\"pophtml：创建菜单\"><a href=\"#pophtml：创建菜单\" class=\"headerlink\" title=\"pophtml：创建菜单\"></a>pophtml：创建菜单</h3><p>上码：<code>能用代码说话的，不用文字</code><br>js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * @author: cuixiaohuan</div><div class=\"line\"> * Date: 16/4/19</div><div class=\"line\"> * Time: 下午9:41</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 点击菜单的事件</div><div class=\"line\"> *</div><div class=\"line\"> * @param e</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">click</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    chrome.tabs.executeScript(<span class=\"literal\">null</span>,</div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"comment\">// 更改背景色</span></div><div class=\"line\">            code: <span class=\"string\">\"document.body.style.backgroundColor='\"</span> + e.target.id + <span class=\"string\">\"'\"</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    );</div><div class=\"line\"></div><div class=\"line\">    <span class=\"built_in\">window</span>.close();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 页面加载完成后，监听事件</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> divs = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'div'</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; divs.length; i++) &#123;</div><div class=\"line\">        divs[i].addEventListener(<span class=\"string\">'click'</span>, click);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>html<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!doctype html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Set Page Color Popup<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></span></div><div class=\"line\">        <span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">            <span class=\"attribute\">margin</span>: <span class=\"number\">0px</span>;</div><div class=\"line\">            <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</div><div class=\"line\">            <span class=\"attribute\">background</span>: white;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:first-child</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">margin-top</span>: <span class=\"number\">0px</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-tag\">div</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">cursor</span>: pointer;</div><div class=\"line\">            <span class=\"attribute\">text-align</span>: center;</div><div class=\"line\">            <span class=\"attribute\">padding</span>: <span class=\"number\">1px</span> <span class=\"number\">3px</span>;</div><div class=\"line\">            <span class=\"attribute\">font-family</span>: sans-serif;</div><div class=\"line\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">0.8em</span>;</div><div class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</div><div class=\"line\">            <span class=\"attribute\">margin-top</span>: <span class=\"number\">1px</span>;</div><div class=\"line\">            <span class=\"attribute\">background</span>: <span class=\"number\">#cccccc</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:hover</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">background</span>: <span class=\"number\">#aaaaaa</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-id\">#red</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</div><div class=\"line\">            <span class=\"attribute\">color</span>: red;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-id\">#blue</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid blue;</div><div class=\"line\">            <span class=\"attribute\">color</span>: blue;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-id\">#green</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid green;</div><div class=\"line\">            <span class=\"attribute\">color</span>: green;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-id\">#yellow</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid yellow;</div><div class=\"line\">            <span class=\"attribute\">color</span>: yellow;</div><div class=\"line\">        &#125;</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../script/changeBackgroud.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"red\"</span>&gt;</span>红色小拽<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"blue\"</span>&gt;</span>绿色小拽<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"green\"</span>&gt;</span>蓝色小拽<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"yellow\"</span>&gt;</span>换色小拽<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>效果图<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png\" alt=\"blue\"></a></p>\n<h2 id=\"调用系统提醒\"><a href=\"#调用系统提醒\" class=\"headerlink\" title=\"调用系统提醒\"></a>调用系统提醒</h2><p>notification api 官方文档:<a href=\"https://developer.chrome.com/extensions/notifications\" target=\"_blank\" rel=\"external\">https://developer.chrome.com/extensions/notifications</a><br>注意</p>\n<ul>\n<li>chrome32 之前的预警接口不太一样，文档中已经说明。</li>\n<li>使用预警一定要加上权限统一<figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"permissions\"</span>: [</div><div class=\"line\">  <span class=\"string\">\"notifications\"</span></div><div class=\"line\">],</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>调用系统提醒代码<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 用户授权</span></div><div class=\"line\"><span class=\"keyword\">if</span> (Notification.permission == <span class=\"string\">\"granted\"</span>) &#123;</div><div class=\"line\">    Notification.requestPermission();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 调用系统提醒</div><div class=\"line\"> * </div><div class=\"line\"> * 第一次进入页面需要授权，之后弹出提醒</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notifyMe</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!Notification) &#123;</div><div class=\"line\">        alert(<span class=\"string\">'Desktop notifications not available in your browser. Try Chromium.'</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (Notification.permission !== <span class=\"string\">\"granted\"</span>)&#123;</div><div class=\"line\">        Notification.requestPermission();</div><div class=\"line\"></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> notification = <span class=\"keyword\">new</span> Notification(<span class=\"string\">'小拽提醒'</span>, &#123;</div><div class=\"line\">            <span class=\"attr\">icon</span>: <span class=\"string\">'http://cuihuan.net/wp-content/themes/quench-master/images/cuihuan_title.jpg'</span>,</div><div class=\"line\">            <span class=\"attr\">body</span>: <span class=\"string\">\"别点击，点击跳转'靠谱崔小拽'\"</span></div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">        notification.onclick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"built_in\">window</span>.open(<span class=\"string\">\"http://cuihuan.net\"</span>);</div><div class=\"line\">        &#125;;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>初次进去提醒，授权<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png\" alt=\"notify_allow\"></a></p>\n<p>提醒效果如右上角所示<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png\" alt=\"notify\"></a></p>\n<p>通过菜单和提醒，我们基本就可以完成一个简单的闹钟提醒，每隔30分钟提醒，码农扭扭脑袋，伸伸懒腰，小心肩周炎-_-!</p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/?p=454\">【chrome 插件二】弹出菜单和系统提醒学习</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>上一篇中简单的接触了chrome插件，并且草草的制作一个chrome 插件（-_-只中看，不能用）；这次主要学习，<code>browse action api制作菜单制作和调用系统提醒</code>。</p>\n</blockquote>\n<h2 id=\"browse-action\"><a href=\"#browse-action\" class=\"headerlink\" title=\"browse action\"></a>browse action</h2><p>browse action 包括四部分：一个图标，一个tooltip，一个badge和一个pophtml<br>先上代码和效果<br><figure class=\"highlight xquery\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"browser_action\"</span>: &#123;</div><div class=\"line\">   <span class=\"string\">\"default_title\"</span>: <span class=\"string\">\"反劫持工具\"</span>,</div><div class=\"line\">   <span class=\"string\">\"default_icon\"</span>: <span class=\"string\">\"image/icon_19.png\"</span>,</div><div class=\"line\">   <span class=\"string\">\"default_popup\"</span>: <span class=\"string\">\"html/popup.html\"</span></div><div class=\"line\"> &#125;,</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/9E62D576-098D-4B4A-8C4C-1E845D23E094.png\" alt=\"red\"></a></p>\n<h3 id=\"图标\"><a href=\"#图标\" class=\"headerlink\" title=\"图标\"></a>图标</h3><p>图标优化：<code>最好是19px，这样基本占满</code>，可以直接使用图标也可以用h5 canvas element，同时，<code>图片一定要是背景透明的</code>。</p>\n<p>ps处理后页面效果如下：</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/C84884DF-38DB-4402-8BEF-181795A51FAF.png\" alt=\"title\"></a></p>\n<h3 id=\"tooltip\"><a href=\"#tooltip\" class=\"headerlink\" title=\"tooltip\"></a>tooltip</h3><p>直接设置default_title 效果是鼠标经过显示标题效果</p>\n<h3 id=\"badge\"><a href=\"#badge\" class=\"headerlink\" title=\"badge:\"></a>badge:</h3><p>这个相当于设置图片文字和背景色：提供了两个方法：设置badge文字和颜色可以分别使用setBadgeText()andsetBadgeBackgroundColor()。</p>\n<h3 id=\"pophtml：创建菜单\"><a href=\"#pophtml：创建菜单\" class=\"headerlink\" title=\"pophtml：创建菜单\"></a>pophtml：创建菜单</h3><p>上码：<code>能用代码说话的，不用文字</code><br>js<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * @author: cuixiaohuan</div><div class=\"line\"> * Date: 16/4/19</div><div class=\"line\"> * Time: 下午9:41</div><div class=\"line\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 点击菜单的事件</div><div class=\"line\"> *</div><div class=\"line\"> * @param e</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">click</span>(<span class=\"params\">e</span>) </span>&#123;</div><div class=\"line\">    chrome.tabs.executeScript(<span class=\"literal\">null</span>,</div><div class=\"line\">        &#123;</div><div class=\"line\">            <span class=\"comment\">// 更改背景色</span></div><div class=\"line\">            code: <span class=\"string\">\"document.body.style.backgroundColor='\"</span> + e.target.id + <span class=\"string\">\"'\"</span></div><div class=\"line\">        &#125;</div><div class=\"line\">    );</div><div class=\"line\"></div><div class=\"line\">    <span class=\"built_in\">window</span>.close();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 页面加载完成后，监听事件</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"built_in\">document</span>.addEventListener(<span class=\"string\">'DOMContentLoaded'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> divs = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'div'</span>);</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; divs.length; i++) &#123;</div><div class=\"line\">        divs[i].addEventListener(<span class=\"string\">'click'</span>, click);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>html<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">&lt;!doctype html&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"utf-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Set Page Color Popup<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span><span class=\"css\"></div><div class=\"line\">        <span class=\"selector-tag\">body</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">overflow</span>: hidden;</div><div class=\"line\">            <span class=\"attribute\">margin</span>: <span class=\"number\">0px</span>;</div><div class=\"line\">            <span class=\"attribute\">padding</span>: <span class=\"number\">0px</span>;</div><div class=\"line\">            <span class=\"attribute\">background</span>: white;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:first-child</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">margin-top</span>: <span class=\"number\">0px</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-tag\">div</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">cursor</span>: pointer;</div><div class=\"line\">            <span class=\"attribute\">text-align</span>: center;</div><div class=\"line\">            <span class=\"attribute\">padding</span>: <span class=\"number\">1px</span> <span class=\"number\">3px</span>;</div><div class=\"line\">            <span class=\"attribute\">font-family</span>: sans-serif;</div><div class=\"line\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">0.8em</span>;</div><div class=\"line\">            <span class=\"attribute\">width</span>: <span class=\"number\">100px</span>;</div><div class=\"line\">            <span class=\"attribute\">margin-top</span>: <span class=\"number\">1px</span>;</div><div class=\"line\">            <span class=\"attribute\">background</span>: <span class=\"number\">#cccccc</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-tag\">div</span><span class=\"selector-pseudo\">:hover</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">background</span>: <span class=\"number\">#aaaaaa</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-id\">#red</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid red;</div><div class=\"line\">            <span class=\"attribute\">color</span>: red;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-id\">#blue</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid blue;</div><div class=\"line\">            <span class=\"attribute\">color</span>: blue;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-id\">#green</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid green;</div><div class=\"line\">            <span class=\"attribute\">color</span>: green;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"selector-id\">#yellow</span> &#123;</div><div class=\"line\">            <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid yellow;</div><div class=\"line\">            <span class=\"attribute\">color</span>: yellow;</div><div class=\"line\">        &#125;</div><div class=\"line\">    </span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"../script/changeBackgroud.js\"</span>&gt;</span><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"red\"</span>&gt;</span>红色小拽<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"blue\"</span>&gt;</span>绿色小拽<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"green\"</span>&gt;</span>蓝色小拽<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"yellow\"</span>&gt;</span>换色小拽<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure></p>\n<p>效果图<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/4AA82B9D-759E-434E-A0B5-8F2F0376F16D.png\" alt=\"blue\"></a></p>\n<h2 id=\"调用系统提醒\"><a href=\"#调用系统提醒\" class=\"headerlink\" title=\"调用系统提醒\"></a>调用系统提醒</h2><p>notification api 官方文档:<a href=\"https://developer.chrome.com/extensions/notifications\">https://developer.chrome.com/extensions/notifications</a><br>注意</p>\n<ul>\n<li>chrome32 之前的预警接口不太一样，文档中已经说明。</li>\n<li>使用预警一定要加上权限统一<figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"string\">\"permissions\"</span>: [</div><div class=\"line\">  <span class=\"string\">\"notifications\"</span></div><div class=\"line\">],</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>调用系统提醒代码<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 用户授权</span></div><div class=\"line\"><span class=\"keyword\">if</span> (Notification.permission == <span class=\"string\">\"granted\"</span>) &#123;</div><div class=\"line\">    Notification.requestPermission();</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 调用系统提醒</div><div class=\"line\"> * </div><div class=\"line\"> * 第一次进入页面需要授权，之后弹出提醒</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">notifyMe</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (!Notification) &#123;</div><div class=\"line\">        alert(<span class=\"string\">'Desktop notifications not available in your browser. Try Chromium.'</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span> (Notification.permission !== <span class=\"string\">\"granted\"</span>)&#123;</div><div class=\"line\">        Notification.requestPermission();</div><div class=\"line\"></div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> notification = <span class=\"keyword\">new</span> Notification(<span class=\"string\">'小拽提醒'</span>, &#123;</div><div class=\"line\">            <span class=\"attr\">icon</span>: <span class=\"string\">'http://cuihuan.net/wp-content/themes/quench-master/images/cuihuan_title.jpg'</span>,</div><div class=\"line\">            <span class=\"attr\">body</span>: <span class=\"string\">\"别点击，点击跳转'靠谱崔小拽'\"</span></div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">        notification.onclick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"built_in\">window</span>.open(<span class=\"string\">\"http://cuihuan.net\"</span>);</div><div class=\"line\">        &#125;;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>初次进去提醒，授权<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/8971AFAA-2C56-4A2F-962B-BBA0A8E0E7A4.png\" alt=\"notify_allow\"></a></p>\n<p>提醒效果如右上角所示<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/04/04A3AF6D-69FA-423A-8447-F5984F32762C.png\" alt=\"notify\"></a></p>\n<p>通过菜单和提醒，我们基本就可以完成一个简单的闹钟提醒，每隔30分钟提醒，码农扭扭脑袋，伸伸懒腰，小心肩周炎-_-!</p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/?p=454\">【chrome 插件二】弹出菜单和系统提醒学习</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"php爬虫：知乎用户数据爬取和分析","date":"2017-01-20T09:21:35.000Z","_content":"> 背景说明：小拽利用php的curl写的爬虫，实验性的爬取了知乎5w用户的基本信息；同时，针对爬取的数据，进行了简单的分析呈现。[demo 地址](http://cuihuan.net:1015/demo_file/zhihu_spider/demo.html)\n\nphp的spider代码和用户dashboard的展现代码，整理后上传github，在个人博客和公众号更新代码库，程序仅供娱乐和学习交流；如果有侵犯知乎相关权益，请尽快联系本人删除。\n\n## 无图无真相\n\n移动端分析数据截图\n\n[![wise_web_spider](http://cuihuan.net/wp-content/uploads/2016/01/wise_web_spider.png)](http://cuihuan.net/wp-content/uploads/2016/01/wise_web_spider.png)\n\npc端分析数据截图\n\n[![web_spider](http://cuihuan.net/wp-content/uploads/2016/01/web_spider-629x1024.png)](http://cuihuan.net/wp-content/uploads/2016/01/web_spider.png)\n\n整个爬取，分析，展现过程大概分如下几步，小拽将分别介绍\n\n- curl爬取知乎网页数据\n- 正则分析知乎网页数据\n- 数据数据入库和程序部署\n- 数据分析和呈现\n\n## curl爬取网页数据\nPHP的curl扩展是PHP支持的，允许你与各种服务器使用各种类型的协议进行连接和通信的库。是一个非常便捷的抓取网页的工具，同时，支持多线程扩展。\n\n本程序抓取的是知乎对外提供用户访问的个人信息页面https://www.zhihu.com/people/xxx,抓取过程需要携带用户cookie才能获取页面。直接上码\n\n- 获取页面cookie\n    ```\n    // 登录知乎，打开个人中心，打开控制台，获取cookie\n    document.cookie\n    \"_za=67254197-3wwb8d-43f6-94f0-fb0e2d521c31; _ga=GA1.2.2142818188.1433767929; q_c1=78ee1604225d47d08cddd8142a08288b23|1452172601000|1452172601000; _xsrf=15f0639cbe6fb607560c075269064393; cap_id=\"N2QwMTExNGQ0YTY2NGVddlMGIyNmQ4NjdjOTU0YTM5MmQ=|1453444256|49fdc6b43dc51f702b7d6575451e228f56cdaf5d\"; __utmt=1; unlock_ticket=\"QUJDTWpmM0lsZdd2dYQUFBQVlRSlZUVTNVb1ZaNDVoQXJlblVmWGJ0WGwyaHlDdVdscXdZU1VRPT0=|1453444421|c47a2afde1ff334d416bafb1cc267b41014c9d5f\"; __utma=51854390.21428dd18188.1433767929.1453187421.1453444257.3; __utmb=51854390.14.8.1453444425011; __utmc=51854390; __utmz=51854390.1452846679.1.dd1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); __utmv=51854390.100-1|2=registration_date=20150823=1^dd3=entry_date=20150823=1\"\n    ```\n\n- 抓取个人中心页面\n  通过curl，携带cookie，先抓取本人中心页面\n    ```\n    /**\n     * 通过用户名抓取个人中心页面并存储\n     * \n     * @param $username str :用户名 flag\n     * @return boolean      :成功与否标志\n     */\n    public function spiderUser($username)\n    {\n        $cookie = \"xxxx\" ;\n        $url_info = 'http://www.zhihu.com/people/' . $username; //此处cui-xiao-zhuai代表用户ID,可以直接看url获取本人id\n        $ch = curl_init($url_info); //初始化会话\n        curl_setopt($ch, CURLOPT_HEADER, 0);\n        curl_setopt($ch, CURLOPT_COOKIE, $cookie);  //设置请求COOKIE\n        curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);\n        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  //将curl_exec()获取的信息以文件流的形式返回，而不是直接输出。\n        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);\n        $result = curl_exec($ch);\n    \n         file_put_contents('/home/work/zxdata_ch/php/zhihu_spider/file/'.$username.'.html',$result);\n         return true;\n     }\n    ```\n\n## 正则分析网页数据\n### 分析新链接，进一步爬取\n对于抓取过来的网页进行存储，`要想进行进一步的爬取，页面必须包含有可用于进一步爬取用户的链接`。通过对知乎页面分析发现：在个人中心页面中有关注人和部分点赞人和被关注人。\n如下所示\n```\n// 抓取的html页面中发现了新的用户，可用于爬虫\n<a class=\"zm-item-link-avatar avatar-link\" href=\"/people/new-user\" data-tip=\"p$t$new-user\">\n\n```\nok，这样子就可以通过自己-》关注人-》关注人的关注人-》。。。进行不断爬取。接下来就是通过正则匹配提取该信息\n\n```\n// 匹配到抓取页面的所有用户\npreg_match_all('/\\/people\\/([\\w-]+)\\\"/i', $str, $match_arr);\n\n// 去重合并入新的用户数组,用户进一步抓取\nself::$newUserArr = array_unique(array_merge($match_arr[1], self::$newUserArr));\n```\n到此，整个爬虫过程就可以顺利进行了。\n如果需要大量的抓取数据，可以研究下`curl_multi`和`pcntl`进行多线程的快速抓取，此处不做赘述。\n### 分析用户数据，提供分析\n通过正则可以进一步匹配出更多的该用户数据，直接上码。\n```\n\n// 获取用户头像\npreg_match('/<img.+src=\\\"?([^\\s]+\\.(jpg|gif|bmp|bnp|png))\\\"?.+>/i', $str, $match_img);\n$img_url = $match_img[1];\n\n// 匹配用户名：\n// <span class=\"name\">崔小拽</span>\npreg_match('/<span.+class=\\\"?name\\\"?>([\\x{4e00}-\\x{9fa5}]+).+span>/u', $str, $match_name);\n$user_name = $match_name[1];\n\n// 匹配用户简介\n// class bio span 中文\npreg_match('/<span.+class=\\\"?bio\\\"?.+\\>([\\x{4e00}-\\x{9fa5}]+).+span>/u', $str, $match_title);\n$user_title = $match_title[1];\n\n// 匹配性别\n//<input type=\"radio\" name=\"gender\" value=\"1\" checked=\"checked\" class=\"male\"/> 男&nbsp;&nbsp;\n// gender value1 ;结束 中文\npreg_match('/<input.+name=\\\"?gender\\\"?.+value=\\\"?1\\\"?.+([\\x{4e00}-\\x{9fa5}]+).+\\;/u', $str, $match_sex);\n$user_sex = $match_sex[1];\n\n// 匹配地区\n//<span class=\"location item\" title=\"北京\">\npreg_match('/<span.+class=\\\"?location.+\\\"?.+\\\"([\\x{4e00}-\\x{9fa5}]+)\\\">/u', $str, $match_city);\n$user_city = $match_city[1];\n\n// 匹配工作\n//<span class=\"employment item\" title=\"人见人骂的公司\">人见人骂的公司</span>\npreg_match('/<span.+class=\\\"?employment.+\\\"?.+\\\"([\\x{4e00}-\\x{9fa5}]+)\\\">/u', $str, $match_employment);\n$user_employ = $match_employment[1];\n\n// 匹配职位\n// <span class=\"position item\" title=\"程序猿\"><a href=\"/topic/19590046\" title=\"程序猿\" class=\"topic-link\" data-token=\"19590046\" data-topicid=\"13253\">程序猿</a></span>\npreg_match('/<span.+class=\\\"?position.+\\\"?.+\\\"([\\x{4e00}-\\x{9fa5}]+).+\\\">/u', $str, $match_position);\n$user_position = $match_position[1];\n\n// 匹配学历\n// <span class=\"education item\" title=\"研究僧\">研究僧</span>\npreg_match('/<span.+class=\\\"?education.+\\\"?.+\\\"([\\x{4e00}-\\x{9fa5}]+)\\\">/u', $str, $match_education);\n$user_education = $match_education[1];\n\n// 工作情况\n// <span class=\"education-extra item\" title='挨踢'>挨踢</span>\npreg_match('/<span.+class=\\\"?education-extra.+\\\"?.+>([\\x{4e00}-\n\\x{9fa5}]+)</u', $str, $match_education_extra);\n$user_education_extra = $match_education_extra[1];\n\n\n// 匹配关注话题数量\n// class=\"zg-link-litblue\"><strong>41 个话题</strong></a>\npreg_match('/class=\\\"?zg-link-litblue\\\"?><strong>(\\d+)\\s.+strong>/i', $str, $match_topic);\n$user_topic = $match_topic[1];\n\n// 关注人数\n// <span class=\"zg-gray-normal\">关注了\npreg_match_all('/<strong>(\\d+)<.+<label>/i', $str, $match_care);\n$user_care = $match_care[1][0];\n$user_be_careed = $match_care[1][1];\n\n// 历史浏览量\n// <span class=\"zg-gray-normal\">个人主页被 <strong>17</strong> 人浏览</span>\npreg_match('/class=\\\"?zg-gray-normal\\\"?.+>(\\d+)<.+span>/i', $str, $match_browse);\n$user_browse = $match_browse[1];\n\n```\n\n## 数据入库和程序优化\n在抓取的过程中，有条件的话，一定要通过redis入库，确实能提升抓取和入库效率。没有条件的话只能通过sql优化。这里来几发心德。\n- 数据库表设计索引一定要慎重。在spider爬取的过程中，建议出了用户名，左右字段都不要索引，包括主键都不要，`尽可能的提高入库效率`，试想5000w的数据，每次添加一个，建立索引需要多少消耗。等抓取完毕，需要分析数据时，批量建立索引。\n- 数据入库和更新操作，一定要批量。 mysql 官方给出的增删改的建议和速度：http://dev.mysql.com/doc/refman/5.7/en/insert-speed.html\n    ```\n    # 官方的最优批量插入\n    INSERT INTO yourtable VALUES (1,2), (5,5), ...;\n    ```\n- 部署操作。程序在抓取过程中，有可能会出现异常挂掉，为了保证高效稳定，尽可能的写一个定时脚本。每隔一段时间干掉，重新跑，这样即使异常挂掉也不会浪费太多宝贵时间，毕竟，time is money。\n    ```\n    #!/bin/bash\n    \n    # 干掉\n    ps aux |grep spider |awk '{print $2}'|xargs kill -9\n    sleep 5s\n    \n    # 重新跑\n    nohup /home/cuixiaohuan/lamp/php5/bin/php /home/cuixiaohuan/php/zhihu_spider/spider_new.php &    \n    ```\n\n## 数据分析呈现\n\n数据的呈现主要使用echarts 3.0，感觉对于移动端兼容还不错。兼容移动端的页面响应式布局主要通过几个简单的css控制，代码如下\n\n```\n/*兼容性和响应式div设计*/\n@media screen and (max-width: 480px) {\n    body{\n        padding: 0 ;\n    }\n    .adapt-div {\n        width: 100% ;\n        float: none ;\n        margin: 20px 0;\n    }\n\n    .half-div {\n        height: 350px ;\n        margin-bottom: 10px;\n    }\n\n    .whole-div {\n        height: 350px;\n    }\n}\n<!-- 整块完整布局，半块在web端采用float的方式，移动端去掉-->\n.half-div {\n    width: 48%;\n    height: 430px;\n    margin: 1%;\n    float: left\n}\n\n.whole-div {\n    width: 98%;\n    height: 430px;\n    margin: 1%;\n    float: left\n}\n\n```\n\n## 不足和待学习\n\n整个过程中涉及php,shell,js,css,html,正则等语言和部署等基础知识，但还有诸多需要改进完善，小拽特此记录，后续补充例：\n\n- php 采用multicul进行多线程。\n- 正则匹配进一步优化\n- 部署和抓取过程采用redis提升存储\n- 移动端布局的兼容性提升\n- js的模块化和sass书写css。\n\n【转载请注明：[php爬虫：知乎用户数据爬取和分析](http://cuihuan.net/article/php%E7%88%AC%E8%99%AB%EF%BC%9A%E7%9F%A5%E4%B9%8E%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E7%88%AC%E5%8F%96%E5%92%8C%E5%88%86%E6%9E%90.html) | [靠谱崔小拽](http://cuihuan.net) 】\n","source":"_posts/charactor.md","raw":"---\ntitle: php爬虫：知乎用户数据爬取和分析 \ndate: 2017-01-20 17:21:35\ntags: \n- 网页爬虫\n- shell\n- css\n- javascript\n- php\n---\n> 背景说明：小拽利用php的curl写的爬虫，实验性的爬取了知乎5w用户的基本信息；同时，针对爬取的数据，进行了简单的分析呈现。[demo 地址](http://cuihuan.net:1015/demo_file/zhihu_spider/demo.html)\n\nphp的spider代码和用户dashboard的展现代码，整理后上传github，在个人博客和公众号更新代码库，程序仅供娱乐和学习交流；如果有侵犯知乎相关权益，请尽快联系本人删除。\n\n## 无图无真相\n\n移动端分析数据截图\n\n[![wise_web_spider](http://cuihuan.net/wp-content/uploads/2016/01/wise_web_spider.png)](http://cuihuan.net/wp-content/uploads/2016/01/wise_web_spider.png)\n\npc端分析数据截图\n\n[![web_spider](http://cuihuan.net/wp-content/uploads/2016/01/web_spider-629x1024.png)](http://cuihuan.net/wp-content/uploads/2016/01/web_spider.png)\n\n整个爬取，分析，展现过程大概分如下几步，小拽将分别介绍\n\n- curl爬取知乎网页数据\n- 正则分析知乎网页数据\n- 数据数据入库和程序部署\n- 数据分析和呈现\n\n## curl爬取网页数据\nPHP的curl扩展是PHP支持的，允许你与各种服务器使用各种类型的协议进行连接和通信的库。是一个非常便捷的抓取网页的工具，同时，支持多线程扩展。\n\n本程序抓取的是知乎对外提供用户访问的个人信息页面https://www.zhihu.com/people/xxx,抓取过程需要携带用户cookie才能获取页面。直接上码\n\n- 获取页面cookie\n    ```\n    // 登录知乎，打开个人中心，打开控制台，获取cookie\n    document.cookie\n    \"_za=67254197-3wwb8d-43f6-94f0-fb0e2d521c31; _ga=GA1.2.2142818188.1433767929; q_c1=78ee1604225d47d08cddd8142a08288b23|1452172601000|1452172601000; _xsrf=15f0639cbe6fb607560c075269064393; cap_id=\"N2QwMTExNGQ0YTY2NGVddlMGIyNmQ4NjdjOTU0YTM5MmQ=|1453444256|49fdc6b43dc51f702b7d6575451e228f56cdaf5d\"; __utmt=1; unlock_ticket=\"QUJDTWpmM0lsZdd2dYQUFBQVlRSlZUVTNVb1ZaNDVoQXJlblVmWGJ0WGwyaHlDdVdscXdZU1VRPT0=|1453444421|c47a2afde1ff334d416bafb1cc267b41014c9d5f\"; __utma=51854390.21428dd18188.1433767929.1453187421.1453444257.3; __utmb=51854390.14.8.1453444425011; __utmc=51854390; __utmz=51854390.1452846679.1.dd1.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); __utmv=51854390.100-1|2=registration_date=20150823=1^dd3=entry_date=20150823=1\"\n    ```\n\n- 抓取个人中心页面\n  通过curl，携带cookie，先抓取本人中心页面\n    ```\n    /**\n     * 通过用户名抓取个人中心页面并存储\n     * \n     * @param $username str :用户名 flag\n     * @return boolean      :成功与否标志\n     */\n    public function spiderUser($username)\n    {\n        $cookie = \"xxxx\" ;\n        $url_info = 'http://www.zhihu.com/people/' . $username; //此处cui-xiao-zhuai代表用户ID,可以直接看url获取本人id\n        $ch = curl_init($url_info); //初始化会话\n        curl_setopt($ch, CURLOPT_HEADER, 0);\n        curl_setopt($ch, CURLOPT_COOKIE, $cookie);  //设置请求COOKIE\n        curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);\n        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  //将curl_exec()获取的信息以文件流的形式返回，而不是直接输出。\n        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);\n        $result = curl_exec($ch);\n    \n         file_put_contents('/home/work/zxdata_ch/php/zhihu_spider/file/'.$username.'.html',$result);\n         return true;\n     }\n    ```\n\n## 正则分析网页数据\n### 分析新链接，进一步爬取\n对于抓取过来的网页进行存储，`要想进行进一步的爬取，页面必须包含有可用于进一步爬取用户的链接`。通过对知乎页面分析发现：在个人中心页面中有关注人和部分点赞人和被关注人。\n如下所示\n```\n// 抓取的html页面中发现了新的用户，可用于爬虫\n<a class=\"zm-item-link-avatar avatar-link\" href=\"/people/new-user\" data-tip=\"p$t$new-user\">\n\n```\nok，这样子就可以通过自己-》关注人-》关注人的关注人-》。。。进行不断爬取。接下来就是通过正则匹配提取该信息\n\n```\n// 匹配到抓取页面的所有用户\npreg_match_all('/\\/people\\/([\\w-]+)\\\"/i', $str, $match_arr);\n\n// 去重合并入新的用户数组,用户进一步抓取\nself::$newUserArr = array_unique(array_merge($match_arr[1], self::$newUserArr));\n```\n到此，整个爬虫过程就可以顺利进行了。\n如果需要大量的抓取数据，可以研究下`curl_multi`和`pcntl`进行多线程的快速抓取，此处不做赘述。\n### 分析用户数据，提供分析\n通过正则可以进一步匹配出更多的该用户数据，直接上码。\n```\n\n// 获取用户头像\npreg_match('/<img.+src=\\\"?([^\\s]+\\.(jpg|gif|bmp|bnp|png))\\\"?.+>/i', $str, $match_img);\n$img_url = $match_img[1];\n\n// 匹配用户名：\n// <span class=\"name\">崔小拽</span>\npreg_match('/<span.+class=\\\"?name\\\"?>([\\x{4e00}-\\x{9fa5}]+).+span>/u', $str, $match_name);\n$user_name = $match_name[1];\n\n// 匹配用户简介\n// class bio span 中文\npreg_match('/<span.+class=\\\"?bio\\\"?.+\\>([\\x{4e00}-\\x{9fa5}]+).+span>/u', $str, $match_title);\n$user_title = $match_title[1];\n\n// 匹配性别\n//<input type=\"radio\" name=\"gender\" value=\"1\" checked=\"checked\" class=\"male\"/> 男&nbsp;&nbsp;\n// gender value1 ;结束 中文\npreg_match('/<input.+name=\\\"?gender\\\"?.+value=\\\"?1\\\"?.+([\\x{4e00}-\\x{9fa5}]+).+\\;/u', $str, $match_sex);\n$user_sex = $match_sex[1];\n\n// 匹配地区\n//<span class=\"location item\" title=\"北京\">\npreg_match('/<span.+class=\\\"?location.+\\\"?.+\\\"([\\x{4e00}-\\x{9fa5}]+)\\\">/u', $str, $match_city);\n$user_city = $match_city[1];\n\n// 匹配工作\n//<span class=\"employment item\" title=\"人见人骂的公司\">人见人骂的公司</span>\npreg_match('/<span.+class=\\\"?employment.+\\\"?.+\\\"([\\x{4e00}-\\x{9fa5}]+)\\\">/u', $str, $match_employment);\n$user_employ = $match_employment[1];\n\n// 匹配职位\n// <span class=\"position item\" title=\"程序猿\"><a href=\"/topic/19590046\" title=\"程序猿\" class=\"topic-link\" data-token=\"19590046\" data-topicid=\"13253\">程序猿</a></span>\npreg_match('/<span.+class=\\\"?position.+\\\"?.+\\\"([\\x{4e00}-\\x{9fa5}]+).+\\\">/u', $str, $match_position);\n$user_position = $match_position[1];\n\n// 匹配学历\n// <span class=\"education item\" title=\"研究僧\">研究僧</span>\npreg_match('/<span.+class=\\\"?education.+\\\"?.+\\\"([\\x{4e00}-\\x{9fa5}]+)\\\">/u', $str, $match_education);\n$user_education = $match_education[1];\n\n// 工作情况\n// <span class=\"education-extra item\" title='挨踢'>挨踢</span>\npreg_match('/<span.+class=\\\"?education-extra.+\\\"?.+>([\\x{4e00}-\n\\x{9fa5}]+)</u', $str, $match_education_extra);\n$user_education_extra = $match_education_extra[1];\n\n\n// 匹配关注话题数量\n// class=\"zg-link-litblue\"><strong>41 个话题</strong></a>\npreg_match('/class=\\\"?zg-link-litblue\\\"?><strong>(\\d+)\\s.+strong>/i', $str, $match_topic);\n$user_topic = $match_topic[1];\n\n// 关注人数\n// <span class=\"zg-gray-normal\">关注了\npreg_match_all('/<strong>(\\d+)<.+<label>/i', $str, $match_care);\n$user_care = $match_care[1][0];\n$user_be_careed = $match_care[1][1];\n\n// 历史浏览量\n// <span class=\"zg-gray-normal\">个人主页被 <strong>17</strong> 人浏览</span>\npreg_match('/class=\\\"?zg-gray-normal\\\"?.+>(\\d+)<.+span>/i', $str, $match_browse);\n$user_browse = $match_browse[1];\n\n```\n\n## 数据入库和程序优化\n在抓取的过程中，有条件的话，一定要通过redis入库，确实能提升抓取和入库效率。没有条件的话只能通过sql优化。这里来几发心德。\n- 数据库表设计索引一定要慎重。在spider爬取的过程中，建议出了用户名，左右字段都不要索引，包括主键都不要，`尽可能的提高入库效率`，试想5000w的数据，每次添加一个，建立索引需要多少消耗。等抓取完毕，需要分析数据时，批量建立索引。\n- 数据入库和更新操作，一定要批量。 mysql 官方给出的增删改的建议和速度：http://dev.mysql.com/doc/refman/5.7/en/insert-speed.html\n    ```\n    # 官方的最优批量插入\n    INSERT INTO yourtable VALUES (1,2), (5,5), ...;\n    ```\n- 部署操作。程序在抓取过程中，有可能会出现异常挂掉，为了保证高效稳定，尽可能的写一个定时脚本。每隔一段时间干掉，重新跑，这样即使异常挂掉也不会浪费太多宝贵时间，毕竟，time is money。\n    ```\n    #!/bin/bash\n    \n    # 干掉\n    ps aux |grep spider |awk '{print $2}'|xargs kill -9\n    sleep 5s\n    \n    # 重新跑\n    nohup /home/cuixiaohuan/lamp/php5/bin/php /home/cuixiaohuan/php/zhihu_spider/spider_new.php &    \n    ```\n\n## 数据分析呈现\n\n数据的呈现主要使用echarts 3.0，感觉对于移动端兼容还不错。兼容移动端的页面响应式布局主要通过几个简单的css控制，代码如下\n\n```\n/*兼容性和响应式div设计*/\n@media screen and (max-width: 480px) {\n    body{\n        padding: 0 ;\n    }\n    .adapt-div {\n        width: 100% ;\n        float: none ;\n        margin: 20px 0;\n    }\n\n    .half-div {\n        height: 350px ;\n        margin-bottom: 10px;\n    }\n\n    .whole-div {\n        height: 350px;\n    }\n}\n<!-- 整块完整布局，半块在web端采用float的方式，移动端去掉-->\n.half-div {\n    width: 48%;\n    height: 430px;\n    margin: 1%;\n    float: left\n}\n\n.whole-div {\n    width: 98%;\n    height: 430px;\n    margin: 1%;\n    float: left\n}\n\n```\n\n## 不足和待学习\n\n整个过程中涉及php,shell,js,css,html,正则等语言和部署等基础知识，但还有诸多需要改进完善，小拽特此记录，后续补充例：\n\n- php 采用multicul进行多线程。\n- 正则匹配进一步优化\n- 部署和抓取过程采用redis提升存储\n- 移动端布局的兼容性提升\n- js的模块化和sass书写css。\n\n【转载请注明：[php爬虫：知乎用户数据爬取和分析](http://cuihuan.net/article/php%E7%88%AC%E8%99%AB%EF%BC%9A%E7%9F%A5%E4%B9%8E%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E7%88%AC%E5%8F%96%E5%92%8C%E5%88%86%E6%9E%90.html) | [靠谱崔小拽](http://cuihuan.net) 】\n","slug":"charactor","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nj7000d661ff9xy6nko","content":"<blockquote>\n<p>背景说明：小拽利用php的curl写的爬虫，实验性的爬取了知乎5w用户的基本信息；同时，针对爬取的数据，进行了简单的分析呈现。<a href=\"http://cuihuan.net:1015/demo_file/zhihu_spider/demo.html\">demo 地址</a></p>\n</blockquote>\n<p>php的spider代码和用户dashboard的展现代码，整理后上传github，在个人博客和公众号更新代码库，程序仅供娱乐和学习交流；如果有侵犯知乎相关权益，请尽快联系本人删除。</p>\n<h2 id=\"无图无真相\"><a href=\"#无图无真相\" class=\"headerlink\" title=\"无图无真相\"></a>无图无真相</h2><p>移动端分析数据截图</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/01/wise_web_spider.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/01/wise_web_spider.png\" alt=\"wise_web_spider\"></a></p>\n<p>pc端分析数据截图</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/01/web_spider.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/01/web_spider-629x1024.png\" alt=\"web_spider\"></a></p>\n<p>整个爬取，分析，展现过程大概分如下几步，小拽将分别介绍</p>\n<ul>\n<li>curl爬取知乎网页数据</li>\n<li>正则分析知乎网页数据</li>\n<li>数据数据入库和程序部署</li>\n<li>数据分析和呈现</li>\n</ul>\n<h2 id=\"curl爬取网页数据\"><a href=\"#curl爬取网页数据\" class=\"headerlink\" title=\"curl爬取网页数据\"></a>curl爬取网页数据</h2><p>PHP的curl扩展是PHP支持的，允许你与各种服务器使用各种类型的协议进行连接和通信的库。是一个非常便捷的抓取网页的工具，同时，支持多线程扩展。</p>\n<p>本程序抓取的是知乎对外提供用户访问的个人信息页面<a href=\"https://www.zhihu.com/people/xxx,抓取过程需要携带用户cookie才能获取页面。直接上码\" target=\"_blank\" rel=\"external\">https://www.zhihu.com/people/xxx,抓取过程需要携带用户cookie才能获取页面。直接上码</a></p>\n<ul>\n<li><p>获取页面cookie</p>\n  <figure class=\"highlight gherkin\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">// 登录知乎，打开个人中心，打开控制台，获取cookie</div><div class=\"line\">document.cookie</div><div class=\"line\"><span class=\"string\">\"_za=67254197-3wwb8d-43f6-94f0-fb0e2d521c31; _ga=GA1.2.2142818188.1433767929; q_c1=78ee1604225d47d08cddd8142a08288b23|1452172601000|1452172601000; _xsrf=15f0639cbe6fb607560c075269064393; cap_id=\"</span>N2QwMTExNGQ0YTY2NGVddlMGIyNmQ4NjdjOTU0YTM5MmQ=|<span class=\"string\">1453444256</span>|<span class=\"string\">49fdc6b43dc51f702b7d6575451e228f56cdaf5d\"; __utmt=1; unlock_ticket=\"QUJDTWpmM0lsZdd2dYQUFBQVlRSlZUVTNVb1ZaNDVoQXJlblVmWGJ0WGwyaHlDdVdscXdZU1VRPT0=</span>|<span class=\"string\">1453444421</span>|<span class=\"string\">c47a2afde1ff334d416bafb1cc267b41014c9d5f\"; __utma=51854390.21428dd18188.1433767929.1453187421.1453444257.3; __utmb=51854390.14.8.1453444425011; __utmc=51854390; __utmz=51854390.1452846679.1.dd1.utmcsr=google</span>|<span class=\"string\">utmccn=(organic)</span>|<span class=\"string\">utmcmd=organic</span>|<span class=\"string\">utmctr=(not%20provided); __utmv=51854390.100-1</span>|<span class=\"string\">2=registration_date=20150823=1^dd3=entry_date=20150823=1\"</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>抓取个人中心页面<br>通过curl，携带cookie，先抓取本人中心页面</p>\n  <figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 通过用户名抓取个人中心页面并存储</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@param</span> $username str :用户名 flag</div><div class=\"line\"> * <span class=\"doctag\">@return</span> boolean      :成功与否标志</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">spiderUser</span><span class=\"params\">($username)</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    $cookie = <span class=\"string\">\"xxxx\"</span> ;</div><div class=\"line\">    $url_info = <span class=\"string\">'http://www.zhihu.com/people/'</span> . $username; <span class=\"comment\">//此处cui-xiao-zhuai代表用户ID,可以直接看url获取本人id</span></div><div class=\"line\">    $ch = curl_init($url_info); <span class=\"comment\">//初始化会话</span></div><div class=\"line\">    curl_setopt($ch, CURLOPT_HEADER, <span class=\"number\">0</span>);</div><div class=\"line\">    curl_setopt($ch, CURLOPT_COOKIE, $cookie);  <span class=\"comment\">//设置请求COOKIE</span></div><div class=\"line\">    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER[<span class=\"string\">'HTTP_USER_AGENT'</span>]);</div><div class=\"line\">    curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class=\"number\">1</span>);  <span class=\"comment\">//将curl_exec()获取的信息以文件流的形式返回，而不是直接输出。</span></div><div class=\"line\">    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, <span class=\"number\">1</span>);</div><div class=\"line\">    $result = curl_exec($ch);</div><div class=\"line\"></div><div class=\"line\">     file_put_contents(<span class=\"string\">'/home/work/zxdata_ch/php/zhihu_spider/file/'</span>.$username.<span class=\"string\">'.html'</span>,$result);</div><div class=\"line\">     <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"正则分析网页数据\"><a href=\"#正则分析网页数据\" class=\"headerlink\" title=\"正则分析网页数据\"></a>正则分析网页数据</h2><h3 id=\"分析新链接，进一步爬取\"><a href=\"#分析新链接，进一步爬取\" class=\"headerlink\" title=\"分析新链接，进一步爬取\"></a>分析新链接，进一步爬取</h3><p>对于抓取过来的网页进行存储，<code>要想进行进一步的爬取，页面必须包含有可用于进一步爬取用户的链接</code>。通过对知乎页面分析发现：在个人中心页面中有关注人和部分点赞人和被关注人。<br>如下所示<br><figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 抓取的html页面中发现了新的用户，可用于爬虫</span></div><div class=\"line\">&lt;a <span class=\"keyword\">class</span>=<span class=\"string\">\"zm-item-link-avatar avatar-link\"</span> href=<span class=\"string\">\"/people/new-user\"</span> data-tip=<span class=\"string\">\"p$t$new-user\"</span>&gt;</div></pre></td></tr></table></figure></p>\n<p>ok，这样子就可以通过自己-》关注人-》关注人的关注人-》。。。进行不断爬取。接下来就是通过正则匹配提取该信息</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 匹配到抓取页面的所有用户</span></div><div class=\"line\">preg_match_all(<span class=\"string\">'/\\/people\\/([\\w-]+)\\\"/i'</span>, $str, $match_arr);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 去重合并入新的用户数组,用户进一步抓取</span></div><div class=\"line\"><span class=\"keyword\">self</span>::$newUserArr = array_unique(array_merge($match_arr[<span class=\"number\">1</span>], <span class=\"keyword\">self</span>::$newUserArr));</div></pre></td></tr></table></figure>\n<p>到此，整个爬虫过程就可以顺利进行了。<br>如果需要大量的抓取数据，可以研究下<code>curl_multi</code>和<code>pcntl</code>进行多线程的快速抓取，此处不做赘述。</p>\n<h3 id=\"分析用户数据，提供分析\"><a href=\"#分析用户数据，提供分析\" class=\"headerlink\" title=\"分析用户数据，提供分析\"></a>分析用户数据，提供分析</h3><p>通过正则可以进一步匹配出更多的该用户数据，直接上码。<br><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取用户头像</span></div><div class=\"line\">preg_match('/&lt;img.+src=\\<span class=\"string\">\"?([^\\s]+\\.(jpg|gif|bmp|bnp|png))\\\"</span>?.+&gt;/i', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_img</span>);</div><div class=\"line\"><span class=\"variable\">$img_url</span> = <span class=\"variable\">$match_img</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配用户名：</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"name\"&gt;崔小拽&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?name\\\"</span>?&gt;([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+).+span&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_name</span>);</div><div class=\"line\"><span class=\"variable\">$user_name</span> = <span class=\"variable\">$match_name</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配用户简介</span></div><div class=\"line\"><span class=\"comment\">// class bio span 中文</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?bio\\\"</span>?.+\\&gt;([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+).+span&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_title</span>);</div><div class=\"line\"><span class=\"variable\">$user_title</span> = <span class=\"variable\">$match_title</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配性别</span></div><div class=\"line\"><span class=\"comment\">//&lt;input type=\"radio\" name=\"gender\" value=\"1\" checked=\"checked\" class=\"male\"/&gt; 男&amp;nbsp;&amp;nbsp;</span></div><div class=\"line\"><span class=\"comment\">// gender value1 ;结束 中文</span></div><div class=\"line\">preg_match('/&lt;<span class=\"keyword\">input</span>.+name=\\<span class=\"string\">\"?gender\\\"</span>?.+value=\\<span class=\"string\">\"?1\\\"</span>?.+([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+).+\\;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_sex</span>);</div><div class=\"line\"><span class=\"variable\">$user_sex</span> = <span class=\"variable\">$match_sex</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配地区</span></div><div class=\"line\"><span class=\"comment\">//&lt;span class=\"location item\" title=\"北京\"&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?location.+\\\"</span>?.+\\<span class=\"string\">\"([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+)\\\"</span>&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_city</span>);</div><div class=\"line\"><span class=\"variable\">$user_city</span> = <span class=\"variable\">$match_city</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配工作</span></div><div class=\"line\"><span class=\"comment\">//&lt;span class=\"employment item\" title=\"人见人骂的公司\"&gt;人见人骂的公司&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?employment.+\\\"</span>?.+\\<span class=\"string\">\"([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+)\\\"</span>&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_employment</span>);</div><div class=\"line\"><span class=\"variable\">$user_employ</span> = <span class=\"variable\">$match_employment</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配职位</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"position item\" title=\"程序猿\"&gt;&lt;a href=\"/topic/19590046\" title=\"程序猿\" class=\"topic-link\" data-token=\"19590046\" data-topicid=\"13253\"&gt;程序猿&lt;/a&gt;&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?position.+\\\"</span>?.+\\<span class=\"string\">\"([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+).+\\\"</span>&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_position</span>);</div><div class=\"line\"><span class=\"variable\">$user_position</span> = <span class=\"variable\">$match_position</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配学历</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"education item\" title=\"研究僧\"&gt;研究僧&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?education.+\\\"</span>?.+\\<span class=\"string\">\"([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+)\\\"</span>&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_education</span>);</div><div class=\"line\"><span class=\"variable\">$user_education</span> = <span class=\"variable\">$match_education</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 工作情况</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"education-extra item\" title='挨踢'&gt;挨踢&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?education-extra.+\\\"</span>?.+&gt;([\\x&#123;4e00&#125;-</div><div class=\"line\">\\x&#123;9fa5&#125;]+)&lt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_education_extra</span>);</div><div class=\"line\"><span class=\"variable\">$user_education_extra</span> = <span class=\"variable\">$match_education_extra</span>[1];</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配关注话题数量</span></div><div class=\"line\"><span class=\"comment\">// class=\"zg-link-litblue\"&gt;&lt;strong&gt;41 个话题&lt;/strong&gt;&lt;/a&gt;</span></div><div class=\"line\">preg_match('/<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?zg-link-litblue\\\"</span>?&gt;&lt;strong&gt;(\\<span class=\"keyword\">d</span>+)\\s.+strong&gt;/i', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_topic</span>);</div><div class=\"line\"><span class=\"variable\">$user_topic</span> = <span class=\"variable\">$match_topic</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 关注人数</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"zg-gray-normal\"&gt;关注了</span></div><div class=\"line\">preg_match_all('/&lt;strong&gt;(\\<span class=\"keyword\">d</span>+)&lt;.+&lt;<span class=\"keyword\">label</span>&gt;/i', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_care</span>);</div><div class=\"line\"><span class=\"variable\">$user_care</span> = <span class=\"variable\">$match_care</span>[1][0];</div><div class=\"line\"><span class=\"variable\">$user_be_careed</span> = <span class=\"variable\">$match_care</span>[1][1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 历史浏览量</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"zg-gray-normal\"&gt;个人主页被 &lt;strong&gt;17&lt;/strong&gt; 人浏览&lt;/span&gt;</span></div><div class=\"line\">preg_match('/<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?zg-gray-normal\\\"</span>?.+&gt;(\\<span class=\"keyword\">d</span>+)&lt;.+span&gt;/i', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_browse</span>);</div><div class=\"line\"><span class=\"variable\">$user_browse</span> = <span class=\"variable\">$match_browse</span>[1];</div></pre></td></tr></table></figure></p>\n<h2 id=\"数据入库和程序优化\"><a href=\"#数据入库和程序优化\" class=\"headerlink\" title=\"数据入库和程序优化\"></a>数据入库和程序优化</h2><p>在抓取的过程中，有条件的话，一定要通过redis入库，确实能提升抓取和入库效率。没有条件的话只能通过sql优化。这里来几发心德。</p>\n<ul>\n<li>数据库表设计索引一定要慎重。在spider爬取的过程中，建议出了用户名，左右字段都不要索引，包括主键都不要，<code>尽可能的提高入库效率</code>，试想5000w的数据，每次添加一个，建立索引需要多少消耗。等抓取完毕，需要分析数据时，批量建立索引。</li>\n<li><p>数据入库和更新操作，一定要批量。 mysql 官方给出的增删改的建议和速度：<a href=\"http://dev.mysql.com/doc/refman/5.7/en/insert-speed.html\" target=\"_blank\" rel=\"external\">http://dev.mysql.com/doc/refman/5.7/en/insert-speed.html</a></p>\n  <figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"># 官方的最优批量插入</div><div class=\"line\">INSERT INTO yourtable VALUES (<span class=\"number\">1</span>,<span class=\"number\">2</span>), (<span class=\"number\">5</span>,<span class=\"number\">5</span>), ...;</div></pre></td></tr></table></figure>\n</li>\n<li><p>部署操作。程序在抓取过程中，有可能会出现异常挂掉，为了保证高效稳定，尽可能的写一个定时脚本。每隔一段时间干掉，重新跑，这样即使异常挂掉也不会浪费太多宝贵时间，毕竟，time is money。</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 干掉</span></div><div class=\"line\">ps aux |grep spider |awk <span class=\"string\">'&#123;print $2&#125;'</span>|xargs <span class=\"built_in\">kill</span> -9</div><div class=\"line\">sleep 5s</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 重新跑</span></div><div class=\"line\">nohup /home/cuixiaohuan/lamp/php5/bin/php /home/cuixiaohuan/php/zhihu_spider/spider_new.php &amp;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"数据分析呈现\"><a href=\"#数据分析呈现\" class=\"headerlink\" title=\"数据分析呈现\"></a>数据分析呈现</h2><p>数据的呈现主要使用echarts 3.0，感觉对于移动端兼容还不错。兼容移动端的页面响应式布局主要通过几个简单的css控制，代码如下</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/*兼容性和响应式div设计*/</span></div><div class=\"line\">@<span class=\"keyword\">media</span> screen and (max-width: <span class=\"number\">480px</span>) &#123;</div><div class=\"line\">    <span class=\"selector-tag\">body</span>&#123;</div><div class=\"line\">        <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> ;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-class\">.adapt-div</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">100%</span> ;</div><div class=\"line\">        <span class=\"attribute\">float</span>: none ;</div><div class=\"line\">        <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"selector-class\">.half-div</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">350px</span> ;</div><div class=\"line\">        <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"selector-class\">.whole-div</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">350px</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">&lt;!<span class=\"selector-tag\">--</span> 整块完整布局，半块在<span class=\"selector-tag\">web</span>端采用<span class=\"selector-tag\">float</span>的方式，移动端去掉<span class=\"selector-tag\">--</span>&gt;</div><div class=\"line\"><span class=\"selector-class\">.half-div</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">48%</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">430px</span>;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">1%</span>;</div><div class=\"line\">    <span class=\"attribute\">float</span>: left</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.whole-div</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">98%</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">430px</span>;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">1%</span>;</div><div class=\"line\">    <span class=\"attribute\">float</span>: left</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"不足和待学习\"><a href=\"#不足和待学习\" class=\"headerlink\" title=\"不足和待学习\"></a>不足和待学习</h2><p>整个过程中涉及php,shell,js,css,html,正则等语言和部署等基础知识，但还有诸多需要改进完善，小拽特此记录，后续补充例：</p>\n<ul>\n<li>php 采用multicul进行多线程。</li>\n<li>正则匹配进一步优化</li>\n<li>部署和抓取过程采用redis提升存储</li>\n<li>移动端布局的兼容性提升</li>\n<li>js的模块化和sass书写css。</li>\n</ul>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/php%E7%88%AC%E8%99%AB%EF%BC%9A%E7%9F%A5%E4%B9%8E%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E7%88%AC%E5%8F%96%E5%92%8C%E5%88%86%E6%9E%90.html\">php爬虫：知乎用户数据爬取和分析</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>背景说明：小拽利用php的curl写的爬虫，实验性的爬取了知乎5w用户的基本信息；同时，针对爬取的数据，进行了简单的分析呈现。<a href=\"http://cuihuan.net:1015/demo_file/zhihu_spider/demo.html\">demo 地址</a></p>\n</blockquote>\n<p>php的spider代码和用户dashboard的展现代码，整理后上传github，在个人博客和公众号更新代码库，程序仅供娱乐和学习交流；如果有侵犯知乎相关权益，请尽快联系本人删除。</p>\n<h2 id=\"无图无真相\"><a href=\"#无图无真相\" class=\"headerlink\" title=\"无图无真相\"></a>无图无真相</h2><p>移动端分析数据截图</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/01/wise_web_spider.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/01/wise_web_spider.png\" alt=\"wise_web_spider\"></a></p>\n<p>pc端分析数据截图</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/01/web_spider.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/01/web_spider-629x1024.png\" alt=\"web_spider\"></a></p>\n<p>整个爬取，分析，展现过程大概分如下几步，小拽将分别介绍</p>\n<ul>\n<li>curl爬取知乎网页数据</li>\n<li>正则分析知乎网页数据</li>\n<li>数据数据入库和程序部署</li>\n<li>数据分析和呈现</li>\n</ul>\n<h2 id=\"curl爬取网页数据\"><a href=\"#curl爬取网页数据\" class=\"headerlink\" title=\"curl爬取网页数据\"></a>curl爬取网页数据</h2><p>PHP的curl扩展是PHP支持的，允许你与各种服务器使用各种类型的协议进行连接和通信的库。是一个非常便捷的抓取网页的工具，同时，支持多线程扩展。</p>\n<p>本程序抓取的是知乎对外提供用户访问的个人信息页面<a href=\"https://www.zhihu.com/people/xxx,抓取过程需要携带用户cookie才能获取页面。直接上码\">https://www.zhihu.com/people/xxx,抓取过程需要携带用户cookie才能获取页面。直接上码</a></p>\n<ul>\n<li><p>获取页面cookie</p>\n  <figure class=\"highlight gherkin\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">// 登录知乎，打开个人中心，打开控制台，获取cookie</div><div class=\"line\">document.cookie</div><div class=\"line\"><span class=\"string\">\"_za=67254197-3wwb8d-43f6-94f0-fb0e2d521c31; _ga=GA1.2.2142818188.1433767929; q_c1=78ee1604225d47d08cddd8142a08288b23|1452172601000|1452172601000; _xsrf=15f0639cbe6fb607560c075269064393; cap_id=\"</span>N2QwMTExNGQ0YTY2NGVddlMGIyNmQ4NjdjOTU0YTM5MmQ=|<span class=\"string\">1453444256</span>|<span class=\"string\">49fdc6b43dc51f702b7d6575451e228f56cdaf5d\"; __utmt=1; unlock_ticket=\"QUJDTWpmM0lsZdd2dYQUFBQVlRSlZUVTNVb1ZaNDVoQXJlblVmWGJ0WGwyaHlDdVdscXdZU1VRPT0=</span>|<span class=\"string\">1453444421</span>|<span class=\"string\">c47a2afde1ff334d416bafb1cc267b41014c9d5f\"; __utma=51854390.21428dd18188.1433767929.1453187421.1453444257.3; __utmb=51854390.14.8.1453444425011; __utmc=51854390; __utmz=51854390.1452846679.1.dd1.utmcsr=google</span>|<span class=\"string\">utmccn=(organic)</span>|<span class=\"string\">utmcmd=organic</span>|<span class=\"string\">utmctr=(not%20provided); __utmv=51854390.100-1</span>|<span class=\"string\">2=registration_date=20150823=1^dd3=entry_date=20150823=1\"</span></div></pre></td></tr></table></figure>\n</li>\n<li><p>抓取个人中心页面<br>通过curl，携带cookie，先抓取本人中心页面</p>\n  <figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 通过用户名抓取个人中心页面并存储</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@param</span> $username str :用户名 flag</div><div class=\"line\"> * <span class=\"doctag\">@return</span> boolean      :成功与否标志</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">spiderUser</span><span class=\"params\">($username)</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    $cookie = <span class=\"string\">\"xxxx\"</span> ;</div><div class=\"line\">    $url_info = <span class=\"string\">'http://www.zhihu.com/people/'</span> . $username; <span class=\"comment\">//此处cui-xiao-zhuai代表用户ID,可以直接看url获取本人id</span></div><div class=\"line\">    $ch = curl_init($url_info); <span class=\"comment\">//初始化会话</span></div><div class=\"line\">    curl_setopt($ch, CURLOPT_HEADER, <span class=\"number\">0</span>);</div><div class=\"line\">    curl_setopt($ch, CURLOPT_COOKIE, $cookie);  <span class=\"comment\">//设置请求COOKIE</span></div><div class=\"line\">    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER[<span class=\"string\">'HTTP_USER_AGENT'</span>]);</div><div class=\"line\">    curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class=\"number\">1</span>);  <span class=\"comment\">//将curl_exec()获取的信息以文件流的形式返回，而不是直接输出。</span></div><div class=\"line\">    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, <span class=\"number\">1</span>);</div><div class=\"line\">    $result = curl_exec($ch);</div><div class=\"line\"></div><div class=\"line\">     file_put_contents(<span class=\"string\">'/home/work/zxdata_ch/php/zhihu_spider/file/'</span>.$username.<span class=\"string\">'.html'</span>,$result);</div><div class=\"line\">     <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"正则分析网页数据\"><a href=\"#正则分析网页数据\" class=\"headerlink\" title=\"正则分析网页数据\"></a>正则分析网页数据</h2><h3 id=\"分析新链接，进一步爬取\"><a href=\"#分析新链接，进一步爬取\" class=\"headerlink\" title=\"分析新链接，进一步爬取\"></a>分析新链接，进一步爬取</h3><p>对于抓取过来的网页进行存储，<code>要想进行进一步的爬取，页面必须包含有可用于进一步爬取用户的链接</code>。通过对知乎页面分析发现：在个人中心页面中有关注人和部分点赞人和被关注人。<br>如下所示<br><figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 抓取的html页面中发现了新的用户，可用于爬虫</span></div><div class=\"line\">&lt;a <span class=\"keyword\">class</span>=<span class=\"string\">\"zm-item-link-avatar avatar-link\"</span> href=<span class=\"string\">\"/people/new-user\"</span> data-tip=<span class=\"string\">\"p$t$new-user\"</span>&gt;</div></pre></td></tr></table></figure></p>\n<p>ok，这样子就可以通过自己-》关注人-》关注人的关注人-》。。。进行不断爬取。接下来就是通过正则匹配提取该信息</p>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 匹配到抓取页面的所有用户</span></div><div class=\"line\">preg_match_all(<span class=\"string\">'/\\/people\\/([\\w-]+)\\\"/i'</span>, $str, $match_arr);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 去重合并入新的用户数组,用户进一步抓取</span></div><div class=\"line\"><span class=\"keyword\">self</span>::$newUserArr = array_unique(array_merge($match_arr[<span class=\"number\">1</span>], <span class=\"keyword\">self</span>::$newUserArr));</div></pre></td></tr></table></figure>\n<p>到此，整个爬虫过程就可以顺利进行了。<br>如果需要大量的抓取数据，可以研究下<code>curl_multi</code>和<code>pcntl</code>进行多线程的快速抓取，此处不做赘述。</p>\n<h3 id=\"分析用户数据，提供分析\"><a href=\"#分析用户数据，提供分析\" class=\"headerlink\" title=\"分析用户数据，提供分析\"></a>分析用户数据，提供分析</h3><p>通过正则可以进一步匹配出更多的该用户数据，直接上码。<br><figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取用户头像</span></div><div class=\"line\">preg_match('/&lt;img.+src=\\<span class=\"string\">\"?([^\\s]+\\.(jpg|gif|bmp|bnp|png))\\\"</span>?.+&gt;/i', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_img</span>);</div><div class=\"line\"><span class=\"variable\">$img_url</span> = <span class=\"variable\">$match_img</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配用户名：</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"name\"&gt;崔小拽&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?name\\\"</span>?&gt;([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+).+span&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_name</span>);</div><div class=\"line\"><span class=\"variable\">$user_name</span> = <span class=\"variable\">$match_name</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配用户简介</span></div><div class=\"line\"><span class=\"comment\">// class bio span 中文</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?bio\\\"</span>?.+\\&gt;([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+).+span&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_title</span>);</div><div class=\"line\"><span class=\"variable\">$user_title</span> = <span class=\"variable\">$match_title</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配性别</span></div><div class=\"line\"><span class=\"comment\">//&lt;input type=\"radio\" name=\"gender\" value=\"1\" checked=\"checked\" class=\"male\"/&gt; 男&amp;nbsp;&amp;nbsp;</span></div><div class=\"line\"><span class=\"comment\">// gender value1 ;结束 中文</span></div><div class=\"line\">preg_match('/&lt;<span class=\"keyword\">input</span>.+name=\\<span class=\"string\">\"?gender\\\"</span>?.+value=\\<span class=\"string\">\"?1\\\"</span>?.+([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+).+\\;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_sex</span>);</div><div class=\"line\"><span class=\"variable\">$user_sex</span> = <span class=\"variable\">$match_sex</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配地区</span></div><div class=\"line\"><span class=\"comment\">//&lt;span class=\"location item\" title=\"北京\"&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?location.+\\\"</span>?.+\\<span class=\"string\">\"([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+)\\\"</span>&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_city</span>);</div><div class=\"line\"><span class=\"variable\">$user_city</span> = <span class=\"variable\">$match_city</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配工作</span></div><div class=\"line\"><span class=\"comment\">//&lt;span class=\"employment item\" title=\"人见人骂的公司\"&gt;人见人骂的公司&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?employment.+\\\"</span>?.+\\<span class=\"string\">\"([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+)\\\"</span>&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_employment</span>);</div><div class=\"line\"><span class=\"variable\">$user_employ</span> = <span class=\"variable\">$match_employment</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配职位</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"position item\" title=\"程序猿\"&gt;&lt;a href=\"/topic/19590046\" title=\"程序猿\" class=\"topic-link\" data-token=\"19590046\" data-topicid=\"13253\"&gt;程序猿&lt;/a&gt;&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?position.+\\\"</span>?.+\\<span class=\"string\">\"([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+).+\\\"</span>&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_position</span>);</div><div class=\"line\"><span class=\"variable\">$user_position</span> = <span class=\"variable\">$match_position</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配学历</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"education item\" title=\"研究僧\"&gt;研究僧&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?education.+\\\"</span>?.+\\<span class=\"string\">\"([\\x&#123;4e00&#125;-\\x&#123;9fa5&#125;]+)\\\"</span>&gt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_education</span>);</div><div class=\"line\"><span class=\"variable\">$user_education</span> = <span class=\"variable\">$match_education</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 工作情况</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"education-extra item\" title='挨踢'&gt;挨踢&lt;/span&gt;</span></div><div class=\"line\">preg_match('/&lt;span.+<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?education-extra.+\\\"</span>?.+&gt;([\\x&#123;4e00&#125;-</div><div class=\"line\">\\x&#123;9fa5&#125;]+)&lt;/<span class=\"keyword\">u</span>', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_education_extra</span>);</div><div class=\"line\"><span class=\"variable\">$user_education_extra</span> = <span class=\"variable\">$match_education_extra</span>[1];</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 匹配关注话题数量</span></div><div class=\"line\"><span class=\"comment\">// class=\"zg-link-litblue\"&gt;&lt;strong&gt;41 个话题&lt;/strong&gt;&lt;/a&gt;</span></div><div class=\"line\">preg_match('/<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?zg-link-litblue\\\"</span>?&gt;&lt;strong&gt;(\\<span class=\"keyword\">d</span>+)\\s.+strong&gt;/i', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_topic</span>);</div><div class=\"line\"><span class=\"variable\">$user_topic</span> = <span class=\"variable\">$match_topic</span>[1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 关注人数</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"zg-gray-normal\"&gt;关注了</span></div><div class=\"line\">preg_match_all('/&lt;strong&gt;(\\<span class=\"keyword\">d</span>+)&lt;.+&lt;<span class=\"keyword\">label</span>&gt;/i', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_care</span>);</div><div class=\"line\"><span class=\"variable\">$user_care</span> = <span class=\"variable\">$match_care</span>[1][0];</div><div class=\"line\"><span class=\"variable\">$user_be_careed</span> = <span class=\"variable\">$match_care</span>[1][1];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 历史浏览量</span></div><div class=\"line\"><span class=\"comment\">// &lt;span class=\"zg-gray-normal\"&gt;个人主页被 &lt;strong&gt;17&lt;/strong&gt; 人浏览&lt;/span&gt;</span></div><div class=\"line\">preg_match('/<span class=\"keyword\">class</span>=\\<span class=\"string\">\"?zg-gray-normal\\\"</span>?.+&gt;(\\<span class=\"keyword\">d</span>+)&lt;.+span&gt;/i', <span class=\"variable\">$str</span>, <span class=\"variable\">$match_browse</span>);</div><div class=\"line\"><span class=\"variable\">$user_browse</span> = <span class=\"variable\">$match_browse</span>[1];</div></pre></td></tr></table></figure></p>\n<h2 id=\"数据入库和程序优化\"><a href=\"#数据入库和程序优化\" class=\"headerlink\" title=\"数据入库和程序优化\"></a>数据入库和程序优化</h2><p>在抓取的过程中，有条件的话，一定要通过redis入库，确实能提升抓取和入库效率。没有条件的话只能通过sql优化。这里来几发心德。</p>\n<ul>\n<li>数据库表设计索引一定要慎重。在spider爬取的过程中，建议出了用户名，左右字段都不要索引，包括主键都不要，<code>尽可能的提高入库效率</code>，试想5000w的数据，每次添加一个，建立索引需要多少消耗。等抓取完毕，需要分析数据时，批量建立索引。</li>\n<li><p>数据入库和更新操作，一定要批量。 mysql 官方给出的增删改的建议和速度：<a href=\"http://dev.mysql.com/doc/refman/5.7/en/insert-speed.html\">http://dev.mysql.com/doc/refman/5.7/en/insert-speed.html</a></p>\n  <figure class=\"highlight lsl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"># 官方的最优批量插入</div><div class=\"line\">INSERT INTO yourtable VALUES (<span class=\"number\">1</span>,<span class=\"number\">2</span>), (<span class=\"number\">5</span>,<span class=\"number\">5</span>), ...;</div></pre></td></tr></table></figure>\n</li>\n<li><p>部署操作。程序在抓取过程中，有可能会出现异常挂掉，为了保证高效稳定，尽可能的写一个定时脚本。每隔一段时间干掉，重新跑，这样即使异常挂掉也不会浪费太多宝贵时间，毕竟，time is money。</p>\n  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</div><div class=\"line\"></span></div><div class=\"line\"><span class=\"comment\"># 干掉</span></div><div class=\"line\">ps aux |grep spider |awk <span class=\"string\">'&#123;print $2&#125;'</span>|xargs <span class=\"built_in\">kill</span> -9</div><div class=\"line\">sleep 5s</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 重新跑</span></div><div class=\"line\">nohup /home/cuixiaohuan/lamp/php5/bin/php /home/cuixiaohuan/php/zhihu_spider/spider_new.php &amp;</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"数据分析呈现\"><a href=\"#数据分析呈现\" class=\"headerlink\" title=\"数据分析呈现\"></a>数据分析呈现</h2><p>数据的呈现主要使用echarts 3.0，感觉对于移动端兼容还不错。兼容移动端的页面响应式布局主要通过几个简单的css控制，代码如下</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/*兼容性和响应式div设计*/</span></div><div class=\"line\">@<span class=\"keyword\">media</span> screen and (max-width: <span class=\"number\">480px</span>) &#123;</div><div class=\"line\">    <span class=\"selector-tag\">body</span>&#123;</div><div class=\"line\">        <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> ;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"selector-class\">.adapt-div</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">width</span>: <span class=\"number\">100%</span> ;</div><div class=\"line\">        <span class=\"attribute\">float</span>: none ;</div><div class=\"line\">        <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"selector-class\">.half-div</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">350px</span> ;</div><div class=\"line\">        <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">10px</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"selector-class\">.whole-div</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">height</span>: <span class=\"number\">350px</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">&lt;!<span class=\"selector-tag\">--</span> 整块完整布局，半块在<span class=\"selector-tag\">web</span>端采用<span class=\"selector-tag\">float</span>的方式，移动端去掉<span class=\"selector-tag\">--</span>&gt;</div><div class=\"line\"><span class=\"selector-class\">.half-div</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">48%</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">430px</span>;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">1%</span>;</div><div class=\"line\">    <span class=\"attribute\">float</span>: left</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-class\">.whole-div</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">width</span>: <span class=\"number\">98%</span>;</div><div class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">430px</span>;</div><div class=\"line\">    <span class=\"attribute\">margin</span>: <span class=\"number\">1%</span>;</div><div class=\"line\">    <span class=\"attribute\">float</span>: left</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"不足和待学习\"><a href=\"#不足和待学习\" class=\"headerlink\" title=\"不足和待学习\"></a>不足和待学习</h2><p>整个过程中涉及php,shell,js,css,html,正则等语言和部署等基础知识，但还有诸多需要改进完善，小拽特此记录，后续补充例：</p>\n<ul>\n<li>php 采用multicul进行多线程。</li>\n<li>正则匹配进一步优化</li>\n<li>部署和抓取过程采用redis提升存储</li>\n<li>移动端布局的兼容性提升</li>\n<li>js的模块化和sass书写css。</li>\n</ul>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/php%E7%88%AC%E8%99%AB%EF%BC%9A%E7%9F%A5%E4%B9%8E%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E7%88%AC%E5%8F%96%E5%92%8C%E5%88%86%E6%9E%90.html\">php爬虫：知乎用户数据爬取和分析</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"fsck修复linux文件损坏","date":"2016-08-20T09:21:35.000Z","_content":"\n>`数据一定要备份，最好多机备份，代码一定要ci`。\n\n## 背景和损失\n背景：机房事故，突然关机，硬盘年老失修，造成很多文件不可用。如图\n\n\n[![11441496-18D2-4576-8F5F-C2BF7B84F458](http://cuihuan.net/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png)](http://cuihuan.net/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png)\n\n\n面临损失：\n作为一名靠谱程序员，数据库单机多机备份，程序版本控制这些都是有的【如果没有，一定要加上】；但这次有一个重要影响，就是git中commit之后，没有push的文件全损坏了，损坏了，坏了，了。。。。\n\n## 分析原因\nop给出的说法是网络波动，造成机房故障，机器重启。但从结果看，文件系统乱掉了，而且乱掉的文件主要分两类：\n- 1：当时正在写入和操作的文件。例如运行的脚本，正在写的文件，samba建立网络映射的文件，git实时文件。\n- 2：内存里的数据，例如memcache里的数据等等\n\n\n\n## 处理：fsck修复。\n###1：查看硬盘挂载：\ndf查看下磁盘的挂载位置。\n\n[![F60D7BE5-D89D-4C74-9927-6EE2DD6157DF](http://cuihuan.net/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png)](http://cuihuan.net/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png)\n### 2：操作挂起：`不挂起可能会出现数据恢复中断`。\n报错：直接挂起会出现 dev is busy，如下图\n[![59423A93-F29C-4A30-AB92-17408E9E6556](http://cuihuan.net/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png)](http://cuihuan.net/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png)\n用：umout -l /dev/sda3\n[![3C64703C-CF4A-47EB-9FE3-91CD7542E8FA](http://cuihuan.net/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png)](http://cuihuan.net/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png)\n```\n#umount -l <挂载点|设备>\n\n此命令将会断开设备并关闭打开该设备的全部句柄。\n通常，您可以使用 eject <挂载点|设备>命令弹出碟片\n```\n### 3：fsck 扫盘\n```\nfsck -f /dev/sda3\n```\n注意ext2 还会进行e2fsck 再扫一遍，此为正常操作\n[![C9347418-9644-4841-9A2C-3FFB1157E5D8](http://cuihuan.net/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png)](http://cuihuan.net/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png)\n### 4：扫盘结束后，挂载驱动盘\n\n\n### 5：寻找和恢复文件\n把.git 内的文件全部整理，导出，一个一个寻找自己需要的文件，找到了久违的文件。\n[![3B14EF17-2C86-411F-BF16-4FFC15637C4D](http://cuihuan.net/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png)](http://cuihuan.net/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png)\n\n## 后续\n一句话：`代码一定要ci，数据一定要容灾`\n\n【转载请注明：[fsck修复linux文件损坏](http://cuihuan.net/?p=474) | [靠谱崔小拽](http://cuihuan.net) 】\n\n\n\n\n\n\n\n","source":"_posts/fsck修复linux文件损坏.md","raw":"---\ntitle: fsck修复linux文件损坏 \ndate: 2016-08-20 17:21:35\ntags: \n- git修复\n- linux\n---\n\n>`数据一定要备份，最好多机备份，代码一定要ci`。\n\n## 背景和损失\n背景：机房事故，突然关机，硬盘年老失修，造成很多文件不可用。如图\n\n\n[![11441496-18D2-4576-8F5F-C2BF7B84F458](http://cuihuan.net/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png)](http://cuihuan.net/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png)\n\n\n面临损失：\n作为一名靠谱程序员，数据库单机多机备份，程序版本控制这些都是有的【如果没有，一定要加上】；但这次有一个重要影响，就是git中commit之后，没有push的文件全损坏了，损坏了，坏了，了。。。。\n\n## 分析原因\nop给出的说法是网络波动，造成机房故障，机器重启。但从结果看，文件系统乱掉了，而且乱掉的文件主要分两类：\n- 1：当时正在写入和操作的文件。例如运行的脚本，正在写的文件，samba建立网络映射的文件，git实时文件。\n- 2：内存里的数据，例如memcache里的数据等等\n\n\n\n## 处理：fsck修复。\n###1：查看硬盘挂载：\ndf查看下磁盘的挂载位置。\n\n[![F60D7BE5-D89D-4C74-9927-6EE2DD6157DF](http://cuihuan.net/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png)](http://cuihuan.net/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png)\n### 2：操作挂起：`不挂起可能会出现数据恢复中断`。\n报错：直接挂起会出现 dev is busy，如下图\n[![59423A93-F29C-4A30-AB92-17408E9E6556](http://cuihuan.net/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png)](http://cuihuan.net/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png)\n用：umout -l /dev/sda3\n[![3C64703C-CF4A-47EB-9FE3-91CD7542E8FA](http://cuihuan.net/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png)](http://cuihuan.net/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png)\n```\n#umount -l <挂载点|设备>\n\n此命令将会断开设备并关闭打开该设备的全部句柄。\n通常，您可以使用 eject <挂载点|设备>命令弹出碟片\n```\n### 3：fsck 扫盘\n```\nfsck -f /dev/sda3\n```\n注意ext2 还会进行e2fsck 再扫一遍，此为正常操作\n[![C9347418-9644-4841-9A2C-3FFB1157E5D8](http://cuihuan.net/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png)](http://cuihuan.net/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png)\n### 4：扫盘结束后，挂载驱动盘\n\n\n### 5：寻找和恢复文件\n把.git 内的文件全部整理，导出，一个一个寻找自己需要的文件，找到了久违的文件。\n[![3B14EF17-2C86-411F-BF16-4FFC15637C4D](http://cuihuan.net/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png)](http://cuihuan.net/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png)\n\n## 后续\n一句话：`代码一定要ci，数据一定要容灾`\n\n【转载请注明：[fsck修复linux文件损坏](http://cuihuan.net/?p=474) | [靠谱崔小拽](http://cuihuan.net) 】\n\n\n\n\n\n\n\n","slug":"fsck修复linux文件损坏","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njb000f661fld51hx3u","content":"<blockquote>\n<p><code>数据一定要备份，最好多机备份，代码一定要ci</code>。</p>\n</blockquote>\n<h2 id=\"背景和损失\"><a href=\"#背景和损失\" class=\"headerlink\" title=\"背景和损失\"></a>背景和损失</h2><p>背景：机房事故，突然关机，硬盘年老失修，造成很多文件不可用。如图</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png\" alt=\"11441496-18D2-4576-8F5F-C2BF7B84F458\"></a></p>\n<p>面临损失：<br>作为一名靠谱程序员，数据库单机多机备份，程序版本控制这些都是有的【如果没有，一定要加上】；但这次有一个重要影响，就是git中commit之后，没有push的文件全损坏了，损坏了，坏了，了。。。。</p>\n<h2 id=\"分析原因\"><a href=\"#分析原因\" class=\"headerlink\" title=\"分析原因\"></a>分析原因</h2><p>op给出的说法是网络波动，造成机房故障，机器重启。但从结果看，文件系统乱掉了，而且乱掉的文件主要分两类：</p>\n<ul>\n<li>1：当时正在写入和操作的文件。例如运行的脚本，正在写的文件，samba建立网络映射的文件，git实时文件。</li>\n<li>2：内存里的数据，例如memcache里的数据等等</li>\n</ul>\n<h2 id=\"处理：fsck修复。\"><a href=\"#处理：fsck修复。\" class=\"headerlink\" title=\"处理：fsck修复。\"></a>处理：fsck修复。</h2><p>###1：查看硬盘挂载：<br>df查看下磁盘的挂载位置。</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png\" alt=\"F60D7BE5-D89D-4C74-9927-6EE2DD6157DF\"></a></p>\n<h3 id=\"2：操作挂起：不挂起可能会出现数据恢复中断。\"><a href=\"#2：操作挂起：不挂起可能会出现数据恢复中断。\" class=\"headerlink\" title=\"2：操作挂起：不挂起可能会出现数据恢复中断。\"></a>2：操作挂起：<code>不挂起可能会出现数据恢复中断</code>。</h3><p>报错：直接挂起会出现 dev is busy，如下图<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png\" alt=\"59423A93-F29C-4A30-AB92-17408E9E6556\"></a><br>用：umout -l /dev/sda3<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png\" alt=\"3C64703C-CF4A-47EB-9FE3-91CD7542E8FA\"></a><br><figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#umount -l &lt;挂载点|设备&gt;</span></div><div class=\"line\"></div><div class=\"line\">此命令将会断开设备并关闭打开该设备的全部句柄。</div><div class=\"line\">通常，您可以使用 eject &lt;挂载点<span class=\"string\">|设备&gt;命令弹出碟片</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"3：fsck-扫盘\"><a href=\"#3：fsck-扫盘\" class=\"headerlink\" title=\"3：fsck 扫盘\"></a>3：fsck 扫盘</h3><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">fsck -f <span class=\"regexp\">/dev/</span>sda3</div></pre></td></tr></table></figure>\n<p>注意ext2 还会进行e2fsck 再扫一遍，此为正常操作<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png\" alt=\"C9347418-9644-4841-9A2C-3FFB1157E5D8\"></a></p>\n<h3 id=\"4：扫盘结束后，挂载驱动盘\"><a href=\"#4：扫盘结束后，挂载驱动盘\" class=\"headerlink\" title=\"4：扫盘结束后，挂载驱动盘\"></a>4：扫盘结束后，挂载驱动盘</h3><h3 id=\"5：寻找和恢复文件\"><a href=\"#5：寻找和恢复文件\" class=\"headerlink\" title=\"5：寻找和恢复文件\"></a>5：寻找和恢复文件</h3><p>把.git 内的文件全部整理，导出，一个一个寻找自己需要的文件，找到了久违的文件。<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png\" alt=\"3B14EF17-2C86-411F-BF16-4FFC15637C4D\"></a></p>\n<h2 id=\"后续\"><a href=\"#后续\" class=\"headerlink\" title=\"后续\"></a>后续</h2><p>一句话：<code>代码一定要ci，数据一定要容灾</code></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/?p=474\">fsck修复linux文件损坏</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p><code>数据一定要备份，最好多机备份，代码一定要ci</code>。</p>\n</blockquote>\n<h2 id=\"背景和损失\"><a href=\"#背景和损失\" class=\"headerlink\" title=\"背景和损失\"></a>背景和损失</h2><p>背景：机房事故，突然关机，硬盘年老失修，造成很多文件不可用。如图</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/11441496-18D2-4576-8F5F-C2BF7B84F458-300x84.png\" alt=\"11441496-18D2-4576-8F5F-C2BF7B84F458\"></a></p>\n<p>面临损失：<br>作为一名靠谱程序员，数据库单机多机备份，程序版本控制这些都是有的【如果没有，一定要加上】；但这次有一个重要影响，就是git中commit之后，没有push的文件全损坏了，损坏了，坏了，了。。。。</p>\n<h2 id=\"分析原因\"><a href=\"#分析原因\" class=\"headerlink\" title=\"分析原因\"></a>分析原因</h2><p>op给出的说法是网络波动，造成机房故障，机器重启。但从结果看，文件系统乱掉了，而且乱掉的文件主要分两类：</p>\n<ul>\n<li>1：当时正在写入和操作的文件。例如运行的脚本，正在写的文件，samba建立网络映射的文件，git实时文件。</li>\n<li>2：内存里的数据，例如memcache里的数据等等</li>\n</ul>\n<h2 id=\"处理：fsck修复。\"><a href=\"#处理：fsck修复。\" class=\"headerlink\" title=\"处理：fsck修复。\"></a>处理：fsck修复。</h2><p>###1：查看硬盘挂载：<br>df查看下磁盘的挂载位置。</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/F60D7BE5-D89D-4C74-9927-6EE2DD6157DF-300x51.png\" alt=\"F60D7BE5-D89D-4C74-9927-6EE2DD6157DF\"></a></p>\n<h3 id=\"2：操作挂起：不挂起可能会出现数据恢复中断。\"><a href=\"#2：操作挂起：不挂起可能会出现数据恢复中断。\" class=\"headerlink\" title=\"2：操作挂起：不挂起可能会出现数据恢复中断。\"></a>2：操作挂起：<code>不挂起可能会出现数据恢复中断</code>。</h3><p>报错：直接挂起会出现 dev is busy，如下图<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/59423A93-F29C-4A30-AB92-17408E9E6556-300x40.png\" alt=\"59423A93-F29C-4A30-AB92-17408E9E6556\"></a><br>用：umout -l /dev/sda3<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/3C64703C-CF4A-47EB-9FE3-91CD7542E8FA-300x46.png\" alt=\"3C64703C-CF4A-47EB-9FE3-91CD7542E8FA\"></a><br><figure class=\"highlight 1c\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#umount -l &lt;挂载点|设备&gt;</span></div><div class=\"line\"></div><div class=\"line\">此命令将会断开设备并关闭打开该设备的全部句柄。</div><div class=\"line\">通常，您可以使用 eject &lt;挂载点<span class=\"string\">|设备&gt;命令弹出碟片</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"3：fsck-扫盘\"><a href=\"#3：fsck-扫盘\" class=\"headerlink\" title=\"3：fsck 扫盘\"></a>3：fsck 扫盘</h3><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">fsck -f <span class=\"regexp\">/dev/</span>sda3</div></pre></td></tr></table></figure>\n<p>注意ext2 还会进行e2fsck 再扫一遍，此为正常操作<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/C9347418-9644-4841-9A2C-3FFB1157E5D8-300x83.png\" alt=\"C9347418-9644-4841-9A2C-3FFB1157E5D8\"></a></p>\n<h3 id=\"4：扫盘结束后，挂载驱动盘\"><a href=\"#4：扫盘结束后，挂载驱动盘\" class=\"headerlink\" title=\"4：扫盘结束后，挂载驱动盘\"></a>4：扫盘结束后，挂载驱动盘</h3><h3 id=\"5：寻找和恢复文件\"><a href=\"#5：寻找和恢复文件\" class=\"headerlink\" title=\"5：寻找和恢复文件\"></a>5：寻找和恢复文件</h3><p>把.git 内的文件全部整理，导出，一个一个寻找自己需要的文件，找到了久违的文件。<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/3B14EF17-2C86-411F-BF16-4FFC15637C4D-300x109.png\" alt=\"3B14EF17-2C86-411F-BF16-4FFC15637C4D\"></a></p>\n<h2 id=\"后续\"><a href=\"#后续\" class=\"headerlink\" title=\"后续\"></a>后续</h2><p>一句话：<code>代码一定要ci，数据一定要容灾</code></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/?p=474\">fsck修复linux文件损坏</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"echarts动态获取数据实例","date":"2015-12-06T09:21:35.000Z","_content":"\n> echarts动态获取数据库的实时数据的简单实例。实例演示： [ 跳转demo ](http://cuihuan.net:1015/demo_file/echarts_realtime_demo/demo.html)\n\n## 引入echarts 文件。\n引入echarts的文件方式有多种，比较推荐模块化的引入方式。\n小拽的简单demo是直接引入文件，提供一个下载地址 ：[ 点击下载 ](http://cuihuan.net:1015/component/echarts/build/echarts-all.js)\n## html 部分代码\n一块div 用于echart的展现。\n```\n<div id=\"echart_show\" style=\"height:500px\">这里是一个布局展现</div>\n```\n\n## js 部分代码\n```\n$(document).ready(function () {\n\n    // 绘制反馈量图形\n    var init_echarts = function () {\n        var refreshChart = function (show_data) {\n            my_demo_chart = echarts.init(document.getElementById('echart_show'));\n            my_demo_chart.showLoading({\n                text: '加载中...',\n                effect: 'whirling'\n            });\n\n\n            var echarts_all_option = {\n                title: {\n                    text: '动态数据',\n                    subtext: '纯属虚构'\n                },\n                tooltip: {\n                    trigger: 'axis'\n                },\n                legend: {\n                    data: ['最新成交价', '预购队列']\n                },\n                toolbox: {\n                    show: true,\n                    feature: {\n                        mark: {show: true},\n                        dataView: {show: true, readOnly: false},\n                        magicType: {show: true, type: ['line', 'bar']},\n                        restore: {show: true},\n                        saveAsImage: {show: true}\n                    }\n                },\n                dataZoom: {\n                    show: false,\n                    start: 0,\n                    end: 100\n                },\n                xAxis: [\n                    {\n                        type: 'category',\n                        boundaryGap: true,\n                        data: (function () {\n                            var now = new Date();\n                            var res = [];\n                            var len = 10;\n                            while (len--) {\n                                res.unshift(now.toLocaleTimeString().replace(/^\\D*/, ''));\n                                now = new Date(now - 2000);\n                            }\n                            return res;\n                        })()\n                    },\n                    {\n                        type: 'category',\n                        boundaryGap: true,\n                        data: (function () {\n                            var res = [];\n                            var len = 10;\n                            while (len--) {\n                                res.push(len + 1);\n                            }\n                            return res;\n                        })()\n                    }\n                ],\n                yAxis: [\n                    {\n                        type: 'value',\n                        scale: true,\n                        name: '价格',\n                        boundaryGap: [0.2, 0.2]\n                    },\n                    {\n                        type: 'value',\n                        scale: true,\n                        name: '预购量',\n                        boundaryGap: [0.2, 0.2]\n                    }\n                ],\n                series: [\n                    {\n                        name: '预购队列',\n                        type: 'bar',\n                        xAxisIndex: 1,\n                        yAxisIndex: 1,\n                        // 获取到数据库的数据\n                        data: show_data[0]\n                    },\n                    {\n                        name: '最新成交价',\n                        type: 'line',\n                        // 实时获取的数据\n                        data:show_data[1]\n                    }\n                ]\n            };\n\n            my_demo_chart.hideLoading();\n            my_demo_chart.setOption(echarts_all_option);\n\n        };\n\n        // 获取原始数据\n        $.ajax({\n            url: \"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/get_data.php\",\n            data: {type: \"2\"},\n            success: function (data) {\n                // 根据数据库取到结果拼接现在结果\n                refreshChart(eval(data));\n            }\n        });\n\n    };\n\n    // 开启实时获取数据更新\n    $(\"#getData\").on(\"click\",function() {\n        var timeTicket;\n        var lastData = 11;\n        var axisData;\n        clearInterval(timeTicket);\n        timeTicket = setInterval(function () {\n            // 获取实时更新数据\n            $.ajax({\n                url: \"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/get_data.php\",\n                data: {type: \"new\"},\n                success: function (data) {\n                    // 根据条件转换成相应的api 转化为echart 需要的数据\n                    // todo 更新数据采用随机更新的方式\n                    lastData += Math.random() * ((Math.round(Math.random() * 10) % 2) == 0 ? 1 : -1);\n                    lastData = lastData.toFixed(1) - 0;\n                    axisData = (new Date()).toLocaleTimeString().replace(/^\\D*/, '');\n\n                    // 动态数据接口 addData\n                    my_demo_chart.addData([\n                        [\n                            0,        // 系列索引\n                            Math.round(Math.random() * 1000), // 新增数据\n                            true,     // 新增数据是否从队列头部插入\n                            false     // 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头\n                        ],\n                        [\n                            1,        // 系列索引\n                            lastData, // 新增数据\n                            false,    // 新增数据是否从队列头部插入\n                            false,    // 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头\n                            axisData  // 坐标轴标签\n                        ]\n                    ]);\n                }\n            });\n\n        }, 2100);\n\n        // 关闭更新操作\n        $(\"#stopData\").on(\"click\", function () {\n            clearInterval(timeTicket);\n        });\n\n    });\n\n\n    // 默认加载\n    var default_load = (function () {\n        init_echarts();\n    })();\n});\n```\n## php 部分代码\n```\n/**\n * 连接数据库获取数据\n *\n * User: cuixiaohuan\n * Date: 15/12/4\n * Time: 下午6:47\n */\n\n// 获取请求的类型\n$type = $_GET['type'];\n\n// 连接服务器\n$link = mysql_connect('ip:port', 'user', 'password');\nif (!$link) {\n    die(\"Could not connect:\" . mysql_error());\n}\n\n// 获取test库数据\n$crowd_db = mysql_select_db('test', $link);\n$day_time = date(\"Y-m-d\");\n\n// 根据传输过来的数据获取数据\n$static_sql = \"select v from test where id = \" . $type . \" limit 10\";\n\n// 获取数据之后返回\n$res = mysql_query($static_sql, $link_2004);\n\nif ($res) {\n    // 将结果进行入库操作\n    $row = mysql_fetch_row($res);\n\n    if($row[0]){\n        echo $row[0];\n    }\n    mysql_free_result($res);\n}\n```\n\n## 简单说明\n小拽的demo中，根据echarts的api，绘制出了原有的图形展示；之后，对js设置了个定时任务，实时的去获取数据库中可能新入库的数据，接口通过php简单调用数据库实现。\n\n[ 小拽个人小站 ](http://cuihuan.net)","source":"_posts/echarts动态获取数据实例.md","raw":"---\ntitle: echarts动态获取数据实例 \ndate: 2015-12-06 17:21:35\ntags: \n- 前端\n- 动态获取数据\n- pho\n- javascript\n- echarts\n---\n\n> echarts动态获取数据库的实时数据的简单实例。实例演示： [ 跳转demo ](http://cuihuan.net:1015/demo_file/echarts_realtime_demo/demo.html)\n\n## 引入echarts 文件。\n引入echarts的文件方式有多种，比较推荐模块化的引入方式。\n小拽的简单demo是直接引入文件，提供一个下载地址 ：[ 点击下载 ](http://cuihuan.net:1015/component/echarts/build/echarts-all.js)\n## html 部分代码\n一块div 用于echart的展现。\n```\n<div id=\"echart_show\" style=\"height:500px\">这里是一个布局展现</div>\n```\n\n## js 部分代码\n```\n$(document).ready(function () {\n\n    // 绘制反馈量图形\n    var init_echarts = function () {\n        var refreshChart = function (show_data) {\n            my_demo_chart = echarts.init(document.getElementById('echart_show'));\n            my_demo_chart.showLoading({\n                text: '加载中...',\n                effect: 'whirling'\n            });\n\n\n            var echarts_all_option = {\n                title: {\n                    text: '动态数据',\n                    subtext: '纯属虚构'\n                },\n                tooltip: {\n                    trigger: 'axis'\n                },\n                legend: {\n                    data: ['最新成交价', '预购队列']\n                },\n                toolbox: {\n                    show: true,\n                    feature: {\n                        mark: {show: true},\n                        dataView: {show: true, readOnly: false},\n                        magicType: {show: true, type: ['line', 'bar']},\n                        restore: {show: true},\n                        saveAsImage: {show: true}\n                    }\n                },\n                dataZoom: {\n                    show: false,\n                    start: 0,\n                    end: 100\n                },\n                xAxis: [\n                    {\n                        type: 'category',\n                        boundaryGap: true,\n                        data: (function () {\n                            var now = new Date();\n                            var res = [];\n                            var len = 10;\n                            while (len--) {\n                                res.unshift(now.toLocaleTimeString().replace(/^\\D*/, ''));\n                                now = new Date(now - 2000);\n                            }\n                            return res;\n                        })()\n                    },\n                    {\n                        type: 'category',\n                        boundaryGap: true,\n                        data: (function () {\n                            var res = [];\n                            var len = 10;\n                            while (len--) {\n                                res.push(len + 1);\n                            }\n                            return res;\n                        })()\n                    }\n                ],\n                yAxis: [\n                    {\n                        type: 'value',\n                        scale: true,\n                        name: '价格',\n                        boundaryGap: [0.2, 0.2]\n                    },\n                    {\n                        type: 'value',\n                        scale: true,\n                        name: '预购量',\n                        boundaryGap: [0.2, 0.2]\n                    }\n                ],\n                series: [\n                    {\n                        name: '预购队列',\n                        type: 'bar',\n                        xAxisIndex: 1,\n                        yAxisIndex: 1,\n                        // 获取到数据库的数据\n                        data: show_data[0]\n                    },\n                    {\n                        name: '最新成交价',\n                        type: 'line',\n                        // 实时获取的数据\n                        data:show_data[1]\n                    }\n                ]\n            };\n\n            my_demo_chart.hideLoading();\n            my_demo_chart.setOption(echarts_all_option);\n\n        };\n\n        // 获取原始数据\n        $.ajax({\n            url: \"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/get_data.php\",\n            data: {type: \"2\"},\n            success: function (data) {\n                // 根据数据库取到结果拼接现在结果\n                refreshChart(eval(data));\n            }\n        });\n\n    };\n\n    // 开启实时获取数据更新\n    $(\"#getData\").on(\"click\",function() {\n        var timeTicket;\n        var lastData = 11;\n        var axisData;\n        clearInterval(timeTicket);\n        timeTicket = setInterval(function () {\n            // 获取实时更新数据\n            $.ajax({\n                url: \"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/get_data.php\",\n                data: {type: \"new\"},\n                success: function (data) {\n                    // 根据条件转换成相应的api 转化为echart 需要的数据\n                    // todo 更新数据采用随机更新的方式\n                    lastData += Math.random() * ((Math.round(Math.random() * 10) % 2) == 0 ? 1 : -1);\n                    lastData = lastData.toFixed(1) - 0;\n                    axisData = (new Date()).toLocaleTimeString().replace(/^\\D*/, '');\n\n                    // 动态数据接口 addData\n                    my_demo_chart.addData([\n                        [\n                            0,        // 系列索引\n                            Math.round(Math.random() * 1000), // 新增数据\n                            true,     // 新增数据是否从队列头部插入\n                            false     // 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头\n                        ],\n                        [\n                            1,        // 系列索引\n                            lastData, // 新增数据\n                            false,    // 新增数据是否从队列头部插入\n                            false,    // 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头\n                            axisData  // 坐标轴标签\n                        ]\n                    ]);\n                }\n            });\n\n        }, 2100);\n\n        // 关闭更新操作\n        $(\"#stopData\").on(\"click\", function () {\n            clearInterval(timeTicket);\n        });\n\n    });\n\n\n    // 默认加载\n    var default_load = (function () {\n        init_echarts();\n    })();\n});\n```\n## php 部分代码\n```\n/**\n * 连接数据库获取数据\n *\n * User: cuixiaohuan\n * Date: 15/12/4\n * Time: 下午6:47\n */\n\n// 获取请求的类型\n$type = $_GET['type'];\n\n// 连接服务器\n$link = mysql_connect('ip:port', 'user', 'password');\nif (!$link) {\n    die(\"Could not connect:\" . mysql_error());\n}\n\n// 获取test库数据\n$crowd_db = mysql_select_db('test', $link);\n$day_time = date(\"Y-m-d\");\n\n// 根据传输过来的数据获取数据\n$static_sql = \"select v from test where id = \" . $type . \" limit 10\";\n\n// 获取数据之后返回\n$res = mysql_query($static_sql, $link_2004);\n\nif ($res) {\n    // 将结果进行入库操作\n    $row = mysql_fetch_row($res);\n\n    if($row[0]){\n        echo $row[0];\n    }\n    mysql_free_result($res);\n}\n```\n\n## 简单说明\n小拽的demo中，根据echarts的api，绘制出了原有的图形展示；之后，对js设置了个定时任务，实时的去获取数据库中可能新入库的数据，接口通过php简单调用数据库实现。\n\n[ 小拽个人小站 ](http://cuihuan.net)","slug":"echarts动态获取数据实例","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njd000g661ftac7hv1q","content":"<blockquote>\n<p>echarts动态获取数据库的实时数据的简单实例。实例演示： <a href=\"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/demo.html\"> 跳转demo </a></p>\n</blockquote>\n<h2 id=\"引入echarts-文件。\"><a href=\"#引入echarts-文件。\" class=\"headerlink\" title=\"引入echarts 文件。\"></a>引入echarts 文件。</h2><p>引入echarts的文件方式有多种，比较推荐模块化的引入方式。<br>小拽的简单demo是直接引入文件，提供一个下载地址 ：<a href=\"http://cuihuan.net:1015/component/echarts/build/echarts-all.js\"> 点击下载 </a></p>\n<h2 id=\"html-部分代码\"><a href=\"#html-部分代码\" class=\"headerlink\" title=\"html 部分代码\"></a>html 部分代码</h2><p>一块div 用于echart的展现。<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;<span class=\"keyword\">div</span> <span class=\"built_in\">id</span>=<span class=\"string\">\"echart_show\"</span> style=<span class=\"string\">\"height:500px\"</span>&gt;这里是一个布局展现&lt;/<span class=\"keyword\">div</span>&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"js-部分代码\"><a href=\"#js-部分代码\" class=\"headerlink\" title=\"js 部分代码\"></a>js 部分代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 绘制反馈量图形</span></div><div class=\"line\">    <span class=\"keyword\">var</span> init_echarts = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> refreshChart = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">show_data</span>) </span>&#123;</div><div class=\"line\">            my_demo_chart = echarts.init(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'echart_show'</span>));</div><div class=\"line\">            my_demo_chart.showLoading(&#123;</div><div class=\"line\">                <span class=\"attr\">text</span>: <span class=\"string\">'加载中...'</span>,</div><div class=\"line\">                <span class=\"attr\">effect</span>: <span class=\"string\">'whirling'</span></div><div class=\"line\">            &#125;);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">var</span> echarts_all_option = &#123;</div><div class=\"line\">                <span class=\"attr\">title</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">text</span>: <span class=\"string\">'动态数据'</span>,</div><div class=\"line\">                    <span class=\"attr\">subtext</span>: <span class=\"string\">'纯属虚构'</span></div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">tooltip</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">trigger</span>: <span class=\"string\">'axis'</span></div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">legend</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">data</span>: [<span class=\"string\">'最新成交价'</span>, <span class=\"string\">'预购队列'</span>]</div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">toolbox</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">show</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                    <span class=\"attr\">feature</span>: &#123;</div><div class=\"line\">                        <span class=\"attr\">mark</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>&#125;,</div><div class=\"line\">                        <span class=\"attr\">dataView</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>, <span class=\"attr\">readOnly</span>: <span class=\"literal\">false</span>&#125;,</div><div class=\"line\">                        <span class=\"attr\">magicType</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>, <span class=\"attr\">type</span>: [<span class=\"string\">'line'</span>, <span class=\"string\">'bar'</span>]&#125;,</div><div class=\"line\">                        <span class=\"attr\">restore</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>&#125;,</div><div class=\"line\">                        <span class=\"attr\">saveAsImage</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>&#125;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">dataZoom</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">show</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">                    <span class=\"attr\">start</span>: <span class=\"number\">0</span>,</div><div class=\"line\">                    <span class=\"attr\">end</span>: <span class=\"number\">100</span></div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">xAxis</span>: [</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'category'</span>,</div><div class=\"line\">                        <span class=\"attr\">boundaryGap</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                        <span class=\"attr\">data</span>: (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">                            <span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">                            <span class=\"keyword\">var</span> res = [];</div><div class=\"line\">                            <span class=\"keyword\">var</span> len = <span class=\"number\">10</span>;</div><div class=\"line\">                            <span class=\"keyword\">while</span> (len--) &#123;</div><div class=\"line\">                                res.unshift(now.toLocaleTimeString().replace(<span class=\"regexp\">/^\\D*/</span>, <span class=\"string\">''</span>));</div><div class=\"line\">                                now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(now - <span class=\"number\">2000</span>);</div><div class=\"line\">                            &#125;</div><div class=\"line\">                            <span class=\"keyword\">return</span> res;</div><div class=\"line\">                        &#125;)()</div><div class=\"line\">                    &#125;,</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'category'</span>,</div><div class=\"line\">                        <span class=\"attr\">boundaryGap</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                        <span class=\"attr\">data</span>: (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">                            <span class=\"keyword\">var</span> res = [];</div><div class=\"line\">                            <span class=\"keyword\">var</span> len = <span class=\"number\">10</span>;</div><div class=\"line\">                            <span class=\"keyword\">while</span> (len--) &#123;</div><div class=\"line\">                                res.push(len + <span class=\"number\">1</span>);</div><div class=\"line\">                            &#125;</div><div class=\"line\">                            <span class=\"keyword\">return</span> res;</div><div class=\"line\">                        &#125;)()</div><div class=\"line\">                    &#125;</div><div class=\"line\">                ],</div><div class=\"line\">                <span class=\"attr\">yAxis</span>: [</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'value'</span>,</div><div class=\"line\">                        <span class=\"attr\">scale</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                        <span class=\"attr\">name</span>: <span class=\"string\">'价格'</span>,</div><div class=\"line\">                        <span class=\"attr\">boundaryGap</span>: [<span class=\"number\">0.2</span>, <span class=\"number\">0.2</span>]</div><div class=\"line\">                    &#125;,</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'value'</span>,</div><div class=\"line\">                        <span class=\"attr\">scale</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                        <span class=\"attr\">name</span>: <span class=\"string\">'预购量'</span>,</div><div class=\"line\">                        <span class=\"attr\">boundaryGap</span>: [<span class=\"number\">0.2</span>, <span class=\"number\">0.2</span>]</div><div class=\"line\">                    &#125;</div><div class=\"line\">                ],</div><div class=\"line\">                <span class=\"attr\">series</span>: [</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">name</span>: <span class=\"string\">'预购队列'</span>,</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'bar'</span>,</div><div class=\"line\">                        <span class=\"attr\">xAxisIndex</span>: <span class=\"number\">1</span>,</div><div class=\"line\">                        <span class=\"attr\">yAxisIndex</span>: <span class=\"number\">1</span>,</div><div class=\"line\">                        <span class=\"comment\">// 获取到数据库的数据</span></div><div class=\"line\">                        data: show_data[<span class=\"number\">0</span>]</div><div class=\"line\">                    &#125;,</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">name</span>: <span class=\"string\">'最新成交价'</span>,</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'line'</span>,</div><div class=\"line\">                        <span class=\"comment\">// 实时获取的数据</span></div><div class=\"line\">                        data:show_data[<span class=\"number\">1</span>]</div><div class=\"line\">                    &#125;</div><div class=\"line\">                ]</div><div class=\"line\">            &#125;;</div><div class=\"line\"></div><div class=\"line\">            my_demo_chart.hideLoading();</div><div class=\"line\">            my_demo_chart.setOption(echarts_all_option);</div><div class=\"line\"></div><div class=\"line\">        &#125;;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 获取原始数据</span></div><div class=\"line\">        $.ajax(&#123;</div><div class=\"line\">            <span class=\"attr\">url</span>: <span class=\"string\">\"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/get_data.php\"</span>,</div><div class=\"line\">            <span class=\"attr\">data</span>: &#123;<span class=\"attr\">type</span>: <span class=\"string\">\"2\"</span>&#125;,</div><div class=\"line\">            <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">                <span class=\"comment\">// 根据数据库取到结果拼接现在结果</span></div><div class=\"line\">                refreshChart(<span class=\"built_in\">eval</span>(data));</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 开启实时获取数据更新</span></div><div class=\"line\">    $(<span class=\"string\">\"#getData\"</span>).on(<span class=\"string\">\"click\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> timeTicket;</div><div class=\"line\">        <span class=\"keyword\">var</span> lastData = <span class=\"number\">11</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> axisData;</div><div class=\"line\">        clearInterval(timeTicket);</div><div class=\"line\">        timeTicket = setInterval(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"comment\">// 获取实时更新数据</span></div><div class=\"line\">            $.ajax(&#123;</div><div class=\"line\">                <span class=\"attr\">url</span>: <span class=\"string\">\"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/get_data.php\"</span>,</div><div class=\"line\">                <span class=\"attr\">data</span>: &#123;<span class=\"attr\">type</span>: <span class=\"string\">\"new\"</span>&#125;,</div><div class=\"line\">                <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">                    <span class=\"comment\">// 根据条件转换成相应的api 转化为echart 需要的数据</span></div><div class=\"line\">                    <span class=\"comment\">// todo 更新数据采用随机更新的方式</span></div><div class=\"line\">                    lastData += <span class=\"built_in\">Math</span>.random() * ((<span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">10</span>) % <span class=\"number\">2</span>) == <span class=\"number\">0</span> ? <span class=\"number\">1</span> : <span class=\"number\">-1</span>);</div><div class=\"line\">                    lastData = lastData.toFixed(<span class=\"number\">1</span>) - <span class=\"number\">0</span>;</div><div class=\"line\">                    axisData = (<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()).toLocaleTimeString().replace(<span class=\"regexp\">/^\\D*/</span>, <span class=\"string\">''</span>);</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"comment\">// 动态数据接口 addData</span></div><div class=\"line\">                    my_demo_chart.addData([</div><div class=\"line\">                        [</div><div class=\"line\">                            <span class=\"number\">0</span>,        <span class=\"comment\">// 系列索引</span></div><div class=\"line\">                            <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">1000</span>), <span class=\"comment\">// 新增数据</span></div><div class=\"line\">                            <span class=\"literal\">true</span>,     <span class=\"comment\">// 新增数据是否从队列头部插入</span></div><div class=\"line\">                            <span class=\"literal\">false</span>     <span class=\"comment\">// 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头</span></div><div class=\"line\">                        ],</div><div class=\"line\">                        [</div><div class=\"line\">                            <span class=\"number\">1</span>,        <span class=\"comment\">// 系列索引</span></div><div class=\"line\">                            lastData, <span class=\"comment\">// 新增数据</span></div><div class=\"line\">                            <span class=\"literal\">false</span>,    <span class=\"comment\">// 新增数据是否从队列头部插入</span></div><div class=\"line\">                            <span class=\"literal\">false</span>,    <span class=\"comment\">// 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头</span></div><div class=\"line\">                            axisData  <span class=\"comment\">// 坐标轴标签</span></div><div class=\"line\">                        ]</div><div class=\"line\">                    ]);</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;);</div><div class=\"line\"></div><div class=\"line\">        &#125;, <span class=\"number\">2100</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 关闭更新操作</span></div><div class=\"line\">        $(<span class=\"string\">\"#stopData\"</span>).on(<span class=\"string\">\"click\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            clearInterval(timeTicket);</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 默认加载</span></div><div class=\"line\">    <span class=\"keyword\">var</span> default_load = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        init_echarts();</div><div class=\"line\">    &#125;)();</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2 id=\"php-部分代码\"><a href=\"#php-部分代码\" class=\"headerlink\" title=\"php 部分代码\"></a>php 部分代码</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 连接数据库获取数据</div><div class=\"line\"> *</div><div class=\"line\"> * User: cuixiaohuan</div><div class=\"line\"> * Date: 15/12/4</div><div class=\"line\"> * Time: 下午6:47</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取请求的类型</span></div><div class=\"line\">$type = $_GET[<span class=\"string\">'type'</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 连接服务器</span></div><div class=\"line\">$link = mysql_connect(<span class=\"string\">'ip:port'</span>, <span class=\"string\">'user'</span>, <span class=\"string\">'password'</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$link) &#123;</div><div class=\"line\">    <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取test库数据</span></div><div class=\"line\">$crowd_db = mysql_select_db(<span class=\"string\">'test'</span>, $link);</div><div class=\"line\">$day_time = date(<span class=\"string\">\"Y-m-d\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 根据传输过来的数据获取数据</span></div><div class=\"line\">$static_sql = <span class=\"string\">\"select v from test where id = \"</span> . $type . <span class=\"string\">\" limit 10\"</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取数据之后返回</span></div><div class=\"line\">$res = mysql_query($static_sql, $link_2004);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> ($res) &#123;</div><div class=\"line\">    <span class=\"comment\">// 将结果进行入库操作</span></div><div class=\"line\">    $row = mysql_fetch_row($res);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span>($row[<span class=\"number\">0</span>])&#123;</div><div class=\"line\">        <span class=\"keyword\">echo</span> $row[<span class=\"number\">0</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\">    mysql_free_result($res);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"简单说明\"><a href=\"#简单说明\" class=\"headerlink\" title=\"简单说明\"></a>简单说明</h2><p>小拽的demo中，根据echarts的api，绘制出了原有的图形展示；之后，对js设置了个定时任务，实时的去获取数据库中可能新入库的数据，接口通过php简单调用数据库实现。</p>\n<p><a href=\"http://cuihuan.net\"> 小拽个人小站 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>echarts动态获取数据库的实时数据的简单实例。实例演示： <a href=\"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/demo.html\"> 跳转demo </a></p>\n</blockquote>\n<h2 id=\"引入echarts-文件。\"><a href=\"#引入echarts-文件。\" class=\"headerlink\" title=\"引入echarts 文件。\"></a>引入echarts 文件。</h2><p>引入echarts的文件方式有多种，比较推荐模块化的引入方式。<br>小拽的简单demo是直接引入文件，提供一个下载地址 ：<a href=\"http://cuihuan.net:1015/component/echarts/build/echarts-all.js\"> 点击下载 </a></p>\n<h2 id=\"html-部分代码\"><a href=\"#html-部分代码\" class=\"headerlink\" title=\"html 部分代码\"></a>html 部分代码</h2><p>一块div 用于echart的展现。<br><figure class=\"highlight applescript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;<span class=\"keyword\">div</span> <span class=\"built_in\">id</span>=<span class=\"string\">\"echart_show\"</span> style=<span class=\"string\">\"height:500px\"</span>&gt;这里是一个布局展现&lt;/<span class=\"keyword\">div</span>&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"js-部分代码\"><a href=\"#js-部分代码\" class=\"headerlink\" title=\"js 部分代码\"></a>js 部分代码</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div></pre></td><td class=\"code\"><pre><div class=\"line\">$(<span class=\"built_in\">document</span>).ready(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 绘制反馈量图形</span></div><div class=\"line\">    <span class=\"keyword\">var</span> init_echarts = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> refreshChart = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">show_data</span>) </span>&#123;</div><div class=\"line\">            my_demo_chart = echarts.init(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">'echart_show'</span>));</div><div class=\"line\">            my_demo_chart.showLoading(&#123;</div><div class=\"line\">                <span class=\"attr\">text</span>: <span class=\"string\">'加载中...'</span>,</div><div class=\"line\">                <span class=\"attr\">effect</span>: <span class=\"string\">'whirling'</span></div><div class=\"line\">            &#125;);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">            <span class=\"keyword\">var</span> echarts_all_option = &#123;</div><div class=\"line\">                <span class=\"attr\">title</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">text</span>: <span class=\"string\">'动态数据'</span>,</div><div class=\"line\">                    <span class=\"attr\">subtext</span>: <span class=\"string\">'纯属虚构'</span></div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">tooltip</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">trigger</span>: <span class=\"string\">'axis'</span></div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">legend</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">data</span>: [<span class=\"string\">'最新成交价'</span>, <span class=\"string\">'预购队列'</span>]</div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">toolbox</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">show</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                    <span class=\"attr\">feature</span>: &#123;</div><div class=\"line\">                        <span class=\"attr\">mark</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>&#125;,</div><div class=\"line\">                        <span class=\"attr\">dataView</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>, <span class=\"attr\">readOnly</span>: <span class=\"literal\">false</span>&#125;,</div><div class=\"line\">                        <span class=\"attr\">magicType</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>, <span class=\"attr\">type</span>: [<span class=\"string\">'line'</span>, <span class=\"string\">'bar'</span>]&#125;,</div><div class=\"line\">                        <span class=\"attr\">restore</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>&#125;,</div><div class=\"line\">                        <span class=\"attr\">saveAsImage</span>: &#123;<span class=\"attr\">show</span>: <span class=\"literal\">true</span>&#125;</div><div class=\"line\">                    &#125;</div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">dataZoom</span>: &#123;</div><div class=\"line\">                    <span class=\"attr\">show</span>: <span class=\"literal\">false</span>,</div><div class=\"line\">                    <span class=\"attr\">start</span>: <span class=\"number\">0</span>,</div><div class=\"line\">                    <span class=\"attr\">end</span>: <span class=\"number\">100</span></div><div class=\"line\">                &#125;,</div><div class=\"line\">                <span class=\"attr\">xAxis</span>: [</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'category'</span>,</div><div class=\"line\">                        <span class=\"attr\">boundaryGap</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                        <span class=\"attr\">data</span>: (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">                            <span class=\"keyword\">var</span> now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</div><div class=\"line\">                            <span class=\"keyword\">var</span> res = [];</div><div class=\"line\">                            <span class=\"keyword\">var</span> len = <span class=\"number\">10</span>;</div><div class=\"line\">                            <span class=\"keyword\">while</span> (len--) &#123;</div><div class=\"line\">                                res.unshift(now.toLocaleTimeString().replace(<span class=\"regexp\">/^\\D*/</span>, <span class=\"string\">''</span>));</div><div class=\"line\">                                now = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(now - <span class=\"number\">2000</span>);</div><div class=\"line\">                            &#125;</div><div class=\"line\">                            <span class=\"keyword\">return</span> res;</div><div class=\"line\">                        &#125;)()</div><div class=\"line\">                    &#125;,</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'category'</span>,</div><div class=\"line\">                        <span class=\"attr\">boundaryGap</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                        <span class=\"attr\">data</span>: (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">                            <span class=\"keyword\">var</span> res = [];</div><div class=\"line\">                            <span class=\"keyword\">var</span> len = <span class=\"number\">10</span>;</div><div class=\"line\">                            <span class=\"keyword\">while</span> (len--) &#123;</div><div class=\"line\">                                res.push(len + <span class=\"number\">1</span>);</div><div class=\"line\">                            &#125;</div><div class=\"line\">                            <span class=\"keyword\">return</span> res;</div><div class=\"line\">                        &#125;)()</div><div class=\"line\">                    &#125;</div><div class=\"line\">                ],</div><div class=\"line\">                <span class=\"attr\">yAxis</span>: [</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'value'</span>,</div><div class=\"line\">                        <span class=\"attr\">scale</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                        <span class=\"attr\">name</span>: <span class=\"string\">'价格'</span>,</div><div class=\"line\">                        <span class=\"attr\">boundaryGap</span>: [<span class=\"number\">0.2</span>, <span class=\"number\">0.2</span>]</div><div class=\"line\">                    &#125;,</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'value'</span>,</div><div class=\"line\">                        <span class=\"attr\">scale</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">                        <span class=\"attr\">name</span>: <span class=\"string\">'预购量'</span>,</div><div class=\"line\">                        <span class=\"attr\">boundaryGap</span>: [<span class=\"number\">0.2</span>, <span class=\"number\">0.2</span>]</div><div class=\"line\">                    &#125;</div><div class=\"line\">                ],</div><div class=\"line\">                <span class=\"attr\">series</span>: [</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">name</span>: <span class=\"string\">'预购队列'</span>,</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'bar'</span>,</div><div class=\"line\">                        <span class=\"attr\">xAxisIndex</span>: <span class=\"number\">1</span>,</div><div class=\"line\">                        <span class=\"attr\">yAxisIndex</span>: <span class=\"number\">1</span>,</div><div class=\"line\">                        <span class=\"comment\">// 获取到数据库的数据</span></div><div class=\"line\">                        data: show_data[<span class=\"number\">0</span>]</div><div class=\"line\">                    &#125;,</div><div class=\"line\">                    &#123;</div><div class=\"line\">                        <span class=\"attr\">name</span>: <span class=\"string\">'最新成交价'</span>,</div><div class=\"line\">                        <span class=\"attr\">type</span>: <span class=\"string\">'line'</span>,</div><div class=\"line\">                        <span class=\"comment\">// 实时获取的数据</span></div><div class=\"line\">                        data:show_data[<span class=\"number\">1</span>]</div><div class=\"line\">                    &#125;</div><div class=\"line\">                ]</div><div class=\"line\">            &#125;;</div><div class=\"line\"></div><div class=\"line\">            my_demo_chart.hideLoading();</div><div class=\"line\">            my_demo_chart.setOption(echarts_all_option);</div><div class=\"line\"></div><div class=\"line\">        &#125;;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 获取原始数据</span></div><div class=\"line\">        $.ajax(&#123;</div><div class=\"line\">            <span class=\"attr\">url</span>: <span class=\"string\">\"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/get_data.php\"</span>,</div><div class=\"line\">            <span class=\"attr\">data</span>: &#123;<span class=\"attr\">type</span>: <span class=\"string\">\"2\"</span>&#125;,</div><div class=\"line\">            <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">                <span class=\"comment\">// 根据数据库取到结果拼接现在结果</span></div><div class=\"line\">                refreshChart(<span class=\"built_in\">eval</span>(data));</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 开启实时获取数据更新</span></div><div class=\"line\">    $(<span class=\"string\">\"#getData\"</span>).on(<span class=\"string\">\"click\"</span>,<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">var</span> timeTicket;</div><div class=\"line\">        <span class=\"keyword\">var</span> lastData = <span class=\"number\">11</span>;</div><div class=\"line\">        <span class=\"keyword\">var</span> axisData;</div><div class=\"line\">        clearInterval(timeTicket);</div><div class=\"line\">        timeTicket = setInterval(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"comment\">// 获取实时更新数据</span></div><div class=\"line\">            $.ajax(&#123;</div><div class=\"line\">                <span class=\"attr\">url</span>: <span class=\"string\">\"http://cuihuan.net:1015/demo_file/echarts_realtime_demo/get_data.php\"</span>,</div><div class=\"line\">                <span class=\"attr\">data</span>: &#123;<span class=\"attr\">type</span>: <span class=\"string\">\"new\"</span>&#125;,</div><div class=\"line\">                <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">                    <span class=\"comment\">// 根据条件转换成相应的api 转化为echart 需要的数据</span></div><div class=\"line\">                    <span class=\"comment\">// todo 更新数据采用随机更新的方式</span></div><div class=\"line\">                    lastData += <span class=\"built_in\">Math</span>.random() * ((<span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">10</span>) % <span class=\"number\">2</span>) == <span class=\"number\">0</span> ? <span class=\"number\">1</span> : <span class=\"number\">-1</span>);</div><div class=\"line\">                    lastData = lastData.toFixed(<span class=\"number\">1</span>) - <span class=\"number\">0</span>;</div><div class=\"line\">                    axisData = (<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>()).toLocaleTimeString().replace(<span class=\"regexp\">/^\\D*/</span>, <span class=\"string\">''</span>);</div><div class=\"line\"></div><div class=\"line\">                    <span class=\"comment\">// 动态数据接口 addData</span></div><div class=\"line\">                    my_demo_chart.addData([</div><div class=\"line\">                        [</div><div class=\"line\">                            <span class=\"number\">0</span>,        <span class=\"comment\">// 系列索引</span></div><div class=\"line\">                            <span class=\"built_in\">Math</span>.round(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">1000</span>), <span class=\"comment\">// 新增数据</span></div><div class=\"line\">                            <span class=\"literal\">true</span>,     <span class=\"comment\">// 新增数据是否从队列头部插入</span></div><div class=\"line\">                            <span class=\"literal\">false</span>     <span class=\"comment\">// 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头</span></div><div class=\"line\">                        ],</div><div class=\"line\">                        [</div><div class=\"line\">                            <span class=\"number\">1</span>,        <span class=\"comment\">// 系列索引</span></div><div class=\"line\">                            lastData, <span class=\"comment\">// 新增数据</span></div><div class=\"line\">                            <span class=\"literal\">false</span>,    <span class=\"comment\">// 新增数据是否从队列头部插入</span></div><div class=\"line\">                            <span class=\"literal\">false</span>,    <span class=\"comment\">// 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头</span></div><div class=\"line\">                            axisData  <span class=\"comment\">// 坐标轴标签</span></div><div class=\"line\">                        ]</div><div class=\"line\">                    ]);</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;);</div><div class=\"line\"></div><div class=\"line\">        &#125;, <span class=\"number\">2100</span>);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 关闭更新操作</span></div><div class=\"line\">        $(<span class=\"string\">\"#stopData\"</span>).on(<span class=\"string\">\"click\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            clearInterval(timeTicket);</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">    &#125;);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 默认加载</span></div><div class=\"line\">    <span class=\"keyword\">var</span> default_load = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">        init_echarts();</div><div class=\"line\">    &#125;)();</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h2 id=\"php-部分代码\"><a href=\"#php-部分代码\" class=\"headerlink\" title=\"php 部分代码\"></a>php 部分代码</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 连接数据库获取数据</div><div class=\"line\"> *</div><div class=\"line\"> * User: cuixiaohuan</div><div class=\"line\"> * Date: 15/12/4</div><div class=\"line\"> * Time: 下午6:47</div><div class=\"line\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取请求的类型</span></div><div class=\"line\">$type = $_GET[<span class=\"string\">'type'</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 连接服务器</span></div><div class=\"line\">$link = mysql_connect(<span class=\"string\">'ip:port'</span>, <span class=\"string\">'user'</span>, <span class=\"string\">'password'</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$link) &#123;</div><div class=\"line\">    <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取test库数据</span></div><div class=\"line\">$crowd_db = mysql_select_db(<span class=\"string\">'test'</span>, $link);</div><div class=\"line\">$day_time = date(<span class=\"string\">\"Y-m-d\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 根据传输过来的数据获取数据</span></div><div class=\"line\">$static_sql = <span class=\"string\">\"select v from test where id = \"</span> . $type . <span class=\"string\">\" limit 10\"</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取数据之后返回</span></div><div class=\"line\">$res = mysql_query($static_sql, $link_2004);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">if</span> ($res) &#123;</div><div class=\"line\">    <span class=\"comment\">// 将结果进行入库操作</span></div><div class=\"line\">    $row = mysql_fetch_row($res);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">if</span>($row[<span class=\"number\">0</span>])&#123;</div><div class=\"line\">        <span class=\"keyword\">echo</span> $row[<span class=\"number\">0</span>];</div><div class=\"line\">    &#125;</div><div class=\"line\">    mysql_free_result($res);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"简单说明\"><a href=\"#简单说明\" class=\"headerlink\" title=\"简单说明\"></a>简单说明</h2><p>小拽的demo中，根据echarts的api，绘制出了原有的图形展示；之后，对js设置了个定时任务，实时的去获取数据库中可能新入库的数据，接口通过php简单调用数据库实现。</p>\n<p><a href=\"http://cuihuan.net\"> 小拽个人小站 </a></p>\n"},{"title":"jsonp + php 跨域实例","date":"2015-12-02T09:21:35.000Z","_content":"> 由于跨域的存在，使资源交互在不同域名间变的复杂和安全。对于跨域数据传输，当数据长度较小(**get的长度内**)，jsonp是一种较好的解决方案。\n\n> 分享一个自己在jsonp使用过程中的demo。\n关于跨域可以参考：[跨域总结与解决办法]( http://www.cnblogs.com/rainman/archive/2011/02/20/1959325.html)\n\n## jsonp的js端调用\n主要功能：通过jsonp向服务器，调用相应接口，获应数据；根据获取数据结果做出相应回调。\n\n```\n/**\n * jsonp demo\n * 通过回调函数，进行获取之后的事件加载\n *\n * @author:cuihuan\n * @private\n */\n_jsonpDemo:function(callback){\n    $.ajax({\n        url: \"http://your_site_url\",\n        type: 'GET',\n        dataType: 'JSONP',\n        success: function (data) {\n            if (data && data.status) {\n                if (data.status == \"0\") {\n                    // failure solve\n                    ...\n                } else if (data.status == 500) {\n                    // server error log\n                    _sendInternalLog(data.info);\n                } else if (data.status == 1) {\n                    //success solve \n                    ...\n                }\n                \n                // callback func\n               (callback && typeof(callback) === \"function\" ) && callback(); \n            }\n\n        },\n        error: function () {\n            _sendFailLog();\n        }\n    })\n\n}\n\n```\n\n## jsonp 服务器端 (php)\n```\n\n/**\n * 接口返回相应数据\n *\n * status: 0 标示失败，1标示成功,500发生错误\n * return: jsonp \n */\npublic function actionGetJsonPInfo()\n{\n    try {\n        $data = getNeedData()\n        if ($data['status'] == \"success\") {\n            $res = array(\"status\" => \"1\", 'info' => $data['info']);\n        }else{\n            $res = array(\"status\" => \"0\", 'info' => '0');\n        }\n    }catch (Exception $e){\n        $res = array(\"status\" => \"500\", 'info'=> $e);\n    }\n\n    // jsonp 通过get请求的返回数据形式\n    if (isset ($_GET['callback'])) {\n        header(\"Content-Type: application/json\");\n        echo $_GET['callback'].\"(\".json_encode($res).\")\";\n    }\n}\n\n```\n\n## 总结\n- 目前来说，数据量小的跨域传输，jsonp是一种很好的解决方案。\n- jsonp在data中可以自动识别，res.status，res.info等状态位，比较方便。\n- php端的接受代码最好不要采用 Access-Control-Allow-Origin:* 风险太大。\n\n[ 本人小站原文 ](http://cuihuan.net/?p=278)\n\n","source":"_posts/jsonp + php 跨域实例.md","raw":"---\ntitle: jsonp + php 跨域实例 \ndate: 2015-12-02 17:21:35\ntags: \n- cors\n- 跨域\n- jsonp\n- javascript\n---\n> 由于跨域的存在，使资源交互在不同域名间变的复杂和安全。对于跨域数据传输，当数据长度较小(**get的长度内**)，jsonp是一种较好的解决方案。\n\n> 分享一个自己在jsonp使用过程中的demo。\n关于跨域可以参考：[跨域总结与解决办法]( http://www.cnblogs.com/rainman/archive/2011/02/20/1959325.html)\n\n## jsonp的js端调用\n主要功能：通过jsonp向服务器，调用相应接口，获应数据；根据获取数据结果做出相应回调。\n\n```\n/**\n * jsonp demo\n * 通过回调函数，进行获取之后的事件加载\n *\n * @author:cuihuan\n * @private\n */\n_jsonpDemo:function(callback){\n    $.ajax({\n        url: \"http://your_site_url\",\n        type: 'GET',\n        dataType: 'JSONP',\n        success: function (data) {\n            if (data && data.status) {\n                if (data.status == \"0\") {\n                    // failure solve\n                    ...\n                } else if (data.status == 500) {\n                    // server error log\n                    _sendInternalLog(data.info);\n                } else if (data.status == 1) {\n                    //success solve \n                    ...\n                }\n                \n                // callback func\n               (callback && typeof(callback) === \"function\" ) && callback(); \n            }\n\n        },\n        error: function () {\n            _sendFailLog();\n        }\n    })\n\n}\n\n```\n\n## jsonp 服务器端 (php)\n```\n\n/**\n * 接口返回相应数据\n *\n * status: 0 标示失败，1标示成功,500发生错误\n * return: jsonp \n */\npublic function actionGetJsonPInfo()\n{\n    try {\n        $data = getNeedData()\n        if ($data['status'] == \"success\") {\n            $res = array(\"status\" => \"1\", 'info' => $data['info']);\n        }else{\n            $res = array(\"status\" => \"0\", 'info' => '0');\n        }\n    }catch (Exception $e){\n        $res = array(\"status\" => \"500\", 'info'=> $e);\n    }\n\n    // jsonp 通过get请求的返回数据形式\n    if (isset ($_GET['callback'])) {\n        header(\"Content-Type: application/json\");\n        echo $_GET['callback'].\"(\".json_encode($res).\")\";\n    }\n}\n\n```\n\n## 总结\n- 目前来说，数据量小的跨域传输，jsonp是一种很好的解决方案。\n- jsonp在data中可以自动识别，res.status，res.info等状态位，比较方便。\n- php端的接受代码最好不要采用 Access-Control-Allow-Origin:* 风险太大。\n\n[ 本人小站原文 ](http://cuihuan.net/?p=278)\n\n","slug":"jsonp + php 跨域实例","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njg000i661f0ollkcde","content":"<blockquote>\n<p>由于跨域的存在，使资源交互在不同域名间变的复杂和安全。对于跨域数据传输，当数据长度较小(<strong>get的长度内</strong>)，jsonp是一种较好的解决方案。</p>\n<p>分享一个自己在jsonp使用过程中的demo。<br>关于跨域可以参考：<a href=\"http://www.cnblogs.com/rainman/archive/2011/02/20/1959325.html\" target=\"_blank\" rel=\"external\">跨域总结与解决办法</a></p>\n</blockquote>\n<h2 id=\"jsonp的js端调用\"><a href=\"#jsonp的js端调用\" class=\"headerlink\" title=\"jsonp的js端调用\"></a>jsonp的js端调用</h2><p>主要功能：通过jsonp向服务器，调用相应接口，获应数据；根据获取数据结果做出相应回调。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * jsonp demo</div><div class=\"line\"> * 通过回调函数，进行获取之后的事件加载</div><div class=\"line\"> *</div><div class=\"line\"> * @author:cuihuan</div><div class=\"line\"> * @private</div><div class=\"line\"> */</div><div class=\"line\">_jsonpDemo:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">callback</span>)</span>&#123;</div><div class=\"line\">    $.ajax(&#123;</div><div class=\"line\">        <span class=\"attr\">url</span>: <span class=\"string\">\"http://your_site_url\"</span>,</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">'GET'</span>,</div><div class=\"line\">        <span class=\"attr\">dataType</span>: <span class=\"string\">'JSONP'</span>,</div><div class=\"line\">        <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (data &amp;&amp; data.status) &#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (data.status == <span class=\"string\">\"0\"</span>) &#123;</div><div class=\"line\">                    <span class=\"comment\">// failure solve</span></div><div class=\"line\">                    ...</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data.status == <span class=\"number\">500</span>) &#123;</div><div class=\"line\">                    <span class=\"comment\">// server error log</span></div><div class=\"line\">                    _sendInternalLog(data.info);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data.status == <span class=\"number\">1</span>) &#123;</div><div class=\"line\">                    <span class=\"comment\">//success solve </span></div><div class=\"line\">                    ...</div><div class=\"line\">                &#125;</div><div class=\"line\">                </div><div class=\"line\">                <span class=\"comment\">// callback func</span></div><div class=\"line\">               (callback &amp;&amp; <span class=\"keyword\">typeof</span>(callback) === <span class=\"string\">\"function\"</span> ) &amp;&amp; callback(); </div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">        &#125;,</div><div class=\"line\">        <span class=\"attr\">error</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            _sendFailLog();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"jsonp-服务器端-php\"><a href=\"#jsonp-服务器端-php\" class=\"headerlink\" title=\"jsonp 服务器端 (php)\"></a>jsonp 服务器端 (php)</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 接口返回相应数据</div><div class=\"line\"> *</div><div class=\"line\"> * status: 0 标示失败，1标示成功,500发生错误</div><div class=\"line\"> * return: jsonp </div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">actionGetJsonPInfo</span><span class=\"params\">()</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">        $data = getNeedData()</div><div class=\"line\">        <span class=\"keyword\">if</span> ($data[<span class=\"string\">'status'</span>] == <span class=\"string\">\"success\"</span>) &#123;</div><div class=\"line\">            $res = <span class=\"keyword\">array</span>(<span class=\"string\">\"status\"</span> =&gt; <span class=\"string\">\"1\"</span>, <span class=\"string\">'info'</span> =&gt; $data[<span class=\"string\">'info'</span>]);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            $res = <span class=\"keyword\">array</span>(<span class=\"string\">\"status\"</span> =&gt; <span class=\"string\">\"0\"</span>, <span class=\"string\">'info'</span> =&gt; <span class=\"string\">'0'</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span> (<span class=\"keyword\">Exception</span> $e)&#123;</div><div class=\"line\">        $res = <span class=\"keyword\">array</span>(<span class=\"string\">\"status\"</span> =&gt; <span class=\"string\">\"500\"</span>, <span class=\"string\">'info'</span>=&gt; $e);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// jsonp 通过get请求的返回数据形式</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span> ($_GET[<span class=\"string\">'callback'</span>])) &#123;</div><div class=\"line\">        header(<span class=\"string\">\"Content-Type: application/json\"</span>);</div><div class=\"line\">        <span class=\"keyword\">echo</span> $_GET[<span class=\"string\">'callback'</span>].<span class=\"string\">\"(\"</span>.json_encode($res).<span class=\"string\">\")\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ul>\n<li>目前来说，数据量小的跨域传输，jsonp是一种很好的解决方案。</li>\n<li>jsonp在data中可以自动识别，res.status，res.info等状态位，比较方便。</li>\n<li>php端的接受代码最好不要采用 Access-Control-Allow-Origin:* 风险太大。</li>\n</ul>\n<p><a href=\"http://cuihuan.net/?p=278\"> 本人小站原文 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>由于跨域的存在，使资源交互在不同域名间变的复杂和安全。对于跨域数据传输，当数据长度较小(<strong>get的长度内</strong>)，jsonp是一种较好的解决方案。</p>\n<p>分享一个自己在jsonp使用过程中的demo。<br>关于跨域可以参考：<a href=\"http://www.cnblogs.com/rainman/archive/2011/02/20/1959325.html\">跨域总结与解决办法</a></p>\n</blockquote>\n<h2 id=\"jsonp的js端调用\"><a href=\"#jsonp的js端调用\" class=\"headerlink\" title=\"jsonp的js端调用\"></a>jsonp的js端调用</h2><p>主要功能：通过jsonp向服务器，调用相应接口，获应数据；根据获取数据结果做出相应回调。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * jsonp demo</div><div class=\"line\"> * 通过回调函数，进行获取之后的事件加载</div><div class=\"line\"> *</div><div class=\"line\"> * @author:cuihuan</div><div class=\"line\"> * @private</div><div class=\"line\"> */</span></div><div class=\"line\">_jsonpDemo:<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">callback</span>)</span>&#123;</div><div class=\"line\">    $.ajax(&#123;</div><div class=\"line\">        <span class=\"attr\">url</span>: <span class=\"string\">\"http://your_site_url\"</span>,</div><div class=\"line\">        <span class=\"attr\">type</span>: <span class=\"string\">'GET'</span>,</div><div class=\"line\">        <span class=\"attr\">dataType</span>: <span class=\"string\">'JSONP'</span>,</div><div class=\"line\">        <span class=\"attr\">success</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span> (data &amp;&amp; data.status) &#123;</div><div class=\"line\">                <span class=\"keyword\">if</span> (data.status == <span class=\"string\">\"0\"</span>) &#123;</div><div class=\"line\">                    <span class=\"comment\">// failure solve</span></div><div class=\"line\">                    ...</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data.status == <span class=\"number\">500</span>) &#123;</div><div class=\"line\">                    <span class=\"comment\">// server error log</span></div><div class=\"line\">                    _sendInternalLog(data.info);</div><div class=\"line\">                &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (data.status == <span class=\"number\">1</span>) &#123;</div><div class=\"line\">                    <span class=\"comment\">//success solve </span></div><div class=\"line\">                    ...</div><div class=\"line\">                &#125;</div><div class=\"line\">                </div><div class=\"line\">                <span class=\"comment\">// callback func</span></div><div class=\"line\">               (callback &amp;&amp; <span class=\"keyword\">typeof</span>(callback) === <span class=\"string\">\"function\"</span> ) &amp;&amp; callback(); </div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">        &#125;,</div><div class=\"line\">        <span class=\"attr\">error</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            _sendFailLog();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;)</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"jsonp-服务器端-php\"><a href=\"#jsonp-服务器端-php\" class=\"headerlink\" title=\"jsonp 服务器端 (php)\"></a>jsonp 服务器端 (php)</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 接口返回相应数据</div><div class=\"line\"> *</div><div class=\"line\"> * status: 0 标示失败，1标示成功,500发生错误</div><div class=\"line\"> * return: jsonp </div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">actionGetJsonPInfo</span><span class=\"params\">()</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">        $data = getNeedData()</div><div class=\"line\">        <span class=\"keyword\">if</span> ($data[<span class=\"string\">'status'</span>] == <span class=\"string\">\"success\"</span>) &#123;</div><div class=\"line\">            $res = <span class=\"keyword\">array</span>(<span class=\"string\">\"status\"</span> =&gt; <span class=\"string\">\"1\"</span>, <span class=\"string\">'info'</span> =&gt; $data[<span class=\"string\">'info'</span>]);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            $res = <span class=\"keyword\">array</span>(<span class=\"string\">\"status\"</span> =&gt; <span class=\"string\">\"0\"</span>, <span class=\"string\">'info'</span> =&gt; <span class=\"string\">'0'</span>);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;<span class=\"keyword\">catch</span> (<span class=\"keyword\">Exception</span> $e)&#123;</div><div class=\"line\">        $res = <span class=\"keyword\">array</span>(<span class=\"string\">\"status\"</span> =&gt; <span class=\"string\">\"500\"</span>, <span class=\"string\">'info'</span>=&gt; $e);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// jsonp 通过get请求的返回数据形式</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span> ($_GET[<span class=\"string\">'callback'</span>])) &#123;</div><div class=\"line\">        header(<span class=\"string\">\"Content-Type: application/json\"</span>);</div><div class=\"line\">        <span class=\"keyword\">echo</span> $_GET[<span class=\"string\">'callback'</span>].<span class=\"string\">\"(\"</span>.json_encode($res).<span class=\"string\">\")\"</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ul>\n<li>目前来说，数据量小的跨域传输，jsonp是一种很好的解决方案。</li>\n<li>jsonp在data中可以自动识别，res.status，res.info等状态位，比较方便。</li>\n<li>php端的接受代码最好不要采用 Access-Control-Allow-Origin:* 风险太大。</li>\n</ul>\n<p><a href=\"http://cuihuan.net/?p=278\"> 本人小站原文 </a></p>\n"},{"title":"linux 查找清理大文件","date":"2015-12-08T09:21:35.000Z","_content":"> linux 经常硬盘空间不足，往往是由于一些大文件造成；之前寻找大文件总是很头疼，速度特别慢。\n经学弟介绍使用：`du -sh * |grep G` 查找和清理速度不错，分享一下清理过程。\n\n## 查看系统存储状态\n```\n[cuihuan:~ cuixiaohuan]$ df -h\nFilesystem Size Used Avail Use% Mounted on\n/dev/sda2 8.2G 6.7G 1.6G 82% /\n/dev/sda3 1.4T 1.3T 50G 97% /home\n```\n1.5T的硬盘占用了97%，确实不够用了，必须着手清理一下\n\n## 查找大文件\n\n主要使用查找命令：`du -sh * |grep G`\n从根文件开始查找\n```\n[cuihuan:~]$ du -sh * | grep G\n。。。\n73G mongodb\n103G mxm\n2.1G online\n613G thirdparty [binggo!!!]\n。。。\n```\nbingo 613g，看来这个主要矛盾了，进一步分析该文件\n\n```\n[cuihuan:~ mysql5]$ du -sh *\n116M bin\n904K include\n13M lib\n17M libexec\n458G log [-__]\n8.0K my.cnf\n76M mysql-test\n13M share\n2.9M sql-bench\n4.0K test\n4.0K tmp\n101G var [-_-]\n[cuihuan:~ mysql5]$ cd log\n[cuihuan:~ log]$ ls -lh\ntotal 458G\n-rw-rw---- 1 work work 870K Dec 2 17:42 mysql.err\n-rw-rw---- 1 work work 3.9K Mar 24 2015 mysql.err-old\n-rw-rw---- 1 work work 446G Dec 3 15:19 mysql.log 【-__】\n-rw-rw---- 1 work work 11G Dec 3 15:10 slow.log\n```\n经过分析看到mysql.log的日志占了446G,着手清理下。【mysql log 好的保存方式是：天级导出，清理n天之前的log，此处不再赘述】\n\n## 清理之后效果\n清理 mysql.log 和var  之后\n清理了大约`500g`的空间\n```\n[cuihuan:~ var]$ df -h   \nFilesystem Size Used Avail Use% Mounted on\n/dev/sda2 8.2G 6.7G 1.6G 82% /\n/dev/sda3 1.4T 757G 584G 57% /home\n```\n【转载请注明：[linux 查找清理大文件](http://cuihuan.net/article/linux-%E6%9F%A5%E6%89%BE%E6%B8%85%E7%90%86%E5%A4%A7%E6%96%87%E4%BB%B6.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","source":"_posts/linux 查找清理大文件.md","raw":"---\ntitle: linux 查找清理大文件 \ndate: 2015-12-08 17:21:35\ntags: \n- linux\n---\n> linux 经常硬盘空间不足，往往是由于一些大文件造成；之前寻找大文件总是很头疼，速度特别慢。\n经学弟介绍使用：`du -sh * |grep G` 查找和清理速度不错，分享一下清理过程。\n\n## 查看系统存储状态\n```\n[cuihuan:~ cuixiaohuan]$ df -h\nFilesystem Size Used Avail Use% Mounted on\n/dev/sda2 8.2G 6.7G 1.6G 82% /\n/dev/sda3 1.4T 1.3T 50G 97% /home\n```\n1.5T的硬盘占用了97%，确实不够用了，必须着手清理一下\n\n## 查找大文件\n\n主要使用查找命令：`du -sh * |grep G`\n从根文件开始查找\n```\n[cuihuan:~]$ du -sh * | grep G\n。。。\n73G mongodb\n103G mxm\n2.1G online\n613G thirdparty [binggo!!!]\n。。。\n```\nbingo 613g，看来这个主要矛盾了，进一步分析该文件\n\n```\n[cuihuan:~ mysql5]$ du -sh *\n116M bin\n904K include\n13M lib\n17M libexec\n458G log [-__]\n8.0K my.cnf\n76M mysql-test\n13M share\n2.9M sql-bench\n4.0K test\n4.0K tmp\n101G var [-_-]\n[cuihuan:~ mysql5]$ cd log\n[cuihuan:~ log]$ ls -lh\ntotal 458G\n-rw-rw---- 1 work work 870K Dec 2 17:42 mysql.err\n-rw-rw---- 1 work work 3.9K Mar 24 2015 mysql.err-old\n-rw-rw---- 1 work work 446G Dec 3 15:19 mysql.log 【-__】\n-rw-rw---- 1 work work 11G Dec 3 15:10 slow.log\n```\n经过分析看到mysql.log的日志占了446G,着手清理下。【mysql log 好的保存方式是：天级导出，清理n天之前的log，此处不再赘述】\n\n## 清理之后效果\n清理 mysql.log 和var  之后\n清理了大约`500g`的空间\n```\n[cuihuan:~ var]$ df -h   \nFilesystem Size Used Avail Use% Mounted on\n/dev/sda2 8.2G 6.7G 1.6G 82% /\n/dev/sda3 1.4T 757G 584G 57% /home\n```\n【转载请注明：[linux 查找清理大文件](http://cuihuan.net/article/linux-%E6%9F%A5%E6%89%BE%E6%B8%85%E7%90%86%E5%A4%A7%E6%96%87%E4%BB%B6.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","slug":"linux 查找清理大文件","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nji000k661fd9euh8ho","content":"<blockquote>\n<p>linux 经常硬盘空间不足，往往是由于一些大文件造成；之前寻找大文件总是很头疼，速度特别慢。<br>经学弟介绍使用：<code>du -sh * |grep G</code> 查找和清理速度不错，分享一下清理过程。</p>\n</blockquote>\n<h2 id=\"查看系统存储状态\"><a href=\"#查看系统存储状态\" class=\"headerlink\" title=\"查看系统存储状态\"></a>查看系统存储状态</h2><figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan:~ cuixiaohuan]$ df -h</div><div class=\"line\"><span class=\"symbol\">Filesystem</span> <span class=\"symbol\">Size</span> <span class=\"symbol\">Used</span> <span class=\"symbol\">Avail</span> <span class=\"symbol\">Use</span><span class=\"comment\">% Mounted on</span></div><div class=\"line\">/dev/sda2 <span class=\"number\">8.2</span><span class=\"symbol\">G</span> <span class=\"number\">6.7</span><span class=\"symbol\">G</span> <span class=\"number\">1.6</span><span class=\"symbol\">G</span> <span class=\"number\">82</span><span class=\"comment\">% /</span></div><div class=\"line\">/dev/sda3 <span class=\"number\">1.4</span><span class=\"symbol\">T</span> <span class=\"number\">1.3</span><span class=\"symbol\">T</span> <span class=\"number\">50</span><span class=\"symbol\">G</span> <span class=\"number\">97</span><span class=\"comment\">% /home</span></div></pre></td></tr></table></figure>\n<p>1.5T的硬盘占用了97%，确实不够用了，必须着手清理一下</p>\n<h2 id=\"查找大文件\"><a href=\"#查找大文件\" class=\"headerlink\" title=\"查找大文件\"></a>查找大文件</h2><p>主要使用查找命令：<code>du -sh * |grep G</code><br>从根文件开始查找<br><figure class=\"highlight erlang-repl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan:~]$ du -sh * | grep G</div><div class=\"line\">。。。</div><div class=\"line\"><span class=\"number\">73</span>G mongodb</div><div class=\"line\"><span class=\"number\">103</span>G mxm</div><div class=\"line\"><span class=\"number\">2.1</span>G online</div><div class=\"line\"><span class=\"number\">613</span>G thirdparty [binggo!!!]</div><div class=\"line\">。。。</div></pre></td></tr></table></figure></p>\n<p>bingo 613g，看来这个主要矛盾了，进一步分析该文件</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan:~ mysql5]$ du -<span class=\"keyword\">sh</span> *</div><div class=\"line\">116M bin</div><div class=\"line\">904K <span class=\"keyword\">include</span></div><div class=\"line\">13M lib</div><div class=\"line\">17M libexec</div><div class=\"line\">458G <span class=\"keyword\">log</span> [-__]</div><div class=\"line\">8.0K my.cnf</div><div class=\"line\">76M mysql-<span class=\"keyword\">test</span></div><div class=\"line\">13M share</div><div class=\"line\">2.9M sql-bench</div><div class=\"line\">4.0K <span class=\"keyword\">test</span></div><div class=\"line\">4.0K tmp</div><div class=\"line\">101G <span class=\"keyword\">var</span> [-_-]</div><div class=\"line\">[cuihuan:~ mysql5]$ <span class=\"keyword\">cd</span> <span class=\"built_in\">log</span></div><div class=\"line\">[cuihuan:~ <span class=\"keyword\">log</span>]$ <span class=\"keyword\">ls</span> -lh</div><div class=\"line\"><span class=\"keyword\">total</span> 458G</div><div class=\"line\">-rw-rw---- 1 work work 870K <span class=\"keyword\">Dec</span> 2 17:42 mysql.<span class=\"keyword\">err</span></div><div class=\"line\">-rw-rw---- 1 work work 3.9K Mar 24 2015 mysql.<span class=\"keyword\">err</span>-old</div><div class=\"line\">-rw-rw---- 1 work work 446G <span class=\"keyword\">Dec</span> 3 15:19 mysql.<span class=\"keyword\">log</span> 【-__】</div><div class=\"line\">-rw-rw---- 1 work work 11G <span class=\"keyword\">Dec</span> 3 15:10 slow.<span class=\"built_in\">log</span></div></pre></td></tr></table></figure>\n<p>经过分析看到mysql.log的日志占了446G,着手清理下。【mysql log 好的保存方式是：天级导出，清理n天之前的log，此处不再赘述】</p>\n<h2 id=\"清理之后效果\"><a href=\"#清理之后效果\" class=\"headerlink\" title=\"清理之后效果\"></a>清理之后效果</h2><p>清理 mysql.log 和var  之后<br>清理了大约<code>500g</code>的空间<br><figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan:~ var]$ df -h   </div><div class=\"line\"><span class=\"symbol\">Filesystem</span> <span class=\"symbol\">Size</span> <span class=\"symbol\">Used</span> <span class=\"symbol\">Avail</span> <span class=\"symbol\">Use</span><span class=\"comment\">% Mounted on</span></div><div class=\"line\">/dev/sda2 <span class=\"number\">8.2</span><span class=\"symbol\">G</span> <span class=\"number\">6.7</span><span class=\"symbol\">G</span> <span class=\"number\">1.6</span><span class=\"symbol\">G</span> <span class=\"number\">82</span><span class=\"comment\">% /</span></div><div class=\"line\">/dev/sda3 <span class=\"number\">1.4</span><span class=\"symbol\">T</span> <span class=\"number\">757</span><span class=\"symbol\">G</span> <span class=\"number\">584</span><span class=\"symbol\">G</span> <span class=\"number\">57</span><span class=\"comment\">% /home</span></div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/linux-%E6%9F%A5%E6%89%BE%E6%B8%85%E7%90%86%E5%A4%A7%E6%96%87%E4%BB%B6.html\">linux 查找清理大文件</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>linux 经常硬盘空间不足，往往是由于一些大文件造成；之前寻找大文件总是很头疼，速度特别慢。<br>经学弟介绍使用：<code>du -sh * |grep G</code> 查找和清理速度不错，分享一下清理过程。</p>\n</blockquote>\n<h2 id=\"查看系统存储状态\"><a href=\"#查看系统存储状态\" class=\"headerlink\" title=\"查看系统存储状态\"></a>查看系统存储状态</h2><figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan:~ cuixiaohuan]$ df -h</div><div class=\"line\"><span class=\"symbol\">Filesystem</span> <span class=\"symbol\">Size</span> <span class=\"symbol\">Used</span> <span class=\"symbol\">Avail</span> <span class=\"symbol\">Use</span><span class=\"comment\">% Mounted on</span></div><div class=\"line\">/dev/sda2 <span class=\"number\">8.2</span><span class=\"symbol\">G</span> <span class=\"number\">6.7</span><span class=\"symbol\">G</span> <span class=\"number\">1.6</span><span class=\"symbol\">G</span> <span class=\"number\">82</span><span class=\"comment\">% /</span></div><div class=\"line\">/dev/sda3 <span class=\"number\">1.4</span><span class=\"symbol\">T</span> <span class=\"number\">1.3</span><span class=\"symbol\">T</span> <span class=\"number\">50</span><span class=\"symbol\">G</span> <span class=\"number\">97</span><span class=\"comment\">% /home</span></div></pre></td></tr></table></figure>\n<p>1.5T的硬盘占用了97%，确实不够用了，必须着手清理一下</p>\n<h2 id=\"查找大文件\"><a href=\"#查找大文件\" class=\"headerlink\" title=\"查找大文件\"></a>查找大文件</h2><p>主要使用查找命令：<code>du -sh * |grep G</code><br>从根文件开始查找<br><figure class=\"highlight erlang-repl\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan:~]$ du -sh * | grep G</div><div class=\"line\">。。。</div><div class=\"line\"><span class=\"number\">73</span>G mongodb</div><div class=\"line\"><span class=\"number\">103</span>G mxm</div><div class=\"line\"><span class=\"number\">2.1</span>G online</div><div class=\"line\"><span class=\"number\">613</span>G thirdparty [binggo!!!]</div><div class=\"line\">。。。</div></pre></td></tr></table></figure></p>\n<p>bingo 613g，看来这个主要矛盾了，进一步分析该文件</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan:~ mysql5]$ du -<span class=\"keyword\">sh</span> *</div><div class=\"line\">116M bin</div><div class=\"line\">904K <span class=\"keyword\">include</span></div><div class=\"line\">13M lib</div><div class=\"line\">17M libexec</div><div class=\"line\">458G <span class=\"keyword\">log</span> [-__]</div><div class=\"line\">8.0K my.cnf</div><div class=\"line\">76M mysql-<span class=\"keyword\">test</span></div><div class=\"line\">13M share</div><div class=\"line\">2.9M sql-bench</div><div class=\"line\">4.0K <span class=\"keyword\">test</span></div><div class=\"line\">4.0K tmp</div><div class=\"line\">101G <span class=\"keyword\">var</span> [-_-]</div><div class=\"line\">[cuihuan:~ mysql5]$ <span class=\"keyword\">cd</span> <span class=\"built_in\">log</span></div><div class=\"line\">[cuihuan:~ <span class=\"keyword\">log</span>]$ <span class=\"keyword\">ls</span> -lh</div><div class=\"line\"><span class=\"keyword\">total</span> 458G</div><div class=\"line\">-rw-rw---- 1 work work 870K <span class=\"keyword\">Dec</span> 2 17:42 mysql.<span class=\"keyword\">err</span></div><div class=\"line\">-rw-rw---- 1 work work 3.9K Mar 24 2015 mysql.<span class=\"keyword\">err</span>-old</div><div class=\"line\">-rw-rw---- 1 work work 446G <span class=\"keyword\">Dec</span> 3 15:19 mysql.<span class=\"keyword\">log</span> 【-__】</div><div class=\"line\">-rw-rw---- 1 work work 11G <span class=\"keyword\">Dec</span> 3 15:10 slow.<span class=\"built_in\">log</span></div></pre></td></tr></table></figure>\n<p>经过分析看到mysql.log的日志占了446G,着手清理下。【mysql log 好的保存方式是：天级导出，清理n天之前的log，此处不再赘述】</p>\n<h2 id=\"清理之后效果\"><a href=\"#清理之后效果\" class=\"headerlink\" title=\"清理之后效果\"></a>清理之后效果</h2><p>清理 mysql.log 和var  之后<br>清理了大约<code>500g</code>的空间<br><figure class=\"highlight prolog\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan:~ var]$ df -h   </div><div class=\"line\"><span class=\"symbol\">Filesystem</span> <span class=\"symbol\">Size</span> <span class=\"symbol\">Used</span> <span class=\"symbol\">Avail</span> <span class=\"symbol\">Use</span><span class=\"comment\">% Mounted on</span></div><div class=\"line\">/dev/sda2 <span class=\"number\">8.2</span><span class=\"symbol\">G</span> <span class=\"number\">6.7</span><span class=\"symbol\">G</span> <span class=\"number\">1.6</span><span class=\"symbol\">G</span> <span class=\"number\">82</span><span class=\"comment\">% /</span></div><div class=\"line\">/dev/sda3 <span class=\"number\">1.4</span><span class=\"symbol\">T</span> <span class=\"number\">757</span><span class=\"symbol\">G</span> <span class=\"number\">584</span><span class=\"symbol\">G</span> <span class=\"number\">57</span><span class=\"comment\">% /home</span></div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/linux-%E6%9F%A5%E6%89%BE%E6%B8%85%E7%90%86%E5%A4%A7%E6%96%87%E4%BB%B6.html\">linux 查找清理大文件</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"mysql 简单全量备份和快速恢复","date":"2015-12-11T09:21:35.000Z","_content":"\n> 一个简单的mysql全量备份脚本，备份最近15天的数据。\n\n## 备份\n```\n#每天备份mysql数据库(保存最近15天的数据脚本)\nDATE=$(date +%Y%m%d)\n/home/cuixiaohuan/lamp/mysql5/bin/mysqldump -uuser -ppassword need_db > /home/cuixiaohuan/bak_sql/mysql_dbxx_$DATE.sql;\nfind /home/cuixiaohuan/bak_sql/ -mtime +15 -name '*.sql' -exec rm -rf {} \\;\n```\n\n## 恢复\nmysql 数据导入\n```\ndrop databases need_db;\ncreate databases need_db;\n```\n导入数据：必须设定编码进行恢复\n```\n./mysql -uroot -p --default-character-set=utf8 need_db < xx.sql\n\n```\n\n【转载请注明：[mysql 简单全量备份和快速恢复](http://cuihuan.net/article/mysql-%E7%AE%80%E5%8D%95%E5%85%A8%E9%87%8F%E5%A4%87%E4%BB%BD%E5%92%8C%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D.html) | [靠谱崔小拽](http://cuihuan.net) 】","source":"_posts/mysql 简单全量备份和快速恢复.md","raw":"---\ntitle: mysql 简单全量备份和快速恢复 \ndate: 2015-12-11 17:21:35\ntags: \n- 备份\n- mysql\n---\n\n> 一个简单的mysql全量备份脚本，备份最近15天的数据。\n\n## 备份\n```\n#每天备份mysql数据库(保存最近15天的数据脚本)\nDATE=$(date +%Y%m%d)\n/home/cuixiaohuan/lamp/mysql5/bin/mysqldump -uuser -ppassword need_db > /home/cuixiaohuan/bak_sql/mysql_dbxx_$DATE.sql;\nfind /home/cuixiaohuan/bak_sql/ -mtime +15 -name '*.sql' -exec rm -rf {} \\;\n```\n\n## 恢复\nmysql 数据导入\n```\ndrop databases need_db;\ncreate databases need_db;\n```\n导入数据：必须设定编码进行恢复\n```\n./mysql -uroot -p --default-character-set=utf8 need_db < xx.sql\n\n```\n\n【转载请注明：[mysql 简单全量备份和快速恢复](http://cuihuan.net/article/mysql-%E7%AE%80%E5%8D%95%E5%85%A8%E9%87%8F%E5%A4%87%E4%BB%BD%E5%92%8C%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D.html) | [靠谱崔小拽](http://cuihuan.net) 】","slug":"mysql 简单全量备份和快速恢复","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njk000n661fsxmixi92","content":"<blockquote>\n<p>一个简单的mysql全量备份脚本，备份最近15天的数据。</p>\n</blockquote>\n<h2 id=\"备份\"><a href=\"#备份\" class=\"headerlink\" title=\"备份\"></a>备份</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#每天备份mysql数据库(保存最近15天的数据脚本)</span></div><div class=\"line\">DATE=$(date +%Y%m%d)</div><div class=\"line\"><span class=\"regexp\">/home/</span>cuixiaohuan<span class=\"regexp\">/lamp/my</span>sql5<span class=\"regexp\">/bin/my</span>sqldump -uuser -ppassword need_db &gt; <span class=\"regexp\">/home/</span>cuixiaohuan<span class=\"regexp\">/bak_sql/my</span>sql_dbxx_<span class=\"variable\">$DATE</span>.sql;</div><div class=\"line\">find <span class=\"regexp\">/home/</span>cuixiaohuan<span class=\"regexp\">/bak_sql/</span> -mtime +<span class=\"number\">15</span> -name <span class=\"string\">'*.sql'</span> -exec rm -rf &#123;&#125; \\;</div></pre></td></tr></table></figure>\n<h2 id=\"恢复\"><a href=\"#恢复\" class=\"headerlink\" title=\"恢复\"></a>恢复</h2><p>mysql 数据导入<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">databases</span> need_db;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">databases</span> need_db;</div></pre></td></tr></table></figure></p>\n<p>导入数据：必须设定编码进行恢复<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./mysql -uroot -p --<span class=\"keyword\">default</span>-character-<span class=\"keyword\">set</span>=utf8 need_db &lt; xx.sql</div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/mysql-%E7%AE%80%E5%8D%95%E5%85%A8%E9%87%8F%E5%A4%87%E4%BB%BD%E5%92%8C%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D.html\">mysql 简单全量备份和快速恢复</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>一个简单的mysql全量备份脚本，备份最近15天的数据。</p>\n</blockquote>\n<h2 id=\"备份\"><a href=\"#备份\" class=\"headerlink\" title=\"备份\"></a>备份</h2><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#每天备份mysql数据库(保存最近15天的数据脚本)</span></div><div class=\"line\">DATE=$(date +%Y%m%d)</div><div class=\"line\"><span class=\"regexp\">/home/</span>cuixiaohuan<span class=\"regexp\">/lamp/my</span>sql5<span class=\"regexp\">/bin/my</span>sqldump -uuser -ppassword need_db &gt; <span class=\"regexp\">/home/</span>cuixiaohuan<span class=\"regexp\">/bak_sql/my</span>sql_dbxx_<span class=\"variable\">$DATE</span>.sql;</div><div class=\"line\">find <span class=\"regexp\">/home/</span>cuixiaohuan<span class=\"regexp\">/bak_sql/</span> -mtime +<span class=\"number\">15</span> -name <span class=\"string\">'*.sql'</span> -exec rm -rf &#123;&#125; \\;</div></pre></td></tr></table></figure>\n<h2 id=\"恢复\"><a href=\"#恢复\" class=\"headerlink\" title=\"恢复\"></a>恢复</h2><p>mysql 数据导入<br><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">drop</span> <span class=\"keyword\">databases</span> need_db;</div><div class=\"line\"><span class=\"keyword\">create</span> <span class=\"keyword\">databases</span> need_db;</div></pre></td></tr></table></figure></p>\n<p>导入数据：必须设定编码进行恢复<br><figure class=\"highlight actionscript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\">./mysql -uroot -p --<span class=\"keyword\">default</span>-character-<span class=\"keyword\">set</span>=utf8 need_db &lt; xx.sql</div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/mysql-%E7%AE%80%E5%8D%95%E5%85%A8%E9%87%8F%E5%A4%87%E4%BB%BD%E5%92%8C%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D.html\">mysql 简单全量备份和快速恢复</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"mysql数据导库常用操作","date":"2016-03-08T09:21:35.000Z","_content":"> 工作中经常遇到：一个数据库导入新的数据库实例中，或者一个数据库中的某些表导入新的数据库中，常用操作，总结一下。\n\n## 部分数据表导入新库\n- 单表导入新库的sql为\n```\n# CREATE TABLE 新表 SELECT * FROM 旧表\ncreate table `dashboard`.`xx` (select * from dashboard_stb.xxx);\n```\n- 多表导入新库（将所有的stability_* 导入新库）\n多表的时候，只需选出需要的表即可。\n\n```\n# 拼接处所有的导出sql\nmysql> select concat ('create table `dashboard`.',table_name,'(select * from `dashboard_stb`.',table_name,');') from information_schema.tables where table_name like \"stability_%\";\n+--------------------------------------------------------------------------------------------------------+\n| concat ('create table `dashboard`.',table_name,'(select * from `dashboard_stb`.',table_name,');')      |\n+--------------------------------------------------------------------------------------------------------+\n| create table `dashboard`.stability_capacity(select * from `dashboard_stb`.stability_capacity);         |\n| create table `dashboard`.stability_dailymaxflow(select * from `dashboard_stb`.stability_dailymaxflow); |\n| create table `dashboard`.stability_indextype(select * from `dashboard_stb`.stability_indextype);       |\n| create table `dashboard`.stability_ktraceagent(select * from `dashboard_stb`.stability_ktraceagent);   \n# 此处省略N行\n+--------------------------------------------------------------------------------------------------------+\n```\n粘贴进去直接运行即可\n```\nmysql>  create table `dashboard`.stability_maccpu(select * from `dashboard_stb`.stability_maccpu);\nQuery OK, 138138 rows affected (2.16 sec)\nRecords: 138138  Duplicates: 0  Warnings: 0\n\nmysql>  create table `dashboard`.stability_macmem(select * from `dashboard_stb`.stability_macmem);\nQuery OK, 138137 rows affected (2.07 sec)\nRecords: 138137  Duplicates: 0  Warnings: 0\n\nmysql>  create table `dashboard`.stability_macssd(select * from `dashboard_stb`.stability_macssd);\nQuery OK, 138139 rows affected (2.17 sec)\nRecords: 138139  Duplicates: 0  Warnings: 0\n# 此处省略N行\n```\n\n## 全库备份导入新库\n\n数据库全量导出为sql\n```\nmysqldump -uxxx -pxxx dashboard > dashboard.sql\n```\n通过sql建立新库\n```\n# 建新库\nmysql> create databases dashboard_new\n# 导入数据\n./mysql -uxxx -p --default-character-set=utf8 dashboard_new < dashboard.sql\n```\n【转载请注明：[mysql 简单全量备份和快速恢复](http://cuihuan.net/article/mysql%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","source":"_posts/mysql数据导库常用操作.md","raw":"---\ntitle: mysql数据导库常用操作 \ndate: 2016-03-08 17:21:35\ntags: \n- mysql\n---\n> 工作中经常遇到：一个数据库导入新的数据库实例中，或者一个数据库中的某些表导入新的数据库中，常用操作，总结一下。\n\n## 部分数据表导入新库\n- 单表导入新库的sql为\n```\n# CREATE TABLE 新表 SELECT * FROM 旧表\ncreate table `dashboard`.`xx` (select * from dashboard_stb.xxx);\n```\n- 多表导入新库（将所有的stability_* 导入新库）\n多表的时候，只需选出需要的表即可。\n\n```\n# 拼接处所有的导出sql\nmysql> select concat ('create table `dashboard`.',table_name,'(select * from `dashboard_stb`.',table_name,');') from information_schema.tables where table_name like \"stability_%\";\n+--------------------------------------------------------------------------------------------------------+\n| concat ('create table `dashboard`.',table_name,'(select * from `dashboard_stb`.',table_name,');')      |\n+--------------------------------------------------------------------------------------------------------+\n| create table `dashboard`.stability_capacity(select * from `dashboard_stb`.stability_capacity);         |\n| create table `dashboard`.stability_dailymaxflow(select * from `dashboard_stb`.stability_dailymaxflow); |\n| create table `dashboard`.stability_indextype(select * from `dashboard_stb`.stability_indextype);       |\n| create table `dashboard`.stability_ktraceagent(select * from `dashboard_stb`.stability_ktraceagent);   \n# 此处省略N行\n+--------------------------------------------------------------------------------------------------------+\n```\n粘贴进去直接运行即可\n```\nmysql>  create table `dashboard`.stability_maccpu(select * from `dashboard_stb`.stability_maccpu);\nQuery OK, 138138 rows affected (2.16 sec)\nRecords: 138138  Duplicates: 0  Warnings: 0\n\nmysql>  create table `dashboard`.stability_macmem(select * from `dashboard_stb`.stability_macmem);\nQuery OK, 138137 rows affected (2.07 sec)\nRecords: 138137  Duplicates: 0  Warnings: 0\n\nmysql>  create table `dashboard`.stability_macssd(select * from `dashboard_stb`.stability_macssd);\nQuery OK, 138139 rows affected (2.17 sec)\nRecords: 138139  Duplicates: 0  Warnings: 0\n# 此处省略N行\n```\n\n## 全库备份导入新库\n\n数据库全量导出为sql\n```\nmysqldump -uxxx -pxxx dashboard > dashboard.sql\n```\n通过sql建立新库\n```\n# 建新库\nmysql> create databases dashboard_new\n# 导入数据\n./mysql -uxxx -p --default-character-set=utf8 dashboard_new < dashboard.sql\n```\n【转载请注明：[mysql 简单全量备份和快速恢复](http://cuihuan.net/article/mysql%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","slug":"mysql数据导库常用操作","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njl000p661fw2cdu12d","content":"<blockquote>\n<p>工作中经常遇到：一个数据库导入新的数据库实例中，或者一个数据库中的某些表导入新的数据库中，常用操作，总结一下。</p>\n</blockquote>\n<h2 id=\"部分数据表导入新库\"><a href=\"#部分数据表导入新库\" class=\"headerlink\" title=\"部分数据表导入新库\"></a>部分数据表导入新库</h2><ul>\n<li><p>单表导入新库的sql为</p>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"># CREATE TABLE 新表 SELECT * FROM 旧表</div><div class=\"line\">create table `dashboard`.`xx` (select * <span class=\"keyword\">from</span> dashboard_stb.xxx);</div></pre></td></tr></table></figure>\n</li>\n<li><p>多表导入新库（将所有的stability_* 导入新库）<br>多表的时候，只需选出需要的表即可。</p>\n</li>\n</ul>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"># 拼接处所有的导出sql</div><div class=\"line\">mysql&gt; select concat (<span class=\"string\">'create table `dashboard`.'</span>,table_name,<span class=\"string\">'(select * from `dashboard_stb`.'</span>,table_name,<span class=\"string\">');'</span>) <span class=\"keyword\">from</span> information_schema.tables <span class=\"keyword\">where</span> table_name like <span class=\"string\">\"stability_%\"</span>;</div><div class=\"line\">+--------------------------------------------------------------------------------------------------------+</div><div class=\"line\">| concat (<span class=\"string\">'create table `dashboard`.'</span>,table_name,<span class=\"string\">'(select * from `dashboard_stb`.'</span>,table_name,<span class=\"string\">');'</span>)      |</div><div class=\"line\">+--------------------------------------------------------------------------------------------------------+</div><div class=\"line\">| create table `dashboard`.stability_capacity(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_capacity);         |</div><div class=\"line\">| create table `dashboard`.stability_dailymaxflow(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_dailymaxflow); |</div><div class=\"line\">| create table `dashboard`.stability_indextype(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_indextype);       |</div><div class=\"line\">| create table `dashboard`.stability_ktraceagent(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_ktraceagent);   </div><div class=\"line\"># 此处省略N行</div><div class=\"line\">+--------------------------------------------------------------------------------------------------------+</div></pre></td></tr></table></figure>\n<p>粘贴进去直接运行即可<br><figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt;  create table `dashboard`.stability_maccpu(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_maccpu);</div><div class=\"line\">Query OK, <span class=\"number\">138138</span> rows affected (<span class=\"number\">2.16</span> sec)</div><div class=\"line\">Records: <span class=\"number\">138138</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></div><div class=\"line\"></div><div class=\"line\">mysql&gt;  create table `dashboard`.stability_macmem(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_macmem);</div><div class=\"line\">Query OK, <span class=\"number\">138137</span> rows affected (<span class=\"number\">2.07</span> sec)</div><div class=\"line\">Records: <span class=\"number\">138137</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></div><div class=\"line\"></div><div class=\"line\">mysql&gt;  create table `dashboard`.stability_macssd(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_macssd);</div><div class=\"line\">Query OK, <span class=\"number\">138139</span> rows affected (<span class=\"number\">2.17</span> sec)</div><div class=\"line\">Records: <span class=\"number\">138139</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></div><div class=\"line\"># 此处省略N行</div></pre></td></tr></table></figure></p>\n<h2 id=\"全库备份导入新库\"><a href=\"#全库备份导入新库\" class=\"headerlink\" title=\"全库备份导入新库\"></a>全库备份导入新库</h2><p>数据库全量导出为sql<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">mysqldump</span> <span class=\"selector-tag\">-uxxx</span> <span class=\"selector-tag\">-pxxx</span> <span class=\"selector-tag\">dashboard</span> &gt; <span class=\"selector-tag\">dashboard</span><span class=\"selector-class\">.sql</span></div></pre></td></tr></table></figure></p>\n<p>通过sql建立新库<br><figure class=\"highlight haxe\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># 建新库</span></div><div class=\"line\">mysql&gt; create databases dashboard_new<span class=\"type\"></span></div><div class=\"line\"><span class=\"meta\"># 导入数据</span></div><div class=\"line\">./mysql -uxxx -p --<span class=\"keyword\">default</span>-character-<span class=\"keyword\">set</span>=utf8 dashboard_new <span class=\"type\"></span>&lt; dashboard.sql</div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/mysql%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C.html\">mysql 简单全量备份和快速恢复</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>工作中经常遇到：一个数据库导入新的数据库实例中，或者一个数据库中的某些表导入新的数据库中，常用操作，总结一下。</p>\n</blockquote>\n<h2 id=\"部分数据表导入新库\"><a href=\"#部分数据表导入新库\" class=\"headerlink\" title=\"部分数据表导入新库\"></a>部分数据表导入新库</h2><ul>\n<li><p>单表导入新库的sql为</p>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"># CREATE TABLE 新表 SELECT * FROM 旧表</div><div class=\"line\">create table `dashboard`.`xx` (select * <span class=\"keyword\">from</span> dashboard_stb.xxx);</div></pre></td></tr></table></figure>\n</li>\n<li><p>多表导入新库（将所有的stability_* 导入新库）<br>多表的时候，只需选出需要的表即可。</p>\n</li>\n</ul>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div></pre></td><td class=\"code\"><pre><div class=\"line\"># 拼接处所有的导出sql</div><div class=\"line\">mysql&gt; select concat (<span class=\"string\">'create table `dashboard`.'</span>,table_name,<span class=\"string\">'(select * from `dashboard_stb`.'</span>,table_name,<span class=\"string\">');'</span>) <span class=\"keyword\">from</span> information_schema.tables <span class=\"keyword\">where</span> table_name like <span class=\"string\">\"stability_%\"</span>;</div><div class=\"line\">+--------------------------------------------------------------------------------------------------------+</div><div class=\"line\">| concat (<span class=\"string\">'create table `dashboard`.'</span>,table_name,<span class=\"string\">'(select * from `dashboard_stb`.'</span>,table_name,<span class=\"string\">');'</span>)      |</div><div class=\"line\">+--------------------------------------------------------------------------------------------------------+</div><div class=\"line\">| create table `dashboard`.stability_capacity(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_capacity);         |</div><div class=\"line\">| create table `dashboard`.stability_dailymaxflow(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_dailymaxflow); |</div><div class=\"line\">| create table `dashboard`.stability_indextype(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_indextype);       |</div><div class=\"line\">| create table `dashboard`.stability_ktraceagent(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_ktraceagent);   </div><div class=\"line\"># 此处省略N行</div><div class=\"line\">+--------------------------------------------------------------------------------------------------------+</div></pre></td></tr></table></figure>\n<p>粘贴进去直接运行即可<br><figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt;  create table `dashboard`.stability_maccpu(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_maccpu);</div><div class=\"line\">Query OK, <span class=\"number\">138138</span> rows affected (<span class=\"number\">2.16</span> sec)</div><div class=\"line\">Records: <span class=\"number\">138138</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></div><div class=\"line\"></div><div class=\"line\">mysql&gt;  create table `dashboard`.stability_macmem(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_macmem);</div><div class=\"line\">Query OK, <span class=\"number\">138137</span> rows affected (<span class=\"number\">2.07</span> sec)</div><div class=\"line\">Records: <span class=\"number\">138137</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></div><div class=\"line\"></div><div class=\"line\">mysql&gt;  create table `dashboard`.stability_macssd(select * <span class=\"keyword\">from</span> `dashboard_stb`.stability_macssd);</div><div class=\"line\">Query OK, <span class=\"number\">138139</span> rows affected (<span class=\"number\">2.17</span> sec)</div><div class=\"line\">Records: <span class=\"number\">138139</span>  Duplicates: <span class=\"number\">0</span>  Warnings: <span class=\"number\">0</span></div><div class=\"line\"># 此处省略N行</div></pre></td></tr></table></figure></p>\n<h2 id=\"全库备份导入新库\"><a href=\"#全库备份导入新库\" class=\"headerlink\" title=\"全库备份导入新库\"></a>全库备份导入新库</h2><p>数据库全量导出为sql<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"selector-tag\">mysqldump</span> <span class=\"selector-tag\">-uxxx</span> <span class=\"selector-tag\">-pxxx</span> <span class=\"selector-tag\">dashboard</span> &gt; <span class=\"selector-tag\">dashboard</span><span class=\"selector-class\">.sql</span></div></pre></td></tr></table></figure></p>\n<p>通过sql建立新库<br><figure class=\"highlight haxe\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># 建新库</span></div><div class=\"line\">mysql&gt; create databases dashboard_new<span class=\"type\"></span></div><div class=\"line\"><span class=\"meta\"># 导入数据</span></div><div class=\"line\">./mysql -uxxx -p --<span class=\"keyword\">default</span>-character-<span class=\"keyword\">set</span>=utf8 dashboard_new <span class=\"type\"></span>&lt; dashboard.sql</div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/mysql%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%BA%93%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C.html\">mysql 简单全量备份和快速恢复</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"php 操作不同数据库","date":"2015-11-30T09:21:35.000Z","_content":"> php脚本经常，处理处理不同机器上，不同数据库之间数据；而且脚本特别容易写错，抽取了个工作中最常用到的多库同步，特此记忆！\n\n## 上代码\n举个php操作不同数据库，进行数据同步的栗子。\n```\n    /**\n     * 同步库1的数据到库2\n     * \n     * @author  ：cuihuan\n     * @date    ：2015-10-11\n     */\n    public function synchDbDiff()\n    {\n        // 连接库1\n        $crowd_conn_1 = mysql_connect('ip_1:port_1', 'name_1', 'pw_1');\n        if (!$crowd_conn_1) {\n            die(\"Could not connect:\" . mysql_error());\n        }\n\n        mysql_select_db('test_data', $crowd_conn_1);\n\n        // 连接库2\n        $crowd_conn_2 = mysql_connect('ip_2:port_2', 'name_2', 'pw_2');\n        if (!$crowd_conn_1) {\n            die(\"Could not connect:\" . mysql_error());\n        }\n\n        mysql_select_db('test_data', $crowd_conn_2);\n\n\n        //获取未同步的数据\n        $get_data_sql = \"SELECT `id`, `text` FROM `fb_conversation` WHERE `flag` = 1\";\n        $c_result = mysql_query($get_data_sql, $crowd_conn_1);\n        $this->check_res($c_result);\n        if ($c_result) {\n            while ($row = mysql_fetch_array($c_result, MYSQL_NUM)) {\n\n                // 更新同步\n                $new_data_sql = \"update from fb_conversation set text =\" . $row[1] . \"  where id = \" . $row[0];\n                $res = mysql_query($new_data_sql, $crowd_conn_2);\n                $this->check_res($c_result);\n            }\n        }\n    }\n```\n\n[ 个人小站原文链接 ]( http://cuihuan.net/?p=275 )\n\n","source":"_posts/php 操作不同数据库.md","raw":"---\ntitle: php 操作不同数据库 \ndate: 2015-11-30 17:21:35\ntags: \n- 数据库同步\n- mysql\n- php\n---\n> php脚本经常，处理处理不同机器上，不同数据库之间数据；而且脚本特别容易写错，抽取了个工作中最常用到的多库同步，特此记忆！\n\n## 上代码\n举个php操作不同数据库，进行数据同步的栗子。\n```\n    /**\n     * 同步库1的数据到库2\n     * \n     * @author  ：cuihuan\n     * @date    ：2015-10-11\n     */\n    public function synchDbDiff()\n    {\n        // 连接库1\n        $crowd_conn_1 = mysql_connect('ip_1:port_1', 'name_1', 'pw_1');\n        if (!$crowd_conn_1) {\n            die(\"Could not connect:\" . mysql_error());\n        }\n\n        mysql_select_db('test_data', $crowd_conn_1);\n\n        // 连接库2\n        $crowd_conn_2 = mysql_connect('ip_2:port_2', 'name_2', 'pw_2');\n        if (!$crowd_conn_1) {\n            die(\"Could not connect:\" . mysql_error());\n        }\n\n        mysql_select_db('test_data', $crowd_conn_2);\n\n\n        //获取未同步的数据\n        $get_data_sql = \"SELECT `id`, `text` FROM `fb_conversation` WHERE `flag` = 1\";\n        $c_result = mysql_query($get_data_sql, $crowd_conn_1);\n        $this->check_res($c_result);\n        if ($c_result) {\n            while ($row = mysql_fetch_array($c_result, MYSQL_NUM)) {\n\n                // 更新同步\n                $new_data_sql = \"update from fb_conversation set text =\" . $row[1] . \"  where id = \" . $row[0];\n                $res = mysql_query($new_data_sql, $crowd_conn_2);\n                $this->check_res($c_result);\n            }\n        }\n    }\n```\n\n[ 个人小站原文链接 ]( http://cuihuan.net/?p=275 )\n\n","slug":"php 操作不同数据库","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njn000q661fm5312tkb","content":"<blockquote>\n<p>php脚本经常，处理处理不同机器上，不同数据库之间数据；而且脚本特别容易写错，抽取了个工作中最常用到的多库同步，特此记忆！</p>\n</blockquote>\n<h2 id=\"上代码\"><a href=\"#上代码\" class=\"headerlink\" title=\"上代码\"></a>上代码</h2><p>举个php操作不同数据库，进行数据同步的栗子。<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 同步库1的数据到库2</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@author</span>  ：cuihuan</div><div class=\"line\"> * <span class=\"doctag\">@date</span>    ：2015-10-11</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">synchDbDiff</span><span class=\"params\">()</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"comment\">// 连接库1</span></div><div class=\"line\">    $crowd_conn_1 = mysql_connect(<span class=\"string\">'ip_1:port_1'</span>, <span class=\"string\">'name_1'</span>, <span class=\"string\">'pw_1'</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!$crowd_conn_1) &#123;</div><div class=\"line\">        <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    mysql_select_db(<span class=\"string\">'test_data'</span>, $crowd_conn_1);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 连接库2</span></div><div class=\"line\">    $crowd_conn_2 = mysql_connect(<span class=\"string\">'ip_2:port_2'</span>, <span class=\"string\">'name_2'</span>, <span class=\"string\">'pw_2'</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!$crowd_conn_1) &#123;</div><div class=\"line\">        <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    mysql_select_db(<span class=\"string\">'test_data'</span>, $crowd_conn_2);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//获取未同步的数据</span></div><div class=\"line\">    $get_data_sql = <span class=\"string\">\"SELECT `id`, `text` FROM `fb_conversation` WHERE `flag` = 1\"</span>;</div><div class=\"line\">    $c_result = mysql_query($get_data_sql, $crowd_conn_1);</div><div class=\"line\">    <span class=\"keyword\">$this</span>-&gt;check_res($c_result);</div><div class=\"line\">    <span class=\"keyword\">if</span> ($c_result) &#123;</div><div class=\"line\">        <span class=\"keyword\">while</span> ($row = mysql_fetch_array($c_result, MYSQL_NUM)) &#123;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 更新同步</span></div><div class=\"line\">            $new_data_sql = <span class=\"string\">\"update from fb_conversation set text =\"</span> . $row[<span class=\"number\">1</span>] . <span class=\"string\">\"  where id = \"</span> . $row[<span class=\"number\">0</span>];</div><div class=\"line\">            $res = mysql_query($new_data_sql, $crowd_conn_2);</div><div class=\"line\">            <span class=\"keyword\">$this</span>-&gt;check_res($c_result);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cuihuan.net/?p=275\"> 个人小站原文链接 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>php脚本经常，处理处理不同机器上，不同数据库之间数据；而且脚本特别容易写错，抽取了个工作中最常用到的多库同步，特此记忆！</p>\n</blockquote>\n<h2 id=\"上代码\"><a href=\"#上代码\" class=\"headerlink\" title=\"上代码\"></a>上代码</h2><p>举个php操作不同数据库，进行数据同步的栗子。<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 同步库1的数据到库2</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@author</span>  ：cuihuan</div><div class=\"line\"> * <span class=\"doctag\">@date</span>    ：2015-10-11</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">synchDbDiff</span><span class=\"params\">()</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"comment\">// 连接库1</span></div><div class=\"line\">    $crowd_conn_1 = mysql_connect(<span class=\"string\">'ip_1:port_1'</span>, <span class=\"string\">'name_1'</span>, <span class=\"string\">'pw_1'</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!$crowd_conn_1) &#123;</div><div class=\"line\">        <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    mysql_select_db(<span class=\"string\">'test_data'</span>, $crowd_conn_1);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 连接库2</span></div><div class=\"line\">    $crowd_conn_2 = mysql_connect(<span class=\"string\">'ip_2:port_2'</span>, <span class=\"string\">'name_2'</span>, <span class=\"string\">'pw_2'</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!$crowd_conn_1) &#123;</div><div class=\"line\">        <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    mysql_select_db(<span class=\"string\">'test_data'</span>, $crowd_conn_2);</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//获取未同步的数据</span></div><div class=\"line\">    $get_data_sql = <span class=\"string\">\"SELECT `id`, `text` FROM `fb_conversation` WHERE `flag` = 1\"</span>;</div><div class=\"line\">    $c_result = mysql_query($get_data_sql, $crowd_conn_1);</div><div class=\"line\">    <span class=\"keyword\">$this</span>-&gt;check_res($c_result);</div><div class=\"line\">    <span class=\"keyword\">if</span> ($c_result) &#123;</div><div class=\"line\">        <span class=\"keyword\">while</span> ($row = mysql_fetch_array($c_result, MYSQL_NUM)) &#123;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 更新同步</span></div><div class=\"line\">            $new_data_sql = <span class=\"string\">\"update from fb_conversation set text =\"</span> . $row[<span class=\"number\">1</span>] . <span class=\"string\">\"  where id = \"</span> . $row[<span class=\"number\">0</span>];</div><div class=\"line\">            $res = mysql_query($new_data_sql, $crowd_conn_2);</div><div class=\"line\">            <span class=\"keyword\">$this</span>-&gt;check_res($c_result);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cuihuan.net/?p=275\"> 个人小站原文链接 </a></p>\n"},{"title":"【page-monitor 前端自动化 中篇】 源码分析","date":"2016-08-07T09:21:35.000Z","_content":"> 上篇中初探了page-monitor的一些功能和在前端自动化测试方面的可行性，本篇主要分析下page-monitor的实现方式和源码。\n\n## mode-module简介\npage-monitor的存在形式是node-module，依赖于node安装和运行，简单必须了解下node_modules\n\n`node-module`是nodejs的模块，符合commonJs规范【具体规范可以参考：http://javascript.ruanyifeng.com/nodejs/module.html】\n\n简单描述commonJs规范\n1：文件即模块，作用域在文件内，不允许重复，不会污染。\n2：`加载依赖出现顺序`，加载即运行，重复则利用缓存。\n> 多说一句：这是amd 和cmd(commonJs)的本质区别，由于node多运行于服务端，加载比较快，因此比较适合cmd 规范，浏览器端的模块则更适用于cmd的规范，个人理解没有广义的好坏之分\n\n方便看源码，贴出node_modole简单构成和主要函数module\nnode内部提供一了一个modle的构造函数，所有的模块都继承和依赖于此模块。\n[![F4D61DF9-40DC-4DB6-A98E-6BED90406D5A](http://cuihuan.net/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png)](http://cuihuan.net/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png)\nnode module的引入 require命令。\n其他加载规则，路径设定不在此赘述。\n\n## page-monitor文件分析\n\n完整文件目录：\n[![B39BD2DF-7652-49F9-A8FB-F2F691688169](http://cuihuan.net/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png)](http://cuihuan.net/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png)  \n\n运行生成目录分析：\n[![B39BD2DF-7652-49F9-A8FB-F2F691688169](http://cuihuan.net/wp-content/uploads/2016/08/dom-%E5%88%86%E5%B8%83.jpg)](http://cuihuan.net/wp-content/uploads/2016/08/dom-%E5%88%86%E5%B8%83.jpg)  \n\n出了node_module及其组件代码，可用和值的分析的文件index.js 和phantomjs 下面的五个文件。\n\n## 分析index.js\n代码中无非变量声明和引用，关键一句引用phantom的命令乳腺\n```\n// 多线程启动位置\nvar proc = spawn(binPath, arr);\n```\n通过上面多线程的启动node可以达到高效和并发处理测试任务的需求，分析下arr的内容如下图：看到了 窗口大小，延时，ua，存放地址，diff变量等等\n\n[![E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C](http://cuihuan.net/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png)](http://cuihuan.net/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png)\n\n## 分析获取DOM源码\n获取dom的源码主要利用了web api evalution，evalution传入一个xpath的参数，返回一个xpath的对象，之后通过遍历和xpath规则生成规则化的json。\n贴一个evalution api\n[![90E47065-DF3B-470E-996C-1900A2EAF354](http://cuihuan.net/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png)](http://cuihuan.net/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png) \n\n为了看懂page-monitor的代码举个栗子\n```\n# evalution example:\n\nvar headings = document.evaluate(\"/html/body//h2\", document, null, XPathResult.ANY_TYPE, null);\n/* 检索body中所有H2的所欲.\n * 结果存在于一个node的迭代器中 */\nvar thisHeading = headings.iterateNext();\nvar alertText = \"Level 2 headings in this document are:\\n\";\nwhile (thisHeading) {\n  alertText += thisHeading.textContent + \"\\n\";\n  thisHeading = headings.iterateNext();\n}\nalert(alertText); // Alerts the text of all h2 elements\n```\n通过上面函数和page-monitor中walk.js函数最后一行，可以看出page-monitor 保存了四个元素：属性[name,id等等]，节点类型，位置[后期渲染]，样式的md5加密[样式仅需要对比是否变化即可]\n具体内容和dom结构如下：\n [![30FA5132-7903-466A-B866-588311812C47](http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png)](http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png)\n对应的具体dom结构\n[![FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291](http://cuihuan.net/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png)](http://cuihuan.net/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png) \n\n## diff.js 代码\ndiff代码主要两个作用\n- 1：获取差异\n- 2：渲染差异\n其中对比的策略：\n\n历史完全每个对比现在：获取更新和删除的内容\n现在完全每个对比历史：获取更新和新增的内容\n具体可以参考代码\n\n## 其他api和源码简单修改\n必须了解的web api 还有一个是querySeletor 也就是检索的api，参考地址\n[document.querySelector()](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelector)\n了解了这个api就可以做一件事情：`不对全局dom diff，只对特别关心的dom进行diff`\n实现方式：修改querySelector的根节点为Header\n获取的dom结构如下：根节点为header\n[![30FA5132-7903-466A-B866-588311812C47](http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png)](http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png)\n\n获取的页面截图如下：\n[![FDF6B258-5A69-47D1-B1FF-4EB38D7B8677](http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png)](http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png)\n\n\n## 代码流程图\n [![page-diff 流程图](http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png)](http://cuihuan.net/wp-content/uploads/2016/08/page-diff-流程图.png)\n## 总结\n本次在调研page-monitor的基础上，对page-monitor的源码实现进行分析；同时利用相关api修改，来只对核心页面进行获取优化。下一篇将会进一步思考page-monitor的应用。\n\n相关文章：\n[【page-monitor 前端自动化 上篇】 初步调研](http://cuihuan.net/?p=485)\n[【page-monitor 前端自动化 下篇】 实践应用](http://cuihuan.net/?p=508)\n\n\n\n\n\n","source":"_posts/page_monitor_second.md","raw":"---\ntitle: 【page-monitor 前端自动化 中篇】 源码分析 \ndate: 2016-08-07 17:21:35\ntags: \n- 自动化测试\n- javascript\n---\n> 上篇中初探了page-monitor的一些功能和在前端自动化测试方面的可行性，本篇主要分析下page-monitor的实现方式和源码。\n\n## mode-module简介\npage-monitor的存在形式是node-module，依赖于node安装和运行，简单必须了解下node_modules\n\n`node-module`是nodejs的模块，符合commonJs规范【具体规范可以参考：http://javascript.ruanyifeng.com/nodejs/module.html】\n\n简单描述commonJs规范\n1：文件即模块，作用域在文件内，不允许重复，不会污染。\n2：`加载依赖出现顺序`，加载即运行，重复则利用缓存。\n> 多说一句：这是amd 和cmd(commonJs)的本质区别，由于node多运行于服务端，加载比较快，因此比较适合cmd 规范，浏览器端的模块则更适用于cmd的规范，个人理解没有广义的好坏之分\n\n方便看源码，贴出node_modole简单构成和主要函数module\nnode内部提供一了一个modle的构造函数，所有的模块都继承和依赖于此模块。\n[![F4D61DF9-40DC-4DB6-A98E-6BED90406D5A](http://cuihuan.net/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png)](http://cuihuan.net/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png)\nnode module的引入 require命令。\n其他加载规则，路径设定不在此赘述。\n\n## page-monitor文件分析\n\n完整文件目录：\n[![B39BD2DF-7652-49F9-A8FB-F2F691688169](http://cuihuan.net/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png)](http://cuihuan.net/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png)  \n\n运行生成目录分析：\n[![B39BD2DF-7652-49F9-A8FB-F2F691688169](http://cuihuan.net/wp-content/uploads/2016/08/dom-%E5%88%86%E5%B8%83.jpg)](http://cuihuan.net/wp-content/uploads/2016/08/dom-%E5%88%86%E5%B8%83.jpg)  \n\n出了node_module及其组件代码，可用和值的分析的文件index.js 和phantomjs 下面的五个文件。\n\n## 分析index.js\n代码中无非变量声明和引用，关键一句引用phantom的命令乳腺\n```\n// 多线程启动位置\nvar proc = spawn(binPath, arr);\n```\n通过上面多线程的启动node可以达到高效和并发处理测试任务的需求，分析下arr的内容如下图：看到了 窗口大小，延时，ua，存放地址，diff变量等等\n\n[![E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C](http://cuihuan.net/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png)](http://cuihuan.net/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png)\n\n## 分析获取DOM源码\n获取dom的源码主要利用了web api evalution，evalution传入一个xpath的参数，返回一个xpath的对象，之后通过遍历和xpath规则生成规则化的json。\n贴一个evalution api\n[![90E47065-DF3B-470E-996C-1900A2EAF354](http://cuihuan.net/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png)](http://cuihuan.net/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png) \n\n为了看懂page-monitor的代码举个栗子\n```\n# evalution example:\n\nvar headings = document.evaluate(\"/html/body//h2\", document, null, XPathResult.ANY_TYPE, null);\n/* 检索body中所有H2的所欲.\n * 结果存在于一个node的迭代器中 */\nvar thisHeading = headings.iterateNext();\nvar alertText = \"Level 2 headings in this document are:\\n\";\nwhile (thisHeading) {\n  alertText += thisHeading.textContent + \"\\n\";\n  thisHeading = headings.iterateNext();\n}\nalert(alertText); // Alerts the text of all h2 elements\n```\n通过上面函数和page-monitor中walk.js函数最后一行，可以看出page-monitor 保存了四个元素：属性[name,id等等]，节点类型，位置[后期渲染]，样式的md5加密[样式仅需要对比是否变化即可]\n具体内容和dom结构如下：\n [![30FA5132-7903-466A-B866-588311812C47](http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png)](http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png)\n对应的具体dom结构\n[![FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291](http://cuihuan.net/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png)](http://cuihuan.net/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png) \n\n## diff.js 代码\ndiff代码主要两个作用\n- 1：获取差异\n- 2：渲染差异\n其中对比的策略：\n\n历史完全每个对比现在：获取更新和删除的内容\n现在完全每个对比历史：获取更新和新增的内容\n具体可以参考代码\n\n## 其他api和源码简单修改\n必须了解的web api 还有一个是querySeletor 也就是检索的api，参考地址\n[document.querySelector()](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelector)\n了解了这个api就可以做一件事情：`不对全局dom diff，只对特别关心的dom进行diff`\n实现方式：修改querySelector的根节点为Header\n获取的dom结构如下：根节点为header\n[![30FA5132-7903-466A-B866-588311812C47](http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png)](http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png)\n\n获取的页面截图如下：\n[![FDF6B258-5A69-47D1-B1FF-4EB38D7B8677](http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png)](http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png)\n\n\n## 代码流程图\n [![page-diff 流程图](http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png)](http://cuihuan.net/wp-content/uploads/2016/08/page-diff-流程图.png)\n## 总结\n本次在调研page-monitor的基础上，对page-monitor的源码实现进行分析；同时利用相关api修改，来只对核心页面进行获取优化。下一篇将会进一步思考page-monitor的应用。\n\n相关文章：\n[【page-monitor 前端自动化 上篇】 初步调研](http://cuihuan.net/?p=485)\n[【page-monitor 前端自动化 下篇】 实践应用](http://cuihuan.net/?p=508)\n\n\n\n\n\n","slug":"page_monitor_second","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njo000s661frtxxq25x","content":"<blockquote>\n<p>上篇中初探了page-monitor的一些功能和在前端自动化测试方面的可行性，本篇主要分析下page-monitor的实现方式和源码。</p>\n</blockquote>\n<h2 id=\"mode-module简介\"><a href=\"#mode-module简介\" class=\"headerlink\" title=\"mode-module简介\"></a>mode-module简介</h2><p>page-monitor的存在形式是node-module，依赖于node安装和运行，简单必须了解下node_modules</p>\n<p><code>node-module</code>是nodejs的模块，符合commonJs规范【具体规范可以参考：<a href=\"http://javascript.ruanyifeng.com/nodejs/module.html】\" target=\"_blank\" rel=\"external\">http://javascript.ruanyifeng.com/nodejs/module.html】</a></p>\n<p>简单描述commonJs规范<br>1：文件即模块，作用域在文件内，不允许重复，不会污染。<br>2：<code>加载依赖出现顺序</code>，加载即运行，重复则利用缓存。</p>\n<blockquote>\n<p>多说一句：这是amd 和cmd(commonJs)的本质区别，由于node多运行于服务端，加载比较快，因此比较适合cmd 规范，浏览器端的模块则更适用于cmd的规范，个人理解没有广义的好坏之分</p>\n</blockquote>\n<p>方便看源码，贴出node_modole简单构成和主要函数module<br>node内部提供一了一个modle的构造函数，所有的模块都继承和依赖于此模块。<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png\" alt=\"F4D61DF9-40DC-4DB6-A98E-6BED90406D5A\"></a><br>node module的引入 require命令。<br>其他加载规则，路径设定不在此赘述。</p>\n<h2 id=\"page-monitor文件分析\"><a href=\"#page-monitor文件分析\" class=\"headerlink\" title=\"page-monitor文件分析\"></a>page-monitor文件分析</h2><p>完整文件目录：<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png\" alt=\"B39BD2DF-7652-49F9-A8FB-F2F691688169\"></a>  </p>\n<p>运行生成目录分析：<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/dom-%E5%88%86%E5%B8%83.jpg\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/dom-%E5%88%86%E5%B8%83.jpg\" alt=\"B39BD2DF-7652-49F9-A8FB-F2F691688169\"></a>  </p>\n<p>出了node_module及其组件代码，可用和值的分析的文件index.js 和phantomjs 下面的五个文件。</p>\n<h2 id=\"分析index-js\"><a href=\"#分析index-js\" class=\"headerlink\" title=\"分析index.js\"></a>分析index.js</h2><p>代码中无非变量声明和引用，关键一句引用phantom的命令乳腺<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 多线程启动位置</span></div><div class=\"line\">var <span class=\"function\"><span class=\"keyword\">proc</span> = <span class=\"title\">spawn</span><span class=\"params\">(binPath, arr)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>通过上面多线程的启动node可以达到高效和并发处理测试任务的需求，分析下arr的内容如下图：看到了 窗口大小，延时，ua，存放地址，diff变量等等</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png\" alt=\"E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C\"></a></p>\n<h2 id=\"分析获取DOM源码\"><a href=\"#分析获取DOM源码\" class=\"headerlink\" title=\"分析获取DOM源码\"></a>分析获取DOM源码</h2><p>获取dom的源码主要利用了web api evalution，evalution传入一个xpath的参数，返回一个xpath的对象，之后通过遍历和xpath规则生成规则化的json。<br>贴一个evalution api<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png\" alt=\"90E47065-DF3B-470E-996C-1900A2EAF354\"></a> </p>\n<p>为了看懂page-monitor的代码举个栗子<br><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"># evalution example:</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> headings = <span class=\"built_in\">document</span>.evaluate(<span class=\"string\">\"/html/body//h2\"</span>, <span class=\"built_in\">document</span>, <span class=\"keyword\">null</span>, XPathResult.ANY_TYPE, <span class=\"keyword\">null</span>);</div><div class=\"line\"><span class=\"comment\">/* 检索body中所有H2的所欲.</span></div><div class=\"line\"> * 结果存在于一个node的迭代器中 */</div><div class=\"line\"><span class=\"keyword\">var</span> thisHeading = headings.iterateNext();</div><div class=\"line\"><span class=\"keyword\">var</span> alertText = <span class=\"string\">\"Level 2 headings in this document are:\\n\"</span>;</div><div class=\"line\"><span class=\"keyword\">while</span> (thisHeading) &#123;</div><div class=\"line\">  alertText += thisHeading.textContent + <span class=\"string\">\"\\n\"</span>;</div><div class=\"line\">  thisHeading = headings.iterateNext();</div><div class=\"line\">&#125;</div><div class=\"line\">alert(alertText); <span class=\"comment\">// Alerts the text of all h2 elements</span></div></pre></td></tr></table></figure></p>\n<p>通过上面函数和page-monitor中walk.js函数最后一行，可以看出page-monitor 保存了四个元素：属性[name,id等等]，节点类型，位置[后期渲染]，样式的md5加密[样式仅需要对比是否变化即可]<br>具体内容和dom结构如下：<br> <a href=\"http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png\" alt=\"30FA5132-7903-466A-B866-588311812C47\"></a><br>对应的具体dom结构<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png\" alt=\"FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291\"></a> </p>\n<h2 id=\"diff-js-代码\"><a href=\"#diff-js-代码\" class=\"headerlink\" title=\"diff.js 代码\"></a>diff.js 代码</h2><p>diff代码主要两个作用</p>\n<ul>\n<li>1：获取差异</li>\n<li>2：渲染差异<br>其中对比的策略：</li>\n</ul>\n<p>历史完全每个对比现在：获取更新和删除的内容<br>现在完全每个对比历史：获取更新和新增的内容<br>具体可以参考代码</p>\n<h2 id=\"其他api和源码简单修改\"><a href=\"#其他api和源码简单修改\" class=\"headerlink\" title=\"其他api和源码简单修改\"></a>其他api和源码简单修改</h2><p>必须了解的web api 还有一个是querySeletor 也就是检索的api，参考地址<br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelector\" target=\"_blank\" rel=\"external\">document.querySelector()</a><br>了解了这个api就可以做一件事情：<code>不对全局dom diff，只对特别关心的dom进行diff</code><br>实现方式：修改querySelector的根节点为Header<br>获取的dom结构如下：根节点为header<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png\" alt=\"30FA5132-7903-466A-B866-588311812C47\"></a></p>\n<p>获取的页面截图如下：<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png\" alt=\"FDF6B258-5A69-47D1-B1FF-4EB38D7B8677\"></a></p>\n<h2 id=\"代码流程图\"><a href=\"#代码流程图\" class=\"headerlink\" title=\"代码流程图\"></a>代码流程图</h2><p> <a href=\"http://cuihuan.net/wp-content/uploads/2016/08/page-diff-流程图.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png\" alt=\"page-diff 流程图\"></a></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>本次在调研page-monitor的基础上，对page-monitor的源码实现进行分析；同时利用相关api修改，来只对核心页面进行获取优化。下一篇将会进一步思考page-monitor的应用。</p>\n<p>相关文章：<br><a href=\"http://cuihuan.net/?p=485\">【page-monitor 前端自动化 上篇】 初步调研</a><br><a href=\"http://cuihuan.net/?p=508\">【page-monitor 前端自动化 下篇】 实践应用</a></p>\n","excerpt":"","more":"<blockquote>\n<p>上篇中初探了page-monitor的一些功能和在前端自动化测试方面的可行性，本篇主要分析下page-monitor的实现方式和源码。</p>\n</blockquote>\n<h2 id=\"mode-module简介\"><a href=\"#mode-module简介\" class=\"headerlink\" title=\"mode-module简介\"></a>mode-module简介</h2><p>page-monitor的存在形式是node-module，依赖于node安装和运行，简单必须了解下node_modules</p>\n<p><code>node-module</code>是nodejs的模块，符合commonJs规范【具体规范可以参考：<a href=\"http://javascript.ruanyifeng.com/nodejs/module.html】\">http://javascript.ruanyifeng.com/nodejs/module.html】</a></p>\n<p>简单描述commonJs规范<br>1：文件即模块，作用域在文件内，不允许重复，不会污染。<br>2：<code>加载依赖出现顺序</code>，加载即运行，重复则利用缓存。</p>\n<blockquote>\n<p>多说一句：这是amd 和cmd(commonJs)的本质区别，由于node多运行于服务端，加载比较快，因此比较适合cmd 规范，浏览器端的模块则更适用于cmd的规范，个人理解没有广义的好坏之分</p>\n</blockquote>\n<p>方便看源码，贴出node_modole简单构成和主要函数module<br>node内部提供一了一个modle的构造函数，所有的模块都继承和依赖于此模块。<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/F4D61DF9-40DC-4DB6-A98E-6BED90406D5A.png\" alt=\"F4D61DF9-40DC-4DB6-A98E-6BED90406D5A\"></a><br>node module的引入 require命令。<br>其他加载规则，路径设定不在此赘述。</p>\n<h2 id=\"page-monitor文件分析\"><a href=\"#page-monitor文件分析\" class=\"headerlink\" title=\"page-monitor文件分析\"></a>page-monitor文件分析</h2><p>完整文件目录：<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/B39BD2DF-7652-49F9-A8FB-F2F691688169.png\" alt=\"B39BD2DF-7652-49F9-A8FB-F2F691688169\"></a>  </p>\n<p>运行生成目录分析：<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/dom-%E5%88%86%E5%B8%83.jpg\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/dom-%E5%88%86%E5%B8%83.jpg\" alt=\"B39BD2DF-7652-49F9-A8FB-F2F691688169\"></a>  </p>\n<p>出了node_module及其组件代码，可用和值的分析的文件index.js 和phantomjs 下面的五个文件。</p>\n<h2 id=\"分析index-js\"><a href=\"#分析index-js\" class=\"headerlink\" title=\"分析index.js\"></a>分析index.js</h2><p>代码中无非变量声明和引用，关键一句引用phantom的命令乳腺<br><figure class=\"highlight gauss\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// 多线程启动位置</span></div><div class=\"line\">var <span class=\"function\"><span class=\"keyword\">proc</span> = <span class=\"title\">spawn</span><span class=\"params\">(binPath, arr)</span></span>;</div></pre></td></tr></table></figure></p>\n<p>通过上面多线程的启动node可以达到高效和并发处理测试任务的需求，分析下arr的内容如下图：看到了 窗口大小，延时，ua，存放地址，diff变量等等</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C.png\" alt=\"E9B3CEA8-6B99-45CC-A52A-B8E9D90B267C\"></a></p>\n<h2 id=\"分析获取DOM源码\"><a href=\"#分析获取DOM源码\" class=\"headerlink\" title=\"分析获取DOM源码\"></a>分析获取DOM源码</h2><p>获取dom的源码主要利用了web api evalution，evalution传入一个xpath的参数，返回一个xpath的对象，之后通过遍历和xpath规则生成规则化的json。<br>贴一个evalution api<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/90E47065-DF3B-470E-996C-1900A2EAF354.png\" alt=\"90E47065-DF3B-470E-996C-1900A2EAF354\"></a> </p>\n<p>为了看懂page-monitor的代码举个栗子<br><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"># evalution example:</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> headings = <span class=\"built_in\">document</span>.evaluate(<span class=\"string\">\"/html/body//h2\"</span>, <span class=\"built_in\">document</span>, <span class=\"keyword\">null</span>, XPathResult.ANY_TYPE, <span class=\"keyword\">null</span>);</div><div class=\"line\"><span class=\"comment\">/* 检索body中所有H2的所欲.</div><div class=\"line\"> * 结果存在于一个node的迭代器中 */</span></div><div class=\"line\"><span class=\"keyword\">var</span> thisHeading = headings.iterateNext();</div><div class=\"line\"><span class=\"keyword\">var</span> alertText = <span class=\"string\">\"Level 2 headings in this document are:\\n\"</span>;</div><div class=\"line\"><span class=\"keyword\">while</span> (thisHeading) &#123;</div><div class=\"line\">  alertText += thisHeading.textContent + <span class=\"string\">\"\\n\"</span>;</div><div class=\"line\">  thisHeading = headings.iterateNext();</div><div class=\"line\">&#125;</div><div class=\"line\">alert(alertText); <span class=\"comment\">// Alerts the text of all h2 elements</span></div></pre></td></tr></table></figure></p>\n<p>通过上面函数和page-monitor中walk.js函数最后一行，可以看出page-monitor 保存了四个元素：属性[name,id等等]，节点类型，位置[后期渲染]，样式的md5加密[样式仅需要对比是否变化即可]<br>具体内容和dom结构如下：<br> <a href=\"http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png\" alt=\"30FA5132-7903-466A-B866-588311812C47\"></a><br>对应的具体dom结构<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291.png\" alt=\"FBEE1F3F-7A81-4AF0-8E05-7E0BED5B5291\"></a> </p>\n<h2 id=\"diff-js-代码\"><a href=\"#diff-js-代码\" class=\"headerlink\" title=\"diff.js 代码\"></a>diff.js 代码</h2><p>diff代码主要两个作用</p>\n<ul>\n<li>1：获取差异</li>\n<li>2：渲染差异<br>其中对比的策略：</li>\n</ul>\n<p>历史完全每个对比现在：获取更新和删除的内容<br>现在完全每个对比历史：获取更新和新增的内容<br>具体可以参考代码</p>\n<h2 id=\"其他api和源码简单修改\"><a href=\"#其他api和源码简单修改\" class=\"headerlink\" title=\"其他api和源码简单修改\"></a>其他api和源码简单修改</h2><p>必须了解的web api 还有一个是querySeletor 也就是检索的api，参考地址<br><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/querySelector\">document.querySelector()</a><br>了解了这个api就可以做一件事情：<code>不对全局dom diff，只对特别关心的dom进行diff</code><br>实现方式：修改querySelector的根节点为Header<br>获取的dom结构如下：根节点为header<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/30FA5132-7903-466A-B866-588311812C47.png\" alt=\"30FA5132-7903-466A-B866-588311812C47\"></a></p>\n<p>获取的页面截图如下：<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png\" alt=\"FDF6B258-5A69-47D1-B1FF-4EB38D7B8677\"></a></p>\n<h2 id=\"代码流程图\"><a href=\"#代码流程图\" class=\"headerlink\" title=\"代码流程图\"></a>代码流程图</h2><p> <a href=\"http://cuihuan.net/wp-content/uploads/2016/08/page-diff-流程图.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png\" alt=\"page-diff 流程图\"></a></p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><p>本次在调研page-monitor的基础上，对page-monitor的源码实现进行分析；同时利用相关api修改，来只对核心页面进行获取优化。下一篇将会进一步思考page-monitor的应用。</p>\n<p>相关文章：<br><a href=\"http://cuihuan.net/?p=485\">【page-monitor 前端自动化 上篇】 初步调研</a><br><a href=\"http://cuihuan.net/?p=508\">【page-monitor 前端自动化 下篇】 实践应用</a></p>\n"},{"title":"phpUnit 安装，实例和简单部署","date":"2015-11-28T09:21:35.000Z","_content":"> 背景：一个小脚本，保证稳定为主；所以试用了下phpunit，快捷方便\n\n### phpunit 的安装\n\nphpunit是一个轻量级的php单元测试框架，通过pear安装\n安装过程\n```\nwget https://phar.phpunit.de/phpunit.phar\nchmod +x phpunit.phar\nsudo mv phpunit.phar /usr/local/bin/phpunit\nphpunit --version\n```\n成功之后显示如下:\n```\ncuihuan:~ cuixiaohuan$ phpunit --version\nPHPUnit 4.8.6 by Sebastian Bergmann and contributors.\n```\n\n### 简单试用\n\n测试类集成框架\n\n**class PsCaseTest extends PHPUnit_Framework_TestCase{}**\n\n其中phpunit\n默认首先执行 setup\n默认最后执行 teardown\n\n举个栗子：\n```\n\n<?php\n/***************************************************************************\n *\n * $Id: PsCaseTest,v 1.0 PsCaseTest cuihuan Exp$\n *\n **************************************************************************/\n\n/**\n * @file PsCaseTest.php\n * @author cuihuan\n * @date 2015/09/11 10:09:31\n * @version $Revision:1.0$\n * @brief  pscase接口单元测试\n *\n **/\n\nrequire_once dirname(__FILE__) . ('/PsCase.php');\n\nclass PsCaseTest extends PHPUnit_Framework_TestCase\n{\n    /**\n     * @var object pscase类\n     */\n    protected $pscase;\n\n    /**\n     * @brief setup: Sets up the fixture, for example, opens a network connection.\n     *\n     * This method is called before a test is executed.  \n     */\n    public function setup(){\n        $this->pscase = new PsCase();\n    }\n\n    /**\n     * @brief teardown: Tears down the fixture, for example, closes a network connection.\n     * \n     * This method is called after a test is executed.\n     */\n    public function teardown(){\n    }\n\n\n    /**\n     * @brief : 测试config文件的获取\n     *\n     */\n    public function testGetConfig()\n    {\n        $this->assertEquals(true,$this->pscase->debugText(\"11\"));\n    }\n}\n\n```\n\n### 运行\n\n运行方式：phpunit  —bootstrap [源文件] 测试文件 \n具体如下：\n```\ncuihuande:newcode cuixiaohuan$ phpunit --bootstrap ./PsCase.php ./PsCaseTest.php\n\n32015-09-11 02:09:36:11<br>\n5\n\nTime: 116 ms, Memory: 11.75Mb\n\nOK (1 test, 1 assertion)  【表示运行成功】\n\n```\n\n### 部署\n部署就不不赘述了，写个shell脚本，crontab天极运行，加个报警邮件，简单的单元测试ok，从此再也不用担心错误和回归测试了。\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=260)\n","source":"_posts/phpUnit 安装，实例和简单部署.md","raw":"---\ntitle: phpUnit 安装，实例和简单部署 \ndate: 2015-11-28 17:21:35\ntags: \n- 单元测试\n- php\n- phpunit\n---\n> 背景：一个小脚本，保证稳定为主；所以试用了下phpunit，快捷方便\n\n### phpunit 的安装\n\nphpunit是一个轻量级的php单元测试框架，通过pear安装\n安装过程\n```\nwget https://phar.phpunit.de/phpunit.phar\nchmod +x phpunit.phar\nsudo mv phpunit.phar /usr/local/bin/phpunit\nphpunit --version\n```\n成功之后显示如下:\n```\ncuihuan:~ cuixiaohuan$ phpunit --version\nPHPUnit 4.8.6 by Sebastian Bergmann and contributors.\n```\n\n### 简单试用\n\n测试类集成框架\n\n**class PsCaseTest extends PHPUnit_Framework_TestCase{}**\n\n其中phpunit\n默认首先执行 setup\n默认最后执行 teardown\n\n举个栗子：\n```\n\n<?php\n/***************************************************************************\n *\n * $Id: PsCaseTest,v 1.0 PsCaseTest cuihuan Exp$\n *\n **************************************************************************/\n\n/**\n * @file PsCaseTest.php\n * @author cuihuan\n * @date 2015/09/11 10:09:31\n * @version $Revision:1.0$\n * @brief  pscase接口单元测试\n *\n **/\n\nrequire_once dirname(__FILE__) . ('/PsCase.php');\n\nclass PsCaseTest extends PHPUnit_Framework_TestCase\n{\n    /**\n     * @var object pscase类\n     */\n    protected $pscase;\n\n    /**\n     * @brief setup: Sets up the fixture, for example, opens a network connection.\n     *\n     * This method is called before a test is executed.  \n     */\n    public function setup(){\n        $this->pscase = new PsCase();\n    }\n\n    /**\n     * @brief teardown: Tears down the fixture, for example, closes a network connection.\n     * \n     * This method is called after a test is executed.\n     */\n    public function teardown(){\n    }\n\n\n    /**\n     * @brief : 测试config文件的获取\n     *\n     */\n    public function testGetConfig()\n    {\n        $this->assertEquals(true,$this->pscase->debugText(\"11\"));\n    }\n}\n\n```\n\n### 运行\n\n运行方式：phpunit  —bootstrap [源文件] 测试文件 \n具体如下：\n```\ncuihuande:newcode cuixiaohuan$ phpunit --bootstrap ./PsCase.php ./PsCaseTest.php\n\n32015-09-11 02:09:36:11<br>\n5\n\nTime: 116 ms, Memory: 11.75Mb\n\nOK (1 test, 1 assertion)  【表示运行成功】\n\n```\n\n### 部署\n部署就不不赘述了，写个shell脚本，crontab天极运行，加个报警邮件，简单的单元测试ok，从此再也不用担心错误和回归测试了。\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=260)\n","slug":"phpUnit 安装，实例和简单部署","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njp000t661fhet61w3h","content":"<blockquote>\n<p>背景：一个小脚本，保证稳定为主；所以试用了下phpunit，快捷方便</p>\n</blockquote>\n<h3 id=\"phpunit-的安装\"><a href=\"#phpunit-的安装\" class=\"headerlink\" title=\"phpunit 的安装\"></a>phpunit 的安装</h3><p>phpunit是一个轻量级的php单元测试框架，通过pear安装<br>安装过程<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget https:<span class=\"comment\">//phar.phpunit.de/phpunit.phar</span></div><div class=\"line\">chmod +x phpunit<span class=\"selector-class\">.phar</span></div><div class=\"line\">sudo mv phpunit<span class=\"selector-class\">.phar</span> /usr/local/bin/phpunit</div><div class=\"line\">phpunit --version</div></pre></td></tr></table></figure></p>\n<p>成功之后显示如下:<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">cuihuan:</span>~ cuixiaohuan$ phpunit --version</div><div class=\"line\">PHPUnit <span class=\"number\">4</span>.<span class=\"number\">8</span>.<span class=\"number\">6</span> <span class=\"keyword\">by </span><span class=\"keyword\">Sebastian </span><span class=\"keyword\">Bergmann </span><span class=\"keyword\">and </span>contributors.</div></pre></td></tr></table></figure></p>\n<h3 id=\"简单试用\"><a href=\"#简单试用\" class=\"headerlink\" title=\"简单试用\"></a>简单试用</h3><p>测试类集成框架</p>\n<p><strong>class PsCaseTest extends PHPUnit_Framework_TestCase{}</strong></p>\n<p>其中phpunit<br>默认首先执行 setup<br>默认最后执行 teardown</p>\n<p>举个栗子：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></span></div><div class=\"line\"><span class=\"comment\">/***************************************************************************</span></div><div class=\"line\"> *</div><div class=\"line\"> * $Id: PsCaseTest,v 1.0 PsCaseTest cuihuan Exp$</div><div class=\"line\"> *</div><div class=\"line\"> **************************************************************************/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * <span class=\"doctag\">@file</span> PsCaseTest.php</div><div class=\"line\"> * <span class=\"doctag\">@author</span> cuihuan</div><div class=\"line\"> * <span class=\"doctag\">@date</span> 2015/09/11 10:09:31</div><div class=\"line\"> * <span class=\"doctag\">@version</span> $Revision:1.0$</div><div class=\"line\"> * <span class=\"doctag\">@brief</span>  pscase接口单元测试</div><div class=\"line\"> *</div><div class=\"line\"> **/</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">require_once</span> dirname(<span class=\"keyword\">__FILE__</span>) . (<span class=\"string\">'/PsCase.php'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PsCaseTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">PHPUnit_Framework_TestCase</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * <span class=\"doctag\">@var</span> object pscase类</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">protected</span> $pscase;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * <span class=\"doctag\">@brief</span> setup: Sets up the fixture, for example, opens a network connection.</div><div class=\"line\">     *</div><div class=\"line\">     * This method is called before a test is executed.  </div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setup</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;pscase = <span class=\"keyword\">new</span> PsCase();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * <span class=\"doctag\">@brief</span> teardown: Tears down the fixture, for example, closes a network connection.</div><div class=\"line\">     * </div><div class=\"line\">     * This method is called after a test is executed.</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">teardown</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * <span class=\"doctag\">@brief</span> : 测试config文件的获取</div><div class=\"line\">     *</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testGetConfig</span><span class=\"params\">()</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;assertEquals(<span class=\"keyword\">true</span>,<span class=\"keyword\">$this</span>-&gt;pscase-&gt;debugText(<span class=\"string\">\"11\"</span>));</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h3 id=\"运行\"><a href=\"#运行\" class=\"headerlink\" title=\"运行\"></a>运行</h3><p>运行方式：phpunit  —bootstrap [源文件] 测试文件<br>具体如下：<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">cuihuande:newcode cuixiaohuan$ phpunit --bootstrap ./PsCase.php ./PsCaseTest.php</div><div class=\"line\"></div><div class=\"line\">32015<span class=\"string\">-09</span><span class=\"string\">-11</span> 02:09:36:11&lt;br&gt;</div><div class=\"line\">5</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">Time:</span> 116 ms, Memory: 11.75Mb</div><div class=\"line\"></div><div class=\"line\">OK (1 test, 1 assertion)  【表示运行成功】</div></pre></td></tr></table></figure></p>\n<h3 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h3><p>部署就不不赘述了，写个shell脚本，crontab天极运行，加个报警邮件，简单的单元测试ok，从此再也不用担心错误和回归测试了。</p>\n<p><a href=\"http://cuihuan.net/?p=260\"> 个人小站原文链接 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>背景：一个小脚本，保证稳定为主；所以试用了下phpunit，快捷方便</p>\n</blockquote>\n<h3 id=\"phpunit-的安装\"><a href=\"#phpunit-的安装\" class=\"headerlink\" title=\"phpunit 的安装\"></a>phpunit 的安装</h3><p>phpunit是一个轻量级的php单元测试框架，通过pear安装<br>安装过程<br><figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">wget https:<span class=\"comment\">//phar.phpunit.de/phpunit.phar</span></div><div class=\"line\">chmod +x phpunit<span class=\"selector-class\">.phar</span></div><div class=\"line\">sudo mv phpunit<span class=\"selector-class\">.phar</span> /usr/local/bin/phpunit</div><div class=\"line\">phpunit --version</div></pre></td></tr></table></figure></p>\n<p>成功之后显示如下:<br><figure class=\"highlight mipsasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">cuihuan:</span>~ cuixiaohuan$ phpunit --version</div><div class=\"line\">PHPUnit <span class=\"number\">4</span>.<span class=\"number\">8</span>.<span class=\"number\">6</span> <span class=\"keyword\">by </span><span class=\"keyword\">Sebastian </span><span class=\"keyword\">Bergmann </span><span class=\"keyword\">and </span>contributors.</div></pre></td></tr></table></figure></p>\n<h3 id=\"简单试用\"><a href=\"#简单试用\" class=\"headerlink\" title=\"简单试用\"></a>简单试用</h3><p>测试类集成框架</p>\n<p><strong>class PsCaseTest extends PHPUnit_Framework_TestCase{}</strong></p>\n<p>其中phpunit<br>默认首先执行 setup<br>默认最后执行 teardown</p>\n<p>举个栗子：<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"><span class=\"comment\">/***************************************************************************</div><div class=\"line\"> *</div><div class=\"line\"> * $Id: PsCaseTest,v 1.0 PsCaseTest cuihuan Exp$</div><div class=\"line\"> *</div><div class=\"line\"> **************************************************************************/</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * <span class=\"doctag\">@file</span> PsCaseTest.php</div><div class=\"line\"> * <span class=\"doctag\">@author</span> cuihuan</div><div class=\"line\"> * <span class=\"doctag\">@date</span> 2015/09/11 10:09:31</div><div class=\"line\"> * <span class=\"doctag\">@version</span> $Revision:1.0$</div><div class=\"line\"> * <span class=\"doctag\">@brief</span>  pscase接口单元测试</div><div class=\"line\"> *</div><div class=\"line\"> **/</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">require_once</span> dirname(<span class=\"keyword\">__FILE__</span>) . (<span class=\"string\">'/PsCase.php'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PsCaseTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">PHPUnit_Framework_TestCase</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * <span class=\"doctag\">@var</span> object pscase类</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">protected</span> $pscase;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * <span class=\"doctag\">@brief</span> setup: Sets up the fixture, for example, opens a network connection.</div><div class=\"line\">     *</div><div class=\"line\">     * This method is called before a test is executed.  </div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setup</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;pscase = <span class=\"keyword\">new</span> PsCase();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * <span class=\"doctag\">@brief</span> teardown: Tears down the fixture, for example, closes a network connection.</div><div class=\"line\">     * </div><div class=\"line\">     * This method is called after a test is executed.</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">teardown</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * <span class=\"doctag\">@brief</span> : 测试config文件的获取</div><div class=\"line\">     *</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testGetConfig</span><span class=\"params\">()</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;assertEquals(<span class=\"keyword\">true</span>,<span class=\"keyword\">$this</span>-&gt;pscase-&gt;debugText(<span class=\"string\">\"11\"</span>));</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure></p>\n<h3 id=\"运行\"><a href=\"#运行\" class=\"headerlink\" title=\"运行\"></a>运行</h3><p>运行方式：phpunit  —bootstrap [源文件] 测试文件<br>具体如下：<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\">cuihuande:newcode cuixiaohuan$ phpunit --bootstrap ./PsCase.php ./PsCaseTest.php</div><div class=\"line\"></div><div class=\"line\">32015<span class=\"string\">-09</span><span class=\"string\">-11</span> 02:09:36:11&lt;br&gt;</div><div class=\"line\">5</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">Time:</span> 116 ms, Memory: 11.75Mb</div><div class=\"line\"></div><div class=\"line\">OK (1 test, 1 assertion)  【表示运行成功】</div></pre></td></tr></table></figure></p>\n<h3 id=\"部署\"><a href=\"#部署\" class=\"headerlink\" title=\"部署\"></a>部署</h3><p>部署就不不赘述了，写个shell脚本，crontab天极运行，加个报警邮件，简单的单元测试ok，从此再也不用担心错误和回归测试了。</p>\n<p><a href=\"http://cuihuan.net/?p=260\"> 个人小站原文链接 </a></p>\n"},{"title":"php 处理unicode解码","date":"2015-11-28T09:21:35.000Z","_content":">备忘：这个算是解码比较靠谱的，亲测。参考自stackoverflow，mark 分享\n\n```\n// change unicode to unt-8\nfunction replace_unicode_escape_sequence($match) {\n    return mb_convert_encoding(pack('H*', $match[1]), 'UTF-8', 'UCS-2BE');\n}\n\nfunction unicode_decode($str) {\n return preg_replace_callback('/u([0-9a-f]{4})/i', 'replace_unicode_escape_sequence', $str); \n}\n\n$str = unicode_decode('{\"u5173u952eu8bcd\":[{\"\",\"key\":\"u767eu5ea6\"}]}');\n```\n问题：使用过程中，遇到一个问题：就是当多次调用改函数的时候，出现错误。原因在于函数名方式调用问题。\n\n如果编码是 \\u5173\\u952e\\u8bcd 正则改为/\\u([0-9a-f]{4})/i 即可\n[ 个人小站原文链接 ](http://cuihuan.net/?p=194)\n\n","source":"_posts/php 处理unicode解码.md","raw":"---\ntitle: php 处理unicode解码 \ndate: 2015-11-28 17:21:35\ntags: \n- unicode\n- php\n---\n>备忘：这个算是解码比较靠谱的，亲测。参考自stackoverflow，mark 分享\n\n```\n// change unicode to unt-8\nfunction replace_unicode_escape_sequence($match) {\n    return mb_convert_encoding(pack('H*', $match[1]), 'UTF-8', 'UCS-2BE');\n}\n\nfunction unicode_decode($str) {\n return preg_replace_callback('/u([0-9a-f]{4})/i', 'replace_unicode_escape_sequence', $str); \n}\n\n$str = unicode_decode('{\"u5173u952eu8bcd\":[{\"\",\"key\":\"u767eu5ea6\"}]}');\n```\n问题：使用过程中，遇到一个问题：就是当多次调用改函数的时候，出现错误。原因在于函数名方式调用问题。\n\n如果编码是 \\u5173\\u952e\\u8bcd 正则改为/\\u([0-9a-f]{4})/i 即可\n[ 个人小站原文链接 ](http://cuihuan.net/?p=194)\n\n","slug":"php 处理unicode解码","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njq000v661faea5fk5z","content":"<blockquote>\n<p>备忘：这个算是解码比较靠谱的，亲测。参考自stackoverflow，mark 分享</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// change unicode to unt-8</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replace_unicode_escape_sequence</span><span class=\"params\">($match)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> mb_convert_encoding(pack(<span class=\"string\">'H*'</span>, $match[<span class=\"number\">1</span>]), <span class=\"string\">'UTF-8'</span>, <span class=\"string\">'UCS-2BE'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unicode_decode</span><span class=\"params\">($str)</span> </span>&#123;</div><div class=\"line\"> <span class=\"keyword\">return</span> preg_replace_callback(<span class=\"string\">'/u([0-9a-f]&#123;4&#125;)/i'</span>, <span class=\"string\">'replace_unicode_escape_sequence'</span>, $str); </div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">$str = unicode_decode(<span class=\"string\">'&#123;\"u5173u952eu8bcd\":[&#123;\"\",\"key\":\"u767eu5ea6\"&#125;]&#125;'</span>);</div></pre></td></tr></table></figure>\n<p>问题：使用过程中，遇到一个问题：就是当多次调用改函数的时候，出现错误。原因在于函数名方式调用问题。</p>\n<p>如果编码是 \\u5173\\u952e\\u8bcd 正则改为/\\u([0-9a-f]{4})/i 即可<br><a href=\"http://cuihuan.net/?p=194\"> 个人小站原文链接 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>备忘：这个算是解码比较靠谱的，亲测。参考自stackoverflow，mark 分享</p>\n</blockquote>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// change unicode to unt-8</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">replace_unicode_escape_sequence</span><span class=\"params\">($match)</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> mb_convert_encoding(pack(<span class=\"string\">'H*'</span>, $match[<span class=\"number\">1</span>]), <span class=\"string\">'UTF-8'</span>, <span class=\"string\">'UCS-2BE'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unicode_decode</span><span class=\"params\">($str)</span> </span>&#123;</div><div class=\"line\"> <span class=\"keyword\">return</span> preg_replace_callback(<span class=\"string\">'/u([0-9a-f]&#123;4&#125;)/i'</span>, <span class=\"string\">'replace_unicode_escape_sequence'</span>, $str); </div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">$str = unicode_decode(<span class=\"string\">'&#123;\"u5173u952eu8bcd\":[&#123;\"\",\"key\":\"u767eu5ea6\"&#125;]&#125;'</span>);</div></pre></td></tr></table></figure>\n<p>问题：使用过程中，遇到一个问题：就是当多次调用改函数的时候，出现错误。原因在于函数名方式调用问题。</p>\n<p>如果编码是 \\u5173\\u952e\\u8bcd 正则改为/\\u([0-9a-f]{4})/i 即可<br><a href=\"http://cuihuan.net/?p=194\"> 个人小站原文链接 </a></p>\n"},{"title":"phpredis单例模式封装","date":"2016-08-08T09:21:35.000Z","_content":"\n> 通过单例模式实现对phpredis连接的封装。\n\n## 直接上代码\n```\n<?php\n\n/**\n * Class RedisConnManager\n *\n * 单例模式对redis实例的操作的进一步封装\n * 主要目的：防止过多的连接，一个页面只能存在一个声明连接\n * \n * @author ：cuihuan\n */\nclass RedisManager\n{\n    private static $redisInstance;\n\n    /**\n     * 私有化构造函数\n     * 原因：防止外界调用构造新的对象\n     */\n    private function __construct(){}\n\n    /**\n     * 获取redis连接的唯一出口\n     */\n    static public function getRedisConn(){\n        if(!self::$redisInstance instanceof self){\n            self::$redisInstance = new self;\n        }\n\n\n        // 获取当前单例\n        $temp = self::$redisInstance;\n        // 调用私有化方法\n        return $temp->connRedis();\n    }\n\n    /**\n     * 连接ocean 上的redis的私有化方法\n     * @return Redis\n     */\n    static private function connRedis()\n    {\n        try {\n            $redis_ocean = new Redis();\n            $redis_ocean->connect(G::$conf['redis-host'], G::$conf['redis-port']);\n            $redis_ocean->auth(G::$conf['redis-pass']);\n\n        }catch (Exception $e){\n            echo $e->getMessage().'<br/>';\n        }\n\n        return $redis_ocean;\n    }\n\n}\n```\n【转载请注明：[phpredis单例模式封装](http://cuihuan.net/?p=527) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","source":"_posts/phpredis单例模式封装.md","raw":"---\ntitle: phpredis单例模式封装 \ndate: 2016-08-08 17:21:35\ntags: \n- redis\n- 单例模式\n- 设计模式\n- php\n---\n\n> 通过单例模式实现对phpredis连接的封装。\n\n## 直接上代码\n```\n<?php\n\n/**\n * Class RedisConnManager\n *\n * 单例模式对redis实例的操作的进一步封装\n * 主要目的：防止过多的连接，一个页面只能存在一个声明连接\n * \n * @author ：cuihuan\n */\nclass RedisManager\n{\n    private static $redisInstance;\n\n    /**\n     * 私有化构造函数\n     * 原因：防止外界调用构造新的对象\n     */\n    private function __construct(){}\n\n    /**\n     * 获取redis连接的唯一出口\n     */\n    static public function getRedisConn(){\n        if(!self::$redisInstance instanceof self){\n            self::$redisInstance = new self;\n        }\n\n\n        // 获取当前单例\n        $temp = self::$redisInstance;\n        // 调用私有化方法\n        return $temp->connRedis();\n    }\n\n    /**\n     * 连接ocean 上的redis的私有化方法\n     * @return Redis\n     */\n    static private function connRedis()\n    {\n        try {\n            $redis_ocean = new Redis();\n            $redis_ocean->connect(G::$conf['redis-host'], G::$conf['redis-port']);\n            $redis_ocean->auth(G::$conf['redis-pass']);\n\n        }catch (Exception $e){\n            echo $e->getMessage().'<br/>';\n        }\n\n        return $redis_ocean;\n    }\n\n}\n```\n【转载请注明：[phpredis单例模式封装](http://cuihuan.net/?p=527) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","slug":"phpredis单例模式封装","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nju000x661fw15p58jq","content":"<blockquote>\n<p>通过单例模式实现对phpredis连接的封装。</p>\n</blockquote>\n<h2 id=\"直接上代码\"><a href=\"#直接上代码\" class=\"headerlink\" title=\"直接上代码\"></a>直接上代码</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Class RedisConnManager</div><div class=\"line\"> *</div><div class=\"line\"> * 单例模式对redis实例的操作的进一步封装</div><div class=\"line\"> * 主要目的：防止过多的连接，一个页面只能存在一个声明连接</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@author</span> ：cuihuan</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedisManager</span></span></div><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> $redisInstance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 私有化构造函数</div><div class=\"line\">     * 原因：防止外界调用构造新的对象</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 获取redis连接的唯一出口</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRedisConn</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(!<span class=\"keyword\">self</span>::$redisInstance <span class=\"keyword\">instanceof</span> <span class=\"keyword\">self</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">self</span>::$redisInstance = <span class=\"keyword\">new</span> <span class=\"keyword\">self</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 获取当前单例</span></div><div class=\"line\">        $temp = <span class=\"keyword\">self</span>::$redisInstance;</div><div class=\"line\">        <span class=\"comment\">// 调用私有化方法</span></div><div class=\"line\">        <span class=\"keyword\">return</span> $temp-&gt;connRedis();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 连接ocean 上的redis的私有化方法</div><div class=\"line\">     * <span class=\"doctag\">@return</span> Redis</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">connRedis</span><span class=\"params\">()</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            $redis_ocean = <span class=\"keyword\">new</span> Redis();</div><div class=\"line\">            $redis_ocean-&gt;connect(G::$conf[<span class=\"string\">'redis-host'</span>], G::$conf[<span class=\"string\">'redis-port'</span>]);</div><div class=\"line\">            $redis_ocean-&gt;auth(G::$conf[<span class=\"string\">'redis-pass'</span>]);</div><div class=\"line\"></div><div class=\"line\">        &#125;<span class=\"keyword\">catch</span> (<span class=\"keyword\">Exception</span> $e)&#123;</div><div class=\"line\">            <span class=\"keyword\">echo</span> $e-&gt;getMessage().<span class=\"string\">'&lt;br/&gt;'</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> $redis_ocean;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>【转载请注明：<a href=\"http://cuihuan.net/?p=527\">phpredis单例模式封装</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>通过单例模式实现对phpredis连接的封装。</p>\n</blockquote>\n<h2 id=\"直接上代码\"><a href=\"#直接上代码\" class=\"headerlink\" title=\"直接上代码\"></a>直接上代码</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * Class RedisConnManager</div><div class=\"line\"> *</div><div class=\"line\"> * 单例模式对redis实例的操作的进一步封装</div><div class=\"line\"> * 主要目的：防止过多的连接，一个页面只能存在一个声明连接</div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@author</span> ：cuihuan</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedisManager</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> $redisInstance;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 私有化构造函数</div><div class=\"line\">     * 原因：防止外界调用构造新的对象</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">()</span></span>&#123;&#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 获取redis连接的唯一出口</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRedisConn</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(!<span class=\"keyword\">self</span>::$redisInstance <span class=\"keyword\">instanceof</span> <span class=\"keyword\">self</span>)&#123;</div><div class=\"line\">            <span class=\"keyword\">self</span>::$redisInstance = <span class=\"keyword\">new</span> <span class=\"keyword\">self</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 获取当前单例</span></div><div class=\"line\">        $temp = <span class=\"keyword\">self</span>::$redisInstance;</div><div class=\"line\">        <span class=\"comment\">// 调用私有化方法</span></div><div class=\"line\">        <span class=\"keyword\">return</span> $temp-&gt;connRedis();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 连接ocean 上的redis的私有化方法</div><div class=\"line\">     * <span class=\"doctag\">@return</span> Redis</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">connRedis</span><span class=\"params\">()</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">            $redis_ocean = <span class=\"keyword\">new</span> Redis();</div><div class=\"line\">            $redis_ocean-&gt;connect(G::$conf[<span class=\"string\">'redis-host'</span>], G::$conf[<span class=\"string\">'redis-port'</span>]);</div><div class=\"line\">            $redis_ocean-&gt;auth(G::$conf[<span class=\"string\">'redis-pass'</span>]);</div><div class=\"line\"></div><div class=\"line\">        &#125;<span class=\"keyword\">catch</span> (<span class=\"keyword\">Exception</span> $e)&#123;</div><div class=\"line\">            <span class=\"keyword\">echo</span> $e-&gt;getMessage().<span class=\"string\">'&lt;br/&gt;'</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">return</span> $redis_ocean;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure>\n<p>【转载请注明：<a href=\"http://cuihuan.net/?p=527\">phpredis单例模式封装</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"【nginx学习一】基本原理学习","date":"2017-03-14T15:21:35.000Z","_content":"> 由于性能问题，需要将 apache + php5.2 升级到 nginx + php7，对于nginx的性能和热加载早有耳闻，why nginx so diao。小拽进行了初探，`有任何疑问或不准确的地方，欢迎直接开炮`！！！\n\n## 一、nginx现状\nnginx 是当前的`使用最广泛的webserver ,支持http正向/反向代理，支持TCP/UDP层代理`，来看下netcraft的数据\n\n\n[![webserver_all](http://cuihuan.net/wp_content/new/nginx1/nginx_trend_all.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_trend_all.png)\n[![webserver_top](http://cuihuan.net/wp_content/new/nginx1/nginx_trend_top.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_trend_top.png)\n\nnginx在`全部网站中占比达到18%`，在`top millon busest 达到28%`，而且一直在增加。当下最时尚的webserver非nginx莫属\n>更全数据可以参考：[【netcraft】](https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html)\n\n## 二、nginx的特点\n深入了解nginx之前，先泛泛的了解下nginx的几个特点\n- 性能好\n - 非阻塞IO/高并发,支持文件IO\n - 多worker，thread pool \n - 基于rbtree的定时器\n - 系统特性的持续支持\n- 功能强大\n - webserver/cache/keepalive/pipeline等等\n - 各种upstream的支持【fastcgi/http/...】\n - 输出灵活【chunk/zip/...】\n - 在不断的发展 http2,tcp,udp,proxy...\n- 运维的友好【这个对于开发和部署很重要】\n - 配置非常规范【个人认为：约定及规范是最好的实践】\n - 热加载和热更新【后文会详细介绍，能在二进制的层面热更新】\n - 日志强大【真的很强的，很多变量支撑】\n- 扩展强大\n\n下图是nginx、apache和lighttpd的一个对比。系统压力，内存占用，upstream支持等多个方面都非常不错\n[![nginx对比图](http://cuihuan.net/wp_content/new/nginx1/nginx_compare.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_compare.png)\n\n## 三、nginx的核心机制\n\n### 3.1 运行方式\n一句话简述nginx的运行方式：`master-worker多进程模式运行，单线程/非阻塞执行`\n\n如下官方图：nginx 启动后生成master，master会启动conf数量的`worker进程`，当用户的请求过来之后，由不同的worker调起`执行线程`，非阻塞的执行请求。这种运行方式相对于`apache的进程执行`相对轻量很多，支撑的并发性也会高很多。\n[![nginx 基本框架](http://cuihuan.net/wp_content/new/nginx1/nginx_framework.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_framework.png)\n\n\n### 3.2 进程管理\nnginx是master-worker进程工作模式，那么nginx是如何管理master启程，怎么做到热加载的？\n#### 3.2.1 配置热加载\n官方图很赞，在`更换配置之后，master生成新的worker，直到原有的worker全部任务结束kill掉之后`。从现象上作证，也就是在relaod配置之后，短时间可能出现超过conf数量的进程，更新完成后，进程会完全改变。\n> 不更新、直接替换，这种设计思路在代码部署中也很常见，包括mysql迁移，代码更新，服务尝试，很值的学习。\n[![nginx 配置热加载](http://cuihuan.net/wp_content/new/nginx1/nginx_conf_reload.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_conf_reload.png)\n\n#### 3.2.2 版本更新热加载\n了解了worker的热加载之后，理解master就非常简单了，通过信号控制，同时存在两个master，逐步替代。\n[![nginx 线程热加载](http://cuihuan.net/wp_content/new/nginx1/nginx_bit_reload.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_bit_reload.png)\n\n关于replace过程中如何细节控制一致性，稳定性，信号控制，log控制等等，敬请期待小拽的进一步探索！\n\n### 3.3 处理流程和模块\n启动进程后，请求在nginx内部是如何流转的，nginx内部包括哪些模块？\n\n#### 3.3.1 worker处理过程\n\n 1. 【post header】请求到达后首先读取header，log中request time初始时间便从此开始。\n 2. 【rewrite】请求相关的配置和参数\n 3. 【pre-access】预处理阶段，频率控制，高频绝句\n 4. 【acess】权限控制，白名单，403，access deny ，静态文件开放等均有这个模块产生\n 5. 【content】这个模块会调用upstream产生内容，这个阶段最重要`此处调起了工作线程，调用fastcgi，http，以及各种操作产生内容均在此处`。性能优化可能需要确认程序执行时间，对应access log中的upstream time 由此产生，记录了nginx中程序运行的全量时间，而request - upstream 就是网络传输和预处理时间。\n 6. 【filter】内容过滤，包括gzip压缩，返回等在此处\n 7. 【log】日志的产生\n 8. 【重定向】`没有这个模块，所有的进行智能单向走，有了这个，在任何阶段都可以产生返回`，例如client主动阶段产生499的log，过程可能就是1-》2-》8-》7 over\n\n> 摘自某ppt的一个图，如侵权，请尽快联系小拽\n[![nginx 主要流程和模块](http://cuihuan.net/wp_content/new/nginx1/nginx_flow.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_flow.png)\n\n各个阶段的主要状态机可以参考:[【跳转】](http://www.nginxguts.com/2011/01/phases/)\n\n### 3.4 请求管理\n了解了worker的工作模式和worker的内部主要模块，那么worker是如何管理请求的？\n\n#### 3.4.1 任务调度\n> 官方阐述：It’s well known that NGINX uses `an asynchronous, event‑driven approach to handling connections`. This means that instead of creating another dedicated process or thread for each request (like servers with a traditional architecture), it handles multiple connections and requests in one worker process. To achieve this, NGINX works with sockets in a non‑blocking mode and uses efficient methods such as epoll and kqueue.\n核心词：`异步，事件驱动，链接控制`\n\n解释的很清楚，`nginx并不是通过每个请求都创建线程，而是通过内部管理的调度分配`。\n如下图：此处不翻译了，大家直接看原版\nepoll详解：[【跳转】](http://man7.org/linux/man-pages/man7/epoll.7.html)\n\n[![nginx 任务基本框架](http://cuihuan.net/wp_content/new/nginx1/nginx_task.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_task.png)\n\n#### 3.4.2 线程池\n\n官方说明\n>Let’s return to our poor sales assistant who delivers goods from a faraway warehouse. But he has become smarter (or maybe he became smarter after being beaten by the crowd of angry clients?) and hired a delivery service. Now when somebody asks for something from the faraway warehouse, instead of going to the warehouse himself, he just drops an order to a delivery service and they will handle the order while our sales assistant will continue serving other customers. Thus only those clients whose goods aren’t in the store are waiting for delivery, while others can be served immediately.\n\n小拽认为简而言之：`结合实际情况，除了空闲被动给，更多的通过事件驱动主动要`，通过这种方式在执行资源紧缺的情况下，达到一个执行资源的优化部署，如下图。\n[![nginx 任务基本框架](http://cuihuan.net/wp_content/new/nginx1/nginx_task2.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_task2.png)\n线程池官网详解：[【跳转】](https://www.nginx.com/blog/thread-pools-boost-performance-9x/)\n#### 3.4.3 事件调度\n\n请求的具体调度基于事件，例如网络IO,磁盘IO,定时器等均可以对事件进行阻塞，当阻塞的事件空闲时，发出调度请求，完成处理。\n需要额外提一下，`nginx的定时器基于rbtree，红黑树的快速插入和查询保证了nginx事件调度的高效性`\n事件框架的处理模型\n[![nginx 事件](http://cuihuan.net/wp_content/new/nginx1/nginx_event_.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_event_.png)\n[![nginx epoll](http://cuihuan.net/wp_content/new/nginx1/nginx_epoll.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_epoll.png)\n\n## 四、简单总结\n- 性能：nginx 工作模式是master-worker进程方式，执行请求是有更轻量线程完成。\n- 热加载：nginx 替换非更新的方式是nginx热加载的本质\n- 功能强大：nginx upstream是在线程层面调度，兼容多种，所以可以扩展很多功能强大\n- 处理流程：主要的流程过程和模块分离清晰。\n- 请求处理：通过自身的管理，线程池，异步事件驱动等当来完成任务调度\n\n再次强调：初探nginx，有疑问或不准确的地方，请直接开炮！！！\n\n## 五、参考文章\n- netcraft：https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html\n- nginx的线程调度设计：https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/\n- epoll详述：http://man7.org/linux/man-pages/man7/epoll.7.html\n- http://yaocoder.blog.51cto.com/2668309/888374\n- 线程池：https://www.nginx.com/blog/thread-pools-boost-performance-9x/\n\n\n【转载请注明：[【【nginx学习一】基本原理学习 ](http://cuihuan.net/2017/03/14/nginx_study_1/) | [靠谱崔小拽](http://cuihuan.net) 】\n","source":"_posts/nginx_study_1.md","raw":"---\ntitle: 【nginx学习一】基本原理学习 \ndate: 2017-03-14 23:21:35\ntags: \n- nginx\n- 基本原理\n---\n> 由于性能问题，需要将 apache + php5.2 升级到 nginx + php7，对于nginx的性能和热加载早有耳闻，why nginx so diao。小拽进行了初探，`有任何疑问或不准确的地方，欢迎直接开炮`！！！\n\n## 一、nginx现状\nnginx 是当前的`使用最广泛的webserver ,支持http正向/反向代理，支持TCP/UDP层代理`，来看下netcraft的数据\n\n\n[![webserver_all](http://cuihuan.net/wp_content/new/nginx1/nginx_trend_all.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_trend_all.png)\n[![webserver_top](http://cuihuan.net/wp_content/new/nginx1/nginx_trend_top.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_trend_top.png)\n\nnginx在`全部网站中占比达到18%`，在`top millon busest 达到28%`，而且一直在增加。当下最时尚的webserver非nginx莫属\n>更全数据可以参考：[【netcraft】](https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html)\n\n## 二、nginx的特点\n深入了解nginx之前，先泛泛的了解下nginx的几个特点\n- 性能好\n - 非阻塞IO/高并发,支持文件IO\n - 多worker，thread pool \n - 基于rbtree的定时器\n - 系统特性的持续支持\n- 功能强大\n - webserver/cache/keepalive/pipeline等等\n - 各种upstream的支持【fastcgi/http/...】\n - 输出灵活【chunk/zip/...】\n - 在不断的发展 http2,tcp,udp,proxy...\n- 运维的友好【这个对于开发和部署很重要】\n - 配置非常规范【个人认为：约定及规范是最好的实践】\n - 热加载和热更新【后文会详细介绍，能在二进制的层面热更新】\n - 日志强大【真的很强的，很多变量支撑】\n- 扩展强大\n\n下图是nginx、apache和lighttpd的一个对比。系统压力，内存占用，upstream支持等多个方面都非常不错\n[![nginx对比图](http://cuihuan.net/wp_content/new/nginx1/nginx_compare.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_compare.png)\n\n## 三、nginx的核心机制\n\n### 3.1 运行方式\n一句话简述nginx的运行方式：`master-worker多进程模式运行，单线程/非阻塞执行`\n\n如下官方图：nginx 启动后生成master，master会启动conf数量的`worker进程`，当用户的请求过来之后，由不同的worker调起`执行线程`，非阻塞的执行请求。这种运行方式相对于`apache的进程执行`相对轻量很多，支撑的并发性也会高很多。\n[![nginx 基本框架](http://cuihuan.net/wp_content/new/nginx1/nginx_framework.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_framework.png)\n\n\n### 3.2 进程管理\nnginx是master-worker进程工作模式，那么nginx是如何管理master启程，怎么做到热加载的？\n#### 3.2.1 配置热加载\n官方图很赞，在`更换配置之后，master生成新的worker，直到原有的worker全部任务结束kill掉之后`。从现象上作证，也就是在relaod配置之后，短时间可能出现超过conf数量的进程，更新完成后，进程会完全改变。\n> 不更新、直接替换，这种设计思路在代码部署中也很常见，包括mysql迁移，代码更新，服务尝试，很值的学习。\n[![nginx 配置热加载](http://cuihuan.net/wp_content/new/nginx1/nginx_conf_reload.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_conf_reload.png)\n\n#### 3.2.2 版本更新热加载\n了解了worker的热加载之后，理解master就非常简单了，通过信号控制，同时存在两个master，逐步替代。\n[![nginx 线程热加载](http://cuihuan.net/wp_content/new/nginx1/nginx_bit_reload.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_bit_reload.png)\n\n关于replace过程中如何细节控制一致性，稳定性，信号控制，log控制等等，敬请期待小拽的进一步探索！\n\n### 3.3 处理流程和模块\n启动进程后，请求在nginx内部是如何流转的，nginx内部包括哪些模块？\n\n#### 3.3.1 worker处理过程\n\n 1. 【post header】请求到达后首先读取header，log中request time初始时间便从此开始。\n 2. 【rewrite】请求相关的配置和参数\n 3. 【pre-access】预处理阶段，频率控制，高频绝句\n 4. 【acess】权限控制，白名单，403，access deny ，静态文件开放等均有这个模块产生\n 5. 【content】这个模块会调用upstream产生内容，这个阶段最重要`此处调起了工作线程，调用fastcgi，http，以及各种操作产生内容均在此处`。性能优化可能需要确认程序执行时间，对应access log中的upstream time 由此产生，记录了nginx中程序运行的全量时间，而request - upstream 就是网络传输和预处理时间。\n 6. 【filter】内容过滤，包括gzip压缩，返回等在此处\n 7. 【log】日志的产生\n 8. 【重定向】`没有这个模块，所有的进行智能单向走，有了这个，在任何阶段都可以产生返回`，例如client主动阶段产生499的log，过程可能就是1-》2-》8-》7 over\n\n> 摘自某ppt的一个图，如侵权，请尽快联系小拽\n[![nginx 主要流程和模块](http://cuihuan.net/wp_content/new/nginx1/nginx_flow.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_flow.png)\n\n各个阶段的主要状态机可以参考:[【跳转】](http://www.nginxguts.com/2011/01/phases/)\n\n### 3.4 请求管理\n了解了worker的工作模式和worker的内部主要模块，那么worker是如何管理请求的？\n\n#### 3.4.1 任务调度\n> 官方阐述：It’s well known that NGINX uses `an asynchronous, event‑driven approach to handling connections`. This means that instead of creating another dedicated process or thread for each request (like servers with a traditional architecture), it handles multiple connections and requests in one worker process. To achieve this, NGINX works with sockets in a non‑blocking mode and uses efficient methods such as epoll and kqueue.\n核心词：`异步，事件驱动，链接控制`\n\n解释的很清楚，`nginx并不是通过每个请求都创建线程，而是通过内部管理的调度分配`。\n如下图：此处不翻译了，大家直接看原版\nepoll详解：[【跳转】](http://man7.org/linux/man-pages/man7/epoll.7.html)\n\n[![nginx 任务基本框架](http://cuihuan.net/wp_content/new/nginx1/nginx_task.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_task.png)\n\n#### 3.4.2 线程池\n\n官方说明\n>Let’s return to our poor sales assistant who delivers goods from a faraway warehouse. But he has become smarter (or maybe he became smarter after being beaten by the crowd of angry clients?) and hired a delivery service. Now when somebody asks for something from the faraway warehouse, instead of going to the warehouse himself, he just drops an order to a delivery service and they will handle the order while our sales assistant will continue serving other customers. Thus only those clients whose goods aren’t in the store are waiting for delivery, while others can be served immediately.\n\n小拽认为简而言之：`结合实际情况，除了空闲被动给，更多的通过事件驱动主动要`，通过这种方式在执行资源紧缺的情况下，达到一个执行资源的优化部署，如下图。\n[![nginx 任务基本框架](http://cuihuan.net/wp_content/new/nginx1/nginx_task2.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_task2.png)\n线程池官网详解：[【跳转】](https://www.nginx.com/blog/thread-pools-boost-performance-9x/)\n#### 3.4.3 事件调度\n\n请求的具体调度基于事件，例如网络IO,磁盘IO,定时器等均可以对事件进行阻塞，当阻塞的事件空闲时，发出调度请求，完成处理。\n需要额外提一下，`nginx的定时器基于rbtree，红黑树的快速插入和查询保证了nginx事件调度的高效性`\n事件框架的处理模型\n[![nginx 事件](http://cuihuan.net/wp_content/new/nginx1/nginx_event_.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_event_.png)\n[![nginx epoll](http://cuihuan.net/wp_content/new/nginx1/nginx_epoll.png)](http://cuihuan.net/wp_content/new/nginx1/nginx_epoll.png)\n\n## 四、简单总结\n- 性能：nginx 工作模式是master-worker进程方式，执行请求是有更轻量线程完成。\n- 热加载：nginx 替换非更新的方式是nginx热加载的本质\n- 功能强大：nginx upstream是在线程层面调度，兼容多种，所以可以扩展很多功能强大\n- 处理流程：主要的流程过程和模块分离清晰。\n- 请求处理：通过自身的管理，线程池，异步事件驱动等当来完成任务调度\n\n再次强调：初探nginx，有疑问或不准确的地方，请直接开炮！！！\n\n## 五、参考文章\n- netcraft：https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html\n- nginx的线程调度设计：https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/\n- epoll详述：http://man7.org/linux/man-pages/man7/epoll.7.html\n- http://yaocoder.blog.51cto.com/2668309/888374\n- 线程池：https://www.nginx.com/blog/thread-pools-boost-performance-9x/\n\n\n【转载请注明：[【【nginx学习一】基本原理学习 ](http://cuihuan.net/2017/03/14/nginx_study_1/) | [靠谱崔小拽](http://cuihuan.net) 】\n","slug":"nginx_study_1","published":1,"updated":"2017-06-20T09:13:32.000Z","_id":"cj0af9njx0010661fpc0e4e55","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>由于性能问题，需要将 apache + php5.2 升级到 nginx + php7，对于nginx的性能和热加载早有耳闻，why nginx so diao。小拽进行了初探，<code>有任何疑问或不准确的地方，欢迎直接开炮</code>！！！</p>\n</blockquote>\n<h2 id=\"一、nginx现状\"><a href=\"#一、nginx现状\" class=\"headerlink\" title=\"一、nginx现状\"></a>一、nginx现状</h2><p>nginx 是当前的<code>使用最广泛的webserver ,支持http正向/反向代理，支持TCP/UDP层代理</code>，来看下netcraft的数据</p>\n<p><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_trend_all.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_trend_all.png\" alt=\"webserver_all\"></a><br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_trend_top.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_trend_top.png\" alt=\"webserver_top\"></a></p>\n<p>nginx在<code>全部网站中占比达到18%</code>，在<code>top millon busest 达到28%</code>，而且一直在增加。当下最时尚的webserver非nginx莫属</p>\n<blockquote>\n<p>更全数据可以参考：<a href=\"https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html\" target=\"_blank\" rel=\"external\">【netcraft】</a></p>\n</blockquote>\n<h2 id=\"二、nginx的特点\"><a href=\"#二、nginx的特点\" class=\"headerlink\" title=\"二、nginx的特点\"></a>二、nginx的特点</h2><p>深入了解nginx之前，先泛泛的了解下nginx的几个特点</p>\n<ul>\n<li>性能好<ul>\n<li>非阻塞IO/高并发,支持文件IO</li>\n<li>多worker，thread pool </li>\n<li>基于rbtree的定时器</li>\n<li>系统特性的持续支持</li>\n</ul>\n</li>\n<li>功能强大<ul>\n<li>webserver/cache/keepalive/pipeline等等</li>\n<li>各种upstream的支持【fastcgi/http/…】</li>\n<li>输出灵活【chunk/zip/…】</li>\n<li>在不断的发展 http2,tcp,udp,proxy…</li>\n</ul>\n</li>\n<li>运维的友好【这个对于开发和部署很重要】<ul>\n<li>配置非常规范【个人认为：约定及规范是最好的实践】</li>\n<li>热加载和热更新【后文会详细介绍，能在二进制的层面热更新】</li>\n<li>日志强大【真的很强的，很多变量支撑】</li>\n</ul>\n</li>\n<li>扩展强大</li>\n</ul>\n<p>下图是nginx、apache和lighttpd的一个对比。系统压力，内存占用，upstream支持等多个方面都非常不错<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_compare.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_compare.png\" alt=\"nginx对比图\"></a></p>\n<h2 id=\"三、nginx的核心机制\"><a href=\"#三、nginx的核心机制\" class=\"headerlink\" title=\"三、nginx的核心机制\"></a>三、nginx的核心机制</h2><h3 id=\"3-1-运行方式\"><a href=\"#3-1-运行方式\" class=\"headerlink\" title=\"3.1 运行方式\"></a>3.1 运行方式</h3><p>一句话简述nginx的运行方式：<code>master-worker多进程模式运行，单线程/非阻塞执行</code></p>\n<p>如下官方图：nginx 启动后生成master，master会启动conf数量的<code>worker进程</code>，当用户的请求过来之后，由不同的worker调起<code>执行线程</code>，非阻塞的执行请求。这种运行方式相对于<code>apache的进程执行</code>相对轻量很多，支撑的并发性也会高很多。<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_framework.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_framework.png\" alt=\"nginx 基本框架\"></a></p>\n<h3 id=\"3-2-进程管理\"><a href=\"#3-2-进程管理\" class=\"headerlink\" title=\"3.2 进程管理\"></a>3.2 进程管理</h3><p>nginx是master-worker进程工作模式，那么nginx是如何管理master启程，怎么做到热加载的？</p>\n<h4 id=\"3-2-1-配置热加载\"><a href=\"#3-2-1-配置热加载\" class=\"headerlink\" title=\"3.2.1 配置热加载\"></a>3.2.1 配置热加载</h4><p>官方图很赞，在<code>更换配置之后，master生成新的worker，直到原有的worker全部任务结束kill掉之后</code>。从现象上作证，也就是在relaod配置之后，短时间可能出现超过conf数量的进程，更新完成后，进程会完全改变。</p>\n<blockquote>\n<p>不更新、直接替换，这种设计思路在代码部署中也很常见，包括mysql迁移，代码更新，服务尝试，很值的学习。<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_conf_reload.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_conf_reload.png\" alt=\"nginx 配置热加载\"></a></p>\n</blockquote>\n<h4 id=\"3-2-2-版本更新热加载\"><a href=\"#3-2-2-版本更新热加载\" class=\"headerlink\" title=\"3.2.2 版本更新热加载\"></a>3.2.2 版本更新热加载</h4><p>了解了worker的热加载之后，理解master就非常简单了，通过信号控制，同时存在两个master，逐步替代。<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_bit_reload.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_bit_reload.png\" alt=\"nginx 线程热加载\"></a></p>\n<p>关于replace过程中如何细节控制一致性，稳定性，信号控制，log控制等等，敬请期待小拽的进一步探索！</p>\n<h3 id=\"3-3-处理流程和模块\"><a href=\"#3-3-处理流程和模块\" class=\"headerlink\" title=\"3.3 处理流程和模块\"></a>3.3 处理流程和模块</h3><p>启动进程后，请求在nginx内部是如何流转的，nginx内部包括哪些模块？</p>\n<h4 id=\"3-3-1-worker处理过程\"><a href=\"#3-3-1-worker处理过程\" class=\"headerlink\" title=\"3.3.1 worker处理过程\"></a>3.3.1 worker处理过程</h4><ol>\n<li>【post header】请求到达后首先读取header，log中request time初始时间便从此开始。</li>\n<li>【rewrite】请求相关的配置和参数</li>\n<li>【pre-access】预处理阶段，频率控制，高频绝句</li>\n<li>【acess】权限控制，白名单，403，access deny ，静态文件开放等均有这个模块产生</li>\n<li>【content】这个模块会调用upstream产生内容，这个阶段最重要<code>此处调起了工作线程，调用fastcgi，http，以及各种操作产生内容均在此处</code>。性能优化可能需要确认程序执行时间，对应access log中的upstream time 由此产生，记录了nginx中程序运行的全量时间，而request - upstream 就是网络传输和预处理时间。</li>\n<li>【filter】内容过滤，包括gzip压缩，返回等在此处</li>\n<li>【log】日志的产生</li>\n<li>【重定向】<code>没有这个模块，所有的进行智能单向走，有了这个，在任何阶段都可以产生返回</code>，例如client主动阶段产生499的log，过程可能就是1-》2-》8-》7 over</li>\n</ol>\n<blockquote>\n<p>摘自某ppt的一个图，如侵权，请尽快联系小拽<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_flow.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_flow.png\" alt=\"nginx 主要流程和模块\"></a></p>\n</blockquote>\n<p>各个阶段的主要状态机可以参考:<a href=\"http://www.nginxguts.com/2011/01/phases/\" target=\"_blank\" rel=\"external\">【跳转】</a></p>\n<h3 id=\"3-4-请求管理\"><a href=\"#3-4-请求管理\" class=\"headerlink\" title=\"3.4 请求管理\"></a>3.4 请求管理</h3><p>了解了worker的工作模式和worker的内部主要模块，那么worker是如何管理请求的？</p>\n<h4 id=\"3-4-1-任务调度\"><a href=\"#3-4-1-任务调度\" class=\"headerlink\" title=\"3.4.1 任务调度\"></a>3.4.1 任务调度</h4><blockquote>\n<p>官方阐述：It’s well known that NGINX uses <code>an asynchronous, event‑driven approach to handling connections</code>. This means that instead of creating another dedicated process or thread for each request (like servers with a traditional architecture), it handles multiple connections and requests in one worker process. To achieve this, NGINX works with sockets in a non‑blocking mode and uses efficient methods such as epoll and kqueue.<br>核心词：<code>异步，事件驱动，链接控制</code></p>\n</blockquote>\n<p>解释的很清楚，<code>nginx并不是通过每个请求都创建线程，而是通过内部管理的调度分配</code>。<br>如下图：此处不翻译了，大家直接看原版<br>epoll详解：<a href=\"http://man7.org/linux/man-pages/man7/epoll.7.html\" target=\"_blank\" rel=\"external\">【跳转】</a></p>\n<p><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_task.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_task.png\" alt=\"nginx 任务基本框架\"></a></p>\n<h4 id=\"3-4-2-线程池\"><a href=\"#3-4-2-线程池\" class=\"headerlink\" title=\"3.4.2 线程池\"></a>3.4.2 线程池</h4><p>官方说明</p>\n<blockquote>\n<p>Let’s return to our poor sales assistant who delivers goods from a faraway warehouse. But he has become smarter (or maybe he became smarter after being beaten by the crowd of angry clients?) and hired a delivery service. Now when somebody asks for something from the faraway warehouse, instead of going to the warehouse himself, he just drops an order to a delivery service and they will handle the order while our sales assistant will continue serving other customers. Thus only those clients whose goods aren’t in the store are waiting for delivery, while others can be served immediately.</p>\n</blockquote>\n<p>小拽认为简而言之：<code>结合实际情况，除了空闲被动给，更多的通过事件驱动主动要</code>，通过这种方式在执行资源紧缺的情况下，达到一个执行资源的优化部署，如下图。<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_task2.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_task2.png\" alt=\"nginx 任务基本框架\"></a><br>线程池官网详解：<a href=\"https://www.nginx.com/blog/thread-pools-boost-performance-9x/\" target=\"_blank\" rel=\"external\">【跳转】</a></p>\n<h4 id=\"3-4-3-事件调度\"><a href=\"#3-4-3-事件调度\" class=\"headerlink\" title=\"3.4.3 事件调度\"></a>3.4.3 事件调度</h4><p>请求的具体调度基于事件，例如网络IO,磁盘IO,定时器等均可以对事件进行阻塞，当阻塞的事件空闲时，发出调度请求，完成处理。<br>需要额外提一下，<code>nginx的定时器基于rbtree，红黑树的快速插入和查询保证了nginx事件调度的高效性</code><br>事件框架的处理模型<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_event_.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_event_.png\" alt=\"nginx 事件\"></a><br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_epoll.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_epoll.png\" alt=\"nginx epoll\"></a></p>\n<h2 id=\"四、简单总结\"><a href=\"#四、简单总结\" class=\"headerlink\" title=\"四、简单总结\"></a>四、简单总结</h2><ul>\n<li>性能：nginx 工作模式是master-worker进程方式，执行请求是有更轻量线程完成。</li>\n<li>热加载：nginx 替换非更新的方式是nginx热加载的本质</li>\n<li>功能强大：nginx upstream是在线程层面调度，兼容多种，所以可以扩展很多功能强大</li>\n<li>处理流程：主要的流程过程和模块分离清晰。</li>\n<li>请求处理：通过自身的管理，线程池，异步事件驱动等当来完成任务调度</li>\n</ul>\n<p>再次强调：初探nginx，有疑问或不准确的地方，请直接开炮！！！</p>\n<h2 id=\"五、参考文章\"><a href=\"#五、参考文章\" class=\"headerlink\" title=\"五、参考文章\"></a>五、参考文章</h2><ul>\n<li>netcraft：<a href=\"https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html\" target=\"_blank\" rel=\"external\">https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html</a></li>\n<li>nginx的线程调度设计：<a href=\"https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/\" target=\"_blank\" rel=\"external\">https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/</a></li>\n<li>epoll详述：<a href=\"http://man7.org/linux/man-pages/man7/epoll.7.html\" target=\"_blank\" rel=\"external\">http://man7.org/linux/man-pages/man7/epoll.7.html</a></li>\n<li><a href=\"http://yaocoder.blog.51cto.com/2668309/888374\" target=\"_blank\" rel=\"external\">http://yaocoder.blog.51cto.com/2668309/888374</a></li>\n<li>线程池：<a href=\"https://www.nginx.com/blog/thread-pools-boost-performance-9x/\" target=\"_blank\" rel=\"external\">https://www.nginx.com/blog/thread-pools-boost-performance-9x/</a></li>\n</ul>\n<p>【转载请注明：<a href=\"http://cuihuan.net/2017/03/14/nginx_study_1/\">【【nginx学习一】基本原理学习 </a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>由于性能问题，需要将 apache + php5.2 升级到 nginx + php7，对于nginx的性能和热加载早有耳闻，why nginx so diao。小拽进行了初探，<code>有任何疑问或不准确的地方，欢迎直接开炮</code>！！！</p>\n</blockquote>\n<h2 id=\"一、nginx现状\"><a href=\"#一、nginx现状\" class=\"headerlink\" title=\"一、nginx现状\"></a>一、nginx现状</h2><p>nginx 是当前的<code>使用最广泛的webserver ,支持http正向/反向代理，支持TCP/UDP层代理</code>，来看下netcraft的数据</p>\n<p><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_trend_all.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_trend_all.png\" alt=\"webserver_all\"></a><br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_trend_top.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_trend_top.png\" alt=\"webserver_top\"></a></p>\n<p>nginx在<code>全部网站中占比达到18%</code>，在<code>top millon busest 达到28%</code>，而且一直在增加。当下最时尚的webserver非nginx莫属</p>\n<blockquote>\n<p>更全数据可以参考：<a href=\"https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html\">【netcraft】</a></p>\n</blockquote>\n<h2 id=\"二、nginx的特点\"><a href=\"#二、nginx的特点\" class=\"headerlink\" title=\"二、nginx的特点\"></a>二、nginx的特点</h2><p>深入了解nginx之前，先泛泛的了解下nginx的几个特点</p>\n<ul>\n<li>性能好<ul>\n<li>非阻塞IO/高并发,支持文件IO</li>\n<li>多worker，thread pool </li>\n<li>基于rbtree的定时器</li>\n<li>系统特性的持续支持</li>\n</ul>\n</li>\n<li>功能强大<ul>\n<li>webserver/cache/keepalive/pipeline等等</li>\n<li>各种upstream的支持【fastcgi/http/…】</li>\n<li>输出灵活【chunk/zip/…】</li>\n<li>在不断的发展 http2,tcp,udp,proxy…</li>\n</ul>\n</li>\n<li>运维的友好【这个对于开发和部署很重要】<ul>\n<li>配置非常规范【个人认为：约定及规范是最好的实践】</li>\n<li>热加载和热更新【后文会详细介绍，能在二进制的层面热更新】</li>\n<li>日志强大【真的很强的，很多变量支撑】</li>\n</ul>\n</li>\n<li>扩展强大</li>\n</ul>\n<p>下图是nginx、apache和lighttpd的一个对比。系统压力，内存占用，upstream支持等多个方面都非常不错<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_compare.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_compare.png\" alt=\"nginx对比图\"></a></p>\n<h2 id=\"三、nginx的核心机制\"><a href=\"#三、nginx的核心机制\" class=\"headerlink\" title=\"三、nginx的核心机制\"></a>三、nginx的核心机制</h2><h3 id=\"3-1-运行方式\"><a href=\"#3-1-运行方式\" class=\"headerlink\" title=\"3.1 运行方式\"></a>3.1 运行方式</h3><p>一句话简述nginx的运行方式：<code>master-worker多进程模式运行，单线程/非阻塞执行</code></p>\n<p>如下官方图：nginx 启动后生成master，master会启动conf数量的<code>worker进程</code>，当用户的请求过来之后，由不同的worker调起<code>执行线程</code>，非阻塞的执行请求。这种运行方式相对于<code>apache的进程执行</code>相对轻量很多，支撑的并发性也会高很多。<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_framework.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_framework.png\" alt=\"nginx 基本框架\"></a></p>\n<h3 id=\"3-2-进程管理\"><a href=\"#3-2-进程管理\" class=\"headerlink\" title=\"3.2 进程管理\"></a>3.2 进程管理</h3><p>nginx是master-worker进程工作模式，那么nginx是如何管理master启程，怎么做到热加载的？</p>\n<h4 id=\"3-2-1-配置热加载\"><a href=\"#3-2-1-配置热加载\" class=\"headerlink\" title=\"3.2.1 配置热加载\"></a>3.2.1 配置热加载</h4><p>官方图很赞，在<code>更换配置之后，master生成新的worker，直到原有的worker全部任务结束kill掉之后</code>。从现象上作证，也就是在relaod配置之后，短时间可能出现超过conf数量的进程，更新完成后，进程会完全改变。</p>\n<blockquote>\n<p>不更新、直接替换，这种设计思路在代码部署中也很常见，包括mysql迁移，代码更新，服务尝试，很值的学习。<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_conf_reload.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_conf_reload.png\" alt=\"nginx 配置热加载\"></a></p>\n</blockquote>\n<h4 id=\"3-2-2-版本更新热加载\"><a href=\"#3-2-2-版本更新热加载\" class=\"headerlink\" title=\"3.2.2 版本更新热加载\"></a>3.2.2 版本更新热加载</h4><p>了解了worker的热加载之后，理解master就非常简单了，通过信号控制，同时存在两个master，逐步替代。<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_bit_reload.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_bit_reload.png\" alt=\"nginx 线程热加载\"></a></p>\n<p>关于replace过程中如何细节控制一致性，稳定性，信号控制，log控制等等，敬请期待小拽的进一步探索！</p>\n<h3 id=\"3-3-处理流程和模块\"><a href=\"#3-3-处理流程和模块\" class=\"headerlink\" title=\"3.3 处理流程和模块\"></a>3.3 处理流程和模块</h3><p>启动进程后，请求在nginx内部是如何流转的，nginx内部包括哪些模块？</p>\n<h4 id=\"3-3-1-worker处理过程\"><a href=\"#3-3-1-worker处理过程\" class=\"headerlink\" title=\"3.3.1 worker处理过程\"></a>3.3.1 worker处理过程</h4><ol>\n<li>【post header】请求到达后首先读取header，log中request time初始时间便从此开始。</li>\n<li>【rewrite】请求相关的配置和参数</li>\n<li>【pre-access】预处理阶段，频率控制，高频绝句</li>\n<li>【acess】权限控制，白名单，403，access deny ，静态文件开放等均有这个模块产生</li>\n<li>【content】这个模块会调用upstream产生内容，这个阶段最重要<code>此处调起了工作线程，调用fastcgi，http，以及各种操作产生内容均在此处</code>。性能优化可能需要确认程序执行时间，对应access log中的upstream time 由此产生，记录了nginx中程序运行的全量时间，而request - upstream 就是网络传输和预处理时间。</li>\n<li>【filter】内容过滤，包括gzip压缩，返回等在此处</li>\n<li>【log】日志的产生</li>\n<li>【重定向】<code>没有这个模块，所有的进行智能单向走，有了这个，在任何阶段都可以产生返回</code>，例如client主动阶段产生499的log，过程可能就是1-》2-》8-》7 over</li>\n</ol>\n<blockquote>\n<p>摘自某ppt的一个图，如侵权，请尽快联系小拽<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_flow.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_flow.png\" alt=\"nginx 主要流程和模块\"></a></p>\n</blockquote>\n<p>各个阶段的主要状态机可以参考:<a href=\"http://www.nginxguts.com/2011/01/phases/\">【跳转】</a></p>\n<h3 id=\"3-4-请求管理\"><a href=\"#3-4-请求管理\" class=\"headerlink\" title=\"3.4 请求管理\"></a>3.4 请求管理</h3><p>了解了worker的工作模式和worker的内部主要模块，那么worker是如何管理请求的？</p>\n<h4 id=\"3-4-1-任务调度\"><a href=\"#3-4-1-任务调度\" class=\"headerlink\" title=\"3.4.1 任务调度\"></a>3.4.1 任务调度</h4><blockquote>\n<p>官方阐述：It’s well known that NGINX uses <code>an asynchronous, event‑driven approach to handling connections</code>. This means that instead of creating another dedicated process or thread for each request (like servers with a traditional architecture), it handles multiple connections and requests in one worker process. To achieve this, NGINX works with sockets in a non‑blocking mode and uses efficient methods such as epoll and kqueue.<br>核心词：<code>异步，事件驱动，链接控制</code></p>\n</blockquote>\n<p>解释的很清楚，<code>nginx并不是通过每个请求都创建线程，而是通过内部管理的调度分配</code>。<br>如下图：此处不翻译了，大家直接看原版<br>epoll详解：<a href=\"http://man7.org/linux/man-pages/man7/epoll.7.html\">【跳转】</a></p>\n<p><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_task.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_task.png\" alt=\"nginx 任务基本框架\"></a></p>\n<h4 id=\"3-4-2-线程池\"><a href=\"#3-4-2-线程池\" class=\"headerlink\" title=\"3.4.2 线程池\"></a>3.4.2 线程池</h4><p>官方说明</p>\n<blockquote>\n<p>Let’s return to our poor sales assistant who delivers goods from a faraway warehouse. But he has become smarter (or maybe he became smarter after being beaten by the crowd of angry clients?) and hired a delivery service. Now when somebody asks for something from the faraway warehouse, instead of going to the warehouse himself, he just drops an order to a delivery service and they will handle the order while our sales assistant will continue serving other customers. Thus only those clients whose goods aren’t in the store are waiting for delivery, while others can be served immediately.</p>\n</blockquote>\n<p>小拽认为简而言之：<code>结合实际情况，除了空闲被动给，更多的通过事件驱动主动要</code>，通过这种方式在执行资源紧缺的情况下，达到一个执行资源的优化部署，如下图。<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_task2.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_task2.png\" alt=\"nginx 任务基本框架\"></a><br>线程池官网详解：<a href=\"https://www.nginx.com/blog/thread-pools-boost-performance-9x/\">【跳转】</a></p>\n<h4 id=\"3-4-3-事件调度\"><a href=\"#3-4-3-事件调度\" class=\"headerlink\" title=\"3.4.3 事件调度\"></a>3.4.3 事件调度</h4><p>请求的具体调度基于事件，例如网络IO,磁盘IO,定时器等均可以对事件进行阻塞，当阻塞的事件空闲时，发出调度请求，完成处理。<br>需要额外提一下，<code>nginx的定时器基于rbtree，红黑树的快速插入和查询保证了nginx事件调度的高效性</code><br>事件框架的处理模型<br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_event_.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_event_.png\" alt=\"nginx 事件\"></a><br><a href=\"http://cuihuan.net/wp_content/new/nginx1/nginx_epoll.png\"><img src=\"http://cuihuan.net/wp_content/new/nginx1/nginx_epoll.png\" alt=\"nginx epoll\"></a></p>\n<h2 id=\"四、简单总结\"><a href=\"#四、简单总结\" class=\"headerlink\" title=\"四、简单总结\"></a>四、简单总结</h2><ul>\n<li>性能：nginx 工作模式是master-worker进程方式，执行请求是有更轻量线程完成。</li>\n<li>热加载：nginx 替换非更新的方式是nginx热加载的本质</li>\n<li>功能强大：nginx upstream是在线程层面调度，兼容多种，所以可以扩展很多功能强大</li>\n<li>处理流程：主要的流程过程和模块分离清晰。</li>\n<li>请求处理：通过自身的管理，线程池，异步事件驱动等当来完成任务调度</li>\n</ul>\n<p>再次强调：初探nginx，有疑问或不准确的地方，请直接开炮！！！</p>\n<h2 id=\"五、参考文章\"><a href=\"#五、参考文章\" class=\"headerlink\" title=\"五、参考文章\"></a>五、参考文章</h2><ul>\n<li>netcraft：<a href=\"https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html\">https://news.netcraft.com/archives/2017/01/12/january-2017-web-server-survey.html</a></li>\n<li>nginx的线程调度设计：<a href=\"https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/\">https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/</a></li>\n<li>epoll详述：<a href=\"http://man7.org/linux/man-pages/man7/epoll.7.html\">http://man7.org/linux/man-pages/man7/epoll.7.html</a></li>\n<li><a href=\"http://yaocoder.blog.51cto.com/2668309/888374\">http://yaocoder.blog.51cto.com/2668309/888374</a></li>\n<li>线程池：<a href=\"https://www.nginx.com/blog/thread-pools-boost-performance-9x/\">https://www.nginx.com/blog/thread-pools-boost-performance-9x/</a></li>\n</ul>\n<p>【转载请注明：<a href=\"http://cuihuan.net/2017/03/14/nginx_study_1/\">【【nginx学习一】基本原理学习 </a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"postMessage处理iframe 跨域问题","date":"2016-02-29T09:21:35.000Z","_content":"\n> 背景：由于同源策略存在，javascript的跨域一直都是一个棘手的问题。`父页面无法直接获取iframe内部的跨域资源；同时，iframe内部的跨域资源也无法将信息直接传递给父页面`。\n\n## 一：传统的解决方式。\n传统的iframe资源解决方式：主要通过通过中间页面代理，此处不再赘述，参考[中间页获取跨域iframe](http://www.cnblogs.com/snandy/p/3900016.html)\n\n## 二：html5 postMessage的产生\n随着HTML5的发展，html5工作组提供了两个重要的接口：`postMessage(send) 和 onmessage`。这两个接口有点类似于websocket，可以实现两个跨域站点页面之间的数据传递。\n\n[postMessage API](https://www.w3.org/TR/websockets/?cm_mc_uid=62901929538214344332551&cm_mc_sid_50200000=1456119382)\n\n下面是实践过程中两个小栗子：分别父页面传递信息给iframe，iframe传递信息给父页面。\n\n## 三：iframe获取父页面信息\n话不多说，直接上码：\n参考demo：[父页面传给子页面demo](http://cuihuan.net:1015/demo_file/postmesage/demo.html)\n### 父页面代码\n```\n<html>\n<head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n    <title>崔涣 iframe postmessage 父页面</title>\n    <script type=\"text/JavaScript\">\n        function sendIt() {\n            // 通过 postMessage 向子窗口发送数据\n            document.getElementById(\"otherPage\").contentWindow\n                    .postMessage(\n                    document.getElementById(\"message\").value,\n                    \"http://cuihuan.net:8003\"\n            );\n        }\n    </script>\n</head>\n<body>\n<!-- 通过 iframe 嵌入子页面 -->\n<iframe src=\"http://cuihuan.net:8003/test.html\" id=\"otherPage\"></iframe>\n<br/>\n<br/>\n<input type=\"text\" id=\"message\"/>\n<input type=\"button\" value=\"Send to child.com\" onclick=\"sendIt()\"/>\n</body>\n</html>\n```\n### 子页面代码\n\n```\n<html> \n <head> \n <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> \n <title>崔涣测试子页面信息</title> \n <script type=\"text/JavaScript\"> \n\t //event 参数中有 data 属性，就是父窗口发送过来的数据\n\t window.addEventListener(\"message\", function( event ) { \n\t\t // 把父窗口发送过来的数据显示在子窗口中\n\t   document.getElementById(\"content\").innerHTML+=event.data+\"<br/>\"; \n\t }, false ); \n\n </script> \n </head> \n <body> \n\t this is the 8003 port for cuixiaozhuai \n\t <div id=\"content\"></div> \n </body> \n </html>\n```\ndemo 效果如下图：两个跨域页面之间，父页面给子页面传递数据。\n[![16743333-E2AF-40E5-8DD2-0CBCE8919C66](http://cuihuan.net/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png)](http://cuihuan.net/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png) \n\n## 四：iframe传递信息给父页面\n\n参考demo：[跨域子页面传给父页面demo](http://cuihuan.net:1015/demo_file/postmesage/son2Parent.html)\n### 父页面代码\n```\n<html>\n <head>\n <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n <title>崔涣测试父页面</title>\n <script type=\"text/JavaScript\">\n     //event 参数中有 data 属性，就是父窗口发送过来的数据\n     window.addEventListener(\"message\", function( event ) {\n         // 把父窗口发送过来的数据显示在子窗口中\n       document.getElementById(\"content\").innerHTML+=event.data+\"<br/>\";\n     }, false );\n\n </script>\n </head>\n <body>\n     <iframe src=\"http://cuihuan.net:8003/iframeSon.html\" id=\"otherPage\"></iframe>\n     <br/>\n     this is the 1015 port for cuixiaozhuai。\n     <div id=\"content\"></div>\n </body>\n </html>\n```\n### 子页面代码\n```\n<html>\n<head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n    <title>崔小涣iframe postmessage 测试页面</title>\n    <script type=\"text/JavaScript\">\n        function sendIt() {\n            // 子页面给父页面传输信息 \n            parent.postMessage(\n                document.getElementById(\"message\").value,\n                \"http://cuihuan.net:1015\"\n            );\n        }\n    </script>\n</head>\n<body>\n<br/>\nthis is the  port for cuixiaozhuai\n<input type=\"text\" id=\"message\"/>\n<input type=\"button\" value=\"Send to child.com\" onclick=\"sendIt()\"/>\n</body>\n</html>\n```\ndemo 效果如下图：两个跨域页面之间，子页面传递数据给父页面传递数据。\n[![22433B4C-8836-4546-93DB-7A896F8B4B37](http://cuihuan.net/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png)](http://cuihuan.net/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png) \n\n## 五：postmessage简单分析和安全问题\n\npostmessage 传送过来的信息如下图，\n[![BABB5101-CD9D-448C-99EE-910334405D3D](http://cuihuan.net/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png)](http://cuihuan.net/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png)\n\n几乎包含了所有应该有的信息。甚至data中可以包含object，出于安全考虑可以域的校验，数据规则的校验安全校验，如下代码\n```\n\n window.addEventListener('message', function (event) {\n        \n        //校验函数是否合法\n        var checkMessage = function () {\n            // 只获取需要的域，并非所有都可以跨域\n            if (event.origin != \"need domain\") {\n                return false;\n            }\n\n            \n            var message = event.data;\n            // 传输数据类型校验\n            if (typeof(message) !== 'object') {\n                return false;\n            }\n\n            // message 的rule中包含xxx则为xxx需要字段。\n            return message.rule === \"xxx\";\n        };\n\n        if (checkMessage()) {\n            // 通过校验进行相关操作\n            addDetailFunc(event);\n        }\n    });\n```\n【转载请注明：[postMessage处理iframe 跨域问题](http://cuihuan.net/article/postmessage%E5%A4%84%E7%90%86iframe-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html) | [靠谱崔小拽](http://cuihuan.net) 】\n \n\n\n","source":"_posts/postMessage处理iframe 跨域问题.md","raw":"---\ntitle: postMessage处理iframe 跨域问题 \ndate: 2016-02-29 17:21:35\ntags: \n- iframe跨域\n- iframe自适应高度\n- iframe\n- javascript\n- html5\n---\n\n> 背景：由于同源策略存在，javascript的跨域一直都是一个棘手的问题。`父页面无法直接获取iframe内部的跨域资源；同时，iframe内部的跨域资源也无法将信息直接传递给父页面`。\n\n## 一：传统的解决方式。\n传统的iframe资源解决方式：主要通过通过中间页面代理，此处不再赘述，参考[中间页获取跨域iframe](http://www.cnblogs.com/snandy/p/3900016.html)\n\n## 二：html5 postMessage的产生\n随着HTML5的发展，html5工作组提供了两个重要的接口：`postMessage(send) 和 onmessage`。这两个接口有点类似于websocket，可以实现两个跨域站点页面之间的数据传递。\n\n[postMessage API](https://www.w3.org/TR/websockets/?cm_mc_uid=62901929538214344332551&cm_mc_sid_50200000=1456119382)\n\n下面是实践过程中两个小栗子：分别父页面传递信息给iframe，iframe传递信息给父页面。\n\n## 三：iframe获取父页面信息\n话不多说，直接上码：\n参考demo：[父页面传给子页面demo](http://cuihuan.net:1015/demo_file/postmesage/demo.html)\n### 父页面代码\n```\n<html>\n<head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n    <title>崔涣 iframe postmessage 父页面</title>\n    <script type=\"text/JavaScript\">\n        function sendIt() {\n            // 通过 postMessage 向子窗口发送数据\n            document.getElementById(\"otherPage\").contentWindow\n                    .postMessage(\n                    document.getElementById(\"message\").value,\n                    \"http://cuihuan.net:8003\"\n            );\n        }\n    </script>\n</head>\n<body>\n<!-- 通过 iframe 嵌入子页面 -->\n<iframe src=\"http://cuihuan.net:8003/test.html\" id=\"otherPage\"></iframe>\n<br/>\n<br/>\n<input type=\"text\" id=\"message\"/>\n<input type=\"button\" value=\"Send to child.com\" onclick=\"sendIt()\"/>\n</body>\n</html>\n```\n### 子页面代码\n\n```\n<html> \n <head> \n <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"> \n <title>崔涣测试子页面信息</title> \n <script type=\"text/JavaScript\"> \n\t //event 参数中有 data 属性，就是父窗口发送过来的数据\n\t window.addEventListener(\"message\", function( event ) { \n\t\t // 把父窗口发送过来的数据显示在子窗口中\n\t   document.getElementById(\"content\").innerHTML+=event.data+\"<br/>\"; \n\t }, false ); \n\n </script> \n </head> \n <body> \n\t this is the 8003 port for cuixiaozhuai \n\t <div id=\"content\"></div> \n </body> \n </html>\n```\ndemo 效果如下图：两个跨域页面之间，父页面给子页面传递数据。\n[![16743333-E2AF-40E5-8DD2-0CBCE8919C66](http://cuihuan.net/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png)](http://cuihuan.net/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png) \n\n## 四：iframe传递信息给父页面\n\n参考demo：[跨域子页面传给父页面demo](http://cuihuan.net:1015/demo_file/postmesage/son2Parent.html)\n### 父页面代码\n```\n<html>\n <head>\n <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n <title>崔涣测试父页面</title>\n <script type=\"text/JavaScript\">\n     //event 参数中有 data 属性，就是父窗口发送过来的数据\n     window.addEventListener(\"message\", function( event ) {\n         // 把父窗口发送过来的数据显示在子窗口中\n       document.getElementById(\"content\").innerHTML+=event.data+\"<br/>\";\n     }, false );\n\n </script>\n </head>\n <body>\n     <iframe src=\"http://cuihuan.net:8003/iframeSon.html\" id=\"otherPage\"></iframe>\n     <br/>\n     this is the 1015 port for cuixiaozhuai。\n     <div id=\"content\"></div>\n </body>\n </html>\n```\n### 子页面代码\n```\n<html>\n<head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n    <title>崔小涣iframe postmessage 测试页面</title>\n    <script type=\"text/JavaScript\">\n        function sendIt() {\n            // 子页面给父页面传输信息 \n            parent.postMessage(\n                document.getElementById(\"message\").value,\n                \"http://cuihuan.net:1015\"\n            );\n        }\n    </script>\n</head>\n<body>\n<br/>\nthis is the  port for cuixiaozhuai\n<input type=\"text\" id=\"message\"/>\n<input type=\"button\" value=\"Send to child.com\" onclick=\"sendIt()\"/>\n</body>\n</html>\n```\ndemo 效果如下图：两个跨域页面之间，子页面传递数据给父页面传递数据。\n[![22433B4C-8836-4546-93DB-7A896F8B4B37](http://cuihuan.net/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png)](http://cuihuan.net/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png) \n\n## 五：postmessage简单分析和安全问题\n\npostmessage 传送过来的信息如下图，\n[![BABB5101-CD9D-448C-99EE-910334405D3D](http://cuihuan.net/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png)](http://cuihuan.net/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png)\n\n几乎包含了所有应该有的信息。甚至data中可以包含object，出于安全考虑可以域的校验，数据规则的校验安全校验，如下代码\n```\n\n window.addEventListener('message', function (event) {\n        \n        //校验函数是否合法\n        var checkMessage = function () {\n            // 只获取需要的域，并非所有都可以跨域\n            if (event.origin != \"need domain\") {\n                return false;\n            }\n\n            \n            var message = event.data;\n            // 传输数据类型校验\n            if (typeof(message) !== 'object') {\n                return false;\n            }\n\n            // message 的rule中包含xxx则为xxx需要字段。\n            return message.rule === \"xxx\";\n        };\n\n        if (checkMessage()) {\n            // 通过校验进行相关操作\n            addDetailFunc(event);\n        }\n    });\n```\n【转载请注明：[postMessage处理iframe 跨域问题](http://cuihuan.net/article/postmessage%E5%A4%84%E7%90%86iframe-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html) | [靠谱崔小拽](http://cuihuan.net) 】\n \n\n\n","slug":"postMessage处理iframe 跨域问题","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9njy0012661fcnaqaqje","content":"<blockquote>\n<p>背景：由于同源策略存在，javascript的跨域一直都是一个棘手的问题。<code>父页面无法直接获取iframe内部的跨域资源；同时，iframe内部的跨域资源也无法将信息直接传递给父页面</code>。</p>\n</blockquote>\n<h2 id=\"一：传统的解决方式。\"><a href=\"#一：传统的解决方式。\" class=\"headerlink\" title=\"一：传统的解决方式。\"></a>一：传统的解决方式。</h2><p>传统的iframe资源解决方式：主要通过通过中间页面代理，此处不再赘述，参考<a href=\"http://www.cnblogs.com/snandy/p/3900016.html\" target=\"_blank\" rel=\"external\">中间页获取跨域iframe</a></p>\n<h2 id=\"二：html5-postMessage的产生\"><a href=\"#二：html5-postMessage的产生\" class=\"headerlink\" title=\"二：html5 postMessage的产生\"></a>二：html5 postMessage的产生</h2><p>随着HTML5的发展，html5工作组提供了两个重要的接口：<code>postMessage(send) 和 onmessage</code>。这两个接口有点类似于websocket，可以实现两个跨域站点页面之间的数据传递。</p>\n<p><a href=\"https://www.w3.org/TR/websockets/?cm_mc_uid=62901929538214344332551&amp;cm_mc_sid_50200000=1456119382\" target=\"_blank\" rel=\"external\">postMessage API</a></p>\n<p>下面是实践过程中两个小栗子：分别父页面传递信息给iframe，iframe传递信息给父页面。</p>\n<h2 id=\"三：iframe获取父页面信息\"><a href=\"#三：iframe获取父页面信息\" class=\"headerlink\" title=\"三：iframe获取父页面信息\"></a>三：iframe获取父页面信息</h2><p>话不多说，直接上码：<br>参考demo：<a href=\"http://cuihuan.net:1015/demo_file/postmesage/demo.html\">父页面传给子页面demo</a></p>\n<h3 id=\"父页面代码\"><a href=\"#父页面代码\" class=\"headerlink\" title=\"父页面代码\"></a>父页面代码</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=UTF-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>崔涣 iframe postmessage 父页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sendIt</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"comment\">// 通过 postMessage 向子窗口发送数据</span></div><div class=\"line\">            <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"otherPage\"</span>).contentWindow</div><div class=\"line\">                    .postMessage(</div><div class=\"line\">                    <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"message\"</span>).value,</div><div class=\"line\">                    <span class=\"string\">\"http://cuihuan.net:8003\"</span></div><div class=\"line\">            );</div><div class=\"line\">        &#125;</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- 通过 iframe 嵌入子页面 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://cuihuan.net:8003/test.html\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"otherPage\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"message\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Send to child.com\"</span> <span class=\"attr\">onclick</span>=<span class=\"string\">\"sendIt()\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"子页面代码\"><a href=\"#子页面代码\" class=\"headerlink\" title=\"子页面代码\"></a>子页面代码</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=UTF-8\"</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>崔涣测试子页面信息<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"javascript\"> </span></div><div class=\"line\">\t <span class=\"comment\">//event 参数中有 data 属性，就是父窗口发送过来的数据</span></div><div class=\"line\">\t <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"message\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> event </span>) </span>&#123; </div><div class=\"line\">\t\t <span class=\"comment\">// 把父窗口发送过来的数据显示在子窗口中</span></div><div class=\"line\">\t   <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"content\"</span>).innerHTML+=event.data+<span class=\"string\">\"&lt;br/&gt;\"</span>; </div><div class=\"line\">\t &#125;, <span class=\"literal\">false</span> ); </div><div class=\"line\"></div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span> </div><div class=\"line\">\t this is the 8003 port for cuixiaozhuai </div><div class=\"line\">\t <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>demo 效果如下图：两个跨域页面之间，父页面给子页面传递数据。<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png\" alt=\"16743333-E2AF-40E5-8DD2-0CBCE8919C66\"></a> </p>\n<h2 id=\"四：iframe传递信息给父页面\"><a href=\"#四：iframe传递信息给父页面\" class=\"headerlink\" title=\"四：iframe传递信息给父页面\"></a>四：iframe传递信息给父页面</h2><p>参考demo：<a href=\"http://cuihuan.net:1015/demo_file/postmesage/son2Parent.html\">跨域子页面传给父页面demo</a></p>\n<h3 id=\"父页面代码-1\"><a href=\"#父页面代码-1\" class=\"headerlink\" title=\"父页面代码\"></a>父页面代码</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=UTF-8\"</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>崔涣测试父页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">     <span class=\"comment\">//event 参数中有 data 属性，就是父窗口发送过来的数据</span></div><div class=\"line\">     <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"message\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> event </span>) </span>&#123;</div><div class=\"line\">         <span class=\"comment\">// 把父窗口发送过来的数据显示在子窗口中</span></div><div class=\"line\">       <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"content\"</span>).innerHTML+=event.data+<span class=\"string\">\"&lt;br/&gt;\"</span>;</div><div class=\"line\">     &#125;, <span class=\"literal\">false</span> );</div><div class=\"line\"></div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://cuihuan.net:8003/iframeSon.html\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"otherPage\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\">     this is the 1015 port for cuixiaozhuai。</div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"子页面代码-1\"><a href=\"#子页面代码-1\" class=\"headerlink\" title=\"子页面代码\"></a>子页面代码</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=UTF-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>崔小涣iframe postmessage 测试页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"javascript\"></span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sendIt</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"comment\">// 子页面给父页面传输信息 </span></div><div class=\"line\">            parent.postMessage(</div><div class=\"line\">                <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"message\"</span>).value,</div><div class=\"line\">                <span class=\"string\">\"http://cuihuan.net:1015\"</span></div><div class=\"line\">            );</div><div class=\"line\">        &#125;</div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\">this is the  port for cuixiaozhuai</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"message\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Send to child.com\"</span> <span class=\"attr\">onclick</span>=<span class=\"string\">\"sendIt()\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>demo 效果如下图：两个跨域页面之间，子页面传递数据给父页面传递数据。<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png\" alt=\"22433B4C-8836-4546-93DB-7A896F8B4B37\"></a> </p>\n<h2 id=\"五：postmessage简单分析和安全问题\"><a href=\"#五：postmessage简单分析和安全问题\" class=\"headerlink\" title=\"五：postmessage简单分析和安全问题\"></a>五：postmessage简单分析和安全问题</h2><p>postmessage 传送过来的信息如下图，<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png\" alt=\"BABB5101-CD9D-448C-99EE-910334405D3D\"></a></p>\n<p>几乎包含了所有应该有的信息。甚至data中可以包含object，出于安全考虑可以域的校验，数据规则的校验安全校验，如下代码<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'message'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">       </div><div class=\"line\">       <span class=\"comment\">//校验函数是否合法</span></div><div class=\"line\">       <span class=\"keyword\">var</span> checkMessage = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">           <span class=\"comment\">// 只获取需要的域，并非所有都可以跨域</span></div><div class=\"line\">           <span class=\"keyword\">if</span> (event.origin != <span class=\"string\">\"need domain\"</span>) &#123;</div><div class=\"line\">               <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">           &#125;</div><div class=\"line\"></div><div class=\"line\">           </div><div class=\"line\">           <span class=\"keyword\">var</span> message = event.data;</div><div class=\"line\">           <span class=\"comment\">// 传输数据类型校验</span></div><div class=\"line\">           <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span>(message) !== <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">               <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">           &#125;</div><div class=\"line\"></div><div class=\"line\">           <span class=\"comment\">// message 的rule中包含xxx则为xxx需要字段。</span></div><div class=\"line\">           <span class=\"keyword\">return</span> message.rule === <span class=\"string\">\"xxx\"</span>;</div><div class=\"line\">       &#125;;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"keyword\">if</span> (checkMessage()) &#123;</div><div class=\"line\">           <span class=\"comment\">// 通过校验进行相关操作</span></div><div class=\"line\">           addDetailFunc(event);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;);</div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/postmessage%E5%A4%84%E7%90%86iframe-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html\">postMessage处理iframe 跨域问题</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>背景：由于同源策略存在，javascript的跨域一直都是一个棘手的问题。<code>父页面无法直接获取iframe内部的跨域资源；同时，iframe内部的跨域资源也无法将信息直接传递给父页面</code>。</p>\n</blockquote>\n<h2 id=\"一：传统的解决方式。\"><a href=\"#一：传统的解决方式。\" class=\"headerlink\" title=\"一：传统的解决方式。\"></a>一：传统的解决方式。</h2><p>传统的iframe资源解决方式：主要通过通过中间页面代理，此处不再赘述，参考<a href=\"http://www.cnblogs.com/snandy/p/3900016.html\">中间页获取跨域iframe</a></p>\n<h2 id=\"二：html5-postMessage的产生\"><a href=\"#二：html5-postMessage的产生\" class=\"headerlink\" title=\"二：html5 postMessage的产生\"></a>二：html5 postMessage的产生</h2><p>随着HTML5的发展，html5工作组提供了两个重要的接口：<code>postMessage(send) 和 onmessage</code>。这两个接口有点类似于websocket，可以实现两个跨域站点页面之间的数据传递。</p>\n<p><a href=\"https://www.w3.org/TR/websockets/?cm_mc_uid=62901929538214344332551&amp;cm_mc_sid_50200000=1456119382\">postMessage API</a></p>\n<p>下面是实践过程中两个小栗子：分别父页面传递信息给iframe，iframe传递信息给父页面。</p>\n<h2 id=\"三：iframe获取父页面信息\"><a href=\"#三：iframe获取父页面信息\" class=\"headerlink\" title=\"三：iframe获取父页面信息\"></a>三：iframe获取父页面信息</h2><p>话不多说，直接上码：<br>参考demo：<a href=\"http://cuihuan.net:1015/demo_file/postmesage/demo.html\">父页面传给子页面demo</a></p>\n<h3 id=\"父页面代码\"><a href=\"#父页面代码\" class=\"headerlink\" title=\"父页面代码\"></a>父页面代码</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=UTF-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>崔涣 iframe postmessage 父页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"javascript\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sendIt</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"comment\">// 通过 postMessage 向子窗口发送数据</span></div><div class=\"line\">            <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"otherPage\"</span>).contentWindow</div><div class=\"line\">                    .postMessage(</div><div class=\"line\">                    <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"message\"</span>).value,</div><div class=\"line\">                    <span class=\"string\">\"http://cuihuan.net:8003\"</span></div><div class=\"line\">            );</div><div class=\"line\">        &#125;</div><div class=\"line\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"comment\">&lt;!-- 通过 iframe 嵌入子页面 --&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://cuihuan.net:8003/test.html\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"otherPage\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"message\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Send to child.com\"</span> <span class=\"attr\">onclick</span>=<span class=\"string\">\"sendIt()\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"子页面代码\"><a href=\"#子页面代码\" class=\"headerlink\" title=\"子页面代码\"></a>子页面代码</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=UTF-8\"</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>崔涣测试子页面信息<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"javascript\"> </div><div class=\"line\">\t <span class=\"comment\">//event 参数中有 data 属性，就是父窗口发送过来的数据</span></div><div class=\"line\">\t <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"message\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> event </span>) </span>&#123; </div><div class=\"line\">\t\t <span class=\"comment\">// 把父窗口发送过来的数据显示在子窗口中</span></div><div class=\"line\">\t   <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"content\"</span>).innerHTML+=event.data+<span class=\"string\">\"&lt;br/&gt;\"</span>; </div><div class=\"line\">\t &#125;, <span class=\"literal\">false</span> ); </div><div class=\"line\"></div><div class=\"line\"> </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span> </div><div class=\"line\">\t this is the 8003 port for cuixiaozhuai </div><div class=\"line\">\t <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span> </div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>demo 效果如下图：两个跨域页面之间，父页面给子页面传递数据。<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/02/16743333-E2AF-40E5-8DD2-0CBCE8919C66.png\" alt=\"16743333-E2AF-40E5-8DD2-0CBCE8919C66\"></a> </p>\n<h2 id=\"四：iframe传递信息给父页面\"><a href=\"#四：iframe传递信息给父页面\" class=\"headerlink\" title=\"四：iframe传递信息给父页面\"></a>四：iframe传递信息给父页面</h2><p>参考demo：<a href=\"http://cuihuan.net:1015/demo_file/postmesage/son2Parent.html\">跨域子页面传给父页面demo</a></p>\n<h3 id=\"父页面代码-1\"><a href=\"#父页面代码-1\" class=\"headerlink\" title=\"父页面代码\"></a>父页面代码</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=UTF-8\"</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>崔涣测试父页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"javascript\"></div><div class=\"line\">     <span class=\"comment\">//event 参数中有 data 属性，就是父窗口发送过来的数据</span></div><div class=\"line\">     <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">\"message\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> event </span>) </span>&#123;</div><div class=\"line\">         <span class=\"comment\">// 把父窗口发送过来的数据显示在子窗口中</span></div><div class=\"line\">       <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"content\"</span>).innerHTML+=event.data+<span class=\"string\">\"&lt;br/&gt;\"</span>;</div><div class=\"line\">     &#125;, <span class=\"literal\">false</span> );</div><div class=\"line\"></div><div class=\"line\"> </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">iframe</span> <span class=\"attr\">src</span>=<span class=\"string\">\"http://cuihuan.net:8003/iframeSon.html\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"otherPage\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">iframe</span>&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\">     this is the 1015 port for cuixiaozhuai。</div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"> <span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"子页面代码-1\"><a href=\"#子页面代码-1\" class=\"headerlink\" title=\"子页面代码\"></a>子页面代码</h3><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"Content-Type\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"text/html; charset=UTF-8\"</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>崔小涣iframe postmessage 测试页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text/JavaScript\"</span>&gt;</span><span class=\"javascript\"></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sendIt</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">            <span class=\"comment\">// 子页面给父页面传输信息 </span></div><div class=\"line\">            parent.postMessage(</div><div class=\"line\">                <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">\"message\"</span>).value,</div><div class=\"line\">                <span class=\"string\">\"http://cuihuan.net:1015\"</span></div><div class=\"line\">            );</div><div class=\"line\">        &#125;</div><div class=\"line\">    </span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">br</span>/&gt;</span></div><div class=\"line\">this is the  port for cuixiaozhuai</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"text\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"message\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">\"button\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"Send to child.com\"</span> <span class=\"attr\">onclick</span>=<span class=\"string\">\"sendIt()\"</span>/&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></div></pre></td></tr></table></figure>\n<p>demo 效果如下图：两个跨域页面之间，子页面传递数据给父页面传递数据。<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/02/22433B4C-8836-4546-93DB-7A896F8B4B37.png\" alt=\"22433B4C-8836-4546-93DB-7A896F8B4B37\"></a> </p>\n<h2 id=\"五：postmessage简单分析和安全问题\"><a href=\"#五：postmessage简单分析和安全问题\" class=\"headerlink\" title=\"五：postmessage简单分析和安全问题\"></a>五：postmessage简单分析和安全问题</h2><p>postmessage 传送过来的信息如下图，<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/02/BABB5101-CD9D-448C-99EE-910334405D3D.png\" alt=\"BABB5101-CD9D-448C-99EE-910334405D3D\"></a></p>\n<p>几乎包含了所有应该有的信息。甚至data中可以包含object，出于安全考虑可以域的校验，数据规则的校验安全校验，如下代码<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'message'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">event</span>) </span>&#123;</div><div class=\"line\">       </div><div class=\"line\">       <span class=\"comment\">//校验函数是否合法</span></div><div class=\"line\">       <span class=\"keyword\">var</span> checkMessage = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">           <span class=\"comment\">// 只获取需要的域，并非所有都可以跨域</span></div><div class=\"line\">           <span class=\"keyword\">if</span> (event.origin != <span class=\"string\">\"need domain\"</span>) &#123;</div><div class=\"line\">               <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">           &#125;</div><div class=\"line\"></div><div class=\"line\">           </div><div class=\"line\">           <span class=\"keyword\">var</span> message = event.data;</div><div class=\"line\">           <span class=\"comment\">// 传输数据类型校验</span></div><div class=\"line\">           <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span>(message) !== <span class=\"string\">'object'</span>) &#123;</div><div class=\"line\">               <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</div><div class=\"line\">           &#125;</div><div class=\"line\"></div><div class=\"line\">           <span class=\"comment\">// message 的rule中包含xxx则为xxx需要字段。</span></div><div class=\"line\">           <span class=\"keyword\">return</span> message.rule === <span class=\"string\">\"xxx\"</span>;</div><div class=\"line\">       &#125;;</div><div class=\"line\"></div><div class=\"line\">       <span class=\"keyword\">if</span> (checkMessage()) &#123;</div><div class=\"line\">           <span class=\"comment\">// 通过校验进行相关操作</span></div><div class=\"line\">           addDetailFunc(event);</div><div class=\"line\">       &#125;</div><div class=\"line\">   &#125;);</div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/postmessage%E5%A4%84%E7%90%86iframe-%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98.html\">postMessage处理iframe 跨域问题</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"php反射调用private方法实践","date":"2015-12-20T09:21:35.000Z","_content":"> 问题背景：单测中有个普遍性的问题，`被侧类中的private方法无法直接调用`。小拽在处理过程中通过`反射改变方法权限，进行单测`，分享一下，直接上代码。\n\n## 简单被测试类\n生成一个简单的被测试类，只有个private方法。\n\n```\n<?php\n\n/**\n * 崔小涣单测的基本模板。\n *\n * @author cuihuan\n * @date 2015/11/12 22:15:31\n * @version $Revision:1.0$\n **/\n\nclass MyClass {\n\n    /**\n     * 私有方法\n     *\n     * @param $params\n     * @return bool\n     */\n    private function privateFunc($params){\n        if(!isset($params)){\n            return false;\n        }\n        echo \"test success\";\n        return $params;\n    }\n}\n```\n\n## 单测代码 \n\n```\n<?php\n/***************************************************************************\n *\n * $Id: MyClassTest T,v 1.0 PsCaseTest cuihuan Exp$\n *\n **************************************************************************/\n\n/**\n * 崔小涣单测的基本模板。 \n * \n * @author cuihuan\n * @date 2015/11/12 22:09:31\n * @version $Revision:1.0$\n **/\n\nrequire_once ('./MyClass.php');\n\nclass MyClassTest extends PHPUnit_Framework_TestCase {\n    const CLASS_NAME = 'MyClass';\n    const FAIL       = 'fail';\n\n    protected $objMyClass;\n    \n    /**\n     * @brief setup: Sets up the fixture, for example, opens a network connection.\n     *\n     * 可以看做phpunit的构造函数\n     */\n    public function setup() {\n        date_default_timezone_set('PRC');\n        $this->objMyClass = new MyClass();\n    }\n\n    /**\n     * 利用反射，对类中的private 和 protect 方法进行单元测试\n     *\n     * @param $strMethodName  string  ：反射函数名\n     * @return ReflectionMethod obj   ：回调对象\n     */\n    protected static function getPrivateMethod($strMethodName) {\n        $objReflectClass = new ReflectionClass(self::CLASS_NAME);\n        $method          = $objReflectClass->getMethod($strMethodName);\n        $method->setAccessible(true);\n        return $method;\n    }\n\n\n    /**\n     * @brief :测试private函数的调用\n     */\n    public function testPrivateFunc()\n    {\n        $testCase = 'just a test string';\n\n        // 反射该类\n        $testFunc = self::getPrivateMethod('privateFunc');\n        $res = $testFunc->invokeArgs($this->objMyClass, array($testCase));\n\n        $this->assertEquals($testCase, $res);\n        $this->expectOutputRegex('/success/i');\n        \n        // 捕获没有参数异常测试\n        try {\n             $testFunc->invokeArgs($this->transfer2Pscase, array());\n        } catch (Exception $expected) {\n            $this->assertNotNull($expected);\n            return true;\n        }\n\n        $this->fail(self::FAIL);\n    }\n    \n}\n```\n\n##运行结果\n```\ncuihuan:test cuixiaohuan$ phpunit MyClassTest.php \nPHPUnit 4.8.6 by Sebastian Bergmann and contributors.\n\n\nTime: 103 ms, Memory: 11.75Mb\n\nOK (1 test, 3 assertions)\n```\n\n## 关键代码分析\n\n封装了一个，被测类方法的反射调用；同时，`返回方法之前处理方法的接入权限为true`，便可以访问private的函数方法。\n```\n/**\n * 利用反射，对类中的private 和 protect 方法进行单元测试\n *\n * @param $strMethodName  string  ：反射函数名\n * @return ReflectionMethod obj   ：回调对象\n */\nprotected static function getPrivateMethod($strMethodName) {\n    $objReflectClass = new ReflectionClass(self::CLASS_NAME);\n    $method          = $objReflectClass->getMethod($strMethodName);\n    $method->setAccessible(true);\n    return $method;\n}\n\n```\n\n【转载请注明：[phpunit单测中调用private方法处理](http://cuihuan.net/article/phpunit%E5%8D%95%E6%B5%8B%E4%B8%AD%E8%B0%83%E7%94%A8private%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","source":"_posts/php反射调用private方法实践.md","raw":"---\ntitle: php反射调用private方法实践 \ndate: 2015-12-20 17:21:35\ntags: \n- 单元测试\n- php\n- phpunit\n---\n> 问题背景：单测中有个普遍性的问题，`被侧类中的private方法无法直接调用`。小拽在处理过程中通过`反射改变方法权限，进行单测`，分享一下，直接上代码。\n\n## 简单被测试类\n生成一个简单的被测试类，只有个private方法。\n\n```\n<?php\n\n/**\n * 崔小涣单测的基本模板。\n *\n * @author cuihuan\n * @date 2015/11/12 22:15:31\n * @version $Revision:1.0$\n **/\n\nclass MyClass {\n\n    /**\n     * 私有方法\n     *\n     * @param $params\n     * @return bool\n     */\n    private function privateFunc($params){\n        if(!isset($params)){\n            return false;\n        }\n        echo \"test success\";\n        return $params;\n    }\n}\n```\n\n## 单测代码 \n\n```\n<?php\n/***************************************************************************\n *\n * $Id: MyClassTest T,v 1.0 PsCaseTest cuihuan Exp$\n *\n **************************************************************************/\n\n/**\n * 崔小涣单测的基本模板。 \n * \n * @author cuihuan\n * @date 2015/11/12 22:09:31\n * @version $Revision:1.0$\n **/\n\nrequire_once ('./MyClass.php');\n\nclass MyClassTest extends PHPUnit_Framework_TestCase {\n    const CLASS_NAME = 'MyClass';\n    const FAIL       = 'fail';\n\n    protected $objMyClass;\n    \n    /**\n     * @brief setup: Sets up the fixture, for example, opens a network connection.\n     *\n     * 可以看做phpunit的构造函数\n     */\n    public function setup() {\n        date_default_timezone_set('PRC');\n        $this->objMyClass = new MyClass();\n    }\n\n    /**\n     * 利用反射，对类中的private 和 protect 方法进行单元测试\n     *\n     * @param $strMethodName  string  ：反射函数名\n     * @return ReflectionMethod obj   ：回调对象\n     */\n    protected static function getPrivateMethod($strMethodName) {\n        $objReflectClass = new ReflectionClass(self::CLASS_NAME);\n        $method          = $objReflectClass->getMethod($strMethodName);\n        $method->setAccessible(true);\n        return $method;\n    }\n\n\n    /**\n     * @brief :测试private函数的调用\n     */\n    public function testPrivateFunc()\n    {\n        $testCase = 'just a test string';\n\n        // 反射该类\n        $testFunc = self::getPrivateMethod('privateFunc');\n        $res = $testFunc->invokeArgs($this->objMyClass, array($testCase));\n\n        $this->assertEquals($testCase, $res);\n        $this->expectOutputRegex('/success/i');\n        \n        // 捕获没有参数异常测试\n        try {\n             $testFunc->invokeArgs($this->transfer2Pscase, array());\n        } catch (Exception $expected) {\n            $this->assertNotNull($expected);\n            return true;\n        }\n\n        $this->fail(self::FAIL);\n    }\n    \n}\n```\n\n##运行结果\n```\ncuihuan:test cuixiaohuan$ phpunit MyClassTest.php \nPHPUnit 4.8.6 by Sebastian Bergmann and contributors.\n\n\nTime: 103 ms, Memory: 11.75Mb\n\nOK (1 test, 3 assertions)\n```\n\n## 关键代码分析\n\n封装了一个，被测类方法的反射调用；同时，`返回方法之前处理方法的接入权限为true`，便可以访问private的函数方法。\n```\n/**\n * 利用反射，对类中的private 和 protect 方法进行单元测试\n *\n * @param $strMethodName  string  ：反射函数名\n * @return ReflectionMethod obj   ：回调对象\n */\nprotected static function getPrivateMethod($strMethodName) {\n    $objReflectClass = new ReflectionClass(self::CLASS_NAME);\n    $method          = $objReflectClass->getMethod($strMethodName);\n    $method->setAccessible(true);\n    return $method;\n}\n\n```\n\n【转载请注明：[phpunit单测中调用private方法处理](http://cuihuan.net/article/phpunit%E5%8D%95%E6%B5%8B%E4%B8%AD%E8%B0%83%E7%94%A8private%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","slug":"php反射调用private方法实践","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nk00014661f1r9metfy","content":"<blockquote>\n<p>问题背景：单测中有个普遍性的问题，<code>被侧类中的private方法无法直接调用</code>。小拽在处理过程中通过<code>反射改变方法权限，进行单测</code>，分享一下，直接上代码。</p>\n</blockquote>\n<h2 id=\"简单被测试类\"><a href=\"#简单被测试类\" class=\"headerlink\" title=\"简单被测试类\"></a>简单被测试类</h2><p>生成一个简单的被测试类，只有个private方法。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 崔小涣单测的基本模板。</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@author</span> cuihuan</div><div class=\"line\"> * <span class=\"doctag\">@date</span> 2015/11/12 22:15:31</div><div class=\"line\"> * <span class=\"doctag\">@version</span> $Revision:1.0$</div><div class=\"line\"> **/</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyClass</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 私有方法</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> $params</div><div class=\"line\">     * <span class=\"doctag\">@return</span> bool</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">privateFunc</span><span class=\"params\">($params)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(!<span class=\"keyword\">isset</span>($params))&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"test success\"</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> $params;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"单测代码\"><a href=\"#单测代码\" class=\"headerlink\" title=\"单测代码\"></a>单测代码</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></span></div><div class=\"line\"><span class=\"comment\">/***************************************************************************</span></div><div class=\"line\"> *</div><div class=\"line\"> * $Id: MyClassTest T,v 1.0 PsCaseTest cuihuan Exp$</div><div class=\"line\"> *</div><div class=\"line\"> **************************************************************************/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 崔小涣单测的基本模板。 </div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@author</span> cuihuan</div><div class=\"line\"> * <span class=\"doctag\">@date</span> 2015/11/12 22:09:31</div><div class=\"line\"> * <span class=\"doctag\">@version</span> $Revision:1.0$</div><div class=\"line\"> **/</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">require_once</span> (<span class=\"string\">'./MyClass.php'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyClassTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">PHPUnit_Framework_TestCase</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> CLASS_NAME = <span class=\"string\">'MyClass'</span>;</div><div class=\"line\">    <span class=\"keyword\">const</span> FAIL       = <span class=\"string\">'fail'</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">protected</span> $objMyClass;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * <span class=\"doctag\">@brief</span> setup: Sets up the fixture, for example, opens a network connection.</div><div class=\"line\">     *</div><div class=\"line\">     * 可以看做phpunit的构造函数</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setup</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        date_default_timezone_set(<span class=\"string\">'PRC'</span>);</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;objMyClass = <span class=\"keyword\">new</span> MyClass();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 利用反射，对类中的private 和 protect 方法进行单元测试</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> $strMethodName  string  ：反射函数名</div><div class=\"line\">     * <span class=\"doctag\">@return</span> ReflectionMethod obj   ：回调对象</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPrivateMethod</span><span class=\"params\">($strMethodName)</span> </span>&#123;</div><div class=\"line\">        $objReflectClass = <span class=\"keyword\">new</span> ReflectionClass(<span class=\"keyword\">self</span>::CLASS_NAME);</div><div class=\"line\">        $method          = $objReflectClass-&gt;getMethod($strMethodName);</div><div class=\"line\">        $method-&gt;setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> $method;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * <span class=\"doctag\">@brief</span> :测试private函数的调用</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testPrivateFunc</span><span class=\"params\">()</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        $testCase = <span class=\"string\">'just a test string'</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 反射该类</span></div><div class=\"line\">        $testFunc = <span class=\"keyword\">self</span>::getPrivateMethod(<span class=\"string\">'privateFunc'</span>);</div><div class=\"line\">        $res = $testFunc-&gt;invokeArgs(<span class=\"keyword\">$this</span>-&gt;objMyClass, <span class=\"keyword\">array</span>($testCase));</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;assertEquals($testCase, $res);</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;expectOutputRegex(<span class=\"string\">'/success/i'</span>);</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">// 捕获没有参数异常测试</span></div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">             $testFunc-&gt;invokeArgs(<span class=\"keyword\">$this</span>-&gt;transfer2Pscase, <span class=\"keyword\">array</span>());</div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (<span class=\"keyword\">Exception</span> $expected) &#123;</div><div class=\"line\">            <span class=\"keyword\">$this</span>-&gt;assertNotNull($expected);</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;fail(<span class=\"keyword\">self</span>::FAIL);</div><div class=\"line\">    &#125;</div><div class=\"line\">    </div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>##运行结果<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cuihuan:test cuixiaohuan$ phpunit MyClassTest.php </div><div class=\"line\">PHPUnit 4.8.6 by Sebastian Bergmann and contributors.</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">Time:</span> 103 ms, Memory: 11.75Mb</div><div class=\"line\"></div><div class=\"line\">OK (1 test, 3 assertions)</div></pre></td></tr></table></figure></p>\n<h2 id=\"关键代码分析\"><a href=\"#关键代码分析\" class=\"headerlink\" title=\"关键代码分析\"></a>关键代码分析</h2><p>封装了一个，被测类方法的反射调用；同时，<code>返回方法之前处理方法的接入权限为true</code>，便可以访问private的函数方法。<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 利用反射，对类中的private 和 protect 方法进行单元测试</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@param</span> $strMethodName  string  ：反射函数名</div><div class=\"line\"> * <span class=\"doctag\">@return</span> ReflectionMethod obj   ：回调对象</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPrivateMethod</span><span class=\"params\">($strMethodName)</span> </span>&#123;</div><div class=\"line\">    $objReflectClass = <span class=\"keyword\">new</span> ReflectionClass(<span class=\"keyword\">self</span>::CLASS_NAME);</div><div class=\"line\">    $method          = $objReflectClass-&gt;getMethod($strMethodName);</div><div class=\"line\">    $method-&gt;setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> $method;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/phpunit%E5%8D%95%E6%B5%8B%E4%B8%AD%E8%B0%83%E7%94%A8private%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86.html\">phpunit单测中调用private方法处理</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>问题背景：单测中有个普遍性的问题，<code>被侧类中的private方法无法直接调用</code>。小拽在处理过程中通过<code>反射改变方法权限，进行单测</code>，分享一下，直接上代码。</p>\n</blockquote>\n<h2 id=\"简单被测试类\"><a href=\"#简单被测试类\" class=\"headerlink\" title=\"简单被测试类\"></a>简单被测试类</h2><p>生成一个简单的被测试类，只有个private方法。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 崔小涣单测的基本模板。</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@author</span> cuihuan</div><div class=\"line\"> * <span class=\"doctag\">@date</span> 2015/11/12 22:15:31</div><div class=\"line\"> * <span class=\"doctag\">@version</span> $Revision:1.0$</div><div class=\"line\"> **/</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyClass</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 私有方法</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> $params</div><div class=\"line\">     * <span class=\"doctag\">@return</span> bool</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">privateFunc</span><span class=\"params\">($params)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(!<span class=\"keyword\">isset</span>($params))&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">echo</span> <span class=\"string\">\"test success\"</span>;</div><div class=\"line\">        <span class=\"keyword\">return</span> $params;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure>\n<h2 id=\"单测代码\"><a href=\"#单测代码\" class=\"headerlink\" title=\"单测代码\"></a>单测代码</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"><span class=\"comment\">/***************************************************************************</div><div class=\"line\"> *</div><div class=\"line\"> * $Id: MyClassTest T,v 1.0 PsCaseTest cuihuan Exp$</div><div class=\"line\"> *</div><div class=\"line\"> **************************************************************************/</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 崔小涣单测的基本模板。 </div><div class=\"line\"> * </div><div class=\"line\"> * <span class=\"doctag\">@author</span> cuihuan</div><div class=\"line\"> * <span class=\"doctag\">@date</span> 2015/11/12 22:09:31</div><div class=\"line\"> * <span class=\"doctag\">@version</span> $Revision:1.0$</div><div class=\"line\"> **/</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">require_once</span> (<span class=\"string\">'./MyClass.php'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyClassTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">PHPUnit_Framework_TestCase</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">const</span> CLASS_NAME = <span class=\"string\">'MyClass'</span>;</div><div class=\"line\">    <span class=\"keyword\">const</span> FAIL       = <span class=\"string\">'fail'</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">protected</span> $objMyClass;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * <span class=\"doctag\">@brief</span> setup: Sets up the fixture, for example, opens a network connection.</div><div class=\"line\">     *</div><div class=\"line\">     * 可以看做phpunit的构造函数</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setup</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        date_default_timezone_set(<span class=\"string\">'PRC'</span>);</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;objMyClass = <span class=\"keyword\">new</span> MyClass();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 利用反射，对类中的private 和 protect 方法进行单元测试</div><div class=\"line\">     *</div><div class=\"line\">     * <span class=\"doctag\">@param</span> $strMethodName  string  ：反射函数名</div><div class=\"line\">     * <span class=\"doctag\">@return</span> ReflectionMethod obj   ：回调对象</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPrivateMethod</span><span class=\"params\">($strMethodName)</span> </span>&#123;</div><div class=\"line\">        $objReflectClass = <span class=\"keyword\">new</span> ReflectionClass(<span class=\"keyword\">self</span>::CLASS_NAME);</div><div class=\"line\">        $method          = $objReflectClass-&gt;getMethod($strMethodName);</div><div class=\"line\">        $method-&gt;setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">        <span class=\"keyword\">return</span> $method;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * <span class=\"doctag\">@brief</span> :测试private函数的调用</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">testPrivateFunc</span><span class=\"params\">()</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        $testCase = <span class=\"string\">'just a test string'</span>;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"comment\">// 反射该类</span></div><div class=\"line\">        $testFunc = <span class=\"keyword\">self</span>::getPrivateMethod(<span class=\"string\">'privateFunc'</span>);</div><div class=\"line\">        $res = $testFunc-&gt;invokeArgs(<span class=\"keyword\">$this</span>-&gt;objMyClass, <span class=\"keyword\">array</span>($testCase));</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;assertEquals($testCase, $res);</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;expectOutputRegex(<span class=\"string\">'/success/i'</span>);</div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">// 捕获没有参数异常测试</span></div><div class=\"line\">        <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">             $testFunc-&gt;invokeArgs(<span class=\"keyword\">$this</span>-&gt;transfer2Pscase, <span class=\"keyword\">array</span>());</div><div class=\"line\">        &#125; <span class=\"keyword\">catch</span> (<span class=\"keyword\">Exception</span> $expected) &#123;</div><div class=\"line\">            <span class=\"keyword\">$this</span>-&gt;assertNotNull($expected);</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;fail(<span class=\"keyword\">self</span>::FAIL);</div><div class=\"line\">    &#125;</div><div class=\"line\">    </div><div class=\"line\">&#125;</span></div></pre></td></tr></table></figure>\n<p>##运行结果<br><figure class=\"highlight subunit\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div></pre></td><td class=\"code\"><pre><div class=\"line\">cuihuan:test cuixiaohuan$ phpunit MyClassTest.php </div><div class=\"line\">PHPUnit 4.8.6 by Sebastian Bergmann and contributors.</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">Time:</span> 103 ms, Memory: 11.75Mb</div><div class=\"line\"></div><div class=\"line\">OK (1 test, 3 assertions)</div></pre></td></tr></table></figure></p>\n<h2 id=\"关键代码分析\"><a href=\"#关键代码分析\" class=\"headerlink\" title=\"关键代码分析\"></a>关键代码分析</h2><p>封装了一个，被测类方法的反射调用；同时，<code>返回方法之前处理方法的接入权限为true</code>，便可以访问private的函数方法。<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 利用反射，对类中的private 和 protect 方法进行单元测试</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@param</span> $strMethodName  string  ：反射函数名</div><div class=\"line\"> * <span class=\"doctag\">@return</span> ReflectionMethod obj   ：回调对象</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPrivateMethod</span><span class=\"params\">($strMethodName)</span> </span>&#123;</div><div class=\"line\">    $objReflectClass = <span class=\"keyword\">new</span> ReflectionClass(<span class=\"keyword\">self</span>::CLASS_NAME);</div><div class=\"line\">    $method          = $objReflectClass-&gt;getMethod($strMethodName);</div><div class=\"line\">    $method-&gt;setAccessible(<span class=\"keyword\">true</span>);</div><div class=\"line\">    <span class=\"keyword\">return</span> $method;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/phpunit%E5%8D%95%E6%B5%8B%E4%B8%AD%E8%B0%83%E7%94%A8private%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86.html\">phpunit单测中调用private方法处理</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"【redis学习三】简单高可用redis架构实践","date":"2017-02-05T09:21:35.000Z","_content":"> 背景：支撑线上千万级别的天级查询请求，要求高可用。\n\n# 一、方案调研\n## 1.1 redis版本选择\nredis当前主流版本是redis 2.x 和 redis 3.x，3.0对集群支持比较不错，官方解释如下：\n> Redis是一个开源、基于C语言、基于内存亦可持久化的高性能NoSQL数据库，同时，它还提供了多种语言的API。近日，Redis 3.0在经过6个RC版本后，其正式版终于发布了。Redis 3.0的最重要特征是对Redis集群的支持，此外，该版本相对于2.8版本在性能、稳定性等方面都有了重大提高。\n\n综合考虑之后扩展性和稳定性之后，选择版本 `redis 3.2.3-1`版本进行部署\n## 1.2 是否选择搭建集群\n\n是否搭建集群关键要看单机是否能够满足业务需求，做了个简单的数据评估。\n\n### 数据量评估\n- **测试**：单机写入2000w业务数据，占用内存1.5g，本机126g内存\n- **评估**：单机的稳定数据承载量：2000w * （126/1.56）* 0.6 = 96923w \n- **结论**：9T 的数据承载量，远超当前千万级别的数据量\n\n### 性能评估\n- **测试**：简单压测了下\n - 写操作 1000w，80% 在20ms一下 ，98%在30ms，最大218ms，qps 5w/s，总耗时197s\n - 读操作 1000w，97% 在10ms一下 ，99.99%在24ms，qps 6w/s，总耗时160s\n- **评估**：当前的调用量在千万每天，qps的话在百/s。 \n- **结论**：当前单机的redis完全满足需求\n\n因此：在单机远能够满足当下业务需求的情况下，决定不采用的集群的方式来部署redis，减少技术债务风险。\n\n## 1.3 初定方案和架构图\n选定了版本和基本部署方案之后，主要考虑服务的`容灾和稳定性`，经过思考之后采用`采用极简的主从从结构，001实时同步数据002和003；001读写，002，003只读`，机构图如下\n\n[![redis 框架架构](http://cuihuan.net/wp_content/new/redis/redis_3_framework.png)](http://cuihuan.net/wp_content/new/redis/redis_3_framework.png)\n# 二、实现过程\n## 2.1 redis安装\n此处略去，参考官方文档 https://redis.io/\n## 2.2 配置读写master\n- 修改端口：port 【目的：简单的修改默认端口是最好的防攻击】\n- 添加密码：pwd\n- 关闭压缩：rdbcompression no 【硬盘最够，降低cpu的能耗更利于提升性能】\n- 开启守护进程：daemonize yes 【master开启守护，增加稳定性】\n- 关闭protect-mode :允许他机器访问\n- 添加白名单：bind xxx\n- 修改log地址，pid地址和数据存储地址：logfile pidfile 【便于维护和安全】\n- 添加慢查询：slowlog-log-slower-than 500 【根据业务需求，便于优化】\n- 最大内存限制：maxmemory 【考虑稳定性和性能，一般不超过最大内存的60%】\n\n## 2.3 配置只读slave\n- 同master\n- 设置主库:slaveof ip:port\n- 主库密码：masterauth masterpwd\n- 只读：slave-read-only yes\n\n## 2.4 启动测试\n### 启动主库写入数据\n\n[![redis 写入主库](http://cuihuan.net/wp_content/new/redis/redis_3_master.png)](http://cuihuan.net/wp_content/new/redis/redis_3_master.png)\n\n\n### 进入从库查看\n最初没有数据，主库写入之后，从库去到数据\n\n[![redis 写入从库](http://cuihuan.net/wp_content/new/redis/redis_3_slave.png)](http://cuihuan.net/wp_content/new/redis/redis_3_slave.png)\n\n### 查看log确认过程\n\n[![redis log](http://cuihuan.net/wp_content/new/redis/redis_3_log.png)](http://cuihuan.net/wp_content/new/redis/redis_3_log.png)\n\n# 三、架构能力评估\n## 3.1 容灾能力\n\n- 主动容灾\n - 备份：master 全量备份，slave全量备份。\n - 备份安全：本机保存，hadoop同步保存一份。\n - 监控和探活：监控机分钟级探活和预警\n- 被动容灾：\n - slave 宕机：重启之后直接从master恢复\n - master 宕机且硬盘数据为损坏：重启后数据自动恢复且和从库一致。\n - master 宕机且数据损坏：删除损坏数据，使用slave1的数据恢复，保证数据一致。\n - master 和slave 1 同时宕机：slave2 保证读正常，业务不影响，利用slave2 数据备份恢复master，启动slave 即可\n - 三台全宕机：服务挂掉，从hadoop获取数据恢复服务。\n\n## 3.2 性能评估\n压测数据，参见方案选择，完全hold住。\n\n# 四、问题思考\n## 4.1 内存清理策略\n暂时采用：\nnoeviction -> 谁也不删，直接在写操作时返回错误。\n之后采用：\nvolatile-lru -> 根据LRU算法删除带有过期时间的key。 最少使用算法删除。\n如果达到内存限制，手工清理，通过监控脚本监控内存情况\n\n## 4.2 伸缩性和单节点问题\n扩展slave可以直接扩展，扩展master需要master之间数据同步，暂时是个瓶颈。对于主读业务的需求，暂时问题不大；写需求的话，暂时的想法是代码转写的方式。\n\n## 4.3 采用redis sentinal 监听\n默认不错的监听，尝试了下效果不错，还在调研中，配置conf即可，完成后可以查看监听的情况\n```\n127.0.0.1:port> INFO Sentinel\n# Sentinel\nsentinel_masters:1\nsentinel_tilt:0\nsentinel_running_scripts:0\nsentinel_scripts_queue_length:0\nsentinel_simulate_failure_flags:0\nmaster0:name=redis115,status=ok,address=ip:port,slaves=2,sentinels=1\n```\n# 五：常用代码\n\n```\n# 强制杀死redis，模仿宕机\nps aux |grep redis |awk '{print $2}'|xargs kill -9\n# 优化模拟宕机 【根据Dual-X-raY提示-_-】\nredis> DEBUG SEGFAULT\n\n# 重启，指定conf\n/home/work/xxx/bin/redis-server /home/work/xxx/etc/redis.conf\n\n# 压测，具体参数可以参考benchmark\n[cuihuan@cuihuan bin]$  ./redis-benchmark -h 127.0.0.1  -p 端口 -a 密码  -c 1000 -n 10000000  -d 1024 -r 100000 -t set,get,incr,del\n\n\n```\n\n【转载请注明：[【redis学习三】简单高可用redis架构实践](http://cuihuan.net/2017/02/05/redis3/) | [靠谱崔小拽](http://cuihuan.net) 】","source":"_posts/redis3.md","raw":"---\ntitle: 【redis学习三】简单高可用redis架构实践 \ndate: 2017-02-05 17:21:35\ntags: \n- redis\n- 高可用架构\n- 容灾方案\n- redis主从\n---\n> 背景：支撑线上千万级别的天级查询请求，要求高可用。\n\n# 一、方案调研\n## 1.1 redis版本选择\nredis当前主流版本是redis 2.x 和 redis 3.x，3.0对集群支持比较不错，官方解释如下：\n> Redis是一个开源、基于C语言、基于内存亦可持久化的高性能NoSQL数据库，同时，它还提供了多种语言的API。近日，Redis 3.0在经过6个RC版本后，其正式版终于发布了。Redis 3.0的最重要特征是对Redis集群的支持，此外，该版本相对于2.8版本在性能、稳定性等方面都有了重大提高。\n\n综合考虑之后扩展性和稳定性之后，选择版本 `redis 3.2.3-1`版本进行部署\n## 1.2 是否选择搭建集群\n\n是否搭建集群关键要看单机是否能够满足业务需求，做了个简单的数据评估。\n\n### 数据量评估\n- **测试**：单机写入2000w业务数据，占用内存1.5g，本机126g内存\n- **评估**：单机的稳定数据承载量：2000w * （126/1.56）* 0.6 = 96923w \n- **结论**：9T 的数据承载量，远超当前千万级别的数据量\n\n### 性能评估\n- **测试**：简单压测了下\n - 写操作 1000w，80% 在20ms一下 ，98%在30ms，最大218ms，qps 5w/s，总耗时197s\n - 读操作 1000w，97% 在10ms一下 ，99.99%在24ms，qps 6w/s，总耗时160s\n- **评估**：当前的调用量在千万每天，qps的话在百/s。 \n- **结论**：当前单机的redis完全满足需求\n\n因此：在单机远能够满足当下业务需求的情况下，决定不采用的集群的方式来部署redis，减少技术债务风险。\n\n## 1.3 初定方案和架构图\n选定了版本和基本部署方案之后，主要考虑服务的`容灾和稳定性`，经过思考之后采用`采用极简的主从从结构，001实时同步数据002和003；001读写，002，003只读`，机构图如下\n\n[![redis 框架架构](http://cuihuan.net/wp_content/new/redis/redis_3_framework.png)](http://cuihuan.net/wp_content/new/redis/redis_3_framework.png)\n# 二、实现过程\n## 2.1 redis安装\n此处略去，参考官方文档 https://redis.io/\n## 2.2 配置读写master\n- 修改端口：port 【目的：简单的修改默认端口是最好的防攻击】\n- 添加密码：pwd\n- 关闭压缩：rdbcompression no 【硬盘最够，降低cpu的能耗更利于提升性能】\n- 开启守护进程：daemonize yes 【master开启守护，增加稳定性】\n- 关闭protect-mode :允许他机器访问\n- 添加白名单：bind xxx\n- 修改log地址，pid地址和数据存储地址：logfile pidfile 【便于维护和安全】\n- 添加慢查询：slowlog-log-slower-than 500 【根据业务需求，便于优化】\n- 最大内存限制：maxmemory 【考虑稳定性和性能，一般不超过最大内存的60%】\n\n## 2.3 配置只读slave\n- 同master\n- 设置主库:slaveof ip:port\n- 主库密码：masterauth masterpwd\n- 只读：slave-read-only yes\n\n## 2.4 启动测试\n### 启动主库写入数据\n\n[![redis 写入主库](http://cuihuan.net/wp_content/new/redis/redis_3_master.png)](http://cuihuan.net/wp_content/new/redis/redis_3_master.png)\n\n\n### 进入从库查看\n最初没有数据，主库写入之后，从库去到数据\n\n[![redis 写入从库](http://cuihuan.net/wp_content/new/redis/redis_3_slave.png)](http://cuihuan.net/wp_content/new/redis/redis_3_slave.png)\n\n### 查看log确认过程\n\n[![redis log](http://cuihuan.net/wp_content/new/redis/redis_3_log.png)](http://cuihuan.net/wp_content/new/redis/redis_3_log.png)\n\n# 三、架构能力评估\n## 3.1 容灾能力\n\n- 主动容灾\n - 备份：master 全量备份，slave全量备份。\n - 备份安全：本机保存，hadoop同步保存一份。\n - 监控和探活：监控机分钟级探活和预警\n- 被动容灾：\n - slave 宕机：重启之后直接从master恢复\n - master 宕机且硬盘数据为损坏：重启后数据自动恢复且和从库一致。\n - master 宕机且数据损坏：删除损坏数据，使用slave1的数据恢复，保证数据一致。\n - master 和slave 1 同时宕机：slave2 保证读正常，业务不影响，利用slave2 数据备份恢复master，启动slave 即可\n - 三台全宕机：服务挂掉，从hadoop获取数据恢复服务。\n\n## 3.2 性能评估\n压测数据，参见方案选择，完全hold住。\n\n# 四、问题思考\n## 4.1 内存清理策略\n暂时采用：\nnoeviction -> 谁也不删，直接在写操作时返回错误。\n之后采用：\nvolatile-lru -> 根据LRU算法删除带有过期时间的key。 最少使用算法删除。\n如果达到内存限制，手工清理，通过监控脚本监控内存情况\n\n## 4.2 伸缩性和单节点问题\n扩展slave可以直接扩展，扩展master需要master之间数据同步，暂时是个瓶颈。对于主读业务的需求，暂时问题不大；写需求的话，暂时的想法是代码转写的方式。\n\n## 4.3 采用redis sentinal 监听\n默认不错的监听，尝试了下效果不错，还在调研中，配置conf即可，完成后可以查看监听的情况\n```\n127.0.0.1:port> INFO Sentinel\n# Sentinel\nsentinel_masters:1\nsentinel_tilt:0\nsentinel_running_scripts:0\nsentinel_scripts_queue_length:0\nsentinel_simulate_failure_flags:0\nmaster0:name=redis115,status=ok,address=ip:port,slaves=2,sentinels=1\n```\n# 五：常用代码\n\n```\n# 强制杀死redis，模仿宕机\nps aux |grep redis |awk '{print $2}'|xargs kill -9\n# 优化模拟宕机 【根据Dual-X-raY提示-_-】\nredis> DEBUG SEGFAULT\n\n# 重启，指定conf\n/home/work/xxx/bin/redis-server /home/work/xxx/etc/redis.conf\n\n# 压测，具体参数可以参考benchmark\n[cuihuan@cuihuan bin]$  ./redis-benchmark -h 127.0.0.1  -p 端口 -a 密码  -c 1000 -n 10000000  -d 1024 -r 100000 -t set,get,incr,del\n\n\n```\n\n【转载请注明：[【redis学习三】简单高可用redis架构实践](http://cuihuan.net/2017/02/05/redis3/) | [靠谱崔小拽](http://cuihuan.net) 】","slug":"redis3","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nk20015661fl36pai3b","content":"<blockquote>\n<p>背景：支撑线上千万级别的天级查询请求，要求高可用。</p>\n</blockquote>\n<h1 id=\"一、方案调研\"><a href=\"#一、方案调研\" class=\"headerlink\" title=\"一、方案调研\"></a>一、方案调研</h1><h2 id=\"1-1-redis版本选择\"><a href=\"#1-1-redis版本选择\" class=\"headerlink\" title=\"1.1 redis版本选择\"></a>1.1 redis版本选择</h2><p>redis当前主流版本是redis 2.x 和 redis 3.x，3.0对集群支持比较不错，官方解释如下：</p>\n<blockquote>\n<p>Redis是一个开源、基于C语言、基于内存亦可持久化的高性能NoSQL数据库，同时，它还提供了多种语言的API。近日，Redis 3.0在经过6个RC版本后，其正式版终于发布了。Redis 3.0的最重要特征是对Redis集群的支持，此外，该版本相对于2.8版本在性能、稳定性等方面都有了重大提高。</p>\n</blockquote>\n<p>综合考虑之后扩展性和稳定性之后，选择版本 <code>redis 3.2.3-1</code>版本进行部署</p>\n<h2 id=\"1-2-是否选择搭建集群\"><a href=\"#1-2-是否选择搭建集群\" class=\"headerlink\" title=\"1.2 是否选择搭建集群\"></a>1.2 是否选择搭建集群</h2><p>是否搭建集群关键要看单机是否能够满足业务需求，做了个简单的数据评估。</p>\n<h3 id=\"数据量评估\"><a href=\"#数据量评估\" class=\"headerlink\" title=\"数据量评估\"></a>数据量评估</h3><ul>\n<li><strong>测试</strong>：单机写入2000w业务数据，占用内存1.5g，本机126g内存</li>\n<li><strong>评估</strong>：单机的稳定数据承载量：2000w <em> （126/1.56）</em> 0.6 = 96923w </li>\n<li><strong>结论</strong>：9T 的数据承载量，远超当前千万级别的数据量</li>\n</ul>\n<h3 id=\"性能评估\"><a href=\"#性能评估\" class=\"headerlink\" title=\"性能评估\"></a>性能评估</h3><ul>\n<li><strong>测试</strong>：简单压测了下<ul>\n<li>写操作 1000w，80% 在20ms一下 ，98%在30ms，最大218ms，qps 5w/s，总耗时197s</li>\n<li>读操作 1000w，97% 在10ms一下 ，99.99%在24ms，qps 6w/s，总耗时160s</li>\n</ul>\n</li>\n<li><strong>评估</strong>：当前的调用量在千万每天，qps的话在百/s。 </li>\n<li><strong>结论</strong>：当前单机的redis完全满足需求</li>\n</ul>\n<p>因此：在单机远能够满足当下业务需求的情况下，决定不采用的集群的方式来部署redis，减少技术债务风险。</p>\n<h2 id=\"1-3-初定方案和架构图\"><a href=\"#1-3-初定方案和架构图\" class=\"headerlink\" title=\"1.3 初定方案和架构图\"></a>1.3 初定方案和架构图</h2><p>选定了版本和基本部署方案之后，主要考虑服务的<code>容灾和稳定性</code>，经过思考之后采用<code>采用极简的主从从结构，001实时同步数据002和003；001读写，002，003只读</code>，机构图如下</p>\n<p><a href=\"http://cuihuan.net/wp_content/new/redis/redis_3_framework.png\"><img src=\"http://cuihuan.net/wp_content/new/redis/redis_3_framework.png\" alt=\"redis 框架架构\"></a></p>\n<h1 id=\"二、实现过程\"><a href=\"#二、实现过程\" class=\"headerlink\" title=\"二、实现过程\"></a>二、实现过程</h1><h2 id=\"2-1-redis安装\"><a href=\"#2-1-redis安装\" class=\"headerlink\" title=\"2.1 redis安装\"></a>2.1 redis安装</h2><p>此处略去，参考官方文档 <a href=\"https://redis.io/\" target=\"_blank\" rel=\"external\">https://redis.io/</a></p>\n<h2 id=\"2-2-配置读写master\"><a href=\"#2-2-配置读写master\" class=\"headerlink\" title=\"2.2 配置读写master\"></a>2.2 配置读写master</h2><ul>\n<li>修改端口：port 【目的：简单的修改默认端口是最好的防攻击】</li>\n<li>添加密码：pwd</li>\n<li>关闭压缩：rdbcompression no 【硬盘最够，降低cpu的能耗更利于提升性能】</li>\n<li>开启守护进程：daemonize yes 【master开启守护，增加稳定性】</li>\n<li>关闭protect-mode :允许他机器访问</li>\n<li>添加白名单：bind xxx</li>\n<li>修改log地址，pid地址和数据存储地址：logfile pidfile 【便于维护和安全】</li>\n<li>添加慢查询：slowlog-log-slower-than 500 【根据业务需求，便于优化】</li>\n<li>最大内存限制：maxmemory 【考虑稳定性和性能，一般不超过最大内存的60%】</li>\n</ul>\n<h2 id=\"2-3-配置只读slave\"><a href=\"#2-3-配置只读slave\" class=\"headerlink\" title=\"2.3 配置只读slave\"></a>2.3 配置只读slave</h2><ul>\n<li>同master</li>\n<li>设置主库:slaveof ip:port</li>\n<li>主库密码：masterauth masterpwd</li>\n<li>只读：slave-read-only yes</li>\n</ul>\n<h2 id=\"2-4-启动测试\"><a href=\"#2-4-启动测试\" class=\"headerlink\" title=\"2.4 启动测试\"></a>2.4 启动测试</h2><h3 id=\"启动主库写入数据\"><a href=\"#启动主库写入数据\" class=\"headerlink\" title=\"启动主库写入数据\"></a>启动主库写入数据</h3><p><a href=\"http://cuihuan.net/wp_content/new/redis/redis_3_master.png\"><img src=\"http://cuihuan.net/wp_content/new/redis/redis_3_master.png\" alt=\"redis 写入主库\"></a></p>\n<h3 id=\"进入从库查看\"><a href=\"#进入从库查看\" class=\"headerlink\" title=\"进入从库查看\"></a>进入从库查看</h3><p>最初没有数据，主库写入之后，从库去到数据</p>\n<p><a href=\"http://cuihuan.net/wp_content/new/redis/redis_3_slave.png\"><img src=\"http://cuihuan.net/wp_content/new/redis/redis_3_slave.png\" alt=\"redis 写入从库\"></a></p>\n<h3 id=\"查看log确认过程\"><a href=\"#查看log确认过程\" class=\"headerlink\" title=\"查看log确认过程\"></a>查看log确认过程</h3><p><a href=\"http://cuihuan.net/wp_content/new/redis/redis_3_log.png\"><img src=\"http://cuihuan.net/wp_content/new/redis/redis_3_log.png\" alt=\"redis log\"></a></p>\n<h1 id=\"三、架构能力评估\"><a href=\"#三、架构能力评估\" class=\"headerlink\" title=\"三、架构能力评估\"></a>三、架构能力评估</h1><h2 id=\"3-1-容灾能力\"><a href=\"#3-1-容灾能力\" class=\"headerlink\" title=\"3.1 容灾能力\"></a>3.1 容灾能力</h2><ul>\n<li>主动容灾<ul>\n<li>备份：master 全量备份，slave全量备份。</li>\n<li>备份安全：本机保存，hadoop同步保存一份。</li>\n<li>监控和探活：监控机分钟级探活和预警</li>\n</ul>\n</li>\n<li>被动容灾：<ul>\n<li>slave 宕机：重启之后直接从master恢复</li>\n<li>master 宕机且硬盘数据为损坏：重启后数据自动恢复且和从库一致。</li>\n<li>master 宕机且数据损坏：删除损坏数据，使用slave1的数据恢复，保证数据一致。</li>\n<li>master 和slave 1 同时宕机：slave2 保证读正常，业务不影响，利用slave2 数据备份恢复master，启动slave 即可</li>\n<li>三台全宕机：服务挂掉，从hadoop获取数据恢复服务。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-2-性能评估\"><a href=\"#3-2-性能评估\" class=\"headerlink\" title=\"3.2 性能评估\"></a>3.2 性能评估</h2><p>压测数据，参见方案选择，完全hold住。</p>\n<h1 id=\"四、问题思考\"><a href=\"#四、问题思考\" class=\"headerlink\" title=\"四、问题思考\"></a>四、问题思考</h1><h2 id=\"4-1-内存清理策略\"><a href=\"#4-1-内存清理策略\" class=\"headerlink\" title=\"4.1 内存清理策略\"></a>4.1 内存清理策略</h2><p>暂时采用：<br>noeviction -&gt; 谁也不删，直接在写操作时返回错误。<br>之后采用：<br>volatile-lru -&gt; 根据LRU算法删除带有过期时间的key。 最少使用算法删除。<br>如果达到内存限制，手工清理，通过监控脚本监控内存情况</p>\n<h2 id=\"4-2-伸缩性和单节点问题\"><a href=\"#4-2-伸缩性和单节点问题\" class=\"headerlink\" title=\"4.2 伸缩性和单节点问题\"></a>4.2 伸缩性和单节点问题</h2><p>扩展slave可以直接扩展，扩展master需要master之间数据同步，暂时是个瓶颈。对于主读业务的需求，暂时问题不大；写需求的话，暂时的想法是代码转写的方式。</p>\n<h2 id=\"4-3-采用redis-sentinal-监听\"><a href=\"#4-3-采用redis-sentinal-监听\" class=\"headerlink\" title=\"4.3 采用redis sentinal 监听\"></a>4.3 采用redis sentinal 监听</h2><p>默认不错的监听，尝试了下效果不错，还在调研中，配置conf即可，完成后可以查看监听的情况<br><figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:port&gt; INFO Sentinel</div><div class=\"line\"><span class=\"meta\"># Sentinel</span></div><div class=\"line\"><span class=\"symbol\">sentinel_masters:</span><span class=\"number\">1</span></div><div class=\"line\"><span class=\"symbol\">sentinel_tilt:</span><span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">sentinel_running_scripts:</span><span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">sentinel_scripts_queue_length:</span><span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">sentinel_simulate_failure_flags:</span><span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">master0:</span>name=redis115,status=ok,address=ip:port,slaves=<span class=\"number\">2</span>,sentinels=<span class=\"number\">1</span></div></pre></td></tr></table></figure></p>\n<h1 id=\"五：常用代码\"><a href=\"#五：常用代码\" class=\"headerlink\" title=\"五：常用代码\"></a>五：常用代码</h1><figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># 强制杀死redis，模仿宕机</span></div><div class=\"line\">ps aux |grep redis |awk <span class=\"string\">'&#123;print $2&#125;'</span>|xargs kill <span class=\"number\">-9</span></div><div class=\"line\"><span class=\"meta\"># 优化模拟宕机 【根据Dual-X-raY提示-_-】</span></div><div class=\"line\">redis&gt; DEBUG SEGFAULT</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\"># 重启，指定conf</span></div><div class=\"line\">/home/work/xxx/bin/redis-server /home/work/xxx/etc/redis.conf</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\"># 压测，具体参数可以参考benchmark</span></div><div class=\"line\">[cuihuan@cuihuan bin]$  ./redis-benchmark -h <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>  -p 端口 -a 密码  -c <span class=\"number\">1000</span> -n <span class=\"number\">10000000</span>  -d <span class=\"number\">1024</span> -r <span class=\"number\">100000</span> -t <span class=\"keyword\">set</span>,<span class=\"keyword\">get</span>,incr,del</div></pre></td></tr></table></figure>\n<p>【转载请注明：<a href=\"http://cuihuan.net/2017/02/05/redis3/\">【redis学习三】简单高可用redis架构实践</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>背景：支撑线上千万级别的天级查询请求，要求高可用。</p>\n</blockquote>\n<h1 id=\"一、方案调研\"><a href=\"#一、方案调研\" class=\"headerlink\" title=\"一、方案调研\"></a>一、方案调研</h1><h2 id=\"1-1-redis版本选择\"><a href=\"#1-1-redis版本选择\" class=\"headerlink\" title=\"1.1 redis版本选择\"></a>1.1 redis版本选择</h2><p>redis当前主流版本是redis 2.x 和 redis 3.x，3.0对集群支持比较不错，官方解释如下：</p>\n<blockquote>\n<p>Redis是一个开源、基于C语言、基于内存亦可持久化的高性能NoSQL数据库，同时，它还提供了多种语言的API。近日，Redis 3.0在经过6个RC版本后，其正式版终于发布了。Redis 3.0的最重要特征是对Redis集群的支持，此外，该版本相对于2.8版本在性能、稳定性等方面都有了重大提高。</p>\n</blockquote>\n<p>综合考虑之后扩展性和稳定性之后，选择版本 <code>redis 3.2.3-1</code>版本进行部署</p>\n<h2 id=\"1-2-是否选择搭建集群\"><a href=\"#1-2-是否选择搭建集群\" class=\"headerlink\" title=\"1.2 是否选择搭建集群\"></a>1.2 是否选择搭建集群</h2><p>是否搭建集群关键要看单机是否能够满足业务需求，做了个简单的数据评估。</p>\n<h3 id=\"数据量评估\"><a href=\"#数据量评估\" class=\"headerlink\" title=\"数据量评估\"></a>数据量评估</h3><ul>\n<li><strong>测试</strong>：单机写入2000w业务数据，占用内存1.5g，本机126g内存</li>\n<li><strong>评估</strong>：单机的稳定数据承载量：2000w <em> （126/1.56）</em> 0.6 = 96923w </li>\n<li><strong>结论</strong>：9T 的数据承载量，远超当前千万级别的数据量</li>\n</ul>\n<h3 id=\"性能评估\"><a href=\"#性能评估\" class=\"headerlink\" title=\"性能评估\"></a>性能评估</h3><ul>\n<li><strong>测试</strong>：简单压测了下<ul>\n<li>写操作 1000w，80% 在20ms一下 ，98%在30ms，最大218ms，qps 5w/s，总耗时197s</li>\n<li>读操作 1000w，97% 在10ms一下 ，99.99%在24ms，qps 6w/s，总耗时160s</li>\n</ul>\n</li>\n<li><strong>评估</strong>：当前的调用量在千万每天，qps的话在百/s。 </li>\n<li><strong>结论</strong>：当前单机的redis完全满足需求</li>\n</ul>\n<p>因此：在单机远能够满足当下业务需求的情况下，决定不采用的集群的方式来部署redis，减少技术债务风险。</p>\n<h2 id=\"1-3-初定方案和架构图\"><a href=\"#1-3-初定方案和架构图\" class=\"headerlink\" title=\"1.3 初定方案和架构图\"></a>1.3 初定方案和架构图</h2><p>选定了版本和基本部署方案之后，主要考虑服务的<code>容灾和稳定性</code>，经过思考之后采用<code>采用极简的主从从结构，001实时同步数据002和003；001读写，002，003只读</code>，机构图如下</p>\n<p><a href=\"http://cuihuan.net/wp_content/new/redis/redis_3_framework.png\"><img src=\"http://cuihuan.net/wp_content/new/redis/redis_3_framework.png\" alt=\"redis 框架架构\"></a></p>\n<h1 id=\"二、实现过程\"><a href=\"#二、实现过程\" class=\"headerlink\" title=\"二、实现过程\"></a>二、实现过程</h1><h2 id=\"2-1-redis安装\"><a href=\"#2-1-redis安装\" class=\"headerlink\" title=\"2.1 redis安装\"></a>2.1 redis安装</h2><p>此处略去，参考官方文档 <a href=\"https://redis.io/\">https://redis.io/</a></p>\n<h2 id=\"2-2-配置读写master\"><a href=\"#2-2-配置读写master\" class=\"headerlink\" title=\"2.2 配置读写master\"></a>2.2 配置读写master</h2><ul>\n<li>修改端口：port 【目的：简单的修改默认端口是最好的防攻击】</li>\n<li>添加密码：pwd</li>\n<li>关闭压缩：rdbcompression no 【硬盘最够，降低cpu的能耗更利于提升性能】</li>\n<li>开启守护进程：daemonize yes 【master开启守护，增加稳定性】</li>\n<li>关闭protect-mode :允许他机器访问</li>\n<li>添加白名单：bind xxx</li>\n<li>修改log地址，pid地址和数据存储地址：logfile pidfile 【便于维护和安全】</li>\n<li>添加慢查询：slowlog-log-slower-than 500 【根据业务需求，便于优化】</li>\n<li>最大内存限制：maxmemory 【考虑稳定性和性能，一般不超过最大内存的60%】</li>\n</ul>\n<h2 id=\"2-3-配置只读slave\"><a href=\"#2-3-配置只读slave\" class=\"headerlink\" title=\"2.3 配置只读slave\"></a>2.3 配置只读slave</h2><ul>\n<li>同master</li>\n<li>设置主库:slaveof ip:port</li>\n<li>主库密码：masterauth masterpwd</li>\n<li>只读：slave-read-only yes</li>\n</ul>\n<h2 id=\"2-4-启动测试\"><a href=\"#2-4-启动测试\" class=\"headerlink\" title=\"2.4 启动测试\"></a>2.4 启动测试</h2><h3 id=\"启动主库写入数据\"><a href=\"#启动主库写入数据\" class=\"headerlink\" title=\"启动主库写入数据\"></a>启动主库写入数据</h3><p><a href=\"http://cuihuan.net/wp_content/new/redis/redis_3_master.png\"><img src=\"http://cuihuan.net/wp_content/new/redis/redis_3_master.png\" alt=\"redis 写入主库\"></a></p>\n<h3 id=\"进入从库查看\"><a href=\"#进入从库查看\" class=\"headerlink\" title=\"进入从库查看\"></a>进入从库查看</h3><p>最初没有数据，主库写入之后，从库去到数据</p>\n<p><a href=\"http://cuihuan.net/wp_content/new/redis/redis_3_slave.png\"><img src=\"http://cuihuan.net/wp_content/new/redis/redis_3_slave.png\" alt=\"redis 写入从库\"></a></p>\n<h3 id=\"查看log确认过程\"><a href=\"#查看log确认过程\" class=\"headerlink\" title=\"查看log确认过程\"></a>查看log确认过程</h3><p><a href=\"http://cuihuan.net/wp_content/new/redis/redis_3_log.png\"><img src=\"http://cuihuan.net/wp_content/new/redis/redis_3_log.png\" alt=\"redis log\"></a></p>\n<h1 id=\"三、架构能力评估\"><a href=\"#三、架构能力评估\" class=\"headerlink\" title=\"三、架构能力评估\"></a>三、架构能力评估</h1><h2 id=\"3-1-容灾能力\"><a href=\"#3-1-容灾能力\" class=\"headerlink\" title=\"3.1 容灾能力\"></a>3.1 容灾能力</h2><ul>\n<li>主动容灾<ul>\n<li>备份：master 全量备份，slave全量备份。</li>\n<li>备份安全：本机保存，hadoop同步保存一份。</li>\n<li>监控和探活：监控机分钟级探活和预警</li>\n</ul>\n</li>\n<li>被动容灾：<ul>\n<li>slave 宕机：重启之后直接从master恢复</li>\n<li>master 宕机且硬盘数据为损坏：重启后数据自动恢复且和从库一致。</li>\n<li>master 宕机且数据损坏：删除损坏数据，使用slave1的数据恢复，保证数据一致。</li>\n<li>master 和slave 1 同时宕机：slave2 保证读正常，业务不影响，利用slave2 数据备份恢复master，启动slave 即可</li>\n<li>三台全宕机：服务挂掉，从hadoop获取数据恢复服务。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-2-性能评估\"><a href=\"#3-2-性能评估\" class=\"headerlink\" title=\"3.2 性能评估\"></a>3.2 性能评估</h2><p>压测数据，参见方案选择，完全hold住。</p>\n<h1 id=\"四、问题思考\"><a href=\"#四、问题思考\" class=\"headerlink\" title=\"四、问题思考\"></a>四、问题思考</h1><h2 id=\"4-1-内存清理策略\"><a href=\"#4-1-内存清理策略\" class=\"headerlink\" title=\"4.1 内存清理策略\"></a>4.1 内存清理策略</h2><p>暂时采用：<br>noeviction -&gt; 谁也不删，直接在写操作时返回错误。<br>之后采用：<br>volatile-lru -&gt; 根据LRU算法删除带有过期时间的key。 最少使用算法删除。<br>如果达到内存限制，手工清理，通过监控脚本监控内存情况</p>\n<h2 id=\"4-2-伸缩性和单节点问题\"><a href=\"#4-2-伸缩性和单节点问题\" class=\"headerlink\" title=\"4.2 伸缩性和单节点问题\"></a>4.2 伸缩性和单节点问题</h2><p>扩展slave可以直接扩展，扩展master需要master之间数据同步，暂时是个瓶颈。对于主读业务的需求，暂时问题不大；写需求的话，暂时的想法是代码转写的方式。</p>\n<h2 id=\"4-3-采用redis-sentinal-监听\"><a href=\"#4-3-采用redis-sentinal-监听\" class=\"headerlink\" title=\"4.3 采用redis sentinal 监听\"></a>4.3 采用redis sentinal 监听</h2><p>默认不错的监听，尝试了下效果不错，还在调研中，配置conf即可，完成后可以查看监听的情况<br><figure class=\"highlight avrasm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>:port&gt; INFO Sentinel</div><div class=\"line\"><span class=\"meta\"># Sentinel</span></div><div class=\"line\"><span class=\"symbol\">sentinel_masters:</span><span class=\"number\">1</span></div><div class=\"line\"><span class=\"symbol\">sentinel_tilt:</span><span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">sentinel_running_scripts:</span><span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">sentinel_scripts_queue_length:</span><span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">sentinel_simulate_failure_flags:</span><span class=\"number\">0</span></div><div class=\"line\"><span class=\"symbol\">master0:</span>name=redis115,status=ok,address=ip:port,slaves=<span class=\"number\">2</span>,sentinels=<span class=\"number\">1</span></div></pre></td></tr></table></figure></p>\n<h1 id=\"五：常用代码\"><a href=\"#五：常用代码\" class=\"headerlink\" title=\"五：常用代码\"></a>五：常用代码</h1><figure class=\"highlight vala\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># 强制杀死redis，模仿宕机</span></div><div class=\"line\">ps aux |grep redis |awk <span class=\"string\">'&#123;print $2&#125;'</span>|xargs kill <span class=\"number\">-9</span></div><div class=\"line\"><span class=\"meta\"># 优化模拟宕机 【根据Dual-X-raY提示-_-】</span></div><div class=\"line\">redis&gt; DEBUG SEGFAULT</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\"># 重启，指定conf</span></div><div class=\"line\">/home/work/xxx/bin/redis-server /home/work/xxx/etc/redis.conf</div><div class=\"line\"></div><div class=\"line\"><span class=\"meta\"># 压测，具体参数可以参考benchmark</span></div><div class=\"line\">[cuihuan@cuihuan bin]$  ./redis-benchmark -h <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span>  -p 端口 -a 密码  -c <span class=\"number\">1000</span> -n <span class=\"number\">10000000</span>  -d <span class=\"number\">1024</span> -r <span class=\"number\">100000</span> -t <span class=\"keyword\">set</span>,<span class=\"keyword\">get</span>,incr,del</div></pre></td></tr></table></figure>\n<p>【转载请注明：<a href=\"http://cuihuan.net/2017/02/05/redis3/\">【redis学习三】简单高可用redis架构实践</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"【redis学习一】基本概念和基本操作","date":"2015-11-28T09:21:35.000Z","_content":"## redis 基础\n**官网地址**：[ http://redis.io/ ](http://redis.io/)\n\n**基本介绍**：redis 是一个ansi c编写，支持网络的，基于内存的可持久化的日执行，kv数据库；10年期redis有vmare主持开发。\n\n支持数据类型：redis支持strings,hashes list set sorted等结构。\n\n持久化：存储于内存或虚拟内存中，有两种持久化的方式：\n- ：截图，内存数据不断写入硬盘【性能较高】\n- ：log：记录每次更新的日志。【稳定性好】\n\n支持主从同步，性能非常优秀。\n提供多种语言的api  基本上知道的都有。\n\n使用场景：(个人觉的可以有的使用场景)\n1：权限【权限每次都要入库校验，放在前端不靠谱，放在cache最合适】\n2：缓存【例如批量操作数据，可以先缓存】\n3：预取【例如topN数据,另外可能用到的数据，提前取出来，加快页面加载】\n4：构建消息队列【可以根据redis的数据结构list，构造；数据批量入库，加快页面相应等方面不错】。\n5：计数器【类似于批量入库的原理，可以计数，redis原子性的，可以精确支持】\n6：其他场景还在不断探索中。\n\n## 安装和基本操作\n安装参考：[ http://www.runoob.com/redis/redis-install.html ](http://www.runoob.com/redis/redis-install.html)\n\n基本操作：[ 官方文档地址 ](http://redisdoc.com/)\n\n启动：./redis-server\n关闭：redis-cli shutdown\n```\n[cuihuan bin]$ ./redis-cli shutdown\n[cuihuan bin]$ ./redis-server    \n[325] 24 Sep 18:49:06.632 # Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf\n                _._                                                 \n           _.-``__ ''-._                                            \n      _.-``    `.  `_.  ''-._           Redis 2.6.10 (00000000/0) 64 bit\n  .-`` .-```.  ```\\/    _.,_ ''-._                                  \n (    '      ,       .-`  | `,    )     Running in stand alone mode\n |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379\n |    `-._   `._    /     _.-'    |     PID: 325\n  `-._    `-._  `-./  _.-'    _.-'                                  \n |`-._`-._    `-.__.-'    _.-'_.-'|                                 \n |    `-._`-._        _.-'_.-'    |           http://redis.io       \n  `-._    `-._`-.__.-'_.-'    _.-'                                  \n |`-._`-._    `-.__.-'    _.-'_.-'|                                 \n |    `-._`-._        _.-'_.-'    |                                 \n  `-._    `-._`-.__.-'_.-'    _.-'                                  \n      `-._    `-.__.-'    _.-'                                      \n          `-._        _.-'                                          \n              `-.__.-'                                              \n\n[325] 24 Sep 18:49:06.633 # Server started, Redis version 2.6.10\n[325] 24 Sep 18:49:06.633 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n[325] 24 Sep 18:49:06.673 * DB loaded from disk: 0.039 seconds\n[325] 24 Sep 18:49:06.673 * The server is now ready to accept connections on port 6379\n\n```\n安装成功的标志 redis-cli 可以成功进入   \n\n```\n[cuihuan bin]$ ./redis-cli\nredis 127.0.0.1:6379>\n```\n> 注意：使用过程中如果是保密性高的数据，可以设置登录密码，增加安全想；但如果是简单数据，则可以不设置，优点就是速度稍快。\n\nredis 基本配置：\ndaemonize: yes 标示在后台运行\nbind：绑定请求的地址\nport：端口号，默认6379\ntimeout:默认客户端连接超时  多长时间不操作关闭(默认永久，此处改为3600)\n\nloglevel: log等级\ndatabases：默认连接数据库的个数 【此处为8】\nslaveof 主从库\n\nmasterauth :密码验证\nrequirepass:是否需要密码\n\nmaxclients :最大客户机个数 设置为10000\nmaxmemory:最大内存个数 6625156  [机器内存32G,分配大约6g]\n\n\n最基本的操作\nset name xxx\nget name xxx\ndel name xxx\nexists name xxx\n\n举个栗子\n```\n# get val\nredis 127.0.0.1:6379> get name\n\"cuixiaohuan\"\n\n# set val \nredis 127.0.0.1:6379> set name cuixiaohuan_2 \nOK\nredis 127.0.0.1:6379> get name\n\"cuixiaohuan_2\"\n\n# check exists; if exists return 1\nredis 127.0.0.1:6379> exists name\n(integer) 1\n\n# del val\nredis 127.0.0.1:6379> del name\n(integer) 1\nredis 127.0.0.1:6379> get name\n(nil)\n```\n\n其他常用操作：\n```\n# ping :check connect\nredis 127.0.0.1:6379> ping\nPONG\n\n# dbsize :check size\nredis 127.0.0.1:6379> dbsize\n(integer) 1\n\n#flush :clear db\nredis 127.0.0.1:6379> dbsize\n(integer) 1\nredis 127.0.0.1:6379> flushdb\nOK\nredis 127.0.0.1:6379> dbsize\n(integer) 0\n\n```\n[ 个人小站原文链接 ](http://cuihuan.net/?p=266)\n","source":"_posts/【redis学习一】基本概念和基本操作.md","raw":"---\ntitle: 【redis学习一】基本概念和基本操作 \ndate: 2015-11-28 17:21:35\ntags: \n- redis\n---\n## redis 基础\n**官网地址**：[ http://redis.io/ ](http://redis.io/)\n\n**基本介绍**：redis 是一个ansi c编写，支持网络的，基于内存的可持久化的日执行，kv数据库；10年期redis有vmare主持开发。\n\n支持数据类型：redis支持strings,hashes list set sorted等结构。\n\n持久化：存储于内存或虚拟内存中，有两种持久化的方式：\n- ：截图，内存数据不断写入硬盘【性能较高】\n- ：log：记录每次更新的日志。【稳定性好】\n\n支持主从同步，性能非常优秀。\n提供多种语言的api  基本上知道的都有。\n\n使用场景：(个人觉的可以有的使用场景)\n1：权限【权限每次都要入库校验，放在前端不靠谱，放在cache最合适】\n2：缓存【例如批量操作数据，可以先缓存】\n3：预取【例如topN数据,另外可能用到的数据，提前取出来，加快页面加载】\n4：构建消息队列【可以根据redis的数据结构list，构造；数据批量入库，加快页面相应等方面不错】。\n5：计数器【类似于批量入库的原理，可以计数，redis原子性的，可以精确支持】\n6：其他场景还在不断探索中。\n\n## 安装和基本操作\n安装参考：[ http://www.runoob.com/redis/redis-install.html ](http://www.runoob.com/redis/redis-install.html)\n\n基本操作：[ 官方文档地址 ](http://redisdoc.com/)\n\n启动：./redis-server\n关闭：redis-cli shutdown\n```\n[cuihuan bin]$ ./redis-cli shutdown\n[cuihuan bin]$ ./redis-server    \n[325] 24 Sep 18:49:06.632 # Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf\n                _._                                                 \n           _.-``__ ''-._                                            \n      _.-``    `.  `_.  ''-._           Redis 2.6.10 (00000000/0) 64 bit\n  .-`` .-```.  ```\\/    _.,_ ''-._                                  \n (    '      ,       .-`  | `,    )     Running in stand alone mode\n |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379\n |    `-._   `._    /     _.-'    |     PID: 325\n  `-._    `-._  `-./  _.-'    _.-'                                  \n |`-._`-._    `-.__.-'    _.-'_.-'|                                 \n |    `-._`-._        _.-'_.-'    |           http://redis.io       \n  `-._    `-._`-.__.-'_.-'    _.-'                                  \n |`-._`-._    `-.__.-'    _.-'_.-'|                                 \n |    `-._`-._        _.-'_.-'    |                                 \n  `-._    `-._`-.__.-'_.-'    _.-'                                  \n      `-._    `-.__.-'    _.-'                                      \n          `-._        _.-'                                          \n              `-.__.-'                                              \n\n[325] 24 Sep 18:49:06.633 # Server started, Redis version 2.6.10\n[325] 24 Sep 18:49:06.633 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n[325] 24 Sep 18:49:06.673 * DB loaded from disk: 0.039 seconds\n[325] 24 Sep 18:49:06.673 * The server is now ready to accept connections on port 6379\n\n```\n安装成功的标志 redis-cli 可以成功进入   \n\n```\n[cuihuan bin]$ ./redis-cli\nredis 127.0.0.1:6379>\n```\n> 注意：使用过程中如果是保密性高的数据，可以设置登录密码，增加安全想；但如果是简单数据，则可以不设置，优点就是速度稍快。\n\nredis 基本配置：\ndaemonize: yes 标示在后台运行\nbind：绑定请求的地址\nport：端口号，默认6379\ntimeout:默认客户端连接超时  多长时间不操作关闭(默认永久，此处改为3600)\n\nloglevel: log等级\ndatabases：默认连接数据库的个数 【此处为8】\nslaveof 主从库\n\nmasterauth :密码验证\nrequirepass:是否需要密码\n\nmaxclients :最大客户机个数 设置为10000\nmaxmemory:最大内存个数 6625156  [机器内存32G,分配大约6g]\n\n\n最基本的操作\nset name xxx\nget name xxx\ndel name xxx\nexists name xxx\n\n举个栗子\n```\n# get val\nredis 127.0.0.1:6379> get name\n\"cuixiaohuan\"\n\n# set val \nredis 127.0.0.1:6379> set name cuixiaohuan_2 \nOK\nredis 127.0.0.1:6379> get name\n\"cuixiaohuan_2\"\n\n# check exists; if exists return 1\nredis 127.0.0.1:6379> exists name\n(integer) 1\n\n# del val\nredis 127.0.0.1:6379> del name\n(integer) 1\nredis 127.0.0.1:6379> get name\n(nil)\n```\n\n其他常用操作：\n```\n# ping :check connect\nredis 127.0.0.1:6379> ping\nPONG\n\n# dbsize :check size\nredis 127.0.0.1:6379> dbsize\n(integer) 1\n\n#flush :clear db\nredis 127.0.0.1:6379> dbsize\n(integer) 1\nredis 127.0.0.1:6379> flushdb\nOK\nredis 127.0.0.1:6379> dbsize\n(integer) 0\n\n```\n[ 个人小站原文链接 ](http://cuihuan.net/?p=266)\n","slug":"【redis学习一】基本概念和基本操作","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nk50016661f9xnefop1","content":"<h2 id=\"redis-基础\"><a href=\"#redis-基础\" class=\"headerlink\" title=\"redis 基础\"></a>redis 基础</h2><p><strong>官网地址</strong>：<a href=\"http://redis.io/\" target=\"_blank\" rel=\"external\"> http://redis.io/ </a></p>\n<p><strong>基本介绍</strong>：redis 是一个ansi c编写，支持网络的，基于内存的可持久化的日执行，kv数据库；10年期redis有vmare主持开发。</p>\n<p>支持数据类型：redis支持strings,hashes list set sorted等结构。</p>\n<p>持久化：存储于内存或虚拟内存中，有两种持久化的方式：</p>\n<ul>\n<li>：截图，内存数据不断写入硬盘【性能较高】</li>\n<li>：log：记录每次更新的日志。【稳定性好】</li>\n</ul>\n<p>支持主从同步，性能非常优秀。<br>提供多种语言的api  基本上知道的都有。</p>\n<p>使用场景：(个人觉的可以有的使用场景)<br>1：权限【权限每次都要入库校验，放在前端不靠谱，放在cache最合适】<br>2：缓存【例如批量操作数据，可以先缓存】<br>3：预取【例如topN数据,另外可能用到的数据，提前取出来，加快页面加载】<br>4：构建消息队列【可以根据redis的数据结构list，构造；数据批量入库，加快页面相应等方面不错】。<br>5：计数器【类似于批量入库的原理，可以计数，redis原子性的，可以精确支持】<br>6：其他场景还在不断探索中。</p>\n<h2 id=\"安装和基本操作\"><a href=\"#安装和基本操作\" class=\"headerlink\" title=\"安装和基本操作\"></a>安装和基本操作</h2><p>安装参考：<a href=\"http://www.runoob.com/redis/redis-install.html\" target=\"_blank\" rel=\"external\"> http://www.runoob.com/redis/redis-install.html </a></p>\n<p>基本操作：<a href=\"http://redisdoc.com/\" target=\"_blank\" rel=\"external\"> 官方文档地址 </a></p>\n<p>启动：./redis-server<br>关闭：redis-cli shutdown<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan bin]$ ./redis-cli shutdown</div><div class=\"line\">[cuihuan bin]$ ./redis-server    </div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.632</span> # Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf</div><div class=\"line\">                <span class=\"symbol\">_</span>.<span class=\"symbol\">_</span>                                                 </div><div class=\"line\">           <span class=\"symbol\">_</span>.-``<span class=\"symbol\">__</span> ''-.<span class=\"symbol\">_</span>                                            </div><div class=\"line\">      <span class=\"symbol\">_</span>.-``    `.  `<span class=\"symbol\">_</span>.  ''-.<span class=\"symbol\">_</span>           Redis <span class=\"number\">2.6</span>.10 (<span class=\"number\">00000000</span>/<span class=\"number\">0</span>) <span class=\"number\">64</span> bit</div><div class=\"line\">  .-`` .-```.  ```\\/    <span class=\"symbol\">_</span>.,<span class=\"symbol\">_</span> ''-.<span class=\"symbol\">_</span>                                  </div><div class=\"line\"> (    '      ,       .-`  | `,    )     Running <span class=\"keyword\">in</span> stand alone mode</div><div class=\"line\"> |`-.<span class=\"symbol\">_</span>`-...-` <span class=\"symbol\">__</span>...-.``-.<span class=\"symbol\">_</span>|'` <span class=\"symbol\">_</span>.-'|     Port: <span class=\"number\">6379</span></div><div class=\"line\"> |    `-.<span class=\"symbol\">_</span>   `.<span class=\"symbol\">_</span>    /     <span class=\"symbol\">_</span>.-'    |     PID: <span class=\"number\">325</span></div><div class=\"line\">  `-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">_</span>  `-./  <span class=\"symbol\">_</span>.-'    <span class=\"symbol\">_</span>.-'                                  </div><div class=\"line\"> |`-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">__</span>.-'    <span class=\"symbol\">_</span>.-'<span class=\"symbol\">_</span>.-'|                                 </div><div class=\"line\"> |    `-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">_</span>        <span class=\"symbol\">_</span>.-'<span class=\"symbol\">_</span>.-'    |           http://redis.io       </div><div class=\"line\">  `-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">__</span>.-'<span class=\"symbol\">_</span>.-'    <span class=\"symbol\">_</span>.-'                                  </div><div class=\"line\"> |`-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">__</span>.-'    <span class=\"symbol\">_</span>.-'<span class=\"symbol\">_</span>.-'|                                 </div><div class=\"line\"> |    `-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">_</span>        <span class=\"symbol\">_</span>.-'<span class=\"symbol\">_</span>.-'    |                                 </div><div class=\"line\">  `-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">__</span>.-'<span class=\"symbol\">_</span>.-'    <span class=\"symbol\">_</span>.-'                                  </div><div class=\"line\">      `-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">__</span>.-'    <span class=\"symbol\">_</span>.-'                                      </div><div class=\"line\">          `-.<span class=\"symbol\">_</span>        <span class=\"symbol\">_</span>.-'                                          </div><div class=\"line\">              `-.<span class=\"symbol\">__</span>.-'                                              </div><div class=\"line\"></div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.633</span> # Server started, Redis version <span class=\"number\">2.6</span>.10</div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.633</span> # WARNING overcommit_memory <span class=\"built_in\">is</span> set to <span class=\"number\">0</span>! Background <span class=\"built_in\">save</span> may fail under low memory condition. To <span class=\"built_in\">fix</span> this issue add 'vm.overcommit_memory = <span class=\"number\">1</span>' to /etc/sysctl.conf <span class=\"keyword\">and</span> <span class=\"keyword\">then</span> reboot <span class=\"keyword\">or</span> run the command 'sysctl vm.overcommit_memory=<span class=\"number\">1</span>' <span class=\"keyword\">for</span> this to take effect.</div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.673</span> * DB loaded from disk: <span class=\"number\">0.039</span> seconds</div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.673</span> * The server <span class=\"built_in\">is</span> now ready to accept connections on port <span class=\"number\">6379</span></div></pre></td></tr></table></figure></p>\n<p>安装成功的标志 redis-cli 可以成功进入   </p>\n<figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan bin]$ ./redis-<span class=\"keyword\">cli</span></div><div class=\"line\">redis <span class=\"number\">127.0</span><span class=\"meta\">.0</span><span class=\"meta\">.1</span>:<span class=\"number\">6379</span>&gt;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>注意：使用过程中如果是保密性高的数据，可以设置登录密码，增加安全想；但如果是简单数据，则可以不设置，优点就是速度稍快。</p>\n</blockquote>\n<p>redis 基本配置：<br>daemonize: yes 标示在后台运行<br>bind：绑定请求的地址<br>port：端口号，默认6379<br>timeout:默认客户端连接超时  多长时间不操作关闭(默认永久，此处改为3600)</p>\n<p>loglevel: log等级<br>databases：默认连接数据库的个数 【此处为8】<br>slaveof 主从库</p>\n<p>masterauth :密码验证<br>requirepass:是否需要密码</p>\n<p>maxclients :最大客户机个数 设置为10000<br>maxmemory:最大内存个数 6625156  [机器内存32G,分配大约6g]</p>\n<p>最基本的操作<br>set name xxx<br>get name xxx<br>del name xxx<br>exists name xxx</p>\n<p>举个栗子<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"># <span class=\"selector-tag\">get</span> <span class=\"selector-tag\">val</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">get</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">\"<span class=\"selector-tag\">cuixiaohuan</span>\"</div><div class=\"line\"></div><div class=\"line\"># <span class=\"selector-tag\">set</span> <span class=\"selector-tag\">val</span> </div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">set</span> <span class=\"selector-tag\">name</span> <span class=\"selector-tag\">cuixiaohuan_2</span> </div><div class=\"line\"><span class=\"selector-tag\">OK</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">get</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">\"<span class=\"selector-tag\">cuixiaohuan_2</span>\"</div><div class=\"line\"></div><div class=\"line\"># <span class=\"selector-tag\">check</span> <span class=\"selector-tag\">exists</span>; <span class=\"selector-tag\">if</span> <span class=\"selector-tag\">exists</span> <span class=\"selector-tag\">return</span> 1</div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">exists</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 1</div><div class=\"line\"></div><div class=\"line\"># <span class=\"selector-tag\">del</span> <span class=\"selector-tag\">val</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">del</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 1</div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">get</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">(<span class=\"selector-tag\">nil</span>)</div></pre></td></tr></table></figure></p>\n<p>其他常用操作：<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"># <span class=\"selector-tag\">ping</span> <span class=\"selector-pseudo\">:check</span> <span class=\"selector-tag\">connect</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">ping</span></div><div class=\"line\"><span class=\"selector-tag\">PONG</span></div><div class=\"line\"></div><div class=\"line\"># <span class=\"selector-tag\">dbsize</span> <span class=\"selector-pseudo\">:check</span> <span class=\"selector-tag\">size</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">dbsize</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 1</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-id\">#flush</span> <span class=\"selector-pseudo\">:clear</span> <span class=\"selector-tag\">db</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">dbsize</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 1</div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">flushdb</span></div><div class=\"line\"><span class=\"selector-tag\">OK</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">dbsize</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 0</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cuihuan.net/?p=266\"> 个人小站原文链接 </a></p>\n","excerpt":"","more":"<h2 id=\"redis-基础\"><a href=\"#redis-基础\" class=\"headerlink\" title=\"redis 基础\"></a>redis 基础</h2><p><strong>官网地址</strong>：<a href=\"http://redis.io/\"> http://redis.io/ </a></p>\n<p><strong>基本介绍</strong>：redis 是一个ansi c编写，支持网络的，基于内存的可持久化的日执行，kv数据库；10年期redis有vmare主持开发。</p>\n<p>支持数据类型：redis支持strings,hashes list set sorted等结构。</p>\n<p>持久化：存储于内存或虚拟内存中，有两种持久化的方式：</p>\n<ul>\n<li>：截图，内存数据不断写入硬盘【性能较高】</li>\n<li>：log：记录每次更新的日志。【稳定性好】</li>\n</ul>\n<p>支持主从同步，性能非常优秀。<br>提供多种语言的api  基本上知道的都有。</p>\n<p>使用场景：(个人觉的可以有的使用场景)<br>1：权限【权限每次都要入库校验，放在前端不靠谱，放在cache最合适】<br>2：缓存【例如批量操作数据，可以先缓存】<br>3：预取【例如topN数据,另外可能用到的数据，提前取出来，加快页面加载】<br>4：构建消息队列【可以根据redis的数据结构list，构造；数据批量入库，加快页面相应等方面不错】。<br>5：计数器【类似于批量入库的原理，可以计数，redis原子性的，可以精确支持】<br>6：其他场景还在不断探索中。</p>\n<h2 id=\"安装和基本操作\"><a href=\"#安装和基本操作\" class=\"headerlink\" title=\"安装和基本操作\"></a>安装和基本操作</h2><p>安装参考：<a href=\"http://www.runoob.com/redis/redis-install.html\"> http://www.runoob.com/redis/redis-install.html </a></p>\n<p>基本操作：<a href=\"http://redisdoc.com/\"> 官方文档地址 </a></p>\n<p>启动：./redis-server<br>关闭：redis-cli shutdown<br><figure class=\"highlight maxima\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan bin]$ ./redis-cli shutdown</div><div class=\"line\">[cuihuan bin]$ ./redis-server    </div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.632</span> # Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf</div><div class=\"line\">                <span class=\"symbol\">_</span>.<span class=\"symbol\">_</span>                                                 </div><div class=\"line\">           <span class=\"symbol\">_</span>.-``<span class=\"symbol\">__</span> ''-.<span class=\"symbol\">_</span>                                            </div><div class=\"line\">      <span class=\"symbol\">_</span>.-``    `.  `<span class=\"symbol\">_</span>.  ''-.<span class=\"symbol\">_</span>           Redis <span class=\"number\">2.6</span>.10 (<span class=\"number\">00000000</span>/<span class=\"number\">0</span>) <span class=\"number\">64</span> bit</div><div class=\"line\">  .-`` .-```.  ```\\/    <span class=\"symbol\">_</span>.,<span class=\"symbol\">_</span> ''-.<span class=\"symbol\">_</span>                                  </div><div class=\"line\"> (    '      ,       .-`  | `,    )     Running <span class=\"keyword\">in</span> stand alone mode</div><div class=\"line\"> |`-.<span class=\"symbol\">_</span>`-...-` <span class=\"symbol\">__</span>...-.``-.<span class=\"symbol\">_</span>|'` <span class=\"symbol\">_</span>.-'|     Port: <span class=\"number\">6379</span></div><div class=\"line\"> |    `-.<span class=\"symbol\">_</span>   `.<span class=\"symbol\">_</span>    /     <span class=\"symbol\">_</span>.-'    |     PID: <span class=\"number\">325</span></div><div class=\"line\">  `-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">_</span>  `-./  <span class=\"symbol\">_</span>.-'    <span class=\"symbol\">_</span>.-'                                  </div><div class=\"line\"> |`-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">__</span>.-'    <span class=\"symbol\">_</span>.-'<span class=\"symbol\">_</span>.-'|                                 </div><div class=\"line\"> |    `-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">_</span>        <span class=\"symbol\">_</span>.-'<span class=\"symbol\">_</span>.-'    |           http://redis.io       </div><div class=\"line\">  `-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">__</span>.-'<span class=\"symbol\">_</span>.-'    <span class=\"symbol\">_</span>.-'                                  </div><div class=\"line\"> |`-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">__</span>.-'    <span class=\"symbol\">_</span>.-'<span class=\"symbol\">_</span>.-'|                                 </div><div class=\"line\"> |    `-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">_</span>        <span class=\"symbol\">_</span>.-'<span class=\"symbol\">_</span>.-'    |                                 </div><div class=\"line\">  `-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">_</span>`-.<span class=\"symbol\">__</span>.-'<span class=\"symbol\">_</span>.-'    <span class=\"symbol\">_</span>.-'                                  </div><div class=\"line\">      `-.<span class=\"symbol\">_</span>    `-.<span class=\"symbol\">__</span>.-'    <span class=\"symbol\">_</span>.-'                                      </div><div class=\"line\">          `-.<span class=\"symbol\">_</span>        <span class=\"symbol\">_</span>.-'                                          </div><div class=\"line\">              `-.<span class=\"symbol\">__</span>.-'                                              </div><div class=\"line\"></div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.633</span> # Server started, Redis version <span class=\"number\">2.6</span>.10</div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.633</span> # WARNING overcommit_memory <span class=\"built_in\">is</span> set to <span class=\"number\">0</span>! Background <span class=\"built_in\">save</span> may fail under low memory condition. To <span class=\"built_in\">fix</span> this issue add 'vm.overcommit_memory = <span class=\"number\">1</span>' to /etc/sysctl.conf <span class=\"keyword\">and</span> <span class=\"keyword\">then</span> reboot <span class=\"keyword\">or</span> run the command 'sysctl vm.overcommit_memory=<span class=\"number\">1</span>' <span class=\"keyword\">for</span> this to take effect.</div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.673</span> * DB loaded from disk: <span class=\"number\">0.039</span> seconds</div><div class=\"line\">[<span class=\"number\">325</span>] <span class=\"number\">24</span> Sep <span class=\"number\">18</span>:<span class=\"number\">49</span>:<span class=\"number\">06.673</span> * The server <span class=\"built_in\">is</span> now ready to accept connections on port <span class=\"number\">6379</span></div></pre></td></tr></table></figure></p>\n<p>安装成功的标志 redis-cli 可以成功进入   </p>\n<figure class=\"highlight x86asm\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuihuan bin]$ ./redis-<span class=\"keyword\">cli</span></div><div class=\"line\">redis <span class=\"number\">127.0</span><span class=\"meta\">.0</span><span class=\"meta\">.1</span>:<span class=\"number\">6379</span>&gt;</div></pre></td></tr></table></figure>\n<blockquote>\n<p>注意：使用过程中如果是保密性高的数据，可以设置登录密码，增加安全想；但如果是简单数据，则可以不设置，优点就是速度稍快。</p>\n</blockquote>\n<p>redis 基本配置：<br>daemonize: yes 标示在后台运行<br>bind：绑定请求的地址<br>port：端口号，默认6379<br>timeout:默认客户端连接超时  多长时间不操作关闭(默认永久，此处改为3600)</p>\n<p>loglevel: log等级<br>databases：默认连接数据库的个数 【此处为8】<br>slaveof 主从库</p>\n<p>masterauth :密码验证<br>requirepass:是否需要密码</p>\n<p>maxclients :最大客户机个数 设置为10000<br>maxmemory:最大内存个数 6625156  [机器内存32G,分配大约6g]</p>\n<p>最基本的操作<br>set name xxx<br>get name xxx<br>del name xxx<br>exists name xxx</p>\n<p>举个栗子<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\"># <span class=\"selector-tag\">get</span> <span class=\"selector-tag\">val</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">get</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">\"<span class=\"selector-tag\">cuixiaohuan</span>\"</div><div class=\"line\"></div><div class=\"line\"># <span class=\"selector-tag\">set</span> <span class=\"selector-tag\">val</span> </div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">set</span> <span class=\"selector-tag\">name</span> <span class=\"selector-tag\">cuixiaohuan_2</span> </div><div class=\"line\"><span class=\"selector-tag\">OK</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">get</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">\"<span class=\"selector-tag\">cuixiaohuan_2</span>\"</div><div class=\"line\"></div><div class=\"line\"># <span class=\"selector-tag\">check</span> <span class=\"selector-tag\">exists</span>; <span class=\"selector-tag\">if</span> <span class=\"selector-tag\">exists</span> <span class=\"selector-tag\">return</span> 1</div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">exists</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 1</div><div class=\"line\"></div><div class=\"line\"># <span class=\"selector-tag\">del</span> <span class=\"selector-tag\">val</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">del</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 1</div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">get</span> <span class=\"selector-tag\">name</span></div><div class=\"line\">(<span class=\"selector-tag\">nil</span>)</div></pre></td></tr></table></figure></p>\n<p>其他常用操作：<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div></pre></td><td class=\"code\"><pre><div class=\"line\"># <span class=\"selector-tag\">ping</span> <span class=\"selector-pseudo\">:check</span> <span class=\"selector-tag\">connect</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">ping</span></div><div class=\"line\"><span class=\"selector-tag\">PONG</span></div><div class=\"line\"></div><div class=\"line\"># <span class=\"selector-tag\">dbsize</span> <span class=\"selector-pseudo\">:check</span> <span class=\"selector-tag\">size</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">dbsize</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 1</div><div class=\"line\"></div><div class=\"line\"><span class=\"selector-id\">#flush</span> <span class=\"selector-pseudo\">:clear</span> <span class=\"selector-tag\">db</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">dbsize</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 1</div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">flushdb</span></div><div class=\"line\"><span class=\"selector-tag\">OK</span></div><div class=\"line\"><span class=\"selector-tag\">redis</span> 127<span class=\"selector-class\">.0</span><span class=\"selector-class\">.0</span><span class=\"selector-class\">.1</span><span class=\"selector-pseudo\">:6379</span>&gt; <span class=\"selector-tag\">dbsize</span></div><div class=\"line\">(<span class=\"selector-tag\">integer</span>) 0</div></pre></td></tr></table></figure></p>\n<p><a href=\"http://cuihuan.net/?p=266\"> 个人小站原文链接 </a></p>\n"},{"title":"【page-monitor 前端自动化 上篇】初步调研","date":"2016-08-07T09:21:35.000Z","_content":"\n> 前端自动化测试主要在于：`变化快，不稳定，兼容性复杂`；故而，想通过较低的成本维护较为通用的自动化case比较困难。本文旨在`通过page-monitor获取和分析dom结构，调研能否通过监控和分析核心dom，来进行前端自动化测试`。\n\n## 一：page-monitor 介绍\npage-monitor：通过xpath获取dom节点结构，之后可视化的渲染出页面的差异。\ngithub地址：https://github.com/fouber/page-monitor\n基本原理：`利用xpath获取页面的dom结构，存储为结构化的json，对比两次的json之间的差异，利用phantom渲染页面和差异页面`。\n\n先上个初次试用的图\n\n[![927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3](http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png)](http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png)\n\n## 二：初次试用\n### 2.1 安装\n```\n# page-monitor 依赖于 phantomjs\nnpm install phantomjs\nnpm install page-monitor\n```\n注意：phantomJs较大，如果比较慢 可以用brew安装，并且`page-monitor最多兼容phantom1.98`\n```\n# 调整phantom为1.98 版本\nMacBook-Pro:~ cuixiaohuan$ brew link phantomjs198\nLinking /usr/local/Cellar/phantomjs198/1.9.8... 2 symlinks created\nMacBook-Pro:~ cuixiaohuan$ phantomjs -v\n1.9.8\n```\n2.2 初次运行：\n写一个test.js 代码如下:\n```\nvar Monitor = require('page-monitor');\n\nvar url = 'http://www.baidu.com';\nvar monitor = new Monitor(url);\nmonitor.capture(function(code){\n        console.log(monitor.log); // from phantom\n        console.log('done, exit [' + code + ']');\n});\n```\n运行效果\n```\nMacBook-Pro:test cuixiaohuan$ node test.js\n{ debug:\n   [ 'mode: 11',\n     'need diff',\n     'loading: http://www.baidu.com',\n     'page.viewportSize = {\"width\":320,\"height\":568}',\n     'page.settings.resourceTimeout = 20000',\n     'page.settings.userAgent = \"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53\"',\n     'loaded: http://www.baidu.com',\n     'delay before render: 0ms',\n     'walk tree',\n     'save capture [/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/1461155680901]',\n     'screenshot [/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/1461155680901/screenshot.jpg]',\n     'Unsafe JavaScript attempt to access frame with URL about:blank from frame with URL file:///Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/node_modules/page-monitor/phantomjs/index.js. Domains, protocols and ports must match.' ],\n  warning: [],\n  info: [],\n  error: [],\n  notice: [] }\ndone, exit [0]\n```\n### 2.2 生成对比页面\n test.js code\n\n```\nmonitor.diff(1408947323420, 1408947556898, function(code){\n    console.log(monitor.log.info); // diff result\n    console.log('[DONE] exit [' + code + ']');\n});\n```\n运行\n```\nMacBook-Pro:test cuixiaohuan$ node test.js\n[ '{\"diff\":{\"left\":\"1461155680901\",\"right\":\"1461163758667\",\"screenshot\":\"/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/diff/1461155680901-1461163758667.jpg\",\"count\":{\"add\":2,\"remove\":2,\"style\":0,\"text\":9}}}' ]\n[DONE] exit [0]\n```\n\n### 2.3 对比页面效果如下图\n[![927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3](http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png)](http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png)\n\n### 2.4 目录初步分析\n通过目录和运行结果\n1：每个时间利用phantom生成一张截图【保存现场】和一个dome的tree.json【对比dom】 【生成过程看下源码】\n2：diff 调用tree.json 比较区中的区别【位置，内容生成和对比过程之后看下源码？】\n3：利用当时保存的截图渲染生成的结果\n\n[![F2838502-FF7E-4DC8-9C7F-01687F3DB3E9](http://cuihuan.net/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png)](http://cuihuan.net/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png)\n\n\n## 三：dom diff工具page monitor 调研初步结论：\n\n- 1：dom的diff 是可行的。\n- 2：page monitor 现有主要功能：抽取不同时间段的页面做页面domdiff\n使用过程中缺陷：\n1：依赖太多，依赖node，依赖phantom，\n2：接口太少，现在直接提供的就两个一个保存现场，一个diff。不方便dom定制和阈值定制。\n\n## 四：应用价值思考和下一步\n如果能对dom树的处理更完善一些，应用价值还是挺高的，例如`核心dom的diff，局部dom的diff，时效性dom(例如：时间tag必须变化，不变化则为bug)的变更检验，兼容性dom的check等等`\n\n下一步调研：\n看下源码中，分析dom生成tree过程，对比tree过程，展现tree过程。\n\n相关文章：\n[【page-monitor 前端自动化 中篇】 源码分析](http://cuihuan.net/?p=493)\n[【page-monitor 前端自动化 下篇】 实践应用](http://cuihuan.net/?p=508)\n","source":"_posts/【page-monitor 前端自动化 上篇】初步调研 .md","raw":"---\ntitle: 【page-monitor 前端自动化 上篇】初步调研  \ndate: 2016-08-07 17:21:35\ntags: \n- 自动化测试\n- javascript\n---\n\n> 前端自动化测试主要在于：`变化快，不稳定，兼容性复杂`；故而，想通过较低的成本维护较为通用的自动化case比较困难。本文旨在`通过page-monitor获取和分析dom结构，调研能否通过监控和分析核心dom，来进行前端自动化测试`。\n\n## 一：page-monitor 介绍\npage-monitor：通过xpath获取dom节点结构，之后可视化的渲染出页面的差异。\ngithub地址：https://github.com/fouber/page-monitor\n基本原理：`利用xpath获取页面的dom结构，存储为结构化的json，对比两次的json之间的差异，利用phantom渲染页面和差异页面`。\n\n先上个初次试用的图\n\n[![927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3](http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png)](http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png)\n\n## 二：初次试用\n### 2.1 安装\n```\n# page-monitor 依赖于 phantomjs\nnpm install phantomjs\nnpm install page-monitor\n```\n注意：phantomJs较大，如果比较慢 可以用brew安装，并且`page-monitor最多兼容phantom1.98`\n```\n# 调整phantom为1.98 版本\nMacBook-Pro:~ cuixiaohuan$ brew link phantomjs198\nLinking /usr/local/Cellar/phantomjs198/1.9.8... 2 symlinks created\nMacBook-Pro:~ cuixiaohuan$ phantomjs -v\n1.9.8\n```\n2.2 初次运行：\n写一个test.js 代码如下:\n```\nvar Monitor = require('page-monitor');\n\nvar url = 'http://www.baidu.com';\nvar monitor = new Monitor(url);\nmonitor.capture(function(code){\n        console.log(monitor.log); // from phantom\n        console.log('done, exit [' + code + ']');\n});\n```\n运行效果\n```\nMacBook-Pro:test cuixiaohuan$ node test.js\n{ debug:\n   [ 'mode: 11',\n     'need diff',\n     'loading: http://www.baidu.com',\n     'page.viewportSize = {\"width\":320,\"height\":568}',\n     'page.settings.resourceTimeout = 20000',\n     'page.settings.userAgent = \"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53\"',\n     'loaded: http://www.baidu.com',\n     'delay before render: 0ms',\n     'walk tree',\n     'save capture [/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/1461155680901]',\n     'screenshot [/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/1461155680901/screenshot.jpg]',\n     'Unsafe JavaScript attempt to access frame with URL about:blank from frame with URL file:///Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/node_modules/page-monitor/phantomjs/index.js. Domains, protocols and ports must match.' ],\n  warning: [],\n  info: [],\n  error: [],\n  notice: [] }\ndone, exit [0]\n```\n### 2.2 生成对比页面\n test.js code\n\n```\nmonitor.diff(1408947323420, 1408947556898, function(code){\n    console.log(monitor.log.info); // diff result\n    console.log('[DONE] exit [' + code + ']');\n});\n```\n运行\n```\nMacBook-Pro:test cuixiaohuan$ node test.js\n[ '{\"diff\":{\"left\":\"1461155680901\",\"right\":\"1461163758667\",\"screenshot\":\"/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/diff/1461155680901-1461163758667.jpg\",\"count\":{\"add\":2,\"remove\":2,\"style\":0,\"text\":9}}}' ]\n[DONE] exit [0]\n```\n\n### 2.3 对比页面效果如下图\n[![927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3](http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png)](http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png)\n\n### 2.4 目录初步分析\n通过目录和运行结果\n1：每个时间利用phantom生成一张截图【保存现场】和一个dome的tree.json【对比dom】 【生成过程看下源码】\n2：diff 调用tree.json 比较区中的区别【位置，内容生成和对比过程之后看下源码？】\n3：利用当时保存的截图渲染生成的结果\n\n[![F2838502-FF7E-4DC8-9C7F-01687F3DB3E9](http://cuihuan.net/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png)](http://cuihuan.net/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png)\n\n\n## 三：dom diff工具page monitor 调研初步结论：\n\n- 1：dom的diff 是可行的。\n- 2：page monitor 现有主要功能：抽取不同时间段的页面做页面domdiff\n使用过程中缺陷：\n1：依赖太多，依赖node，依赖phantom，\n2：接口太少，现在直接提供的就两个一个保存现场，一个diff。不方便dom定制和阈值定制。\n\n## 四：应用价值思考和下一步\n如果能对dom树的处理更完善一些，应用价值还是挺高的，例如`核心dom的diff，局部dom的diff，时效性dom(例如：时间tag必须变化，不变化则为bug)的变更检验，兼容性dom的check等等`\n\n下一步调研：\n看下源码中，分析dom生成tree过程，对比tree过程，展现tree过程。\n\n相关文章：\n[【page-monitor 前端自动化 中篇】 源码分析](http://cuihuan.net/?p=493)\n[【page-monitor 前端自动化 下篇】 实践应用](http://cuihuan.net/?p=508)\n","slug":"【page-monitor 前端自动化 上篇】初步调研 ","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nk70019661fsjdvrige","content":"<blockquote>\n<p>前端自动化测试主要在于：<code>变化快，不稳定，兼容性复杂</code>；故而，想通过较低的成本维护较为通用的自动化case比较困难。本文旨在<code>通过page-monitor获取和分析dom结构，调研能否通过监控和分析核心dom，来进行前端自动化测试</code>。</p>\n</blockquote>\n<h2 id=\"一：page-monitor-介绍\"><a href=\"#一：page-monitor-介绍\" class=\"headerlink\" title=\"一：page-monitor 介绍\"></a>一：page-monitor 介绍</h2><p>page-monitor：通过xpath获取dom节点结构，之后可视化的渲染出页面的差异。<br>github地址：<a href=\"https://github.com/fouber/page-monitor\" target=\"_blank\" rel=\"external\">https://github.com/fouber/page-monitor</a><br>基本原理：<code>利用xpath获取页面的dom结构，存储为结构化的json，对比两次的json之间的差异，利用phantom渲染页面和差异页面</code>。</p>\n<p>先上个初次试用的图</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png\" alt=\"927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3\"></a></p>\n<h2 id=\"二：初次试用\"><a href=\"#二：初次试用\" class=\"headerlink\" title=\"二：初次试用\"></a>二：初次试用</h2><h3 id=\"2-1-安装\"><a href=\"#2-1-安装\" class=\"headerlink\" title=\"2.1 安装\"></a>2.1 安装</h3><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># page-monitor 依赖于 phantomjs</span></div><div class=\"line\">npm <span class=\"keyword\">install</span> phantomjs</div><div class=\"line\">npm <span class=\"keyword\">install</span> page-monitor</div></pre></td></tr></table></figure>\n<p>注意：phantomJs较大，如果比较慢 可以用brew安装，并且<code>page-monitor最多兼容phantom1.98</code><br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># 调整phantom为1.98 版本</span></div><div class=\"line\">MacBook-Pro:~ cuixiaohuan$ brew link phantomjs198</div><div class=\"line\">Linking <span class=\"meta-keyword\">/usr/</span>local/Cellar<span class=\"meta-keyword\">/phantomjs198/</span><span class=\"number\">1.9</span><span class=\"number\">.8</span>... <span class=\"number\">2</span> symlinks created</div><div class=\"line\">MacBook-Pro:~ cuixiaohuan$ phantomjs -v</div><div class=\"line\"><span class=\"number\">1.9</span><span class=\"number\">.8</span></div></pre></td></tr></table></figure></p>\n<p>2.2 初次运行：<br>写一个test.js 代码如下:<br><figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">var</span> Monitor = <span class=\"built_in\">require</span>(<span class=\"string\">'page-monitor'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">var</span> <span class=\"built_in\">url</span> = <span class=\"string\">'http://www.baidu.com'</span>;</div><div class=\"line\"><span class=\"built_in\">var</span> monitor = <span class=\"keyword\">new</span> Monitor(<span class=\"built_in\">url</span>);</div><div class=\"line\">monitor.capture(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">code</span>)</span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(monitor.log); <span class=\"comment\">// from phantom</span></div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'done, exit ['</span> + code + <span class=\"string\">']'</span>);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>运行效果<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">MacBook-Pro:test cuixiaohuan$ node test.js</div><div class=\"line\">&#123; debug:</div><div class=\"line\">   [ <span class=\"string\">'mode: 11'</span>,</div><div class=\"line\">     <span class=\"string\">'need diff'</span>,</div><div class=\"line\">     <span class=\"string\">'loading: http://www.baidu.com'</span>,</div><div class=\"line\">     <span class=\"string\">'page.viewportSize = &#123;\"width\":320,\"height\":568&#125;'</span>,</div><div class=\"line\">     <span class=\"string\">'page.settings.resourceTimeout = 20000'</span>,</div><div class=\"line\">     <span class=\"string\">'page.settings.userAgent = \"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53\"'</span>,</div><div class=\"line\">     <span class=\"string\">'loaded: http://www.baidu.com'</span>,</div><div class=\"line\">     <span class=\"string\">'delay before render: 0ms'</span>,</div><div class=\"line\">     <span class=\"string\">'walk tree'</span>,</div><div class=\"line\">     <span class=\"string\">'save capture [/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/1461155680901]'</span>,</div><div class=\"line\">     <span class=\"string\">'screenshot [/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/1461155680901/screenshot.jpg]'</span>,</div><div class=\"line\">     <span class=\"string\">'Unsafe JavaScript attempt to access frame with URL about:blank from frame with URL file:///Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/node_modules/page-monitor/phantomjs/index.js. Domains, protocols and ports must match.'</span> ],</div><div class=\"line\">  warning: [],</div><div class=\"line\">  info: [],</div><div class=\"line\">  error: [],</div><div class=\"line\">  notice: [] &#125;</div><div class=\"line\">done, <span class=\"keyword\">exit</span> [<span class=\"number\">0</span>]</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-2-生成对比页面\"><a href=\"#2-2-生成对比页面\" class=\"headerlink\" title=\"2.2 生成对比页面\"></a>2.2 生成对比页面</h3><p> test.js code</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">monitor.diff(<span class=\"number\">1408947323420</span>, <span class=\"number\">1408947556898</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">code</span>)</span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(monitor.log.info); <span class=\"comment\">// diff result</span></div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'[DONE] exit ['</span> + code + <span class=\"string\">']'</span>);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>运行<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">MacBook-Pro:test cuixiaohuan$ <span class=\"keyword\">node</span> <span class=\"title\">test</span>.js</div><div class=\"line\">[ '&#123;<span class=\"string\">\"diff\"</span>:&#123;<span class=\"string\">\"left\"</span>:<span class=\"string\">\"1461155680901\"</span>,<span class=\"string\">\"right\"</span>:<span class=\"string\">\"1461163758667\"</span>,<span class=\"string\">\"screenshot\"</span>:<span class=\"string\">\"/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/diff/1461155680901-1461163758667.jpg\"</span>,<span class=\"string\">\"count\"</span>:&#123;<span class=\"string\">\"add\"</span>:<span class=\"number\">2</span>,<span class=\"string\">\"remove\"</span>:<span class=\"number\">2</span>,<span class=\"string\">\"style\"</span>:<span class=\"number\">0</span>,<span class=\"string\">\"text\"</span>:<span class=\"number\">9</span>&#125;&#125;&#125;' ]</div><div class=\"line\">[DONE] exit [<span class=\"number\">0</span>]</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-3-对比页面效果如下图\"><a href=\"#2-3-对比页面效果如下图\" class=\"headerlink\" title=\"2.3 对比页面效果如下图\"></a>2.3 对比页面效果如下图</h3><p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png\" alt=\"927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3\"></a></p>\n<h3 id=\"2-4-目录初步分析\"><a href=\"#2-4-目录初步分析\" class=\"headerlink\" title=\"2.4 目录初步分析\"></a>2.4 目录初步分析</h3><p>通过目录和运行结果<br>1：每个时间利用phantom生成一张截图【保存现场】和一个dome的tree.json【对比dom】 【生成过程看下源码】<br>2：diff 调用tree.json 比较区中的区别【位置，内容生成和对比过程之后看下源码？】<br>3：利用当时保存的截图渲染生成的结果</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png\" alt=\"F2838502-FF7E-4DC8-9C7F-01687F3DB3E9\"></a></p>\n<h2 id=\"三：dom-diff工具page-monitor-调研初步结论：\"><a href=\"#三：dom-diff工具page-monitor-调研初步结论：\" class=\"headerlink\" title=\"三：dom diff工具page monitor 调研初步结论：\"></a>三：dom diff工具page monitor 调研初步结论：</h2><ul>\n<li>1：dom的diff 是可行的。</li>\n<li>2：page monitor 现有主要功能：抽取不同时间段的页面做页面domdiff<br>使用过程中缺陷：<br>1：依赖太多，依赖node，依赖phantom，<br>2：接口太少，现在直接提供的就两个一个保存现场，一个diff。不方便dom定制和阈值定制。</li>\n</ul>\n<h2 id=\"四：应用价值思考和下一步\"><a href=\"#四：应用价值思考和下一步\" class=\"headerlink\" title=\"四：应用价值思考和下一步\"></a>四：应用价值思考和下一步</h2><p>如果能对dom树的处理更完善一些，应用价值还是挺高的，例如<code>核心dom的diff，局部dom的diff，时效性dom(例如：时间tag必须变化，不变化则为bug)的变更检验，兼容性dom的check等等</code></p>\n<p>下一步调研：<br>看下源码中，分析dom生成tree过程，对比tree过程，展现tree过程。</p>\n<p>相关文章：<br><a href=\"http://cuihuan.net/?p=493\">【page-monitor 前端自动化 中篇】 源码分析</a><br><a href=\"http://cuihuan.net/?p=508\">【page-monitor 前端自动化 下篇】 实践应用</a></p>\n","excerpt":"","more":"<blockquote>\n<p>前端自动化测试主要在于：<code>变化快，不稳定，兼容性复杂</code>；故而，想通过较低的成本维护较为通用的自动化case比较困难。本文旨在<code>通过page-monitor获取和分析dom结构，调研能否通过监控和分析核心dom，来进行前端自动化测试</code>。</p>\n</blockquote>\n<h2 id=\"一：page-monitor-介绍\"><a href=\"#一：page-monitor-介绍\" class=\"headerlink\" title=\"一：page-monitor 介绍\"></a>一：page-monitor 介绍</h2><p>page-monitor：通过xpath获取dom节点结构，之后可视化的渲染出页面的差异。<br>github地址：<a href=\"https://github.com/fouber/page-monitor\">https://github.com/fouber/page-monitor</a><br>基本原理：<code>利用xpath获取页面的dom结构，存储为结构化的json，对比两次的json之间的差异，利用phantom渲染页面和差异页面</code>。</p>\n<p>先上个初次试用的图</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png\" alt=\"927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3\"></a></p>\n<h2 id=\"二：初次试用\"><a href=\"#二：初次试用\" class=\"headerlink\" title=\"二：初次试用\"></a>二：初次试用</h2><h3 id=\"2-1-安装\"><a href=\"#2-1-安装\" class=\"headerlink\" title=\"2.1 安装\"></a>2.1 安装</h3><figure class=\"highlight cmake\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># page-monitor 依赖于 phantomjs</span></div><div class=\"line\">npm <span class=\"keyword\">install</span> phantomjs</div><div class=\"line\">npm <span class=\"keyword\">install</span> page-monitor</div></pre></td></tr></table></figure>\n<p>注意：phantomJs较大，如果比较慢 可以用brew安装，并且<code>page-monitor最多兼容phantom1.98</code><br><figure class=\"highlight dts\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\"># 调整phantom为1.98 版本</span></div><div class=\"line\">MacBook-Pro:~ cuixiaohuan$ brew link phantomjs198</div><div class=\"line\">Linking <span class=\"meta-keyword\">/usr/</span>local/Cellar<span class=\"meta-keyword\">/phantomjs198/</span><span class=\"number\">1.9</span><span class=\"number\">.8</span>... <span class=\"number\">2</span> symlinks created</div><div class=\"line\">MacBook-Pro:~ cuixiaohuan$ phantomjs -v</div><div class=\"line\"><span class=\"number\">1.9</span><span class=\"number\">.8</span></div></pre></td></tr></table></figure></p>\n<p>2.2 初次运行：<br>写一个test.js 代码如下:<br><figure class=\"highlight qml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">var</span> Monitor = <span class=\"built_in\">require</span>(<span class=\"string\">'page-monitor'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">var</span> <span class=\"built_in\">url</span> = <span class=\"string\">'http://www.baidu.com'</span>;</div><div class=\"line\"><span class=\"built_in\">var</span> monitor = <span class=\"keyword\">new</span> Monitor(<span class=\"built_in\">url</span>);</div><div class=\"line\">monitor.capture(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">code</span>)</span>&#123;</div><div class=\"line\">        <span class=\"built_in\">console</span>.log(monitor.log); <span class=\"comment\">// from phantom</span></div><div class=\"line\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">'done, exit ['</span> + code + <span class=\"string\">']'</span>);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure></p>\n<p>运行效果<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div></pre></td><td class=\"code\"><pre><div class=\"line\">MacBook-Pro:test cuixiaohuan$ node test.js</div><div class=\"line\">&#123; debug:</div><div class=\"line\">   [ <span class=\"string\">'mode: 11'</span>,</div><div class=\"line\">     <span class=\"string\">'need diff'</span>,</div><div class=\"line\">     <span class=\"string\">'loading: http://www.baidu.com'</span>,</div><div class=\"line\">     <span class=\"string\">'page.viewportSize = &#123;\"width\":320,\"height\":568&#125;'</span>,</div><div class=\"line\">     <span class=\"string\">'page.settings.resourceTimeout = 20000'</span>,</div><div class=\"line\">     <span class=\"string\">'page.settings.userAgent = \"Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53\"'</span>,</div><div class=\"line\">     <span class=\"string\">'loaded: http://www.baidu.com'</span>,</div><div class=\"line\">     <span class=\"string\">'delay before render: 0ms'</span>,</div><div class=\"line\">     <span class=\"string\">'walk tree'</span>,</div><div class=\"line\">     <span class=\"string\">'save capture [/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/1461155680901]'</span>,</div><div class=\"line\">     <span class=\"string\">'screenshot [/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/1461155680901/screenshot.jpg]'</span>,</div><div class=\"line\">     <span class=\"string\">'Unsafe JavaScript attempt to access frame with URL about:blank from frame with URL file:///Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/node_modules/page-monitor/phantomjs/index.js. Domains, protocols and ports must match.'</span> ],</div><div class=\"line\">  warning: [],</div><div class=\"line\">  info: [],</div><div class=\"line\">  error: [],</div><div class=\"line\">  notice: [] &#125;</div><div class=\"line\">done, <span class=\"keyword\">exit</span> [<span class=\"number\">0</span>]</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-2-生成对比页面\"><a href=\"#2-2-生成对比页面\" class=\"headerlink\" title=\"2.2 生成对比页面\"></a>2.2 生成对比页面</h3><p> test.js code</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div></pre></td><td class=\"code\"><pre><div class=\"line\">monitor.diff(<span class=\"number\">1408947323420</span>, <span class=\"number\">1408947556898</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">code</span>)</span>&#123;</div><div class=\"line\">    <span class=\"built_in\">console</span>.log(monitor.log.info); <span class=\"comment\">// diff result</span></div><div class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'[DONE] exit ['</span> + code + <span class=\"string\">']'</span>);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>运行<br><figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div></pre></td><td class=\"code\"><pre><div class=\"line\">MacBook-Pro:test cuixiaohuan$ <span class=\"keyword\">node</span> <span class=\"title\">test</span>.js</div><div class=\"line\">[ '&#123;<span class=\"string\">\"diff\"</span>:&#123;<span class=\"string\">\"left\"</span>:<span class=\"string\">\"1461155680901\"</span>,<span class=\"string\">\"right\"</span>:<span class=\"string\">\"1461163758667\"</span>,<span class=\"string\">\"screenshot\"</span>:<span class=\"string\">\"/Users/cuixiaohuan/Desktop/workspace/test/pagemonitor/test/www.baidu.com/Lw==/diff/1461155680901-1461163758667.jpg\"</span>,<span class=\"string\">\"count\"</span>:&#123;<span class=\"string\">\"add\"</span>:<span class=\"number\">2</span>,<span class=\"string\">\"remove\"</span>:<span class=\"number\">2</span>,<span class=\"string\">\"style\"</span>:<span class=\"number\">0</span>,<span class=\"string\">\"text\"</span>:<span class=\"number\">9</span>&#125;&#125;&#125;' ]</div><div class=\"line\">[DONE] exit [<span class=\"number\">0</span>]</div></pre></td></tr></table></figure></p>\n<h3 id=\"2-3-对比页面效果如下图\"><a href=\"#2-3-对比页面效果如下图\" class=\"headerlink\" title=\"2.3 对比页面效果如下图\"></a>2.3 对比页面效果如下图</h3><p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3-212x300.png\" alt=\"927EE33C-AD06-4EC3-9E5C-B8C3D2029AA3\"></a></p>\n<h3 id=\"2-4-目录初步分析\"><a href=\"#2-4-目录初步分析\" class=\"headerlink\" title=\"2.4 目录初步分析\"></a>2.4 目录初步分析</h3><p>通过目录和运行结果<br>1：每个时间利用phantom生成一张截图【保存现场】和一个dome的tree.json【对比dom】 【生成过程看下源码】<br>2：diff 调用tree.json 比较区中的区别【位置，内容生成和对比过程之后看下源码？】<br>3：利用当时保存的截图渲染生成的结果</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/F2838502-FF7E-4DC8-9C7F-01687F3DB3E9-300x151.png\" alt=\"F2838502-FF7E-4DC8-9C7F-01687F3DB3E9\"></a></p>\n<h2 id=\"三：dom-diff工具page-monitor-调研初步结论：\"><a href=\"#三：dom-diff工具page-monitor-调研初步结论：\" class=\"headerlink\" title=\"三：dom diff工具page monitor 调研初步结论：\"></a>三：dom diff工具page monitor 调研初步结论：</h2><ul>\n<li>1：dom的diff 是可行的。</li>\n<li>2：page monitor 现有主要功能：抽取不同时间段的页面做页面domdiff<br>使用过程中缺陷：<br>1：依赖太多，依赖node，依赖phantom，<br>2：接口太少，现在直接提供的就两个一个保存现场，一个diff。不方便dom定制和阈值定制。</li>\n</ul>\n<h2 id=\"四：应用价值思考和下一步\"><a href=\"#四：应用价值思考和下一步\" class=\"headerlink\" title=\"四：应用价值思考和下一步\"></a>四：应用价值思考和下一步</h2><p>如果能对dom树的处理更完善一些，应用价值还是挺高的，例如<code>核心dom的diff，局部dom的diff，时效性dom(例如：时间tag必须变化，不变化则为bug)的变更检验，兼容性dom的check等等</code></p>\n<p>下一步调研：<br>看下源码中，分析dom生成tree过程，对比tree过程，展现tree过程。</p>\n<p>相关文章：<br><a href=\"http://cuihuan.net/?p=493\">【page-monitor 前端自动化 中篇】 源码分析</a><br><a href=\"http://cuihuan.net/?p=508\">【page-monitor 前端自动化 下篇】 实践应用</a></p>\n"},{"title":"【page-monitor 前端自动化 下篇】 实践应用","date":"2016-08-20T09:21:35.000Z","_content":"> 通过page-diff的初步调研和源码分析，确定page-diff在前端自动化测试和监控方面做一些事情。本篇主要介绍下，page-diff在具体的实践中的一些应用\n\n## 核心dom校验\n前端的快速发展，造成前端dom无论结构还是命名经常变化，每次都尽可能关注每个dom的变化，不可能也没有必要。但是`核心dom是相对变化较小，但是比较重要`，因此可以利用page-monitor 修改关注结构中的核心代码，核心架构的变化。\n\n上图是未修改的代码，下图是忽略footer内部变化\n[![F1AE4B80-CFC6-4A94-AB24-86297DCDD759](http://cuihuan.net/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png)](http://cuihuan.net/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png)\n[![0141A2E8-9B5E-439A-9FEC-1147ACF982DF](http://cuihuan.net/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png)](http://cuihuan.net/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png)\n实践中可以针对自身的核心dom进行进一步优化\n\n## 局部dom校验\n项目中，往往在某一时期特别关心某些板块，或者某些板块相对容易出错；因此，可以利用page-monitor 进行局部dom的细节diff。中篇中对只针对header进行对比diff做了详细介绍，此处不赘述，上图。\n\n[![FDF6B258-5A69-47D1-B1FF-4EB38D7B8677](http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png)](http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png)\n\n## 算法优化\n由于获取了完整了dom的json，因此可以通过相关阈值的设定或者算法的优化；来对比结果，进行更加优化的分级预警和分析；作者一般对非核心预警超过15%变化会做出预警，超过更高阈值会进一步的预警等等。\n贴一个dom 细节图\n [![dom](http://cuihuan.net/wp-content/uploads/2016/08/dom.jpg)](http://cuihuan.net/wp-content/uploads/2016/08/dom.jpg)\n\n\n## 其他分析\n小拽通过上面的举例，旨在抛砖引玉，希望page-monitor或者dom结构在前端的自动化测试有一定应用，提升产品质量。\n\n最终再上一张流程图，便于分析\n[![page-diff 流程图](http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png)](http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png)\n\n相关文章：\n[【page-monitor 前端自动化 上篇】 初步调研](http://cuihuan.net/?p=485)\n[【page-monitor 前端自动化 中篇】 源码分析](http://cuihuan.net/?p=493)\n\n\n\n\n\n","source":"_posts/【page-monitor 前端自动化 下篇】 实践应用.md","raw":"---\ntitle: 【page-monitor 前端自动化 下篇】 实践应用 \ndate: 2016-08-20 17:21:35\ntags: \n- 自动化测试\n- javascript\n- 前端\n---\n> 通过page-diff的初步调研和源码分析，确定page-diff在前端自动化测试和监控方面做一些事情。本篇主要介绍下，page-diff在具体的实践中的一些应用\n\n## 核心dom校验\n前端的快速发展，造成前端dom无论结构还是命名经常变化，每次都尽可能关注每个dom的变化，不可能也没有必要。但是`核心dom是相对变化较小，但是比较重要`，因此可以利用page-monitor 修改关注结构中的核心代码，核心架构的变化。\n\n上图是未修改的代码，下图是忽略footer内部变化\n[![F1AE4B80-CFC6-4A94-AB24-86297DCDD759](http://cuihuan.net/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png)](http://cuihuan.net/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png)\n[![0141A2E8-9B5E-439A-9FEC-1147ACF982DF](http://cuihuan.net/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png)](http://cuihuan.net/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png)\n实践中可以针对自身的核心dom进行进一步优化\n\n## 局部dom校验\n项目中，往往在某一时期特别关心某些板块，或者某些板块相对容易出错；因此，可以利用page-monitor 进行局部dom的细节diff。中篇中对只针对header进行对比diff做了详细介绍，此处不赘述，上图。\n\n[![FDF6B258-5A69-47D1-B1FF-4EB38D7B8677](http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png)](http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png)\n\n## 算法优化\n由于获取了完整了dom的json，因此可以通过相关阈值的设定或者算法的优化；来对比结果，进行更加优化的分级预警和分析；作者一般对非核心预警超过15%变化会做出预警，超过更高阈值会进一步的预警等等。\n贴一个dom 细节图\n [![dom](http://cuihuan.net/wp-content/uploads/2016/08/dom.jpg)](http://cuihuan.net/wp-content/uploads/2016/08/dom.jpg)\n\n\n## 其他分析\n小拽通过上面的举例，旨在抛砖引玉，希望page-monitor或者dom结构在前端的自动化测试有一定应用，提升产品质量。\n\n最终再上一张流程图，便于分析\n[![page-diff 流程图](http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png)](http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png)\n\n相关文章：\n[【page-monitor 前端自动化 上篇】 初步调研](http://cuihuan.net/?p=485)\n[【page-monitor 前端自动化 中篇】 源码分析](http://cuihuan.net/?p=493)\n\n\n\n\n\n","slug":"【page-monitor 前端自动化 下篇】 实践应用","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nk8001b661fxdpau37c","content":"<blockquote>\n<p>通过page-diff的初步调研和源码分析，确定page-diff在前端自动化测试和监控方面做一些事情。本篇主要介绍下，page-diff在具体的实践中的一些应用</p>\n</blockquote>\n<h2 id=\"核心dom校验\"><a href=\"#核心dom校验\" class=\"headerlink\" title=\"核心dom校验\"></a>核心dom校验</h2><p>前端的快速发展，造成前端dom无论结构还是命名经常变化，每次都尽可能关注每个dom的变化，不可能也没有必要。但是<code>核心dom是相对变化较小，但是比较重要</code>，因此可以利用page-monitor 修改关注结构中的核心代码，核心架构的变化。</p>\n<p>上图是未修改的代码，下图是忽略footer内部变化<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png\" alt=\"F1AE4B80-CFC6-4A94-AB24-86297DCDD759\"></a><br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png\" alt=\"0141A2E8-9B5E-439A-9FEC-1147ACF982DF\"></a><br>实践中可以针对自身的核心dom进行进一步优化</p>\n<h2 id=\"局部dom校验\"><a href=\"#局部dom校验\" class=\"headerlink\" title=\"局部dom校验\"></a>局部dom校验</h2><p>项目中，往往在某一时期特别关心某些板块，或者某些板块相对容易出错；因此，可以利用page-monitor 进行局部dom的细节diff。中篇中对只针对header进行对比diff做了详细介绍，此处不赘述，上图。</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png\" alt=\"FDF6B258-5A69-47D1-B1FF-4EB38D7B8677\"></a></p>\n<h2 id=\"算法优化\"><a href=\"#算法优化\" class=\"headerlink\" title=\"算法优化\"></a>算法优化</h2><p>由于获取了完整了dom的json，因此可以通过相关阈值的设定或者算法的优化；来对比结果，进行更加优化的分级预警和分析；作者一般对非核心预警超过15%变化会做出预警，超过更高阈值会进一步的预警等等。<br>贴一个dom 细节图<br> <a href=\"http://cuihuan.net/wp-content/uploads/2016/08/dom.jpg\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/dom.jpg\" alt=\"dom\"></a></p>\n<h2 id=\"其他分析\"><a href=\"#其他分析\" class=\"headerlink\" title=\"其他分析\"></a>其他分析</h2><p>小拽通过上面的举例，旨在抛砖引玉，希望page-monitor或者dom结构在前端的自动化测试有一定应用，提升产品质量。</p>\n<p>最终再上一张流程图，便于分析<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png\" alt=\"page-diff 流程图\"></a></p>\n<p>相关文章：<br><a href=\"http://cuihuan.net/?p=485\">【page-monitor 前端自动化 上篇】 初步调研</a><br><a href=\"http://cuihuan.net/?p=493\">【page-monitor 前端自动化 中篇】 源码分析</a></p>\n","excerpt":"","more":"<blockquote>\n<p>通过page-diff的初步调研和源码分析，确定page-diff在前端自动化测试和监控方面做一些事情。本篇主要介绍下，page-diff在具体的实践中的一些应用</p>\n</blockquote>\n<h2 id=\"核心dom校验\"><a href=\"#核心dom校验\" class=\"headerlink\" title=\"核心dom校验\"></a>核心dom校验</h2><p>前端的快速发展，造成前端dom无论结构还是命名经常变化，每次都尽可能关注每个dom的变化，不可能也没有必要。但是<code>核心dom是相对变化较小，但是比较重要</code>，因此可以利用page-monitor 修改关注结构中的核心代码，核心架构的变化。</p>\n<p>上图是未修改的代码，下图是忽略footer内部变化<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/F1AE4B80-CFC6-4A94-AB24-86297DCDD759.png\" alt=\"F1AE4B80-CFC6-4A94-AB24-86297DCDD759\"></a><br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/0141A2E8-9B5E-439A-9FEC-1147ACF982DF.png\" alt=\"0141A2E8-9B5E-439A-9FEC-1147ACF982DF\"></a><br>实践中可以针对自身的核心dom进行进一步优化</p>\n<h2 id=\"局部dom校验\"><a href=\"#局部dom校验\" class=\"headerlink\" title=\"局部dom校验\"></a>局部dom校验</h2><p>项目中，往往在某一时期特别关心某些板块，或者某些板块相对容易出错；因此，可以利用page-monitor 进行局部dom的细节diff。中篇中对只针对header进行对比diff做了详细介绍，此处不赘述，上图。</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/FDF6B258-5A69-47D1-B1FF-4EB38D7B8677.png\" alt=\"FDF6B258-5A69-47D1-B1FF-4EB38D7B8677\"></a></p>\n<h2 id=\"算法优化\"><a href=\"#算法优化\" class=\"headerlink\" title=\"算法优化\"></a>算法优化</h2><p>由于获取了完整了dom的json，因此可以通过相关阈值的设定或者算法的优化；来对比结果，进行更加优化的分级预警和分析；作者一般对非核心预警超过15%变化会做出预警，超过更高阈值会进一步的预警等等。<br>贴一个dom 细节图<br> <a href=\"http://cuihuan.net/wp-content/uploads/2016/08/dom.jpg\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/dom.jpg\" alt=\"dom\"></a></p>\n<h2 id=\"其他分析\"><a href=\"#其他分析\" class=\"headerlink\" title=\"其他分析\"></a>其他分析</h2><p>小拽通过上面的举例，旨在抛砖引玉，希望page-monitor或者dom结构在前端的自动化测试有一定应用，提升产品质量。</p>\n<p>最终再上一张流程图，便于分析<br><a href=\"http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/08/page-diff-%E6%B5%81%E7%A8%8B%E5%9B%BE.png\" alt=\"page-diff 流程图\"></a></p>\n<p>相关文章：<br><a href=\"http://cuihuan.net/?p=485\">【page-monitor 前端自动化 上篇】 初步调研</a><br><a href=\"http://cuihuan.net/?p=493\">【page-monitor 前端自动化 中篇】 源码分析</a></p>\n"},{"title":"【redis学习二】多php版本下phpredis扩展安装","date":"2015-11-28T09:21:35.000Z","_content":"\n> 背景：安装完redis之后，需要安装phpredis扩展，才能让php操作redis；本机有多个php版本，安装过程中遇到的坑分享一下。\n\n##一 下载\ngit上下载redis的扩展包\n    git clone https://github.com/nicolasff/phpredis\n\n##二 挂载和configure\n   在shell中输入 phpize 【注意：多个php版本的时候需要指定】\n     ./configure \n【phpize是用来扩展php扩展模块的，通过phpize可以建立php的外挂模块】\n\n注意：（phpize 如果包含多个php，必须指定位置）\n    cuihuan:phpredis cuixiaohuan$ ../php/bin/phpize\n    Configuring for:\n    PHP Api Version:         20121113\n    Zend Module Api No:      20121212\n    Zend Extension Api No:   220121212\n    Cannot find autoconf. Please check your autoconf installation and the\n    $PHP_AUTOCONF environment variable. Then, rerun this script.\n\n报错的话需要安装：brew install autoconf  [phpize 报错] 否则没有phpize  \n    [work@cuixiaozhuai phpredis]$ ../php/bin/phpize        \n    Configuring for:\n    PHP Api Version:         20041225\n    Zend Module Api No:      20060613\n    Zend Extension Api No:   220060519\n    [work@cuixiaozhuai phpredis]$  ./configure --with-php-config=/home/work/thirdparty/php5/bin/php-config \n\n当存在多个版本的php的时候，需要指定配置文件\n     ./configure --with-php-config=/home/work/thirdparty/php5/bin/php-config \n\n##三 编译和安装\n make  之后最好make test  \n   make install\n    cuihuan:phpredis cuixiaohuan$ make\n    。。。\n    Build complete.\n    Don't forget to run 'make test'.\n\n    cuihuan:phpredis cuixiaohuan$ make test\n    cuihuan:phpredis cuixiaohuan$ make install\n\n##四 问题修复\n【已修复，但是原因可能不太准确】\nmake编译报错\n    .libs/redis_cluster.o(.data.rel.local+0x0): In function `ht_free_seed':\n    /home/work/thirdparty/php5/php5/phpredis/redis_cluster.c:226:     multiple definition of `arginfo_scan'\n    .libs/redis.o(.data.rel.local+0xe0):/home/work/thirdparty/php5/php5/p hpredis/redis.c:452: first defined here\n    /usr/bin/ld: Warning: size of symbol `arginfo_scan' changed from 160 in .libs/redis.o to 200 in .libs/redis_cluster.o\n    .libs/redis_cluster.o(.data.rel.local+0xe0): In function `create_cluster_context':\n    /home/work/thirdparty/php5/php5/phpredis/redis_cluster.c:276:     multiple definition of `arginfo_kscan'\n    .libs/redis.o(.data.rel.local+0x0):/home/work/thirdparty/php5/php5/phpredis/redis.c:364: first defined here\n    collect2: ld returned 1 exit status\n    make: *** [redis.la] Error 1\n\n最初以为是php多个版本生成install问题，采用./configure 指定php版本，指定php位置。\n但是效果还是有问题。\n最终通过修改redis_cluester.c 中，注释掉了这两个重复的\n      40 \n\n      41 /* Argument info for HSCAN, SSCAN, HSCAN */\n\n      42 /*ZEND_BEGIN_ARG_INFO_EX(arginfo_kscan, 0, 0, 2)\n\n      43     ZEND_ARG_INFO(0, str_key)\n\n      44     ZEND_ARG_INFO(1, i_iterator)\n\n      45     ZEND_ARG_INFO(0, str_pattern)\n\n      46     ZEND_ARG_INFO(0, i_count)\n\n      47 ZEND_END_ARG_INFO();\n\n      48 */\n\n      49 \n\n      50 /* Argument infor for SCAN */\n\n      51 /*\n\n      52 ZEND_BEGIN_ARG_INFO_EX(arginfo_scan, 0, 0, 2)\n\n      53     ZEND_ARG_INFO(1, i_iterator)\n\n      54     ZEND_ARG_INFO(0, str_node)\n\n      55     ZEND_ARG_INFO(0, str_pattern)\n\n      56     ZEND_ARG_INFO(0, i_count)\n\n      57 ZEND_END_ARG_INFO();\n\n      58 */\n      \n      \n##五 简单测试\n\n    <?php\n        $redis = new Redis();\n        $conn = $redis->connect('127.0.0.1',6379);\n\n        echo \"redis pass and status show</br>\";\n        var_dump($redis->ping());\n\n        $redis->set('test_key','test_value');\n        echo \"test set val=\".$redis->get('test_key').\"</br>\";\n\n        $redis->setnx('unique_key',\"unique_val\");\n        $redis->setnx('unique_key',\"unique_val_2\");\n\n        echo $redis->get(\"unique_key\");\n\n        sleep(60);\n        echo 'is exist'.$redis->exists('test_60s');\n        echo 'not has value'.$redis->get('test_60s');\n        $redis->delete('test_key','test_60s');\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=248)","source":"_posts/【redis学习二】多php版本下phpredis扩展安装.md","raw":"---\ntitle: 【redis学习二】多php版本下phpredis扩展安装 \ndate: 2015-11-28 17:21:35\ntags: \n- redis\n- phpredis\n- php\n---\n\n> 背景：安装完redis之后，需要安装phpredis扩展，才能让php操作redis；本机有多个php版本，安装过程中遇到的坑分享一下。\n\n##一 下载\ngit上下载redis的扩展包\n    git clone https://github.com/nicolasff/phpredis\n\n##二 挂载和configure\n   在shell中输入 phpize 【注意：多个php版本的时候需要指定】\n     ./configure \n【phpize是用来扩展php扩展模块的，通过phpize可以建立php的外挂模块】\n\n注意：（phpize 如果包含多个php，必须指定位置）\n    cuihuan:phpredis cuixiaohuan$ ../php/bin/phpize\n    Configuring for:\n    PHP Api Version:         20121113\n    Zend Module Api No:      20121212\n    Zend Extension Api No:   220121212\n    Cannot find autoconf. Please check your autoconf installation and the\n    $PHP_AUTOCONF environment variable. Then, rerun this script.\n\n报错的话需要安装：brew install autoconf  [phpize 报错] 否则没有phpize  \n    [work@cuixiaozhuai phpredis]$ ../php/bin/phpize        \n    Configuring for:\n    PHP Api Version:         20041225\n    Zend Module Api No:      20060613\n    Zend Extension Api No:   220060519\n    [work@cuixiaozhuai phpredis]$  ./configure --with-php-config=/home/work/thirdparty/php5/bin/php-config \n\n当存在多个版本的php的时候，需要指定配置文件\n     ./configure --with-php-config=/home/work/thirdparty/php5/bin/php-config \n\n##三 编译和安装\n make  之后最好make test  \n   make install\n    cuihuan:phpredis cuixiaohuan$ make\n    。。。\n    Build complete.\n    Don't forget to run 'make test'.\n\n    cuihuan:phpredis cuixiaohuan$ make test\n    cuihuan:phpredis cuixiaohuan$ make install\n\n##四 问题修复\n【已修复，但是原因可能不太准确】\nmake编译报错\n    .libs/redis_cluster.o(.data.rel.local+0x0): In function `ht_free_seed':\n    /home/work/thirdparty/php5/php5/phpredis/redis_cluster.c:226:     multiple definition of `arginfo_scan'\n    .libs/redis.o(.data.rel.local+0xe0):/home/work/thirdparty/php5/php5/p hpredis/redis.c:452: first defined here\n    /usr/bin/ld: Warning: size of symbol `arginfo_scan' changed from 160 in .libs/redis.o to 200 in .libs/redis_cluster.o\n    .libs/redis_cluster.o(.data.rel.local+0xe0): In function `create_cluster_context':\n    /home/work/thirdparty/php5/php5/phpredis/redis_cluster.c:276:     multiple definition of `arginfo_kscan'\n    .libs/redis.o(.data.rel.local+0x0):/home/work/thirdparty/php5/php5/phpredis/redis.c:364: first defined here\n    collect2: ld returned 1 exit status\n    make: *** [redis.la] Error 1\n\n最初以为是php多个版本生成install问题，采用./configure 指定php版本，指定php位置。\n但是效果还是有问题。\n最终通过修改redis_cluester.c 中，注释掉了这两个重复的\n      40 \n\n      41 /* Argument info for HSCAN, SSCAN, HSCAN */\n\n      42 /*ZEND_BEGIN_ARG_INFO_EX(arginfo_kscan, 0, 0, 2)\n\n      43     ZEND_ARG_INFO(0, str_key)\n\n      44     ZEND_ARG_INFO(1, i_iterator)\n\n      45     ZEND_ARG_INFO(0, str_pattern)\n\n      46     ZEND_ARG_INFO(0, i_count)\n\n      47 ZEND_END_ARG_INFO();\n\n      48 */\n\n      49 \n\n      50 /* Argument infor for SCAN */\n\n      51 /*\n\n      52 ZEND_BEGIN_ARG_INFO_EX(arginfo_scan, 0, 0, 2)\n\n      53     ZEND_ARG_INFO(1, i_iterator)\n\n      54     ZEND_ARG_INFO(0, str_node)\n\n      55     ZEND_ARG_INFO(0, str_pattern)\n\n      56     ZEND_ARG_INFO(0, i_count)\n\n      57 ZEND_END_ARG_INFO();\n\n      58 */\n      \n      \n##五 简单测试\n\n    <?php\n        $redis = new Redis();\n        $conn = $redis->connect('127.0.0.1',6379);\n\n        echo \"redis pass and status show</br>\";\n        var_dump($redis->ping());\n\n        $redis->set('test_key','test_value');\n        echo \"test set val=\".$redis->get('test_key').\"</br>\";\n\n        $redis->setnx('unique_key',\"unique_val\");\n        $redis->setnx('unique_key',\"unique_val_2\");\n\n        echo $redis->get(\"unique_key\");\n\n        sleep(60);\n        echo 'is exist'.$redis->exists('test_60s');\n        echo 'not has value'.$redis->get('test_60s');\n        $redis->delete('test_key','test_60s');\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=248)","slug":"【redis学习二】多php版本下phpredis扩展安装","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nkb001e661fiqrkl1t8","content":"<blockquote>\n<p>背景：安装完redis之后，需要安装phpredis扩展，才能让php操作redis；本机有多个php版本，安装过程中遇到的坑分享一下。</p>\n</blockquote>\n<p>##一 下载<br>git上下载redis的扩展包<br>    git clone <a href=\"https://github.com/nicolasff/phpredis\" target=\"_blank\" rel=\"external\">https://github.com/nicolasff/phpredis</a></p>\n<p>##二 挂载和configure<br>   在shell中输入 phpize 【注意：多个php版本的时候需要指定】<br>     ./configure<br>【phpize是用来扩展php扩展模块的，通过phpize可以建立php的外挂模块】</p>\n<p>注意：（phpize 如果包含多个php，必须指定位置）<br>    cuihuan:phpredis cuixiaohuan$ ../php/bin/phpize<br>    Configuring for:<br>    PHP Api Version:         20121113<br>    Zend Module Api No:      20121212<br>    Zend Extension Api No:   220121212<br>    Cannot find autoconf. Please check your autoconf installation and the<br>    $PHP_AUTOCONF environment variable. Then, rerun this script.</p>\n<p>报错的话需要安装：brew install autoconf  [phpize 报错] 否则没有phpize<br>    [work@cuixiaozhuai phpredis]$ ../php/bin/phpize<br>    Configuring for:<br>    PHP Api Version:         20041225<br>    Zend Module Api No:      20060613<br>    Zend Extension Api No:   220060519<br>    [work@cuixiaozhuai phpredis]$  ./configure –with-php-config=/home/work/thirdparty/php5/bin/php-config </p>\n<p>当存在多个版本的php的时候，需要指定配置文件<br>     ./configure –with-php-config=/home/work/thirdparty/php5/bin/php-config </p>\n<p>##三 编译和安装<br> make  之后最好make test<br>   make install<br>    cuihuan:phpredis cuixiaohuan$ make<br>    。。。<br>    Build complete.<br>    Don’t forget to run ‘make test’.</p>\n<pre><code>cuihuan:phpredis cuixiaohuan$ make test\ncuihuan:phpredis cuixiaohuan$ make install\n</code></pre><p>##四 问题修复<br>【已修复，但是原因可能不太准确】<br>make编译报错<br>    .libs/redis_cluster.o(.data.rel.local+0x0): In function <code>ht_free_seed&#39;:\n    /home/work/thirdparty/php5/php5/phpredis/redis_cluster.c:226:     multiple definition of</code>arginfo_scan’<br>    .libs/redis.o(.data.rel.local+0xe0):/home/work/thirdparty/php5/php5/p hpredis/redis.c:452: first defined here<br>    /usr/bin/ld: Warning: size of symbol <code>arginfo_scan&#39; changed from 160 in .libs/redis.o to 200 in .libs/redis_cluster.o\n    .libs/redis_cluster.o(.data.rel.local+0xe0): In function</code>create_cluster_context’:<br>    /home/work/thirdparty/php5/php5/phpredis/redis_cluster.c:276:     multiple definition of `arginfo_kscan’<br>    .libs/redis.o(.data.rel.local+0x0):/home/work/thirdparty/php5/php5/phpredis/redis.c:364: first defined here<br>    collect2: ld returned 1 exit status<br>    make: <em>*</em> [redis.la] Error 1</p>\n<p>最初以为是php多个版本生成install问题，采用./configure 指定php版本，指定php位置。<br>但是效果还是有问题。<br>最终通过修改redis_cluester.c 中，注释掉了这两个重复的<br>      40 </p>\n<pre><code>41 /* Argument info for HSCAN, SSCAN, HSCAN */\n\n42 /*ZEND_BEGIN_ARG_INFO_EX(arginfo_kscan, 0, 0, 2)\n\n43     ZEND_ARG_INFO(0, str_key)\n\n44     ZEND_ARG_INFO(1, i_iterator)\n\n45     ZEND_ARG_INFO(0, str_pattern)\n\n46     ZEND_ARG_INFO(0, i_count)\n\n47 ZEND_END_ARG_INFO();\n\n48 */\n\n49 \n\n50 /* Argument infor for SCAN */\n\n51 /*\n\n52 ZEND_BEGIN_ARG_INFO_EX(arginfo_scan, 0, 0, 2)\n\n53     ZEND_ARG_INFO(1, i_iterator)\n\n54     ZEND_ARG_INFO(0, str_node)\n\n55     ZEND_ARG_INFO(0, str_pattern)\n\n56     ZEND_ARG_INFO(0, i_count)\n\n57 ZEND_END_ARG_INFO();\n\n58 */\n</code></pre><p>##五 简单测试</p>\n<pre><code>&lt;?php\n    $redis = new Redis();\n    $conn = $redis-&gt;connect(&apos;127.0.0.1&apos;,6379);\n\n    echo &quot;redis pass and status show&lt;/br&gt;&quot;;\n    var_dump($redis-&gt;ping());\n\n    $redis-&gt;set(&apos;test_key&apos;,&apos;test_value&apos;);\n    echo &quot;test set val=&quot;.$redis-&gt;get(&apos;test_key&apos;).&quot;&lt;/br&gt;&quot;;\n\n    $redis-&gt;setnx(&apos;unique_key&apos;,&quot;unique_val&quot;);\n    $redis-&gt;setnx(&apos;unique_key&apos;,&quot;unique_val_2&quot;);\n\n    echo $redis-&gt;get(&quot;unique_key&quot;);\n\n    sleep(60);\n    echo &apos;is exist&apos;.$redis-&gt;exists(&apos;test_60s&apos;);\n    echo &apos;not has value&apos;.$redis-&gt;get(&apos;test_60s&apos;);\n    $redis-&gt;delete(&apos;test_key&apos;,&apos;test_60s&apos;);\n</code></pre><p><a href=\"http://cuihuan.net/?p=248\"> 个人小站原文链接 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>背景：安装完redis之后，需要安装phpredis扩展，才能让php操作redis；本机有多个php版本，安装过程中遇到的坑分享一下。</p>\n</blockquote>\n<p>##一 下载<br>git上下载redis的扩展包<br>    git clone <a href=\"https://github.com/nicolasff/phpredis\">https://github.com/nicolasff/phpredis</a></p>\n<p>##二 挂载和configure<br>   在shell中输入 phpize 【注意：多个php版本的时候需要指定】<br>     ./configure<br>【phpize是用来扩展php扩展模块的，通过phpize可以建立php的外挂模块】</p>\n<p>注意：（phpize 如果包含多个php，必须指定位置）<br>    cuihuan:phpredis cuixiaohuan$ ../php/bin/phpize<br>    Configuring for:<br>    PHP Api Version:         20121113<br>    Zend Module Api No:      20121212<br>    Zend Extension Api No:   220121212<br>    Cannot find autoconf. Please check your autoconf installation and the<br>    $PHP_AUTOCONF environment variable. Then, rerun this script.</p>\n<p>报错的话需要安装：brew install autoconf  [phpize 报错] 否则没有phpize<br>    [work@cuixiaozhuai phpredis]$ ../php/bin/phpize<br>    Configuring for:<br>    PHP Api Version:         20041225<br>    Zend Module Api No:      20060613<br>    Zend Extension Api No:   220060519<br>    [work@cuixiaozhuai phpredis]$  ./configure –with-php-config=/home/work/thirdparty/php5/bin/php-config </p>\n<p>当存在多个版本的php的时候，需要指定配置文件<br>     ./configure –with-php-config=/home/work/thirdparty/php5/bin/php-config </p>\n<p>##三 编译和安装<br> make  之后最好make test<br>   make install<br>    cuihuan:phpredis cuixiaohuan$ make<br>    。。。<br>    Build complete.<br>    Don’t forget to run ‘make test’.</p>\n<pre><code>cuihuan:phpredis cuixiaohuan$ make test\ncuihuan:phpredis cuixiaohuan$ make install\n</code></pre><p>##四 问题修复<br>【已修复，但是原因可能不太准确】<br>make编译报错<br>    .libs/redis_cluster.o(.data.rel.local+0x0): In function <code>ht_free_seed&#39;:\n    /home/work/thirdparty/php5/php5/phpredis/redis_cluster.c:226:     multiple definition of</code>arginfo_scan’<br>    .libs/redis.o(.data.rel.local+0xe0):/home/work/thirdparty/php5/php5/p hpredis/redis.c:452: first defined here<br>    /usr/bin/ld: Warning: size of symbol <code>arginfo_scan&#39; changed from 160 in .libs/redis.o to 200 in .libs/redis_cluster.o\n    .libs/redis_cluster.o(.data.rel.local+0xe0): In function</code>create_cluster_context’:<br>    /home/work/thirdparty/php5/php5/phpredis/redis_cluster.c:276:     multiple definition of `arginfo_kscan’<br>    .libs/redis.o(.data.rel.local+0x0):/home/work/thirdparty/php5/php5/phpredis/redis.c:364: first defined here<br>    collect2: ld returned 1 exit status<br>    make: <em>*</em> [redis.la] Error 1</p>\n<p>最初以为是php多个版本生成install问题，采用./configure 指定php版本，指定php位置。<br>但是效果还是有问题。<br>最终通过修改redis_cluester.c 中，注释掉了这两个重复的<br>      40 </p>\n<pre><code>41 /* Argument info for HSCAN, SSCAN, HSCAN */\n\n42 /*ZEND_BEGIN_ARG_INFO_EX(arginfo_kscan, 0, 0, 2)\n\n43     ZEND_ARG_INFO(0, str_key)\n\n44     ZEND_ARG_INFO(1, i_iterator)\n\n45     ZEND_ARG_INFO(0, str_pattern)\n\n46     ZEND_ARG_INFO(0, i_count)\n\n47 ZEND_END_ARG_INFO();\n\n48 */\n\n49 \n\n50 /* Argument infor for SCAN */\n\n51 /*\n\n52 ZEND_BEGIN_ARG_INFO_EX(arginfo_scan, 0, 0, 2)\n\n53     ZEND_ARG_INFO(1, i_iterator)\n\n54     ZEND_ARG_INFO(0, str_node)\n\n55     ZEND_ARG_INFO(0, str_pattern)\n\n56     ZEND_ARG_INFO(0, i_count)\n\n57 ZEND_END_ARG_INFO();\n\n58 */\n</code></pre><p>##五 简单测试</p>\n<pre><code>&lt;?php\n    $redis = new Redis();\n    $conn = $redis-&gt;connect(&apos;127.0.0.1&apos;,6379);\n\n    echo &quot;redis pass and status show&lt;/br&gt;&quot;;\n    var_dump($redis-&gt;ping());\n\n    $redis-&gt;set(&apos;test_key&apos;,&apos;test_value&apos;);\n    echo &quot;test set val=&quot;.$redis-&gt;get(&apos;test_key&apos;).&quot;&lt;/br&gt;&quot;;\n\n    $redis-&gt;setnx(&apos;unique_key&apos;,&quot;unique_val&quot;);\n    $redis-&gt;setnx(&apos;unique_key&apos;,&quot;unique_val_2&quot;);\n\n    echo $redis-&gt;get(&quot;unique_key&quot;);\n\n    sleep(60);\n    echo &apos;is exist&apos;.$redis-&gt;exists(&apos;test_60s&apos;);\n    echo &apos;not has value&apos;.$redis-&gt;get(&apos;test_60s&apos;);\n    $redis-&gt;delete(&apos;test_key&apos;,&apos;test_60s&apos;);\n</code></pre><p><a href=\"http://cuihuan.net/?p=248\"> 个人小站原文链接 </a></p>\n"},{"title":"【wordpress优化】压缩和使用静态缓存","date":"2015-12-06T09:21:35.000Z","_content":"> 先说背景：wordpress个人网站，整体性能挺不错；但是，由于采用php动态获取数据，构成页面的方式，势必会影响页面加载速度。对于一些最常用的页面[例如首页]等等，完全可以采用生成伪静态页面缓存的方式加载。\n\n> 针对现有的缓存方式调研了一下：本文使用`wp super cache`进行了优化，提升加载速度200%以上。\n\n## 无图无真想，先看效果\n针对相同页面在chrome下做了个加载时间，大小的对比，如下图\n\n优化前数据：23ms感知页面；3.62s加载完成；页面大小：419k；请求个数：25个；\n[![原始加载时间](http://cuihuan.net/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png)](http://cuihuan.net/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png)\n\n优化后数据：106ms感知页面；`1.81s`加载完成；页面大小`13.9k`；请求个数24个；\n![原始加载时间](http://cuihuan.net/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png)\n\n效果不错，后文做个详细分析。\n\n## 了解 wp super cache\n[ wp super cache ](http://z9.io/wp-super-cache/) 是wordpress的一种缓存优化插件，本质是利用缓存机制提升页面加载速度。\n**实现原理:** php最终在前端展现时需要转换为html，然后获取响应的数据；wp super cache 则提前将php文件转换为的html伪静态文件进行存储，一旦发生请求，直接返回生成的页面；减少了数据库取数据，转换等过程，来增加加载速度。\n**优 点:** 增加了加载速度。\n**缺 点:** 增加了存储成本，而且要不断的更新，如果用户量大，个人感觉存储和离线成本增加会挺多。\n\n## 安装 wp super cache\n\n官网下载地址：[ http://z9.io/wp-super-cache/ ](http://z9.io/wp-super-cache/) \n【无法翻墙可参考小拽博文：[ 不翻墙，下载wordpress官方主题和插件小技巧 ](http://cuihuan.net/article/%E4%B8%8D%E7%BF%BB%E5%A2%99%EF%BC%8C%E4%B8%8B%E8%BD%BDwordpress%E5%AE%98%E6%96%B9%E6%8F%92%E4%BB%B6%E5%B0%8F%E6%8A%80%E5%B7%A7.html)】\n\n注意：安装wp super cache 需要设定固定连接 如下图\n推荐采用【自定义结果】：http://cuihuan.net/article/%postname%.html \n原因在于其他包含字母或者日期不太容易表意，也不利于阅读和seo等等。\n[![修改链接格式](http://cuihuan.net/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png)](http://cuihuan.net/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png)\n\n如果最初采用的是http://xxx/?p=xxx的方式，需要对服务器进行相关设置，否则会一直出现404。解决和设置办法，在另一篇文章中，此处不赘述（[wp super cache 安装和问题解决](http://cuihuan.net/article/wp%20super%20cache%20%E5%AE%89%E8%A3%85%E5%92%8C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.html)）。\n\n安装成功后，后台设置中会出现wp super cache\n\n## 配置 wp super cache\n安装成功后的简单个人推荐设置。\n\n通用-》启用cache：开启\n高级-》启用缓存：开启\n高级-》模式选择：推荐mode_rewrite 这个需要apache或者nginx进行相关设置，这个速度最快；如果不想设置，可以选择php缓存模式。\n高级-》压缩页面：必选。\n高级-》页面更新清除，评论更新清楚：推荐。作用是更新文章，评论之后触发缓存更新。\n高级-》移动支持：推荐。\n其他一些设置根据个人需求增加。\n\n配置，更新之后，进入网站cache目录下会出现缓存的html文件和gzip的压缩文件（前提是设置了giz压缩）。\n\n```\n[root@cuixiaohuan cuihuan.net]# pwd\nxxx/wp-content/cache/supercache/cuihuan.net\n[root@cuixiaohuan cuihuan.net]# ls -lh\ntotal 52K\n-rw-r--r-- 1 apache apache 40K Dec 5 11:33 index.html\n-rw-r--r-- 1 apache apache 9.5K Dec 5 11:33 index.html.gz\n```\n\n## 效果分析\n\n优化前数据：23ms感知页面；3.62s加载完成；页面大小：419k；请求个数：25个；\n优化后数据：106ms感知页面；`1.81s`加载完成；页面大小`13.9k`；请求个数24个；\n\n感知页面变慢：原因在于，原始php页面相对较小，传输也相对较快，传输基本框架之后，才进行页面dom绘制，js渲染，数据获取和再次渲染，所以感知时间原始的快。但是对于750ms以下的对于用户几乎都是无感知。\n\n加载完成变快：最主要达到的效果，节省最多的时间在于数据库获取数据的时间。\n\n页面大小变小：`这块小的有点出乎意外`，小是应该的，但是小这么多就有点🐂了；之后分析了下页面，可能和文章异步获取，存储的html只获取了部分页面的文章，同时，对jquery等等组件肯定是利用缓存，不计入数据大小了。\n\n请求数目变化不大。\n\n> 整体效果：加载快了，页面小了。\n\n【转载请注明：[【wordpress优化】压缩和使用静态缓存 ](http://cuihuan.net/article/%E3%80%90wordpress%E4%BC%98%E5%8C%96%E3%80%91wp-super-cache-%E9%9D%99%E6%80%81%E7%BC%93%E5%AD%98.html) | [ 靠谱崔小拽 ](http://cuihuan.net)】\n\n\n\n","source":"_posts/【wordpress优化】压缩和使用静态缓存.md","raw":"---\ntitle: 【wordpress优化】压缩和使用静态缓存 \ndate: 2015-12-06 17:21:35\ntags: \n- 缓存\n- wordpress\n- php\n---\n> 先说背景：wordpress个人网站，整体性能挺不错；但是，由于采用php动态获取数据，构成页面的方式，势必会影响页面加载速度。对于一些最常用的页面[例如首页]等等，完全可以采用生成伪静态页面缓存的方式加载。\n\n> 针对现有的缓存方式调研了一下：本文使用`wp super cache`进行了优化，提升加载速度200%以上。\n\n## 无图无真想，先看效果\n针对相同页面在chrome下做了个加载时间，大小的对比，如下图\n\n优化前数据：23ms感知页面；3.62s加载完成；页面大小：419k；请求个数：25个；\n[![原始加载时间](http://cuihuan.net/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png)](http://cuihuan.net/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png)\n\n优化后数据：106ms感知页面；`1.81s`加载完成；页面大小`13.9k`；请求个数24个；\n![原始加载时间](http://cuihuan.net/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png)\n\n效果不错，后文做个详细分析。\n\n## 了解 wp super cache\n[ wp super cache ](http://z9.io/wp-super-cache/) 是wordpress的一种缓存优化插件，本质是利用缓存机制提升页面加载速度。\n**实现原理:** php最终在前端展现时需要转换为html，然后获取响应的数据；wp super cache 则提前将php文件转换为的html伪静态文件进行存储，一旦发生请求，直接返回生成的页面；减少了数据库取数据，转换等过程，来增加加载速度。\n**优 点:** 增加了加载速度。\n**缺 点:** 增加了存储成本，而且要不断的更新，如果用户量大，个人感觉存储和离线成本增加会挺多。\n\n## 安装 wp super cache\n\n官网下载地址：[ http://z9.io/wp-super-cache/ ](http://z9.io/wp-super-cache/) \n【无法翻墙可参考小拽博文：[ 不翻墙，下载wordpress官方主题和插件小技巧 ](http://cuihuan.net/article/%E4%B8%8D%E7%BF%BB%E5%A2%99%EF%BC%8C%E4%B8%8B%E8%BD%BDwordpress%E5%AE%98%E6%96%B9%E6%8F%92%E4%BB%B6%E5%B0%8F%E6%8A%80%E5%B7%A7.html)】\n\n注意：安装wp super cache 需要设定固定连接 如下图\n推荐采用【自定义结果】：http://cuihuan.net/article/%postname%.html \n原因在于其他包含字母或者日期不太容易表意，也不利于阅读和seo等等。\n[![修改链接格式](http://cuihuan.net/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png)](http://cuihuan.net/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png)\n\n如果最初采用的是http://xxx/?p=xxx的方式，需要对服务器进行相关设置，否则会一直出现404。解决和设置办法，在另一篇文章中，此处不赘述（[wp super cache 安装和问题解决](http://cuihuan.net/article/wp%20super%20cache%20%E5%AE%89%E8%A3%85%E5%92%8C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.html)）。\n\n安装成功后，后台设置中会出现wp super cache\n\n## 配置 wp super cache\n安装成功后的简单个人推荐设置。\n\n通用-》启用cache：开启\n高级-》启用缓存：开启\n高级-》模式选择：推荐mode_rewrite 这个需要apache或者nginx进行相关设置，这个速度最快；如果不想设置，可以选择php缓存模式。\n高级-》压缩页面：必选。\n高级-》页面更新清除，评论更新清楚：推荐。作用是更新文章，评论之后触发缓存更新。\n高级-》移动支持：推荐。\n其他一些设置根据个人需求增加。\n\n配置，更新之后，进入网站cache目录下会出现缓存的html文件和gzip的压缩文件（前提是设置了giz压缩）。\n\n```\n[root@cuixiaohuan cuihuan.net]# pwd\nxxx/wp-content/cache/supercache/cuihuan.net\n[root@cuixiaohuan cuihuan.net]# ls -lh\ntotal 52K\n-rw-r--r-- 1 apache apache 40K Dec 5 11:33 index.html\n-rw-r--r-- 1 apache apache 9.5K Dec 5 11:33 index.html.gz\n```\n\n## 效果分析\n\n优化前数据：23ms感知页面；3.62s加载完成；页面大小：419k；请求个数：25个；\n优化后数据：106ms感知页面；`1.81s`加载完成；页面大小`13.9k`；请求个数24个；\n\n感知页面变慢：原因在于，原始php页面相对较小，传输也相对较快，传输基本框架之后，才进行页面dom绘制，js渲染，数据获取和再次渲染，所以感知时间原始的快。但是对于750ms以下的对于用户几乎都是无感知。\n\n加载完成变快：最主要达到的效果，节省最多的时间在于数据库获取数据的时间。\n\n页面大小变小：`这块小的有点出乎意外`，小是应该的，但是小这么多就有点🐂了；之后分析了下页面，可能和文章异步获取，存储的html只获取了部分页面的文章，同时，对jquery等等组件肯定是利用缓存，不计入数据大小了。\n\n请求数目变化不大。\n\n> 整体效果：加载快了，页面小了。\n\n【转载请注明：[【wordpress优化】压缩和使用静态缓存 ](http://cuihuan.net/article/%E3%80%90wordpress%E4%BC%98%E5%8C%96%E3%80%91wp-super-cache-%E9%9D%99%E6%80%81%E7%BC%93%E5%AD%98.html) | [ 靠谱崔小拽 ](http://cuihuan.net)】\n\n\n\n","slug":"【wordpress优化】压缩和使用静态缓存","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nke001f661fcekivn4u","content":"<blockquote>\n<p>先说背景：wordpress个人网站，整体性能挺不错；但是，由于采用php动态获取数据，构成页面的方式，势必会影响页面加载速度。对于一些最常用的页面[例如首页]等等，完全可以采用生成伪静态页面缓存的方式加载。</p>\n<p>针对现有的缓存方式调研了一下：本文使用<code>wp super cache</code>进行了优化，提升加载速度200%以上。</p>\n</blockquote>\n<h2 id=\"无图无真想，先看效果\"><a href=\"#无图无真想，先看效果\" class=\"headerlink\" title=\"无图无真想，先看效果\"></a>无图无真想，先看效果</h2><p>针对相同页面在chrome下做了个加载时间，大小的对比，如下图</p>\n<p>优化前数据：23ms感知页面；3.62s加载完成；页面大小：419k；请求个数：25个；<br><a href=\"http://cuihuan.net/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png\" alt=\"原始加载时间\"></a></p>\n<p>优化后数据：106ms感知页面；<code>1.81s</code>加载完成；页面大小<code>13.9k</code>；请求个数24个；<br><img src=\"http://cuihuan.net/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png\" alt=\"原始加载时间\"></p>\n<p>效果不错，后文做个详细分析。</p>\n<h2 id=\"了解-wp-super-cache\"><a href=\"#了解-wp-super-cache\" class=\"headerlink\" title=\"了解 wp super cache\"></a>了解 wp super cache</h2><p><a href=\"http://z9.io/wp-super-cache/\" target=\"_blank\" rel=\"external\"> wp super cache </a> 是wordpress的一种缓存优化插件，本质是利用缓存机制提升页面加载速度。<br><strong>实现原理:</strong> php最终在前端展现时需要转换为html，然后获取响应的数据；wp super cache 则提前将php文件转换为的html伪静态文件进行存储，一旦发生请求，直接返回生成的页面；减少了数据库取数据，转换等过程，来增加加载速度。<br><strong>优 点:</strong> 增加了加载速度。<br><strong>缺 点:</strong> 增加了存储成本，而且要不断的更新，如果用户量大，个人感觉存储和离线成本增加会挺多。</p>\n<h2 id=\"安装-wp-super-cache\"><a href=\"#安装-wp-super-cache\" class=\"headerlink\" title=\"安装 wp super cache\"></a>安装 wp super cache</h2><p>官网下载地址：<a href=\"http://z9.io/wp-super-cache/\" target=\"_blank\" rel=\"external\"> http://z9.io/wp-super-cache/ </a><br>【无法翻墙可参考小拽博文：<a href=\"http://cuihuan.net/article/%E4%B8%8D%E7%BF%BB%E5%A2%99%EF%BC%8C%E4%B8%8B%E8%BD%BDwordpress%E5%AE%98%E6%96%B9%E6%8F%92%E4%BB%B6%E5%B0%8F%E6%8A%80%E5%B7%A7.html\"> 不翻墙，下载wordpress官方主题和插件小技巧 </a>】</p>\n<p>注意：安装wp super cache 需要设定固定连接 如下图<br>推荐采用【自定义结果】：<a href=\"http://cuihuan.net/article/%postname%.html\">http://cuihuan.net/article/%postname%.html</a><br>原因在于其他包含字母或者日期不太容易表意，也不利于阅读和seo等等。<br><a href=\"http://cuihuan.net/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png\" alt=\"修改链接格式\"></a></p>\n<p>如果最初采用的是<a href=\"http://xxx/?p=xxx的方式，需要对服务器进行相关设置，否则会一直出现404。解决和设置办法，在另一篇文章中，此处不赘述（[wp\" target=\"_blank\" rel=\"external\">http://xxx/?p=xxx的方式，需要对服务器进行相关设置，否则会一直出现404。解决和设置办法，在另一篇文章中，此处不赘述（[wp</a> super cache 安装和问题解决](<a href=\"http://cuihuan.net/article/wp%20super%20cache%20%E5%AE%89%E8%A3%85%E5%92%8C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.html)）。\">http://cuihuan.net/article/wp%20super%20cache%20%E5%AE%89%E8%A3%85%E5%92%8C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.html)）。</a></p>\n<p>安装成功后，后台设置中会出现wp super cache</p>\n<h2 id=\"配置-wp-super-cache\"><a href=\"#配置-wp-super-cache\" class=\"headerlink\" title=\"配置 wp super cache\"></a>配置 wp super cache</h2><p>安装成功后的简单个人推荐设置。</p>\n<p>通用-》启用cache：开启<br>高级-》启用缓存：开启<br>高级-》模式选择：推荐mode_rewrite 这个需要apache或者nginx进行相关设置，这个速度最快；如果不想设置，可以选择php缓存模式。<br>高级-》压缩页面：必选。<br>高级-》页面更新清除，评论更新清楚：推荐。作用是更新文章，评论之后触发缓存更新。<br>高级-》移动支持：推荐。<br>其他一些设置根据个人需求增加。</p>\n<p>配置，更新之后，进入网站cache目录下会出现缓存的html文件和gzip的压缩文件（前提是设置了giz压缩）。</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@cuixiaohuan cuihuan.<span class=\"keyword\">net</span>]# <span class=\"keyword\">pwd</span></div><div class=\"line\">xxx/wp-content/cache/supercache/cuihuan.<span class=\"keyword\">net</span></div><div class=\"line\">[root@cuixiaohuan cuihuan.<span class=\"keyword\">net</span>]# <span class=\"keyword\">ls</span> -lh</div><div class=\"line\"><span class=\"keyword\">total</span> 52K</div><div class=\"line\">-rw-r--r-- 1 apache apache 40K <span class=\"keyword\">Dec</span> 5 11:33 index.html</div><div class=\"line\">-rw-r--r-- 1 apache apache 9.5K <span class=\"keyword\">Dec</span> 5 11:33 index.html.gz</div></pre></td></tr></table></figure>\n<h2 id=\"效果分析\"><a href=\"#效果分析\" class=\"headerlink\" title=\"效果分析\"></a>效果分析</h2><p>优化前数据：23ms感知页面；3.62s加载完成；页面大小：419k；请求个数：25个；<br>优化后数据：106ms感知页面；<code>1.81s</code>加载完成；页面大小<code>13.9k</code>；请求个数24个；</p>\n<p>感知页面变慢：原因在于，原始php页面相对较小，传输也相对较快，传输基本框架之后，才进行页面dom绘制，js渲染，数据获取和再次渲染，所以感知时间原始的快。但是对于750ms以下的对于用户几乎都是无感知。</p>\n<p>加载完成变快：最主要达到的效果，节省最多的时间在于数据库获取数据的时间。</p>\n<p>页面大小变小：<code>这块小的有点出乎意外</code>，小是应该的，但是小这么多就有点🐂了；之后分析了下页面，可能和文章异步获取，存储的html只获取了部分页面的文章，同时，对jquery等等组件肯定是利用缓存，不计入数据大小了。</p>\n<p>请求数目变化不大。</p>\n<blockquote>\n<p>整体效果：加载快了，页面小了。</p>\n</blockquote>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/%E3%80%90wordpress%E4%BC%98%E5%8C%96%E3%80%91wp-super-cache-%E9%9D%99%E6%80%81%E7%BC%93%E5%AD%98.html\">【wordpress优化】压缩和使用静态缓存 </a> | <a href=\"http://cuihuan.net\"> 靠谱崔小拽 </a>】</p>\n","excerpt":"","more":"<blockquote>\n<p>先说背景：wordpress个人网站，整体性能挺不错；但是，由于采用php动态获取数据，构成页面的方式，势必会影响页面加载速度。对于一些最常用的页面[例如首页]等等，完全可以采用生成伪静态页面缓存的方式加载。</p>\n<p>针对现有的缓存方式调研了一下：本文使用<code>wp super cache</code>进行了优化，提升加载速度200%以上。</p>\n</blockquote>\n<h2 id=\"无图无真想，先看效果\"><a href=\"#无图无真想，先看效果\" class=\"headerlink\" title=\"无图无真想，先看效果\"></a>无图无真想，先看效果</h2><p>针对相同页面在chrome下做了个加载时间，大小的对比，如下图</p>\n<p>优化前数据：23ms感知页面；3.62s加载完成；页面大小：419k；请求个数：25个；<br><a href=\"http://cuihuan.net/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/12/E6B50C39-73D4-4397-9A79-794C58FC8A6A-1024x490.png\" alt=\"原始加载时间\"></a></p>\n<p>优化后数据：106ms感知页面；<code>1.81s</code>加载完成；页面大小<code>13.9k</code>；请求个数24个；<br><img src=\"http://cuihuan.net/wp-content/uploads/2015/12/1FDB64C3-369A-47E4-8CF7-FE2E7676FC4C1-1024x482.png\" alt=\"原始加载时间\"></p>\n<p>效果不错，后文做个详细分析。</p>\n<h2 id=\"了解-wp-super-cache\"><a href=\"#了解-wp-super-cache\" class=\"headerlink\" title=\"了解 wp super cache\"></a>了解 wp super cache</h2><p><a href=\"http://z9.io/wp-super-cache/\"> wp super cache </a> 是wordpress的一种缓存优化插件，本质是利用缓存机制提升页面加载速度。<br><strong>实现原理:</strong> php最终在前端展现时需要转换为html，然后获取响应的数据；wp super cache 则提前将php文件转换为的html伪静态文件进行存储，一旦发生请求，直接返回生成的页面；减少了数据库取数据，转换等过程，来增加加载速度。<br><strong>优 点:</strong> 增加了加载速度。<br><strong>缺 点:</strong> 增加了存储成本，而且要不断的更新，如果用户量大，个人感觉存储和离线成本增加会挺多。</p>\n<h2 id=\"安装-wp-super-cache\"><a href=\"#安装-wp-super-cache\" class=\"headerlink\" title=\"安装 wp super cache\"></a>安装 wp super cache</h2><p>官网下载地址：<a href=\"http://z9.io/wp-super-cache/\"> http://z9.io/wp-super-cache/ </a><br>【无法翻墙可参考小拽博文：<a href=\"http://cuihuan.net/article/%E4%B8%8D%E7%BF%BB%E5%A2%99%EF%BC%8C%E4%B8%8B%E8%BD%BDwordpress%E5%AE%98%E6%96%B9%E6%8F%92%E4%BB%B6%E5%B0%8F%E6%8A%80%E5%B7%A7.html\"> 不翻墙，下载wordpress官方主题和插件小技巧 </a>】</p>\n<p>注意：安装wp super cache 需要设定固定连接 如下图<br>推荐采用【自定义结果】：<a href=\"http://cuihuan.net/article/%postname%.html\">http://cuihuan.net/article/%postname%.html</a><br>原因在于其他包含字母或者日期不太容易表意，也不利于阅读和seo等等。<br><a href=\"http://cuihuan.net/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/12/BEA1E968-7B4D-4CED-AC56-8E3F4A5A6F2C-1024x546.png\" alt=\"修改链接格式\"></a></p>\n<p>如果最初采用的是<a href=\"http://xxx/?p=xxx的方式，需要对服务器进行相关设置，否则会一直出现404。解决和设置办法，在另一篇文章中，此处不赘述（[wp\">http://xxx/?p=xxx的方式，需要对服务器进行相关设置，否则会一直出现404。解决和设置办法，在另一篇文章中，此处不赘述（[wp</a> super cache 安装和问题解决](<a href=\"http://cuihuan.net/article/wp%20super%20cache%20%E5%AE%89%E8%A3%85%E5%92%8C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.html)）。\">http://cuihuan.net/article/wp%20super%20cache%20%E5%AE%89%E8%A3%85%E5%92%8C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3.html)）。</a></p>\n<p>安装成功后，后台设置中会出现wp super cache</p>\n<h2 id=\"配置-wp-super-cache\"><a href=\"#配置-wp-super-cache\" class=\"headerlink\" title=\"配置 wp super cache\"></a>配置 wp super cache</h2><p>安装成功后的简单个人推荐设置。</p>\n<p>通用-》启用cache：开启<br>高级-》启用缓存：开启<br>高级-》模式选择：推荐mode_rewrite 这个需要apache或者nginx进行相关设置，这个速度最快；如果不想设置，可以选择php缓存模式。<br>高级-》压缩页面：必选。<br>高级-》页面更新清除，评论更新清楚：推荐。作用是更新文章，评论之后触发缓存更新。<br>高级-》移动支持：推荐。<br>其他一些设置根据个人需求增加。</p>\n<p>配置，更新之后，进入网站cache目录下会出现缓存的html文件和gzip的压缩文件（前提是设置了giz压缩）。</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\">[root@cuixiaohuan cuihuan.<span class=\"keyword\">net</span>]# <span class=\"keyword\">pwd</span></div><div class=\"line\">xxx/wp-content/cache/supercache/cuihuan.<span class=\"keyword\">net</span></div><div class=\"line\">[root@cuixiaohuan cuihuan.<span class=\"keyword\">net</span>]# <span class=\"keyword\">ls</span> -lh</div><div class=\"line\"><span class=\"keyword\">total</span> 52K</div><div class=\"line\">-rw-r--r-- 1 apache apache 40K <span class=\"keyword\">Dec</span> 5 11:33 index.html</div><div class=\"line\">-rw-r--r-- 1 apache apache 9.5K <span class=\"keyword\">Dec</span> 5 11:33 index.html.gz</div></pre></td></tr></table></figure>\n<h2 id=\"效果分析\"><a href=\"#效果分析\" class=\"headerlink\" title=\"效果分析\"></a>效果分析</h2><p>优化前数据：23ms感知页面；3.62s加载完成；页面大小：419k；请求个数：25个；<br>优化后数据：106ms感知页面；<code>1.81s</code>加载完成；页面大小<code>13.9k</code>；请求个数24个；</p>\n<p>感知页面变慢：原因在于，原始php页面相对较小，传输也相对较快，传输基本框架之后，才进行页面dom绘制，js渲染，数据获取和再次渲染，所以感知时间原始的快。但是对于750ms以下的对于用户几乎都是无感知。</p>\n<p>加载完成变快：最主要达到的效果，节省最多的时间在于数据库获取数据的时间。</p>\n<p>页面大小变小：<code>这块小的有点出乎意外</code>，小是应该的，但是小这么多就有点🐂了；之后分析了下页面，可能和文章异步获取，存储的html只获取了部分页面的文章，同时，对jquery等等组件肯定是利用缓存，不计入数据大小了。</p>\n<p>请求数目变化不大。</p>\n<blockquote>\n<p>整体效果：加载快了，页面小了。</p>\n</blockquote>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/%E3%80%90wordpress%E4%BC%98%E5%8C%96%E3%80%91wp-super-cache-%E9%9D%99%E6%80%81%E7%BC%93%E5%AD%98.html\">【wordpress优化】压缩和使用静态缓存 </a> | <a href=\"http://cuihuan.net\"> 靠谱崔小拽 </a>】</p>\n"},{"title":"【高并发简单解决方案】redis队列缓存 + 批量入库 + php离线整合","date":"2017-01-20T09:21:35.000Z","_content":"\n> 需求背景：有个`调用统计日志存储和统计需求`，要求存储到mysql中；存储数据高峰能达到日均千万，瓶颈在于`直接入库并发太高，可能会把mysql干垮`。\n \n## 问题分析\n思考：应用网站架构的衍化过程中，应用最新的框架和工具技术固然是最优选择；但是，如果能在`现有的框架的基础上提出简单可依赖的解决方案`，未尝不是一种提升自我的尝试。\n\n解决：\n- 问题一：要求日志最好入库；但是，直接入库mysql确实扛不住，批量入库没有问题，done。【批量入库和直接入库性能差异[参考文章](http://tech.uc.cn/?p=634)】\n- 问题二：批量入库就需要有高并发的消息队列，决定采用redis list 仿真实现，而且方便回滚。\n- 问题三：日志量毕竟大，保存最近30条足矣，决定用php写个离线统计和清理脚本。\n\ndone，下面是小拽的简单实现过程\n\n## 一：设计数据库表和存储\n\n- 考虑到log系统对数据库的性能更多一些，稳定性和安全性没有那么高，`存储引擎自然是只支持select insert 没有索引的archive`。如果确实有update需求，也可以采用myISAM。\n- 考虑到log是实时记录的所有数据，数量可能巨大，`主键采用bigint，自增即可`。\n- 考虑到log系统`以写为主，统计采用离线计算，字段均不要出现索引`，因为一方面可能会影响插入数据效率，另外读时候会造成死锁，影响写数据。\n\n## 二：redis存储数据形成消息队列\n由于高并发，尽可能简单，直接，上代码。\n```\n<?php\n/***************************************************************************\n*\n* 获取到的调用日志，存入redis的队列中.\n* $Id$\n*\n**************************************************************************/\n\n/**\n* @file saveLog.php\n* @date 2015/11/06 20:47:13\n* @author:cuihuan\n* @version $Revision$\n* @brief\n*\n**/\n\n// 获取info\n$interface_info = $_GET['info'];\n\n// 存入redis队列\n$redis = new Redis();\n$redis->connect('xx', 6379);\n$redis->auth(\"password\");\n\n// 加上时间戳存入队列\n$now_time = date(\"Y-m-d H:i:s\");\n$redis->rPush(\"call_log\", $interface_info . \"%\" . $now_time);\n$redis->close();\n\n\n/* vim: set ts=4 sw=4 sts=4 tw=100 */\n?>\n```\n\n## 三：数据定时批量入库。\n定时读取redis消息队列里面的数据，批量入库。\n\n```\n<?php\n/**\n * 获取redis消息队列中的脚本，拼接sql，批量入库。\n * @update 2015-11-07 添加失败消息队列回滚机制 \n *\n * @Author:cuihuan\n * 2015-11-06\n * */\n\n// init redis\n$redis_xx = new Redis();\n$redis_xx->connect('ip', port);\n$redis_xx->auth(\"password\");\n\n// 获取现有消息队列的长度\n$count = 0;\n$max = $redis_xx->lLen(\"call_log\");\n\n// 获取消息队列的内容，拼接sql\n$insert_sql = \"insert into fb_call_log (`interface_name`, `createtime`) values \";\n\n// 回滚数组\n$roll_back_arr = array();\n\nwhile ($count < $max) {\n    $log_info = $redis_cq01->lPop(\"call_log\");\n    $roll_back_arr = $log_info;\n    if ($log_info == 'nil' || !isset($log_info)) {\n        $insert_sql .= \";\";\n        break;\n    }\n\n    // 切割出时间和info\n    $log_info_arr = explode(\"%\",$log_info);\n    $insert_sql .= \" ('\".$log_info_arr[0].\"','\".$log_info_arr[1].\"'),\";\n    $count++;\n}\n\n// 判定存在数据，批量入库\nif ($count != 0) {\n    $link_2004 = mysql_connect('ip:port', 'user', 'password');\n    if (!$link_2004) {\n        die(\"Could not connect:\" . mysql_error());\n    }\n\n    $crowd_db = mysql_select_db('fb_log', $link_2004);\n    $insert_sql = rtrim($insert_sql,\",\").\";\";\n    $res = mysql_query($insert_sql);\n\n    // 输出入库log和入库结果;\n    echo date(\"Y-m-d H:i:s\").\"insert \".$count.\" log info result:\";\n    echo json_encode($res);\n    echo \"</br>\\n\";\n    \n    // 数据库插入失败回滚\n    if(!$res){\n       foreach($roll_back_arr as $k){\n           $redis_xx->rPush(\"call_log\", $k);\n       }\n    }\n \n    // 释放连接\n    mysql_free_result($res);\n    mysql_close($link_2004);\n}\n\n// 释放redis\n$redis_cq01->close();\n?>\n```\n## 四：离线天级统计和清理数据脚本\n```\n?php\n/**\n* static log ：每天离线统计代码日志和删除五天前的日志\n*\n* @Author:cuihuan\n* 2015-11-06\n* */\n\n// 离线统计\n$link_2004 = mysql_connect('ip:port', 'user', 'pwd');\nif (!$link_2004) {\n    die(\"Could not connect:\" . mysql_error());\n}\n\n$crowd_db = mysql_select_db('fb_log', $link_2004);\n\n// 统计昨天的数据\n$day_time = date(\"Y-m-d\", time() - 60 * 60 * 24 * 1);\n$static_sql = \"get sql\";\n\n$res = mysql_query($static_sql, $link_2004);\n\n// 获取结果入库略\n\n// 清理15天之前的数据\n$before_15_day = date(\"Y-m-d\", time() - 60 * 60 * 24 * 15);\n$delete_sql = \"delete from xxx where createtime < '\" . $before_15_day . \"'\";\ntry {\n    $res = mysql_query($delete_sql);\n}catch(Exception $e){\n    echo json_encode($e).\"\\n\";\n    echo \"delete result:\".json_encode($res).\"\\n\";\n}\n\nmysql_close($link_2004);\n?>\n```\n## 五：代码部署\n主要是部署，批量入库脚本的调用和天级统计脚本，crontab例行运行。\n```\n# 批量入库脚本\n*/2 * * * * /home/cuihuan/xxx/lamp/php5/bin/php /home/cuihuan/xxx/batchLog.php >>/home/cuihuan/xxx/batchlog.log\n\n# 天级统计脚本\n0 5 * * * /home/cuihuan/xxx/php5/bin/php /home/cuihuan/xxx/staticLog.php >>/home/cuihuan/xxx/staticLog.log\n```\n\n> 总结：相对于其他复杂的方式处理高并发，这个解决方案简单有效：通过redis缓存抗压，mysql批量入库解决数据库瓶颈，离线计算解决统计数据，通过定期清理保证库的大小。\n\n【转载请注明：[高并发简单解决方案](http://cuihuan.net/article/%E3%80%90%E9%AB%98%E5%B9%B6%E5%8F%91%E7%AE%80%E5%8D%95%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%91redis%E7%BC%93%E5%AD%98%E9%98%9F%E5%88%97-mysql-%E6%89%B9%E9%87%8F%E5%85%A5%E5%BA%93-php%E7%A6%BB.html) | [靠谱崔小拽](http://cuihuan.net) 】","source":"_posts/【高并发简单解决方案】redis队列缓存 + mysql 批量入库 + php离线整合.md","raw":"---\ntitle: 【高并发简单解决方案】redis队列缓存 + 批量入库 + php离线整合 \ndate: 2017-01-20 17:21:35\ntags: \n- php\n- 高并发\n- mysql\n- redis\n---\n\n> 需求背景：有个`调用统计日志存储和统计需求`，要求存储到mysql中；存储数据高峰能达到日均千万，瓶颈在于`直接入库并发太高，可能会把mysql干垮`。\n \n## 问题分析\n思考：应用网站架构的衍化过程中，应用最新的框架和工具技术固然是最优选择；但是，如果能在`现有的框架的基础上提出简单可依赖的解决方案`，未尝不是一种提升自我的尝试。\n\n解决：\n- 问题一：要求日志最好入库；但是，直接入库mysql确实扛不住，批量入库没有问题，done。【批量入库和直接入库性能差异[参考文章](http://tech.uc.cn/?p=634)】\n- 问题二：批量入库就需要有高并发的消息队列，决定采用redis list 仿真实现，而且方便回滚。\n- 问题三：日志量毕竟大，保存最近30条足矣，决定用php写个离线统计和清理脚本。\n\ndone，下面是小拽的简单实现过程\n\n## 一：设计数据库表和存储\n\n- 考虑到log系统对数据库的性能更多一些，稳定性和安全性没有那么高，`存储引擎自然是只支持select insert 没有索引的archive`。如果确实有update需求，也可以采用myISAM。\n- 考虑到log是实时记录的所有数据，数量可能巨大，`主键采用bigint，自增即可`。\n- 考虑到log系统`以写为主，统计采用离线计算，字段均不要出现索引`，因为一方面可能会影响插入数据效率，另外读时候会造成死锁，影响写数据。\n\n## 二：redis存储数据形成消息队列\n由于高并发，尽可能简单，直接，上代码。\n```\n<?php\n/***************************************************************************\n*\n* 获取到的调用日志，存入redis的队列中.\n* $Id$\n*\n**************************************************************************/\n\n/**\n* @file saveLog.php\n* @date 2015/11/06 20:47:13\n* @author:cuihuan\n* @version $Revision$\n* @brief\n*\n**/\n\n// 获取info\n$interface_info = $_GET['info'];\n\n// 存入redis队列\n$redis = new Redis();\n$redis->connect('xx', 6379);\n$redis->auth(\"password\");\n\n// 加上时间戳存入队列\n$now_time = date(\"Y-m-d H:i:s\");\n$redis->rPush(\"call_log\", $interface_info . \"%\" . $now_time);\n$redis->close();\n\n\n/* vim: set ts=4 sw=4 sts=4 tw=100 */\n?>\n```\n\n## 三：数据定时批量入库。\n定时读取redis消息队列里面的数据，批量入库。\n\n```\n<?php\n/**\n * 获取redis消息队列中的脚本，拼接sql，批量入库。\n * @update 2015-11-07 添加失败消息队列回滚机制 \n *\n * @Author:cuihuan\n * 2015-11-06\n * */\n\n// init redis\n$redis_xx = new Redis();\n$redis_xx->connect('ip', port);\n$redis_xx->auth(\"password\");\n\n// 获取现有消息队列的长度\n$count = 0;\n$max = $redis_xx->lLen(\"call_log\");\n\n// 获取消息队列的内容，拼接sql\n$insert_sql = \"insert into fb_call_log (`interface_name`, `createtime`) values \";\n\n// 回滚数组\n$roll_back_arr = array();\n\nwhile ($count < $max) {\n    $log_info = $redis_cq01->lPop(\"call_log\");\n    $roll_back_arr = $log_info;\n    if ($log_info == 'nil' || !isset($log_info)) {\n        $insert_sql .= \";\";\n        break;\n    }\n\n    // 切割出时间和info\n    $log_info_arr = explode(\"%\",$log_info);\n    $insert_sql .= \" ('\".$log_info_arr[0].\"','\".$log_info_arr[1].\"'),\";\n    $count++;\n}\n\n// 判定存在数据，批量入库\nif ($count != 0) {\n    $link_2004 = mysql_connect('ip:port', 'user', 'password');\n    if (!$link_2004) {\n        die(\"Could not connect:\" . mysql_error());\n    }\n\n    $crowd_db = mysql_select_db('fb_log', $link_2004);\n    $insert_sql = rtrim($insert_sql,\",\").\";\";\n    $res = mysql_query($insert_sql);\n\n    // 输出入库log和入库结果;\n    echo date(\"Y-m-d H:i:s\").\"insert \".$count.\" log info result:\";\n    echo json_encode($res);\n    echo \"</br>\\n\";\n    \n    // 数据库插入失败回滚\n    if(!$res){\n       foreach($roll_back_arr as $k){\n           $redis_xx->rPush(\"call_log\", $k);\n       }\n    }\n \n    // 释放连接\n    mysql_free_result($res);\n    mysql_close($link_2004);\n}\n\n// 释放redis\n$redis_cq01->close();\n?>\n```\n## 四：离线天级统计和清理数据脚本\n```\n?php\n/**\n* static log ：每天离线统计代码日志和删除五天前的日志\n*\n* @Author:cuihuan\n* 2015-11-06\n* */\n\n// 离线统计\n$link_2004 = mysql_connect('ip:port', 'user', 'pwd');\nif (!$link_2004) {\n    die(\"Could not connect:\" . mysql_error());\n}\n\n$crowd_db = mysql_select_db('fb_log', $link_2004);\n\n// 统计昨天的数据\n$day_time = date(\"Y-m-d\", time() - 60 * 60 * 24 * 1);\n$static_sql = \"get sql\";\n\n$res = mysql_query($static_sql, $link_2004);\n\n// 获取结果入库略\n\n// 清理15天之前的数据\n$before_15_day = date(\"Y-m-d\", time() - 60 * 60 * 24 * 15);\n$delete_sql = \"delete from xxx where createtime < '\" . $before_15_day . \"'\";\ntry {\n    $res = mysql_query($delete_sql);\n}catch(Exception $e){\n    echo json_encode($e).\"\\n\";\n    echo \"delete result:\".json_encode($res).\"\\n\";\n}\n\nmysql_close($link_2004);\n?>\n```\n## 五：代码部署\n主要是部署，批量入库脚本的调用和天级统计脚本，crontab例行运行。\n```\n# 批量入库脚本\n*/2 * * * * /home/cuihuan/xxx/lamp/php5/bin/php /home/cuihuan/xxx/batchLog.php >>/home/cuihuan/xxx/batchlog.log\n\n# 天级统计脚本\n0 5 * * * /home/cuihuan/xxx/php5/bin/php /home/cuihuan/xxx/staticLog.php >>/home/cuihuan/xxx/staticLog.log\n```\n\n> 总结：相对于其他复杂的方式处理高并发，这个解决方案简单有效：通过redis缓存抗压，mysql批量入库解决数据库瓶颈，离线计算解决统计数据，通过定期清理保证库的大小。\n\n【转载请注明：[高并发简单解决方案](http://cuihuan.net/article/%E3%80%90%E9%AB%98%E5%B9%B6%E5%8F%91%E7%AE%80%E5%8D%95%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%91redis%E7%BC%93%E5%AD%98%E9%98%9F%E5%88%97-mysql-%E6%89%B9%E9%87%8F%E5%85%A5%E5%BA%93-php%E7%A6%BB.html) | [靠谱崔小拽](http://cuihuan.net) 】","slug":"【高并发简单解决方案】redis队列缓存 + mysql 批量入库 + php离线整合","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nkl001h661fm5odur8b","content":"<blockquote>\n<p>需求背景：有个<code>调用统计日志存储和统计需求</code>，要求存储到mysql中；存储数据高峰能达到日均千万，瓶颈在于<code>直接入库并发太高，可能会把mysql干垮</code>。</p>\n</blockquote>\n<h2 id=\"问题分析\"><a href=\"#问题分析\" class=\"headerlink\" title=\"问题分析\"></a>问题分析</h2><p>思考：应用网站架构的衍化过程中，应用最新的框架和工具技术固然是最优选择；但是，如果能在<code>现有的框架的基础上提出简单可依赖的解决方案</code>，未尝不是一种提升自我的尝试。</p>\n<p>解决：</p>\n<ul>\n<li>问题一：要求日志最好入库；但是，直接入库mysql确实扛不住，批量入库没有问题，done。【批量入库和直接入库性能差异<a href=\"http://tech.uc.cn/?p=634\" target=\"_blank\" rel=\"external\">参考文章</a>】</li>\n<li>问题二：批量入库就需要有高并发的消息队列，决定采用redis list 仿真实现，而且方便回滚。</li>\n<li>问题三：日志量毕竟大，保存最近30条足矣，决定用php写个离线统计和清理脚本。</li>\n</ul>\n<p>done，下面是小拽的简单实现过程</p>\n<h2 id=\"一：设计数据库表和存储\"><a href=\"#一：设计数据库表和存储\" class=\"headerlink\" title=\"一：设计数据库表和存储\"></a>一：设计数据库表和存储</h2><ul>\n<li>考虑到log系统对数据库的性能更多一些，稳定性和安全性没有那么高，<code>存储引擎自然是只支持select insert 没有索引的archive</code>。如果确实有update需求，也可以采用myISAM。</li>\n<li>考虑到log是实时记录的所有数据，数量可能巨大，<code>主键采用bigint，自增即可</code>。</li>\n<li>考虑到log系统<code>以写为主，统计采用离线计算，字段均不要出现索引</code>，因为一方面可能会影响插入数据效率，另外读时候会造成死锁，影响写数据。</li>\n</ul>\n<h2 id=\"二：redis存储数据形成消息队列\"><a href=\"#二：redis存储数据形成消息队列\" class=\"headerlink\" title=\"二：redis存储数据形成消息队列\"></a>二：redis存储数据形成消息队列</h2><p>由于高并发，尽可能简单，直接，上代码。<br><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?php</div><div class=\"line\"><span class=\"comment\"><span class=\"markdown\">/<span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span></span></span></div><div class=\"line\"><span class=\"bullet\">*</span></div><div class=\"line\"><span class=\"bullet\">* </span>获取到的调用日志，存入redis的队列中.</div><div class=\"line\"><span class=\"bullet\">* </span>$Id$</div><div class=\"line\"><span class=\"bullet\">*</span></div><div class=\"line\"><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"emphasis\">***</span>*/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"><span class=\"markdown\">/**</span></span></div><div class=\"line\"><span class=\"bullet\">* </span>@file saveLog.php</div><div class=\"line\"><span class=\"bullet\">* </span>@date 2015/11/06 20:47:13</div><div class=\"line\"><span class=\"bullet\">* </span>@author:cuihuan</div><div class=\"line\"><span class=\"bullet\">* </span>@version $Revision$</div><div class=\"line\"><span class=\"bullet\">* </span>@brief</div><div class=\"line\"><span class=\"bullet\">*</span></div><div class=\"line\">**/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取info</span></div><div class=\"line\">$interface_info = $_GET[<span class=\"string\">'info'</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 存入redis队列</span></div><div class=\"line\">$redis = <span class=\"keyword\">new</span> Redis();</div><div class=\"line\">$redis-&gt;connect(<span class=\"string\">'xx'</span>, <span class=\"number\">6379</span>);</div><div class=\"line\">$redis-&gt;auth(<span class=\"string\">\"password\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 加上时间戳存入队列</span></div><div class=\"line\">$now_time = date(<span class=\"string\">\"Y-m-d H:i:s\"</span>);</div><div class=\"line\">$redis-&gt;rPush(<span class=\"string\">\"call_log\"</span>, $interface_info . <span class=\"string\">\"%\"</span> . $now_time);</div><div class=\"line\">$redis-&gt;close();</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* vim: set ts=4 sw=4 sts=4 tw=100 */</span></div><div class=\"line\">?&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"三：数据定时批量入库。\"><a href=\"#三：数据定时批量入库。\" class=\"headerlink\" title=\"三：数据定时批量入库。\"></a>三：数据定时批量入库。</h2><p>定时读取redis消息队列里面的数据，批量入库。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></span></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 获取redis消息队列中的脚本，拼接sql，批量入库。</div><div class=\"line\"> * <span class=\"doctag\">@update</span> 2015-11-07 添加失败消息队列回滚机制 </div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@Author</span>:cuihuan</div><div class=\"line\"> * 2015-11-06</div><div class=\"line\"> * */</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// init redis</span></div><div class=\"line\">$redis_xx = <span class=\"keyword\">new</span> Redis();</div><div class=\"line\">$redis_xx-&gt;connect(<span class=\"string\">'ip'</span>, port);</div><div class=\"line\">$redis_xx-&gt;auth(<span class=\"string\">\"password\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取现有消息队列的长度</span></div><div class=\"line\">$count = <span class=\"number\">0</span>;</div><div class=\"line\">$max = $redis_xx-&gt;lLen(<span class=\"string\">\"call_log\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取消息队列的内容，拼接sql</span></div><div class=\"line\">$insert_sql = <span class=\"string\">\"insert into fb_call_log (`interface_name`, `createtime`) values \"</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 回滚数组</span></div><div class=\"line\">$roll_back_arr = <span class=\"keyword\">array</span>();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">while</span> ($count &lt; $max) &#123;</div><div class=\"line\">    $log_info = $redis_cq01-&gt;lPop(<span class=\"string\">\"call_log\"</span>);</div><div class=\"line\">    $roll_back_arr = $log_info;</div><div class=\"line\">    <span class=\"keyword\">if</span> ($log_info == <span class=\"string\">'nil'</span> || !<span class=\"keyword\">isset</span>($log_info)) &#123;</div><div class=\"line\">        $insert_sql .= <span class=\"string\">\";\"</span>;</div><div class=\"line\">        <span class=\"keyword\">break</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 切割出时间和info</span></div><div class=\"line\">    $log_info_arr = explode(<span class=\"string\">\"%\"</span>,$log_info);</div><div class=\"line\">    $insert_sql .= <span class=\"string\">\" ('\"</span>.$log_info_arr[<span class=\"number\">0</span>].<span class=\"string\">\"','\"</span>.$log_info_arr[<span class=\"number\">1</span>].<span class=\"string\">\"'),\"</span>;</div><div class=\"line\">    $count++;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 判定存在数据，批量入库</span></div><div class=\"line\"><span class=\"keyword\">if</span> ($count != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    $link_2004 = mysql_connect(<span class=\"string\">'ip:port'</span>, <span class=\"string\">'user'</span>, <span class=\"string\">'password'</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!$link_2004) &#123;</div><div class=\"line\">        <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    $crowd_db = mysql_select_db(<span class=\"string\">'fb_log'</span>, $link_2004);</div><div class=\"line\">    $insert_sql = rtrim($insert_sql,<span class=\"string\">\",\"</span>).<span class=\"string\">\";\"</span>;</div><div class=\"line\">    $res = mysql_query($insert_sql);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 输出入库log和入库结果;</span></div><div class=\"line\">    <span class=\"keyword\">echo</span> date(<span class=\"string\">\"Y-m-d H:i:s\"</span>).<span class=\"string\">\"insert \"</span>.$count.<span class=\"string\">\" log info result:\"</span>;</div><div class=\"line\">    <span class=\"keyword\">echo</span> json_encode($res);</div><div class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;/br&gt;\\n\"</span>;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">// 数据库插入失败回滚</span></div><div class=\"line\">    <span class=\"keyword\">if</span>(!$res)&#123;</div><div class=\"line\">       <span class=\"keyword\">foreach</span>($roll_back_arr <span class=\"keyword\">as</span> $k)&#123;</div><div class=\"line\">           $redis_xx-&gt;rPush(<span class=\"string\">\"call_log\"</span>, $k);</div><div class=\"line\">       &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">// 释放连接</span></div><div class=\"line\">    mysql_free_result($res);</div><div class=\"line\">    mysql_close($link_2004);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 释放redis</span></div><div class=\"line\">$redis_cq01-&gt;close();</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"四：离线天级统计和清理数据脚本\"><a href=\"#四：离线天级统计和清理数据脚本\" class=\"headerlink\" title=\"四：离线天级统计和清理数据脚本\"></a>四：离线天级统计和清理数据脚本</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">?php</div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\">* static log ：每天离线统计代码日志和删除五天前的日志</div><div class=\"line\">*</div><div class=\"line\">* <span class=\"doctag\">@Author</span>:cuihuan</div><div class=\"line\">* 2015-11-06</div><div class=\"line\">* */</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 离线统计</span></div><div class=\"line\">$link_2004 = mysql_connect(<span class=\"string\">'ip:port'</span>, <span class=\"string\">'user'</span>, <span class=\"string\">'pwd'</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$link_2004) &#123;</div><div class=\"line\">    <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">$crowd_db = mysql_select_db(<span class=\"string\">'fb_log'</span>, $link_2004);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 统计昨天的数据</span></div><div class=\"line\">$day_time = date(<span class=\"string\">\"Y-m-d\"</span>, time() - <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">1</span>);</div><div class=\"line\">$static_sql = <span class=\"string\">\"get sql\"</span>;</div><div class=\"line\"></div><div class=\"line\">$res = mysql_query($static_sql, $link_2004);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取结果入库略</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 清理15天之前的数据</span></div><div class=\"line\">$before_15_day = date(<span class=\"string\">\"Y-m-d\"</span>, time() - <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">15</span>);</div><div class=\"line\">$delete_sql = <span class=\"string\">\"delete from xxx where createtime &lt; '\"</span> . $before_15_day . <span class=\"string\">\"'\"</span>;</div><div class=\"line\"><span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    $res = mysql_query($delete_sql);</div><div class=\"line\">&#125;<span class=\"keyword\">catch</span>(<span class=\"keyword\">Exception</span> $e)&#123;</div><div class=\"line\">    <span class=\"keyword\">echo</span> json_encode($e).<span class=\"string\">\"\\n\"</span>;</div><div class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">\"delete result:\"</span>.json_encode($res).<span class=\"string\">\"\\n\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">mysql_close($link_2004);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"五：代码部署\"><a href=\"#五：代码部署\" class=\"headerlink\" title=\"五：代码部署\"></a>五：代码部署</h2><p>主要是部署，批量入库脚本的调用和天级统计脚本，crontab例行运行。<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># 批量入库脚本</span></div><div class=\"line\">*<span class=\"regexp\">/2 * * * * /</span>home<span class=\"regexp\">/cuihuan/</span>xxx<span class=\"regexp\">/lamp/</span>php5<span class=\"regexp\">/bin/</span>php <span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>batchLog.php &gt;&gt;<span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>batchlog.log</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 天级统计脚本</span></div><div class=\"line\"><span class=\"number\">0</span> <span class=\"number\">5</span> * * * <span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>php5<span class=\"regexp\">/bin/</span>php <span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>staticLog.php &gt;&gt;<span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>staticLog.log</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>总结：相对于其他复杂的方式处理高并发，这个解决方案简单有效：通过redis缓存抗压，mysql批量入库解决数据库瓶颈，离线计算解决统计数据，通过定期清理保证库的大小。</p>\n</blockquote>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/%E3%80%90%E9%AB%98%E5%B9%B6%E5%8F%91%E7%AE%80%E5%8D%95%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%91redis%E7%BC%93%E5%AD%98%E9%98%9F%E5%88%97-mysql-%E6%89%B9%E9%87%8F%E5%85%A5%E5%BA%93-php%E7%A6%BB.html\">高并发简单解决方案</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>需求背景：有个<code>调用统计日志存储和统计需求</code>，要求存储到mysql中；存储数据高峰能达到日均千万，瓶颈在于<code>直接入库并发太高，可能会把mysql干垮</code>。</p>\n</blockquote>\n<h2 id=\"问题分析\"><a href=\"#问题分析\" class=\"headerlink\" title=\"问题分析\"></a>问题分析</h2><p>思考：应用网站架构的衍化过程中，应用最新的框架和工具技术固然是最优选择；但是，如果能在<code>现有的框架的基础上提出简单可依赖的解决方案</code>，未尝不是一种提升自我的尝试。</p>\n<p>解决：</p>\n<ul>\n<li>问题一：要求日志最好入库；但是，直接入库mysql确实扛不住，批量入库没有问题，done。【批量入库和直接入库性能差异<a href=\"http://tech.uc.cn/?p=634\">参考文章</a>】</li>\n<li>问题二：批量入库就需要有高并发的消息队列，决定采用redis list 仿真实现，而且方便回滚。</li>\n<li>问题三：日志量毕竟大，保存最近30条足矣，决定用php写个离线统计和清理脚本。</li>\n</ul>\n<p>done，下面是小拽的简单实现过程</p>\n<h2 id=\"一：设计数据库表和存储\"><a href=\"#一：设计数据库表和存储\" class=\"headerlink\" title=\"一：设计数据库表和存储\"></a>一：设计数据库表和存储</h2><ul>\n<li>考虑到log系统对数据库的性能更多一些，稳定性和安全性没有那么高，<code>存储引擎自然是只支持select insert 没有索引的archive</code>。如果确实有update需求，也可以采用myISAM。</li>\n<li>考虑到log是实时记录的所有数据，数量可能巨大，<code>主键采用bigint，自增即可</code>。</li>\n<li>考虑到log系统<code>以写为主，统计采用离线计算，字段均不要出现索引</code>，因为一方面可能会影响插入数据效率，另外读时候会造成死锁，影响写数据。</li>\n</ul>\n<h2 id=\"二：redis存储数据形成消息队列\"><a href=\"#二：redis存储数据形成消息队列\" class=\"headerlink\" title=\"二：redis存储数据形成消息队列\"></a>二：redis存储数据形成消息队列</h2><p>由于高并发，尽可能简单，直接，上代码。<br><figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?php</div><div class=\"line\"><span class=\"comment\"><span class=\"markdown\">/<span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span></div><div class=\"line\"><span class=\"bullet\">*</div><div class=\"line\"></span><span class=\"bullet\">* </span>获取到的调用日志，存入redis的队列中.</div><div class=\"line\"><span class=\"bullet\">* </span>$Id$</div><div class=\"line\"><span class=\"bullet\">*</div><div class=\"line\"></span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"strong\">*****</span><span class=\"emphasis\">***</span>*/</span></span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"><span class=\"markdown\">/**</div><div class=\"line\"><span class=\"bullet\">* </span>@file saveLog.php</div><div class=\"line\"><span class=\"bullet\">* </span>@date 2015/11/06 20:47:13</div><div class=\"line\"><span class=\"bullet\">* </span>@author:cuihuan</div><div class=\"line\"><span class=\"bullet\">* </span>@version $Revision$</div><div class=\"line\"><span class=\"bullet\">* </span>@brief</div><div class=\"line\"><span class=\"bullet\">*</div><div class=\"line\"></span>**/</span></span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取info</span></div><div class=\"line\">$interface_info = $_GET[<span class=\"string\">'info'</span>];</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 存入redis队列</span></div><div class=\"line\">$redis = <span class=\"keyword\">new</span> Redis();</div><div class=\"line\">$redis-&gt;connect(<span class=\"string\">'xx'</span>, <span class=\"number\">6379</span>);</div><div class=\"line\">$redis-&gt;auth(<span class=\"string\">\"password\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 加上时间戳存入队列</span></div><div class=\"line\">$now_time = date(<span class=\"string\">\"Y-m-d H:i:s\"</span>);</div><div class=\"line\">$redis-&gt;rPush(<span class=\"string\">\"call_log\"</span>, $interface_info . <span class=\"string\">\"%\"</span> . $now_time);</div><div class=\"line\">$redis-&gt;close();</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/* vim: set ts=4 sw=4 sts=4 tw=100 */</span></div><div class=\"line\">?&gt;</div></pre></td></tr></table></figure></p>\n<h2 id=\"三：数据定时批量入库。\"><a href=\"#三：数据定时批量入库。\" class=\"headerlink\" title=\"三：数据定时批量入库。\"></a>三：数据定时批量入库。</h2><p>定时读取redis消息队列里面的数据，批量入库。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 获取redis消息队列中的脚本，拼接sql，批量入库。</div><div class=\"line\"> * <span class=\"doctag\">@update</span> 2015-11-07 添加失败消息队列回滚机制 </div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@Author</span>:cuihuan</div><div class=\"line\"> * 2015-11-06</div><div class=\"line\"> * */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// init redis</span></div><div class=\"line\">$redis_xx = <span class=\"keyword\">new</span> Redis();</div><div class=\"line\">$redis_xx-&gt;connect(<span class=\"string\">'ip'</span>, port);</div><div class=\"line\">$redis_xx-&gt;auth(<span class=\"string\">\"password\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取现有消息队列的长度</span></div><div class=\"line\">$count = <span class=\"number\">0</span>;</div><div class=\"line\">$max = $redis_xx-&gt;lLen(<span class=\"string\">\"call_log\"</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取消息队列的内容，拼接sql</span></div><div class=\"line\">$insert_sql = <span class=\"string\">\"insert into fb_call_log (`interface_name`, `createtime`) values \"</span>;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 回滚数组</span></div><div class=\"line\">$roll_back_arr = <span class=\"keyword\">array</span>();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">while</span> ($count &lt; $max) &#123;</div><div class=\"line\">    $log_info = $redis_cq01-&gt;lPop(<span class=\"string\">\"call_log\"</span>);</div><div class=\"line\">    $roll_back_arr = $log_info;</div><div class=\"line\">    <span class=\"keyword\">if</span> ($log_info == <span class=\"string\">'nil'</span> || !<span class=\"keyword\">isset</span>($log_info)) &#123;</div><div class=\"line\">        $insert_sql .= <span class=\"string\">\";\"</span>;</div><div class=\"line\">        <span class=\"keyword\">break</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 切割出时间和info</span></div><div class=\"line\">    $log_info_arr = explode(<span class=\"string\">\"%\"</span>,$log_info);</div><div class=\"line\">    $insert_sql .= <span class=\"string\">\" ('\"</span>.$log_info_arr[<span class=\"number\">0</span>].<span class=\"string\">\"','\"</span>.$log_info_arr[<span class=\"number\">1</span>].<span class=\"string\">\"'),\"</span>;</div><div class=\"line\">    $count++;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 判定存在数据，批量入库</span></div><div class=\"line\"><span class=\"keyword\">if</span> ($count != <span class=\"number\">0</span>) &#123;</div><div class=\"line\">    $link_2004 = mysql_connect(<span class=\"string\">'ip:port'</span>, <span class=\"string\">'user'</span>, <span class=\"string\">'password'</span>);</div><div class=\"line\">    <span class=\"keyword\">if</span> (!$link_2004) &#123;</div><div class=\"line\">        <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    $crowd_db = mysql_select_db(<span class=\"string\">'fb_log'</span>, $link_2004);</div><div class=\"line\">    $insert_sql = rtrim($insert_sql,<span class=\"string\">\",\"</span>).<span class=\"string\">\";\"</span>;</div><div class=\"line\">    $res = mysql_query($insert_sql);</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 输出入库log和入库结果;</span></div><div class=\"line\">    <span class=\"keyword\">echo</span> date(<span class=\"string\">\"Y-m-d H:i:s\"</span>).<span class=\"string\">\"insert \"</span>.$count.<span class=\"string\">\" log info result:\"</span>;</div><div class=\"line\">    <span class=\"keyword\">echo</span> json_encode($res);</div><div class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">\"&lt;/br&gt;\\n\"</span>;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">// 数据库插入失败回滚</span></div><div class=\"line\">    <span class=\"keyword\">if</span>(!$res)&#123;</div><div class=\"line\">       <span class=\"keyword\">foreach</span>($roll_back_arr <span class=\"keyword\">as</span> $k)&#123;</div><div class=\"line\">           $redis_xx-&gt;rPush(<span class=\"string\">\"call_log\"</span>, $k);</div><div class=\"line\">       &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"> </div><div class=\"line\">    <span class=\"comment\">// 释放连接</span></div><div class=\"line\">    mysql_free_result($res);</div><div class=\"line\">    mysql_close($link_2004);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 释放redis</span></div><div class=\"line\">$redis_cq01-&gt;close();</div><div class=\"line\"><span class=\"meta\">?&gt;</span></span></div></pre></td></tr></table></figure>\n<h2 id=\"四：离线天级统计和清理数据脚本\"><a href=\"#四：离线天级统计和清理数据脚本\" class=\"headerlink\" title=\"四：离线天级统计和清理数据脚本\"></a>四：离线天级统计和清理数据脚本</h2><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\">?php</div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\">* static log ：每天离线统计代码日志和删除五天前的日志</div><div class=\"line\">*</div><div class=\"line\">* <span class=\"doctag\">@Author</span>:cuihuan</div><div class=\"line\">* 2015-11-06</div><div class=\"line\">* */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 离线统计</span></div><div class=\"line\">$link_2004 = mysql_connect(<span class=\"string\">'ip:port'</span>, <span class=\"string\">'user'</span>, <span class=\"string\">'pwd'</span>);</div><div class=\"line\"><span class=\"keyword\">if</span> (!$link_2004) &#123;</div><div class=\"line\">    <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">$crowd_db = mysql_select_db(<span class=\"string\">'fb_log'</span>, $link_2004);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 统计昨天的数据</span></div><div class=\"line\">$day_time = date(<span class=\"string\">\"Y-m-d\"</span>, time() - <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">1</span>);</div><div class=\"line\">$static_sql = <span class=\"string\">\"get sql\"</span>;</div><div class=\"line\"></div><div class=\"line\">$res = mysql_query($static_sql, $link_2004);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 获取结果入库略</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// 清理15天之前的数据</span></div><div class=\"line\">$before_15_day = date(<span class=\"string\">\"Y-m-d\"</span>, time() - <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span> * <span class=\"number\">15</span>);</div><div class=\"line\">$delete_sql = <span class=\"string\">\"delete from xxx where createtime &lt; '\"</span> . $before_15_day . <span class=\"string\">\"'\"</span>;</div><div class=\"line\"><span class=\"keyword\">try</span> &#123;</div><div class=\"line\">    $res = mysql_query($delete_sql);</div><div class=\"line\">&#125;<span class=\"keyword\">catch</span>(<span class=\"keyword\">Exception</span> $e)&#123;</div><div class=\"line\">    <span class=\"keyword\">echo</span> json_encode($e).<span class=\"string\">\"\\n\"</span>;</div><div class=\"line\">    <span class=\"keyword\">echo</span> <span class=\"string\">\"delete result:\"</span>.json_encode($res).<span class=\"string\">\"\\n\"</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">mysql_close($link_2004);</div><div class=\"line\"><span class=\"meta\">?&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"五：代码部署\"><a href=\"#五：代码部署\" class=\"headerlink\" title=\"五：代码部署\"></a>五：代码部署</h2><p>主要是部署，批量入库脚本的调用和天级统计脚本，crontab例行运行。<br><figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># 批量入库脚本</span></div><div class=\"line\">*<span class=\"regexp\">/2 * * * * /</span>home<span class=\"regexp\">/cuihuan/</span>xxx<span class=\"regexp\">/lamp/</span>php5<span class=\"regexp\">/bin/</span>php <span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>batchLog.php &gt;&gt;<span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>batchlog.log</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 天级统计脚本</span></div><div class=\"line\"><span class=\"number\">0</span> <span class=\"number\">5</span> * * * <span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>php5<span class=\"regexp\">/bin/</span>php <span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>staticLog.php &gt;&gt;<span class=\"regexp\">/home/</span>cuihuan<span class=\"regexp\">/xxx/</span>staticLog.log</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>总结：相对于其他复杂的方式处理高并发，这个解决方案简单有效：通过redis缓存抗压，mysql批量入库解决数据库瓶颈，离线计算解决统计数据，通过定期清理保证库的大小。</p>\n</blockquote>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/%E3%80%90%E9%AB%98%E5%B9%B6%E5%8F%91%E7%AE%80%E5%8D%95%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%91redis%E7%BC%93%E5%AD%98%E9%98%9F%E5%88%97-mysql-%E6%89%B9%E9%87%8F%E5%85%A5%E5%BA%93-php%E7%A6%BB.html\">高并发简单解决方案</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"中型存储架构实践探索","date":"2016-04-20T09:21:35.000Z","_content":"> 最近一直在做平台优化：对于中小型的站点，`如何在资源有限的情况下，实现一个稳定，高效，靠谱的存储方案`。下图是小拽个人在时间过程使用的一个存储架构。拿出来分享交流一下，也希望得到指点改进！\n\n## 先上图\n\n[![存储架构](http://cuihuan.net/wp-content/uploads/2016/02/存储架构-1024x996.jpg)](http://cuihuan.net/wp-content/uploads/2016/02/存储架构.jpg)\n\n## 首先说思想\n\n思想就一个：`权衡资源和业务需求`\n\n> 简单解释一下：对于架构的理解，个人非常认同百度架构师tandai的一句话：`架构设计本质上是折衷的艺术`，如果你有足够量的高速存储和高性能的机器，那么完全可以用足量的cache，足量的离线计算存储，来提升时效性；同样，如果你的机器不足，资源不足，那么就可以通过可接受的时间消耗来节省存储空间。\n\n架构基本组件：\n\n- 至少两台机器。【保证物理容灾】\n- 三个mysql实例。【一主两从，一主不解释；一从主要用于实时备份，暂叫容灾从；一从用于离线计算，cache更新，非时效性的数据抓取，暂叫api从；】\n- ameoba 负责负载均衡和读写分离【暂时用着还可以】。\n- redis 负责缓存，预取，存储cache。【可以换成其他】\n- 一个抗高并发的中间件。【暂时只加了antispam组件，高并发并未处理，可能系统负载比较平均，qpd几千万 ，但是并未出现qps峰值】\n\nthat's all，这些组件对于一个操作尚可的程序员来说，部署一整套肯定不会特别麻烦，相对于其他大型的架构来说，略显简单；但是，麻雀虽小，五脏俱全，下面从架构必备的几个角度分析一下。\n\n## 安全性（Failover）\n\n任何一个架构首要考虑的是数据安全和容灾。小拽的架构中做了哪些\n\n### 数据库全量备份\n\n这个就是一个简单脚本，对api从库在闲暇时间【晚上3-4点】进行全量导出备份，同时scp到另一台机器一份。（之所以对api库，是因为api库主要负责非失效性的查询和计算）\n\n```\n# crontab 每天3点进行数据库备份 (cuihuan)\n# 0 3 * * * sh /home/disk6/mysql/bin/backup.sh\n# 每天备份，保存最近30天的\nDATE=$(date +%Y%m%d)\n/home/xxx/bin/mysqldump -uroot -pxxx db > /home/xxx/bak_sql/db_$DATE.sql;\nfind /home/xxx/bak_sql/ -mtime +30 -name '*.sql' -exec rm -rf {} \\;\n```\n\n### 数据库增量备份\n\n增量备份主要从两个角度\n\n- binlog中定期备份sql；\n- 是采用主从库之后，从库会定时的备份主库信息，同时，对api库采用数据完全一致，对容灾库则设置只同步update 和insert；这样完备的保证了数据的安全。\n\n\n## 可用性（Availabilty）\n\n数据的安全排第一，毋庸置疑；次之排平台的可用性，也毫无争议。可用性最简单的一个指标则为：`不卡`。\n\n### cache\n\ncache是提升查询时效性最有效的一个手段，小拽在框架中主要应用了两种cache，满足不同的业务需求。（所有关于cache的使用，一定要注意时效性和一致性，时效性和一致性，时效性和一致性）\n\n- 普通的cache。即用户搜索或者查询之后的结果存在redis里面，下次查询使用。\n- 预取的cache。即预测用户要查询的内容，放到cache里面。举几个栗子，用户首页内容一定要存cache里面；用户在看page1的时候，可以后台预测用户会看page2，提前取过来等等，这些策略和自己的实际业务紧密结合。\n\n关于时效性和一致性再多说一句：一定要注意及时更新，例如用户写操作，点击操作，都需要在后台触发cache的主动更新，否则可能造成数据一致性错误。\n\n### 分库分表\n\n**中小型的架构中，存储的瓶颈往往在于读。**\n\n随着数据的增加，读库的成本越来越大，一个sql很可能会造成锁死整个库，一条sql 10+s也是常有的事情；因此，解决读库的瓶颈，可以大大提升系统的可用性；小拽的实践中主要应用了分库，分表。\n\n### 分库\n\n之所以要分库，是因为`二八原则的存在，80%的用户操作集中于20%的数据`。\n\n举个栗子：实践过程中小拽有个月库，只存本月的数据，基本上80%+的用户操作数据，都会命中这个库。\n\n分库的原则有很多，例如时间原则，业务原则，数据逻辑原则等等；总之在您的框架中，当db扛不住的时候就分库，分层级。\n\n### 分表\n\n分表的思想和分库类似，只是粒度更小，不在赘述。\n\n## 扩展性（Scabability）\n\n小拽的架构中，扩展性主要从三个方面考虑\n\n- 1：数据库的扩展性。如果资源允许N主N从都是可以的，基本上不会影响业务操作。\n- 2：缓存的扩展。缓存基本上也是单独部署的，redis，memcache等均可以，变更成本不大。\n- 3：高并发和负载均衡。这块属于大型网站需要考虑的，暂时只采用了ameaba进行负载均衡的扩展，高并发预留接口。\n\n## 权衡（Balance）\n\n所有的架构和技术，最终都要落实到和业务需求权衡。\n\n上面的架构最大的优势其实就是：简单，搭建起来非常容易，这就够了。\n\n作为一名码农，只有在实践的过程中，不断发现系统的瓶颈，权衡现有资源和需求，解决和处理问题，才能成为一名靠谱的码农。\n\n以上只是小拽在实践过程中的一点小小心的，欢迎大家到小站交流（http://cuihuan.net）。\n\n【转载请注明：[中型存储架构实践探索](http://cuihuan.net/?p=460) | [靠谱崔小拽](http://cuihuan.net) 】\n\n\n\n\n\n\n\n","source":"_posts/中型存储架构实践探索.md","raw":"---\ntitle: 中型存储架构实践探索 \ndate: 2016-04-20 17:21:35\ntags: \n- 读写分离\n- 主从备份\n- redis\n- mysql\n---\n> 最近一直在做平台优化：对于中小型的站点，`如何在资源有限的情况下，实现一个稳定，高效，靠谱的存储方案`。下图是小拽个人在时间过程使用的一个存储架构。拿出来分享交流一下，也希望得到指点改进！\n\n## 先上图\n\n[![存储架构](http://cuihuan.net/wp-content/uploads/2016/02/存储架构-1024x996.jpg)](http://cuihuan.net/wp-content/uploads/2016/02/存储架构.jpg)\n\n## 首先说思想\n\n思想就一个：`权衡资源和业务需求`\n\n> 简单解释一下：对于架构的理解，个人非常认同百度架构师tandai的一句话：`架构设计本质上是折衷的艺术`，如果你有足够量的高速存储和高性能的机器，那么完全可以用足量的cache，足量的离线计算存储，来提升时效性；同样，如果你的机器不足，资源不足，那么就可以通过可接受的时间消耗来节省存储空间。\n\n架构基本组件：\n\n- 至少两台机器。【保证物理容灾】\n- 三个mysql实例。【一主两从，一主不解释；一从主要用于实时备份，暂叫容灾从；一从用于离线计算，cache更新，非时效性的数据抓取，暂叫api从；】\n- ameoba 负责负载均衡和读写分离【暂时用着还可以】。\n- redis 负责缓存，预取，存储cache。【可以换成其他】\n- 一个抗高并发的中间件。【暂时只加了antispam组件，高并发并未处理，可能系统负载比较平均，qpd几千万 ，但是并未出现qps峰值】\n\nthat's all，这些组件对于一个操作尚可的程序员来说，部署一整套肯定不会特别麻烦，相对于其他大型的架构来说，略显简单；但是，麻雀虽小，五脏俱全，下面从架构必备的几个角度分析一下。\n\n## 安全性（Failover）\n\n任何一个架构首要考虑的是数据安全和容灾。小拽的架构中做了哪些\n\n### 数据库全量备份\n\n这个就是一个简单脚本，对api从库在闲暇时间【晚上3-4点】进行全量导出备份，同时scp到另一台机器一份。（之所以对api库，是因为api库主要负责非失效性的查询和计算）\n\n```\n# crontab 每天3点进行数据库备份 (cuihuan)\n# 0 3 * * * sh /home/disk6/mysql/bin/backup.sh\n# 每天备份，保存最近30天的\nDATE=$(date +%Y%m%d)\n/home/xxx/bin/mysqldump -uroot -pxxx db > /home/xxx/bak_sql/db_$DATE.sql;\nfind /home/xxx/bak_sql/ -mtime +30 -name '*.sql' -exec rm -rf {} \\;\n```\n\n### 数据库增量备份\n\n增量备份主要从两个角度\n\n- binlog中定期备份sql；\n- 是采用主从库之后，从库会定时的备份主库信息，同时，对api库采用数据完全一致，对容灾库则设置只同步update 和insert；这样完备的保证了数据的安全。\n\n\n## 可用性（Availabilty）\n\n数据的安全排第一，毋庸置疑；次之排平台的可用性，也毫无争议。可用性最简单的一个指标则为：`不卡`。\n\n### cache\n\ncache是提升查询时效性最有效的一个手段，小拽在框架中主要应用了两种cache，满足不同的业务需求。（所有关于cache的使用，一定要注意时效性和一致性，时效性和一致性，时效性和一致性）\n\n- 普通的cache。即用户搜索或者查询之后的结果存在redis里面，下次查询使用。\n- 预取的cache。即预测用户要查询的内容，放到cache里面。举几个栗子，用户首页内容一定要存cache里面；用户在看page1的时候，可以后台预测用户会看page2，提前取过来等等，这些策略和自己的实际业务紧密结合。\n\n关于时效性和一致性再多说一句：一定要注意及时更新，例如用户写操作，点击操作，都需要在后台触发cache的主动更新，否则可能造成数据一致性错误。\n\n### 分库分表\n\n**中小型的架构中，存储的瓶颈往往在于读。**\n\n随着数据的增加，读库的成本越来越大，一个sql很可能会造成锁死整个库，一条sql 10+s也是常有的事情；因此，解决读库的瓶颈，可以大大提升系统的可用性；小拽的实践中主要应用了分库，分表。\n\n### 分库\n\n之所以要分库，是因为`二八原则的存在，80%的用户操作集中于20%的数据`。\n\n举个栗子：实践过程中小拽有个月库，只存本月的数据，基本上80%+的用户操作数据，都会命中这个库。\n\n分库的原则有很多，例如时间原则，业务原则，数据逻辑原则等等；总之在您的框架中，当db扛不住的时候就分库，分层级。\n\n### 分表\n\n分表的思想和分库类似，只是粒度更小，不在赘述。\n\n## 扩展性（Scabability）\n\n小拽的架构中，扩展性主要从三个方面考虑\n\n- 1：数据库的扩展性。如果资源允许N主N从都是可以的，基本上不会影响业务操作。\n- 2：缓存的扩展。缓存基本上也是单独部署的，redis，memcache等均可以，变更成本不大。\n- 3：高并发和负载均衡。这块属于大型网站需要考虑的，暂时只采用了ameaba进行负载均衡的扩展，高并发预留接口。\n\n## 权衡（Balance）\n\n所有的架构和技术，最终都要落实到和业务需求权衡。\n\n上面的架构最大的优势其实就是：简单，搭建起来非常容易，这就够了。\n\n作为一名码农，只有在实践的过程中，不断发现系统的瓶颈，权衡现有资源和需求，解决和处理问题，才能成为一名靠谱的码农。\n\n以上只是小拽在实践过程中的一点小小心的，欢迎大家到小站交流（http://cuihuan.net）。\n\n【转载请注明：[中型存储架构实践探索](http://cuihuan.net/?p=460) | [靠谱崔小拽](http://cuihuan.net) 】\n\n\n\n\n\n\n\n","slug":"中型存储架构实践探索","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nkm001i661fcz6xbevc","content":"<blockquote>\n<p>最近一直在做平台优化：对于中小型的站点，<code>如何在资源有限的情况下，实现一个稳定，高效，靠谱的存储方案</code>。下图是小拽个人在时间过程使用的一个存储架构。拿出来分享交流一下，也希望得到指点改进！</p>\n</blockquote>\n<h2 id=\"先上图\"><a href=\"#先上图\" class=\"headerlink\" title=\"先上图\"></a>先上图</h2><p><a href=\"http://cuihuan.net/wp-content/uploads/2016/02/存储架构.jpg\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/02/存储架构-1024x996.jpg\" alt=\"存储架构\"></a></p>\n<h2 id=\"首先说思想\"><a href=\"#首先说思想\" class=\"headerlink\" title=\"首先说思想\"></a>首先说思想</h2><p>思想就一个：<code>权衡资源和业务需求</code></p>\n<blockquote>\n<p>简单解释一下：对于架构的理解，个人非常认同百度架构师tandai的一句话：<code>架构设计本质上是折衷的艺术</code>，如果你有足够量的高速存储和高性能的机器，那么完全可以用足量的cache，足量的离线计算存储，来提升时效性；同样，如果你的机器不足，资源不足，那么就可以通过可接受的时间消耗来节省存储空间。</p>\n</blockquote>\n<p>架构基本组件：</p>\n<ul>\n<li>至少两台机器。【保证物理容灾】</li>\n<li>三个mysql实例。【一主两从，一主不解释；一从主要用于实时备份，暂叫容灾从；一从用于离线计算，cache更新，非时效性的数据抓取，暂叫api从；】</li>\n<li>ameoba 负责负载均衡和读写分离【暂时用着还可以】。</li>\n<li>redis 负责缓存，预取，存储cache。【可以换成其他】</li>\n<li>一个抗高并发的中间件。【暂时只加了antispam组件，高并发并未处理，可能系统负载比较平均，qpd几千万 ，但是并未出现qps峰值】</li>\n</ul>\n<p>that’s all，这些组件对于一个操作尚可的程序员来说，部署一整套肯定不会特别麻烦，相对于其他大型的架构来说，略显简单；但是，麻雀虽小，五脏俱全，下面从架构必备的几个角度分析一下。</p>\n<h2 id=\"安全性（Failover）\"><a href=\"#安全性（Failover）\" class=\"headerlink\" title=\"安全性（Failover）\"></a>安全性（Failover）</h2><p>任何一个架构首要考虑的是数据安全和容灾。小拽的架构中做了哪些</p>\n<h3 id=\"数据库全量备份\"><a href=\"#数据库全量备份\" class=\"headerlink\" title=\"数据库全量备份\"></a>数据库全量备份</h3><p>这个就是一个简单脚本，对api从库在闲暇时间【晚上3-4点】进行全量导出备份，同时scp到另一台机器一份。（之所以对api库，是因为api库主要负责非失效性的查询和计算）</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># crontab 每天3点进行数据库备份 (cuihuan)</span></div><div class=\"line\"><span class=\"comment\"># 0 3 * * * sh /home/disk6/mysql/bin/backup.sh</span></div><div class=\"line\"><span class=\"comment\"># 每天备份，保存最近30天的</span></div><div class=\"line\">DATE=$(date +%Y%m%d)</div><div class=\"line\"><span class=\"regexp\">/home/</span>xxx<span class=\"regexp\">/bin/my</span>sqldump -uroot -pxxx db &gt; <span class=\"regexp\">/home/</span>xxx<span class=\"regexp\">/bak_sql/</span>db_<span class=\"variable\">$DATE</span>.sql;</div><div class=\"line\">find <span class=\"regexp\">/home/</span>xxx<span class=\"regexp\">/bak_sql/</span> -mtime +<span class=\"number\">30</span> -name <span class=\"string\">'*.sql'</span> -exec rm -rf &#123;&#125; \\;</div></pre></td></tr></table></figure>\n<h3 id=\"数据库增量备份\"><a href=\"#数据库增量备份\" class=\"headerlink\" title=\"数据库增量备份\"></a>数据库增量备份</h3><p>增量备份主要从两个角度</p>\n<ul>\n<li>binlog中定期备份sql；</li>\n<li>是采用主从库之后，从库会定时的备份主库信息，同时，对api库采用数据完全一致，对容灾库则设置只同步update 和insert；这样完备的保证了数据的安全。</li>\n</ul>\n<h2 id=\"可用性（Availabilty）\"><a href=\"#可用性（Availabilty）\" class=\"headerlink\" title=\"可用性（Availabilty）\"></a>可用性（Availabilty）</h2><p>数据的安全排第一，毋庸置疑；次之排平台的可用性，也毫无争议。可用性最简单的一个指标则为：<code>不卡</code>。</p>\n<h3 id=\"cache\"><a href=\"#cache\" class=\"headerlink\" title=\"cache\"></a>cache</h3><p>cache是提升查询时效性最有效的一个手段，小拽在框架中主要应用了两种cache，满足不同的业务需求。（所有关于cache的使用，一定要注意时效性和一致性，时效性和一致性，时效性和一致性）</p>\n<ul>\n<li>普通的cache。即用户搜索或者查询之后的结果存在redis里面，下次查询使用。</li>\n<li>预取的cache。即预测用户要查询的内容，放到cache里面。举几个栗子，用户首页内容一定要存cache里面；用户在看page1的时候，可以后台预测用户会看page2，提前取过来等等，这些策略和自己的实际业务紧密结合。</li>\n</ul>\n<p>关于时效性和一致性再多说一句：一定要注意及时更新，例如用户写操作，点击操作，都需要在后台触发cache的主动更新，否则可能造成数据一致性错误。</p>\n<h3 id=\"分库分表\"><a href=\"#分库分表\" class=\"headerlink\" title=\"分库分表\"></a>分库分表</h3><p><strong>中小型的架构中，存储的瓶颈往往在于读。</strong></p>\n<p>随着数据的增加，读库的成本越来越大，一个sql很可能会造成锁死整个库，一条sql 10+s也是常有的事情；因此，解决读库的瓶颈，可以大大提升系统的可用性；小拽的实践中主要应用了分库，分表。</p>\n<h3 id=\"分库\"><a href=\"#分库\" class=\"headerlink\" title=\"分库\"></a>分库</h3><p>之所以要分库，是因为<code>二八原则的存在，80%的用户操作集中于20%的数据</code>。</p>\n<p>举个栗子：实践过程中小拽有个月库，只存本月的数据，基本上80%+的用户操作数据，都会命中这个库。</p>\n<p>分库的原则有很多，例如时间原则，业务原则，数据逻辑原则等等；总之在您的框架中，当db扛不住的时候就分库，分层级。</p>\n<h3 id=\"分表\"><a href=\"#分表\" class=\"headerlink\" title=\"分表\"></a>分表</h3><p>分表的思想和分库类似，只是粒度更小，不在赘述。</p>\n<h2 id=\"扩展性（Scabability）\"><a href=\"#扩展性（Scabability）\" class=\"headerlink\" title=\"扩展性（Scabability）\"></a>扩展性（Scabability）</h2><p>小拽的架构中，扩展性主要从三个方面考虑</p>\n<ul>\n<li>1：数据库的扩展性。如果资源允许N主N从都是可以的，基本上不会影响业务操作。</li>\n<li>2：缓存的扩展。缓存基本上也是单独部署的，redis，memcache等均可以，变更成本不大。</li>\n<li>3：高并发和负载均衡。这块属于大型网站需要考虑的，暂时只采用了ameaba进行负载均衡的扩展，高并发预留接口。</li>\n</ul>\n<h2 id=\"权衡（Balance）\"><a href=\"#权衡（Balance）\" class=\"headerlink\" title=\"权衡（Balance）\"></a>权衡（Balance）</h2><p>所有的架构和技术，最终都要落实到和业务需求权衡。</p>\n<p>上面的架构最大的优势其实就是：简单，搭建起来非常容易，这就够了。</p>\n<p>作为一名码农，只有在实践的过程中，不断发现系统的瓶颈，权衡现有资源和需求，解决和处理问题，才能成为一名靠谱的码农。</p>\n<p>以上只是小拽在实践过程中的一点小小心的，欢迎大家到小站交流（<a href=\"http://cuihuan.net）。\" target=\"_blank\" rel=\"external\">http://cuihuan.net）。</a></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/?p=460\">中型存储架构实践探索</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>最近一直在做平台优化：对于中小型的站点，<code>如何在资源有限的情况下，实现一个稳定，高效，靠谱的存储方案</code>。下图是小拽个人在时间过程使用的一个存储架构。拿出来分享交流一下，也希望得到指点改进！</p>\n</blockquote>\n<h2 id=\"先上图\"><a href=\"#先上图\" class=\"headerlink\" title=\"先上图\"></a>先上图</h2><p><a href=\"http://cuihuan.net/wp-content/uploads/2016/02/存储架构.jpg\"><img src=\"http://cuihuan.net/wp-content/uploads/2016/02/存储架构-1024x996.jpg\" alt=\"存储架构\"></a></p>\n<h2 id=\"首先说思想\"><a href=\"#首先说思想\" class=\"headerlink\" title=\"首先说思想\"></a>首先说思想</h2><p>思想就一个：<code>权衡资源和业务需求</code></p>\n<blockquote>\n<p>简单解释一下：对于架构的理解，个人非常认同百度架构师tandai的一句话：<code>架构设计本质上是折衷的艺术</code>，如果你有足够量的高速存储和高性能的机器，那么完全可以用足量的cache，足量的离线计算存储，来提升时效性；同样，如果你的机器不足，资源不足，那么就可以通过可接受的时间消耗来节省存储空间。</p>\n</blockquote>\n<p>架构基本组件：</p>\n<ul>\n<li>至少两台机器。【保证物理容灾】</li>\n<li>三个mysql实例。【一主两从，一主不解释；一从主要用于实时备份，暂叫容灾从；一从用于离线计算，cache更新，非时效性的数据抓取，暂叫api从；】</li>\n<li>ameoba 负责负载均衡和读写分离【暂时用着还可以】。</li>\n<li>redis 负责缓存，预取，存储cache。【可以换成其他】</li>\n<li>一个抗高并发的中间件。【暂时只加了antispam组件，高并发并未处理，可能系统负载比较平均，qpd几千万 ，但是并未出现qps峰值】</li>\n</ul>\n<p>that’s all，这些组件对于一个操作尚可的程序员来说，部署一整套肯定不会特别麻烦，相对于其他大型的架构来说，略显简单；但是，麻雀虽小，五脏俱全，下面从架构必备的几个角度分析一下。</p>\n<h2 id=\"安全性（Failover）\"><a href=\"#安全性（Failover）\" class=\"headerlink\" title=\"安全性（Failover）\"></a>安全性（Failover）</h2><p>任何一个架构首要考虑的是数据安全和容灾。小拽的架构中做了哪些</p>\n<h3 id=\"数据库全量备份\"><a href=\"#数据库全量备份\" class=\"headerlink\" title=\"数据库全量备份\"></a>数据库全量备份</h3><p>这个就是一个简单脚本，对api从库在闲暇时间【晚上3-4点】进行全量导出备份，同时scp到另一台机器一份。（之所以对api库，是因为api库主要负责非失效性的查询和计算）</p>\n<figure class=\"highlight awk\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># crontab 每天3点进行数据库备份 (cuihuan)</span></div><div class=\"line\"><span class=\"comment\"># 0 3 * * * sh /home/disk6/mysql/bin/backup.sh</span></div><div class=\"line\"><span class=\"comment\"># 每天备份，保存最近30天的</span></div><div class=\"line\">DATE=$(date +%Y%m%d)</div><div class=\"line\"><span class=\"regexp\">/home/</span>xxx<span class=\"regexp\">/bin/my</span>sqldump -uroot -pxxx db &gt; <span class=\"regexp\">/home/</span>xxx<span class=\"regexp\">/bak_sql/</span>db_<span class=\"variable\">$DATE</span>.sql;</div><div class=\"line\">find <span class=\"regexp\">/home/</span>xxx<span class=\"regexp\">/bak_sql/</span> -mtime +<span class=\"number\">30</span> -name <span class=\"string\">'*.sql'</span> -exec rm -rf &#123;&#125; \\;</div></pre></td></tr></table></figure>\n<h3 id=\"数据库增量备份\"><a href=\"#数据库增量备份\" class=\"headerlink\" title=\"数据库增量备份\"></a>数据库增量备份</h3><p>增量备份主要从两个角度</p>\n<ul>\n<li>binlog中定期备份sql；</li>\n<li>是采用主从库之后，从库会定时的备份主库信息，同时，对api库采用数据完全一致，对容灾库则设置只同步update 和insert；这样完备的保证了数据的安全。</li>\n</ul>\n<h2 id=\"可用性（Availabilty）\"><a href=\"#可用性（Availabilty）\" class=\"headerlink\" title=\"可用性（Availabilty）\"></a>可用性（Availabilty）</h2><p>数据的安全排第一，毋庸置疑；次之排平台的可用性，也毫无争议。可用性最简单的一个指标则为：<code>不卡</code>。</p>\n<h3 id=\"cache\"><a href=\"#cache\" class=\"headerlink\" title=\"cache\"></a>cache</h3><p>cache是提升查询时效性最有效的一个手段，小拽在框架中主要应用了两种cache，满足不同的业务需求。（所有关于cache的使用，一定要注意时效性和一致性，时效性和一致性，时效性和一致性）</p>\n<ul>\n<li>普通的cache。即用户搜索或者查询之后的结果存在redis里面，下次查询使用。</li>\n<li>预取的cache。即预测用户要查询的内容，放到cache里面。举几个栗子，用户首页内容一定要存cache里面；用户在看page1的时候，可以后台预测用户会看page2，提前取过来等等，这些策略和自己的实际业务紧密结合。</li>\n</ul>\n<p>关于时效性和一致性再多说一句：一定要注意及时更新，例如用户写操作，点击操作，都需要在后台触发cache的主动更新，否则可能造成数据一致性错误。</p>\n<h3 id=\"分库分表\"><a href=\"#分库分表\" class=\"headerlink\" title=\"分库分表\"></a>分库分表</h3><p><strong>中小型的架构中，存储的瓶颈往往在于读。</strong></p>\n<p>随着数据的增加，读库的成本越来越大，一个sql很可能会造成锁死整个库，一条sql 10+s也是常有的事情；因此，解决读库的瓶颈，可以大大提升系统的可用性；小拽的实践中主要应用了分库，分表。</p>\n<h3 id=\"分库\"><a href=\"#分库\" class=\"headerlink\" title=\"分库\"></a>分库</h3><p>之所以要分库，是因为<code>二八原则的存在，80%的用户操作集中于20%的数据</code>。</p>\n<p>举个栗子：实践过程中小拽有个月库，只存本月的数据，基本上80%+的用户操作数据，都会命中这个库。</p>\n<p>分库的原则有很多，例如时间原则，业务原则，数据逻辑原则等等；总之在您的框架中，当db扛不住的时候就分库，分层级。</p>\n<h3 id=\"分表\"><a href=\"#分表\" class=\"headerlink\" title=\"分表\"></a>分表</h3><p>分表的思想和分库类似，只是粒度更小，不在赘述。</p>\n<h2 id=\"扩展性（Scabability）\"><a href=\"#扩展性（Scabability）\" class=\"headerlink\" title=\"扩展性（Scabability）\"></a>扩展性（Scabability）</h2><p>小拽的架构中，扩展性主要从三个方面考虑</p>\n<ul>\n<li>1：数据库的扩展性。如果资源允许N主N从都是可以的，基本上不会影响业务操作。</li>\n<li>2：缓存的扩展。缓存基本上也是单独部署的，redis，memcache等均可以，变更成本不大。</li>\n<li>3：高并发和负载均衡。这块属于大型网站需要考虑的，暂时只采用了ameaba进行负载均衡的扩展，高并发预留接口。</li>\n</ul>\n<h2 id=\"权衡（Balance）\"><a href=\"#权衡（Balance）\" class=\"headerlink\" title=\"权衡（Balance）\"></a>权衡（Balance）</h2><p>所有的架构和技术，最终都要落实到和业务需求权衡。</p>\n<p>上面的架构最大的优势其实就是：简单，搭建起来非常容易，这就够了。</p>\n<p>作为一名码农，只有在实践的过程中，不断发现系统的瓶颈，权衡现有资源和需求，解决和处理问题，才能成为一名靠谱的码农。</p>\n<p>以上只是小拽在实践过程中的一点小小心的，欢迎大家到小站交流（<a href=\"http://cuihuan.net）。\">http://cuihuan.net）。</a></p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/?p=460\">中型存储架构实践探索</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"机器多次恶意提交攻击简单防范","date":"2016-01-07T09:21:35.000Z","_content":"\n> 先说背景：机器不断的发送请求或者恶意提交，会给服务器造成很大压力；针对这种攻击`最优的策略是判断提交次数，产生动态验证码`，即`判断ip规定时间内重复发送达到N次弹出验证码`。下面是小拽在实践过程中一个简单的识别ip，利用session记录和防御的过程。\n\n## 识别和校验ip\n过程如下；\n- 识别ip\n- ip属于白名单直接通过[白名单策略：内网ip+指定ip表]\n- 利用session存储ip的请求时间戳\n- 校验规定时间内ip的请求次数\n- 采取相应的措施\n\n```\n/**\n * 获取和校验ip；同时防止短时间内多次提交\n *\n * @notice        ：弹出验证码，需要替换掉echo $echo_str 即可。\n * @return string ：返回校验成功的ip\n */\nprotected function getAndCheckIP()\n{\n\n    // 获取环境ip\n    if (getenv(\"HTTP_CLIENT_IP\") && strcasecmp(getenv(\"HTTP_CLIENT_IP\"), \"unknown\"))\n        $ip = getenv(\"HTTP_CLIENT_IP\");\n    else if (getenv(\"HTTP_X_FORWARDED_FOR\") && strcasecmp(getenv(\"HTTP_X_FORWARDED_FOR\"), \"unknown\"))\n        $ip = getenv(\"HTTP_X_FORWARDED_FOR\");\n    else if (getenv(\"REMOTE_ADDR\") && strcasecmp(getenv(\"REMOTE_ADDR\"), \"unknown\"))\n        $ip = getenv(\"REMOTE_ADDR\");\n    else if (isset($_SERVER['REMOTE_ADDR']) && $_SERVER['REMOTE_ADDR'] && strcasecmp($_SERVER['REMOTE_ADDR'], \"unknown\"))\n        $ip = $_SERVER['REMOTE_ADDR'];\n    else\n        $ip = \"unknown\";\n\n    // check 环境ip\n    if (!$this->isWhiteList($ip)) {\n        $echo_str = \"提交过于频繁,请稍后再试！\";\n        // 构建ip的时间栈数据\n        if (!is_array($_SESSION[$ip])) {\n            $_SESSION[$ip] = array();\n        }\n\n        if (isset($_SESSION[$ip][0])) {\n            $_SESSION[$ip][] = time();\n\n            // session 保存时间为6小时。清理session\n            $post_interval_first = time() - $_SESSION[$ip][0];\n            if ($post_interval_first > 21600) {\n                $_SESSION[$ip] = array();\n            }\n\n            // 两次提交小于1s，禁止提交\n            $post_interval_pre = time() - $_SESSION[$ip][count($_SESSION[$ip]) - 3];\n            if ($post_interval_pre < 1) {\n                echo $echo_str;\n                exit;\n            };\n\n            // 您在10s内已经提交了3请求，禁止提交\n            $post_interval_third = time() - $_SESSION[$ip][count($_SESSION[$ip]) - 3];\n            if (isset($_SESSION[$ip][3]) && ($post_interval_third < 10)) {\n                echo $echo_str;\n                exit;\n            }\n\n            // 您在1分钟期间已经提交了5请求，禁止提交\n            $post_interval_fifth = time() - $_SESSION[$ip][count($_SESSION[$ip]) - 3];\n            if (isset($_SESSION[$ip][5]) && ($post_interval_fifth < 60)) {\n                echo $echo_str;\n                exit;\n            }\n\n            // 6小时内提交10次，禁止提交\n            if (isset($_SESSION[$ip][10])) {\n                echo $echo_str;\n                exit;\n            }\n        } else {\n            $_SESSION[$ip][] = time();\n        }\n    }\n\n    return ($ip);\n}\n\n```\n## 白名单策略\n\n白名单策略采用：内网ip放行和特定ip放行\n```\n/**\n * 检验是否存在于白名单中\n *\n * @param $ip    ：校验的ip\n * @return bool  ：校验结果\n */\nfunction isWhiteList($ip){\n    /**\n     * 内网ip默认全部存在于白名单中\n     */\n    if(!filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE)){\n        return true;\n    }\n\n    // 是否在写死的whitelist 里面\n    return in_array($ip,$this->_WHTTE_LIST);\n}\n\n```\n## 防攻击策略\n小拽采用的比较简单的策略，如上面代码，实际过程中可以结合业务需求。\n- 1s内禁止重复提交\n- 5s内提交上限3次\n- 60s内提交上限5次\n- 6小时内提交上限10次\n\n【转载请注明：[机器多次恶意提交攻击简单防范](http://cuihuan.net/article/%E6%9C%BA%E5%99%A8%E5%A4%9A%E6%AC%A1%E6%81%B6%E6%84%8F%E6%8F%90%E4%BA%A4%E6%94%BB%E5%87%BB%E7%AE%80%E5%8D%95%E9%98%B2%E8%8C%83.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","source":"_posts/机器多次恶意提交攻击.md","raw":"---\ntitle: 机器多次恶意提交攻击简单防范 \ndate: 2016-01-7 17:21:35\ntags: \n- php\n- ip\n- 恶意攻击\n---\n\n> 先说背景：机器不断的发送请求或者恶意提交，会给服务器造成很大压力；针对这种攻击`最优的策略是判断提交次数，产生动态验证码`，即`判断ip规定时间内重复发送达到N次弹出验证码`。下面是小拽在实践过程中一个简单的识别ip，利用session记录和防御的过程。\n\n## 识别和校验ip\n过程如下；\n- 识别ip\n- ip属于白名单直接通过[白名单策略：内网ip+指定ip表]\n- 利用session存储ip的请求时间戳\n- 校验规定时间内ip的请求次数\n- 采取相应的措施\n\n```\n/**\n * 获取和校验ip；同时防止短时间内多次提交\n *\n * @notice        ：弹出验证码，需要替换掉echo $echo_str 即可。\n * @return string ：返回校验成功的ip\n */\nprotected function getAndCheckIP()\n{\n\n    // 获取环境ip\n    if (getenv(\"HTTP_CLIENT_IP\") && strcasecmp(getenv(\"HTTP_CLIENT_IP\"), \"unknown\"))\n        $ip = getenv(\"HTTP_CLIENT_IP\");\n    else if (getenv(\"HTTP_X_FORWARDED_FOR\") && strcasecmp(getenv(\"HTTP_X_FORWARDED_FOR\"), \"unknown\"))\n        $ip = getenv(\"HTTP_X_FORWARDED_FOR\");\n    else if (getenv(\"REMOTE_ADDR\") && strcasecmp(getenv(\"REMOTE_ADDR\"), \"unknown\"))\n        $ip = getenv(\"REMOTE_ADDR\");\n    else if (isset($_SERVER['REMOTE_ADDR']) && $_SERVER['REMOTE_ADDR'] && strcasecmp($_SERVER['REMOTE_ADDR'], \"unknown\"))\n        $ip = $_SERVER['REMOTE_ADDR'];\n    else\n        $ip = \"unknown\";\n\n    // check 环境ip\n    if (!$this->isWhiteList($ip)) {\n        $echo_str = \"提交过于频繁,请稍后再试！\";\n        // 构建ip的时间栈数据\n        if (!is_array($_SESSION[$ip])) {\n            $_SESSION[$ip] = array();\n        }\n\n        if (isset($_SESSION[$ip][0])) {\n            $_SESSION[$ip][] = time();\n\n            // session 保存时间为6小时。清理session\n            $post_interval_first = time() - $_SESSION[$ip][0];\n            if ($post_interval_first > 21600) {\n                $_SESSION[$ip] = array();\n            }\n\n            // 两次提交小于1s，禁止提交\n            $post_interval_pre = time() - $_SESSION[$ip][count($_SESSION[$ip]) - 3];\n            if ($post_interval_pre < 1) {\n                echo $echo_str;\n                exit;\n            };\n\n            // 您在10s内已经提交了3请求，禁止提交\n            $post_interval_third = time() - $_SESSION[$ip][count($_SESSION[$ip]) - 3];\n            if (isset($_SESSION[$ip][3]) && ($post_interval_third < 10)) {\n                echo $echo_str;\n                exit;\n            }\n\n            // 您在1分钟期间已经提交了5请求，禁止提交\n            $post_interval_fifth = time() - $_SESSION[$ip][count($_SESSION[$ip]) - 3];\n            if (isset($_SESSION[$ip][5]) && ($post_interval_fifth < 60)) {\n                echo $echo_str;\n                exit;\n            }\n\n            // 6小时内提交10次，禁止提交\n            if (isset($_SESSION[$ip][10])) {\n                echo $echo_str;\n                exit;\n            }\n        } else {\n            $_SESSION[$ip][] = time();\n        }\n    }\n\n    return ($ip);\n}\n\n```\n## 白名单策略\n\n白名单策略采用：内网ip放行和特定ip放行\n```\n/**\n * 检验是否存在于白名单中\n *\n * @param $ip    ：校验的ip\n * @return bool  ：校验结果\n */\nfunction isWhiteList($ip){\n    /**\n     * 内网ip默认全部存在于白名单中\n     */\n    if(!filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE)){\n        return true;\n    }\n\n    // 是否在写死的whitelist 里面\n    return in_array($ip,$this->_WHTTE_LIST);\n}\n\n```\n## 防攻击策略\n小拽采用的比较简单的策略，如上面代码，实际过程中可以结合业务需求。\n- 1s内禁止重复提交\n- 5s内提交上限3次\n- 60s内提交上限5次\n- 6小时内提交上限10次\n\n【转载请注明：[机器多次恶意提交攻击简单防范](http://cuihuan.net/article/%E6%9C%BA%E5%99%A8%E5%A4%9A%E6%AC%A1%E6%81%B6%E6%84%8F%E6%8F%90%E4%BA%A4%E6%94%BB%E5%87%BB%E7%AE%80%E5%8D%95%E9%98%B2%E8%8C%83.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n","slug":"机器多次恶意提交攻击","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nkp001k661fda1ru2ew","content":"<blockquote>\n<p>先说背景：机器不断的发送请求或者恶意提交，会给服务器造成很大压力；针对这种攻击<code>最优的策略是判断提交次数，产生动态验证码</code>，即<code>判断ip规定时间内重复发送达到N次弹出验证码</code>。下面是小拽在实践过程中一个简单的识别ip，利用session记录和防御的过程。</p>\n</blockquote>\n<h2 id=\"识别和校验ip\"><a href=\"#识别和校验ip\" class=\"headerlink\" title=\"识别和校验ip\"></a>识别和校验ip</h2><p>过程如下；</p>\n<ul>\n<li>识别ip</li>\n<li>ip属于白名单直接通过[白名单策略：内网ip+指定ip表]</li>\n<li>利用session存储ip的请求时间戳</li>\n<li>校验规定时间内ip的请求次数</li>\n<li>采取相应的措施</li>\n</ul>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 获取和校验ip；同时防止短时间内多次提交</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@notice</span>        ：弹出验证码，需要替换掉echo $echo_str 即可。</div><div class=\"line\"> * <span class=\"doctag\">@return</span> string ：返回校验成功的ip</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAndCheckIP</span><span class=\"params\">()</span></span></div><div class=\"line\">&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 获取环境ip</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (getenv(<span class=\"string\">\"HTTP_CLIENT_IP\"</span>) &amp;&amp; strcasecmp(getenv(<span class=\"string\">\"HTTP_CLIENT_IP\"</span>), <span class=\"string\">\"unknown\"</span>))</div><div class=\"line\">        $ip = getenv(<span class=\"string\">\"HTTP_CLIENT_IP\"</span>);</div><div class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (getenv(<span class=\"string\">\"HTTP_X_FORWARDED_FOR\"</span>) &amp;&amp; strcasecmp(getenv(<span class=\"string\">\"HTTP_X_FORWARDED_FOR\"</span>), <span class=\"string\">\"unknown\"</span>))</div><div class=\"line\">        $ip = getenv(<span class=\"string\">\"HTTP_X_FORWARDED_FOR\"</span>);</div><div class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (getenv(<span class=\"string\">\"REMOTE_ADDR\"</span>) &amp;&amp; strcasecmp(getenv(<span class=\"string\">\"REMOTE_ADDR\"</span>), <span class=\"string\">\"unknown\"</span>))</div><div class=\"line\">        $ip = getenv(<span class=\"string\">\"REMOTE_ADDR\"</span>);</div><div class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SERVER[<span class=\"string\">'REMOTE_ADDR'</span>]) &amp;&amp; $_SERVER[<span class=\"string\">'REMOTE_ADDR'</span>] &amp;&amp; strcasecmp($_SERVER[<span class=\"string\">'REMOTE_ADDR'</span>], <span class=\"string\">\"unknown\"</span>))</div><div class=\"line\">        $ip = $_SERVER[<span class=\"string\">'REMOTE_ADDR'</span>];</div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">        $ip = <span class=\"string\">\"unknown\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// check 环境ip</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">$this</span>-&gt;isWhiteList($ip)) &#123;</div><div class=\"line\">        $echo_str = <span class=\"string\">\"提交过于频繁,请稍后再试！\"</span>;</div><div class=\"line\">        <span class=\"comment\">// 构建ip的时间栈数据</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (!is_array($_SESSION[$ip])) &#123;</div><div class=\"line\">            $_SESSION[$ip] = <span class=\"keyword\">array</span>();</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SESSION[$ip][<span class=\"number\">0</span>])) &#123;</div><div class=\"line\">            $_SESSION[$ip][] = time();</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// session 保存时间为6小时。清理session</span></div><div class=\"line\">            $post_interval_first = time() - $_SESSION[$ip][<span class=\"number\">0</span>];</div><div class=\"line\">            <span class=\"keyword\">if</span> ($post_interval_first &gt; <span class=\"number\">21600</span>) &#123;</div><div class=\"line\">                $_SESSION[$ip] = <span class=\"keyword\">array</span>();</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 两次提交小于1s，禁止提交</span></div><div class=\"line\">            $post_interval_pre = time() - $_SESSION[$ip][count($_SESSION[$ip]) - <span class=\"number\">3</span>];</div><div class=\"line\">            <span class=\"keyword\">if</span> ($post_interval_pre &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">                <span class=\"keyword\">echo</span> $echo_str;</div><div class=\"line\">                <span class=\"keyword\">exit</span>;</div><div class=\"line\">            &#125;;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 您在10s内已经提交了3请求，禁止提交</span></div><div class=\"line\">            $post_interval_third = time() - $_SESSION[$ip][count($_SESSION[$ip]) - <span class=\"number\">3</span>];</div><div class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SESSION[$ip][<span class=\"number\">3</span>]) &amp;&amp; ($post_interval_third &lt; <span class=\"number\">10</span>)) &#123;</div><div class=\"line\">                <span class=\"keyword\">echo</span> $echo_str;</div><div class=\"line\">                <span class=\"keyword\">exit</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 您在1分钟期间已经提交了5请求，禁止提交</span></div><div class=\"line\">            $post_interval_fifth = time() - $_SESSION[$ip][count($_SESSION[$ip]) - <span class=\"number\">3</span>];</div><div class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SESSION[$ip][<span class=\"number\">5</span>]) &amp;&amp; ($post_interval_fifth &lt; <span class=\"number\">60</span>)) &#123;</div><div class=\"line\">                <span class=\"keyword\">echo</span> $echo_str;</div><div class=\"line\">                <span class=\"keyword\">exit</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 6小时内提交10次，禁止提交</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SESSION[$ip][<span class=\"number\">10</span>])) &#123;</div><div class=\"line\">                <span class=\"keyword\">echo</span> $echo_str;</div><div class=\"line\">                <span class=\"keyword\">exit</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            $_SESSION[$ip][] = time();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> ($ip);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"白名单策略\"><a href=\"#白名单策略\" class=\"headerlink\" title=\"白名单策略\"></a>白名单策略</h2><p>白名单策略采用：内网ip放行和特定ip放行<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 检验是否存在于白名单中</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@param</span> $ip    ：校验的ip</div><div class=\"line\"> * <span class=\"doctag\">@return</span> bool  ：校验结果</div><div class=\"line\"> */</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isWhiteList</span><span class=\"params\">($ip)</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 内网ip默认全部存在于白名单中</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">if</span>(!filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE))&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 是否在写死的whitelist 里面</span></div><div class=\"line\">    <span class=\"keyword\">return</span> in_array($ip,<span class=\"keyword\">$this</span>-&gt;_WHTTE_LIST);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"防攻击策略\"><a href=\"#防攻击策略\" class=\"headerlink\" title=\"防攻击策略\"></a>防攻击策略</h2><p>小拽采用的比较简单的策略，如上面代码，实际过程中可以结合业务需求。</p>\n<ul>\n<li>1s内禁止重复提交</li>\n<li>5s内提交上限3次</li>\n<li>60s内提交上限5次</li>\n<li>6小时内提交上限10次</li>\n</ul>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/%E6%9C%BA%E5%99%A8%E5%A4%9A%E6%AC%A1%E6%81%B6%E6%84%8F%E6%8F%90%E4%BA%A4%E6%94%BB%E5%87%BB%E7%AE%80%E5%8D%95%E9%98%B2%E8%8C%83.html\">机器多次恶意提交攻击简单防范</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>先说背景：机器不断的发送请求或者恶意提交，会给服务器造成很大压力；针对这种攻击<code>最优的策略是判断提交次数，产生动态验证码</code>，即<code>判断ip规定时间内重复发送达到N次弹出验证码</code>。下面是小拽在实践过程中一个简单的识别ip，利用session记录和防御的过程。</p>\n</blockquote>\n<h2 id=\"识别和校验ip\"><a href=\"#识别和校验ip\" class=\"headerlink\" title=\"识别和校验ip\"></a>识别和校验ip</h2><p>过程如下；</p>\n<ul>\n<li>识别ip</li>\n<li>ip属于白名单直接通过[白名单策略：内网ip+指定ip表]</li>\n<li>利用session存储ip的请求时间戳</li>\n<li>校验规定时间内ip的请求次数</li>\n<li>采取相应的措施</li>\n</ul>\n<figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 获取和校验ip；同时防止短时间内多次提交</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@notice</span>        ：弹出验证码，需要替换掉echo $echo_str 即可。</div><div class=\"line\"> * <span class=\"doctag\">@return</span> string ：返回校验成功的ip</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getAndCheckIP</span><span class=\"params\">()</span></div><div class=\"line\"></span>&#123;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 获取环境ip</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (getenv(<span class=\"string\">\"HTTP_CLIENT_IP\"</span>) &amp;&amp; strcasecmp(getenv(<span class=\"string\">\"HTTP_CLIENT_IP\"</span>), <span class=\"string\">\"unknown\"</span>))</div><div class=\"line\">        $ip = getenv(<span class=\"string\">\"HTTP_CLIENT_IP\"</span>);</div><div class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (getenv(<span class=\"string\">\"HTTP_X_FORWARDED_FOR\"</span>) &amp;&amp; strcasecmp(getenv(<span class=\"string\">\"HTTP_X_FORWARDED_FOR\"</span>), <span class=\"string\">\"unknown\"</span>))</div><div class=\"line\">        $ip = getenv(<span class=\"string\">\"HTTP_X_FORWARDED_FOR\"</span>);</div><div class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (getenv(<span class=\"string\">\"REMOTE_ADDR\"</span>) &amp;&amp; strcasecmp(getenv(<span class=\"string\">\"REMOTE_ADDR\"</span>), <span class=\"string\">\"unknown\"</span>))</div><div class=\"line\">        $ip = getenv(<span class=\"string\">\"REMOTE_ADDR\"</span>);</div><div class=\"line\">    <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SERVER[<span class=\"string\">'REMOTE_ADDR'</span>]) &amp;&amp; $_SERVER[<span class=\"string\">'REMOTE_ADDR'</span>] &amp;&amp; strcasecmp($_SERVER[<span class=\"string\">'REMOTE_ADDR'</span>], <span class=\"string\">\"unknown\"</span>))</div><div class=\"line\">        $ip = $_SERVER[<span class=\"string\">'REMOTE_ADDR'</span>];</div><div class=\"line\">    <span class=\"keyword\">else</span></div><div class=\"line\">        $ip = <span class=\"string\">\"unknown\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// check 环境ip</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">$this</span>-&gt;isWhiteList($ip)) &#123;</div><div class=\"line\">        $echo_str = <span class=\"string\">\"提交过于频繁,请稍后再试！\"</span>;</div><div class=\"line\">        <span class=\"comment\">// 构建ip的时间栈数据</span></div><div class=\"line\">        <span class=\"keyword\">if</span> (!is_array($_SESSION[$ip])) &#123;</div><div class=\"line\">            $_SESSION[$ip] = <span class=\"keyword\">array</span>();</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SESSION[$ip][<span class=\"number\">0</span>])) &#123;</div><div class=\"line\">            $_SESSION[$ip][] = time();</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// session 保存时间为6小时。清理session</span></div><div class=\"line\">            $post_interval_first = time() - $_SESSION[$ip][<span class=\"number\">0</span>];</div><div class=\"line\">            <span class=\"keyword\">if</span> ($post_interval_first &gt; <span class=\"number\">21600</span>) &#123;</div><div class=\"line\">                $_SESSION[$ip] = <span class=\"keyword\">array</span>();</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 两次提交小于1s，禁止提交</span></div><div class=\"line\">            $post_interval_pre = time() - $_SESSION[$ip][count($_SESSION[$ip]) - <span class=\"number\">3</span>];</div><div class=\"line\">            <span class=\"keyword\">if</span> ($post_interval_pre &lt; <span class=\"number\">1</span>) &#123;</div><div class=\"line\">                <span class=\"keyword\">echo</span> $echo_str;</div><div class=\"line\">                <span class=\"keyword\">exit</span>;</div><div class=\"line\">            &#125;;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 您在10s内已经提交了3请求，禁止提交</span></div><div class=\"line\">            $post_interval_third = time() - $_SESSION[$ip][count($_SESSION[$ip]) - <span class=\"number\">3</span>];</div><div class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SESSION[$ip][<span class=\"number\">3</span>]) &amp;&amp; ($post_interval_third &lt; <span class=\"number\">10</span>)) &#123;</div><div class=\"line\">                <span class=\"keyword\">echo</span> $echo_str;</div><div class=\"line\">                <span class=\"keyword\">exit</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 您在1分钟期间已经提交了5请求，禁止提交</span></div><div class=\"line\">            $post_interval_fifth = time() - $_SESSION[$ip][count($_SESSION[$ip]) - <span class=\"number\">3</span>];</div><div class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SESSION[$ip][<span class=\"number\">5</span>]) &amp;&amp; ($post_interval_fifth &lt; <span class=\"number\">60</span>)) &#123;</div><div class=\"line\">                <span class=\"keyword\">echo</span> $echo_str;</div><div class=\"line\">                <span class=\"keyword\">exit</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"comment\">// 6小时内提交10次，禁止提交</span></div><div class=\"line\">            <span class=\"keyword\">if</span> (<span class=\"keyword\">isset</span>($_SESSION[$ip][<span class=\"number\">10</span>])) &#123;</div><div class=\"line\">                <span class=\"keyword\">echo</span> $echo_str;</div><div class=\"line\">                <span class=\"keyword\">exit</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">            $_SESSION[$ip][] = time();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> ($ip);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h2 id=\"白名单策略\"><a href=\"#白名单策略\" class=\"headerlink\" title=\"白名单策略\"></a>白名单策略</h2><p>白名单策略采用：内网ip放行和特定ip放行<br><figure class=\"highlight php\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 检验是否存在于白名单中</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@param</span> $ip    ：校验的ip</div><div class=\"line\"> * <span class=\"doctag\">@return</span> bool  ：校验结果</div><div class=\"line\"> */</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isWhiteList</span><span class=\"params\">($ip)</span></span>&#123;</div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 内网ip默认全部存在于白名单中</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">if</span>(!filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE))&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">// 是否在写死的whitelist 里面</span></div><div class=\"line\">    <span class=\"keyword\">return</span> in_array($ip,<span class=\"keyword\">$this</span>-&gt;_WHTTE_LIST);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"防攻击策略\"><a href=\"#防攻击策略\" class=\"headerlink\" title=\"防攻击策略\"></a>防攻击策略</h2><p>小拽采用的比较简单的策略，如上面代码，实际过程中可以结合业务需求。</p>\n<ul>\n<li>1s内禁止重复提交</li>\n<li>5s内提交上限3次</li>\n<li>60s内提交上限5次</li>\n<li>6小时内提交上限10次</li>\n</ul>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/%E6%9C%BA%E5%99%A8%E5%A4%9A%E6%AC%A1%E6%81%B6%E6%84%8F%E6%8F%90%E4%BA%A4%E6%94%BB%E5%87%BB%E7%AE%80%E5%8D%95%E9%98%B2%E8%8C%83.html\">机器多次恶意提交攻击简单防范</a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"检验mysql主从备份，读写分离","date":"2016-01-03T09:21:35.000Z","_content":"\n> 先说背景：mysql的主从部署，读写分离，负载均衡之后；需要简单测试和校验一下，在实践中写了个简单的php脚本和校验过程，mark一下，方便再次部署校验。\n\n\n## 数据库部署和实践\n数据库在实践中，`往往需要进行多机主从备份保证安全`，这个毋庸置疑；`进行读写分离和负载均衡可以极大的提升mysql的读写性能`。作者在实践中采用阿里的ameoba进行了读写分离和负载均衡操作。细节步骤参考小拽文章:[ mysql主从备份，读写分离和负载均衡实践 ](http://www.baidu.com)\n\n那么问题来了，部署完了，校验也需慎重，下面是简单的校验过程。\n\n## php简单读写库脚本\n上码：能用代码说的，最好不用文字说话！\n```\n<?php\n/**\n * 进行读写分离的校验\n * @notice ：需要关闭主从备份的情况下进行\n * 原理：打开主从，写主库，从库获取数据，校验主从备份；关闭主从写ameoba,校验读写分离和负载\n *\n * @author: cuixiaohuan\n * Date: 15/12/29\n * Time: 下午9:10\n */\n\nclass ReadAndWriteTest {\n   \n    // ameoba 设定端口,校验读写时，放主库配置\n    const IP   =\"ip:port\";\n    const PWD  =\"pwd\";\n    const USER =\"user\";\n    const DB   =\"db\";\n\n    public function __construct(){\n        error_reporting(E_ALL ^ E_DEPRECATED);\n\n        $this->initDb();\n        $this->_writeTest();\n        $this->_selectTest();\n    }\n\n\n    /**\n     * 进行10次读操作\n     */\n    public function _selectTest(){\n        for ($i = 0; $i < 10; $i++) {\n            $read_sql = 'select * from test limit 10';\n            $g_result = mysql_query($read_sql);\n            var_dump($g_result);\n            mysql_free_result($g_result);\n        }\n    }\n\n    /**\n     * 进行10次写操作\n     */\n    public function _writeTest(){\n        for ($i = 0; $i < 10; $i++) {\n            $id        = uniqid();\n            $content   = \"pingce\" . uniqid();\n            $write_sql = 'INSERT INTO `test`(`test`, `test1`) VALUES (\"' . $id . '\",\"' . $content . '\")';\n            $g_result = mysql_query($write_sql);\n            var_dump($g_result);\n        }\n    }\n\n    /**\n     * 初始化数据库连接信息 info\n     */\n    private function initDb()\n    {\n        $crowd_conn = mysql_pconnect(self::IP, self::USER, self::PWD);\n        if (!$crowd_conn) {\n            die(\"Could not connect:\" . mysql_error());\n        }\n\n        $crowd_db = mysql_select_db(self::DB, $crowd_conn);\n    }\n}\n\n$rw = new ReadAndWriteTest();\n```\n\n## 主从备份校验\n- 开启slave\n- 调整数据库信息为mysql，主库信息，运行脚本。\n- 查看从库的log，有如下写入操作，说明实时主从备份成功。\n```\n151231 15:36:21 4 Query start slave\n14 Connect Out pingce@10.95.112.120:3666\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e5c85\",\"pingce5684d957e5cf2\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e7937\",\"pingce5684d957e7982\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e8e96\",\"pingce5684d957e8ee4\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ea2c2\",\"pingce5684d957ea2eb\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eb565\",\"pingce5684d957eb5b3\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ec7ee\",\"pingce5684d957ec83e\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eda2f\",\"pingce5684d957eda78\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eeca4\",\"pingce5684d957eecf0\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eff16\",\"pingce5684d957eff61\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957f121e\",\"pingce5684d957f126d\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n```\n## 检验读写分离\n\n- 读写分离，首先需要关闭从机器上的slave。原因：存在主从的话，无法通过log查看出读写分离操作。\n``` \nmysql> stop slave;\nQuery OK, 0 rows affected (0.08 sec)\n```\n- 运行脚本：如下信息标示，运行成功。\n```\n[cuixiaohuan TestScript]$ /home/work/lamp/php5/bin/php ReadAndWriteTest.php\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e5c85\",\"pingce5684d957e5cf2\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e7937\",\"pingce5684d957e7982\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e8e96\",\"pingce5684d957e8ee4\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ea2c2\",\"pingce5684d957ea2eb\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eb565\",\"pingce5684d957eb5b3\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ec7ee\",\"pingce5684d957ec83e\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eda2f\",\"pingce5684d957eda78\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eeca4\",\"pingce5684d957eecf0\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eff16\",\"pingce5684d957eff61\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957f121e\",\"pingce5684d957f126d\")bool(true)\nresource(5) of type (mysql result)\nresource(6) of type (mysql result)\nresource(7) of type (mysql result)\nresource(8) of type (mysql result)\nresource(9) of type (mysql result)\nresource(10) of type (mysql result)\nresource(11) of type (mysql result)\nresource(12) of type (mysql result)\nresource(13) of type (mysql result)\nresource(14) of type (mysql result)\n```\n\n- 查询读写库的log\n> 解释：之所以主库放一个读写库，是因为有些要求超高一致性的数据，备份可能会有延迟；所以，主库承担读写操作，和高负载。\n```\n#读写机器log：  进行了10次写和 四次读\n151231 15:29:27 19 Query set names gbk^@\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e5c85\",\"pingce5684d957e5cf2\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e7937\",\"pingce5684d957e7982\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e8e96\",\"pingce5684d957e8ee4\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ea2c2\",\"pingce5684d957ea2eb\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eb565\",\"pingce5684d957eb5b3\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ec7ee\",\"pingce5684d957ec83e\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eda2f\",\"pingce5684d957eda78\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eeca4\",\"pingce5684d957eecf0\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eff16\",\"pingce5684d957eff61\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957f121e\",\"pingce5684d957f126d\")\n19 Query select * from test limit 10\n151231 15:29:28 19 Query select * from test limit 10\n19 Query select * from test limit 10\n19 Query select * from test limit 10\n19 Query select * from test limit 10\n```\n- 查看读库的log\n```\n# 只进行了读操作，校正了数据库的读写分离操作。\n151231 15:29:20 4 Query stop slave\n151231 15:29:27 3 Query set names gbk^@\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n```\n\n## 最后\n一句话：打开slave，校验主从备份；关闭slave，校验读写分离。\n\n【转载请注明：[ 检验mysql主从备份，读写分离 ](http://cuihuan.net/article/%E6%A3%80%E9%AA%8Cmysql%E4%B8%BB%E4%BB%8E%E5%A4%87%E4%BB%BD%EF%BC%8C%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n\n","source":"_posts/检验mysql主从备份，读写分离.md","raw":"---\ntitle: 检验mysql主从备份，读写分离 \ndate: 2016-01-03 17:21:35\ntags: \n- 读写分离\n- 主从备份\n- mysql\n---\n\n> 先说背景：mysql的主从部署，读写分离，负载均衡之后；需要简单测试和校验一下，在实践中写了个简单的php脚本和校验过程，mark一下，方便再次部署校验。\n\n\n## 数据库部署和实践\n数据库在实践中，`往往需要进行多机主从备份保证安全`，这个毋庸置疑；`进行读写分离和负载均衡可以极大的提升mysql的读写性能`。作者在实践中采用阿里的ameoba进行了读写分离和负载均衡操作。细节步骤参考小拽文章:[ mysql主从备份，读写分离和负载均衡实践 ](http://www.baidu.com)\n\n那么问题来了，部署完了，校验也需慎重，下面是简单的校验过程。\n\n## php简单读写库脚本\n上码：能用代码说的，最好不用文字说话！\n```\n<?php\n/**\n * 进行读写分离的校验\n * @notice ：需要关闭主从备份的情况下进行\n * 原理：打开主从，写主库，从库获取数据，校验主从备份；关闭主从写ameoba,校验读写分离和负载\n *\n * @author: cuixiaohuan\n * Date: 15/12/29\n * Time: 下午9:10\n */\n\nclass ReadAndWriteTest {\n   \n    // ameoba 设定端口,校验读写时，放主库配置\n    const IP   =\"ip:port\";\n    const PWD  =\"pwd\";\n    const USER =\"user\";\n    const DB   =\"db\";\n\n    public function __construct(){\n        error_reporting(E_ALL ^ E_DEPRECATED);\n\n        $this->initDb();\n        $this->_writeTest();\n        $this->_selectTest();\n    }\n\n\n    /**\n     * 进行10次读操作\n     */\n    public function _selectTest(){\n        for ($i = 0; $i < 10; $i++) {\n            $read_sql = 'select * from test limit 10';\n            $g_result = mysql_query($read_sql);\n            var_dump($g_result);\n            mysql_free_result($g_result);\n        }\n    }\n\n    /**\n     * 进行10次写操作\n     */\n    public function _writeTest(){\n        for ($i = 0; $i < 10; $i++) {\n            $id        = uniqid();\n            $content   = \"pingce\" . uniqid();\n            $write_sql = 'INSERT INTO `test`(`test`, `test1`) VALUES (\"' . $id . '\",\"' . $content . '\")';\n            $g_result = mysql_query($write_sql);\n            var_dump($g_result);\n        }\n    }\n\n    /**\n     * 初始化数据库连接信息 info\n     */\n    private function initDb()\n    {\n        $crowd_conn = mysql_pconnect(self::IP, self::USER, self::PWD);\n        if (!$crowd_conn) {\n            die(\"Could not connect:\" . mysql_error());\n        }\n\n        $crowd_db = mysql_select_db(self::DB, $crowd_conn);\n    }\n}\n\n$rw = new ReadAndWriteTest();\n```\n\n## 主从备份校验\n- 开启slave\n- 调整数据库信息为mysql，主库信息，运行脚本。\n- 查看从库的log，有如下写入操作，说明实时主从备份成功。\n```\n151231 15:36:21 4 Query start slave\n14 Connect Out pingce@10.95.112.120:3666\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e5c85\",\"pingce5684d957e5cf2\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e7937\",\"pingce5684d957e7982\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e8e96\",\"pingce5684d957e8ee4\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ea2c2\",\"pingce5684d957ea2eb\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eb565\",\"pingce5684d957eb5b3\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ec7ee\",\"pingce5684d957ec83e\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eda2f\",\"pingce5684d957eda78\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eeca4\",\"pingce5684d957eecf0\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eff16\",\"pingce5684d957eff61\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n15 Query BEGIN\n15 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957f121e\",\"pingce5684d957f126d\")\n15 Query COMMIT /* implicit, from Xid_log_event */\n```\n## 检验读写分离\n\n- 读写分离，首先需要关闭从机器上的slave。原因：存在主从的话，无法通过log查看出读写分离操作。\n``` \nmysql> stop slave;\nQuery OK, 0 rows affected (0.08 sec)\n```\n- 运行脚本：如下信息标示，运行成功。\n```\n[cuixiaohuan TestScript]$ /home/work/lamp/php5/bin/php ReadAndWriteTest.php\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e5c85\",\"pingce5684d957e5cf2\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e7937\",\"pingce5684d957e7982\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e8e96\",\"pingce5684d957e8ee4\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ea2c2\",\"pingce5684d957ea2eb\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eb565\",\"pingce5684d957eb5b3\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ec7ee\",\"pingce5684d957ec83e\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eda2f\",\"pingce5684d957eda78\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eeca4\",\"pingce5684d957eecf0\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eff16\",\"pingce5684d957eff61\")bool(true)\nINSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957f121e\",\"pingce5684d957f126d\")bool(true)\nresource(5) of type (mysql result)\nresource(6) of type (mysql result)\nresource(7) of type (mysql result)\nresource(8) of type (mysql result)\nresource(9) of type (mysql result)\nresource(10) of type (mysql result)\nresource(11) of type (mysql result)\nresource(12) of type (mysql result)\nresource(13) of type (mysql result)\nresource(14) of type (mysql result)\n```\n\n- 查询读写库的log\n> 解释：之所以主库放一个读写库，是因为有些要求超高一致性的数据，备份可能会有延迟；所以，主库承担读写操作，和高负载。\n```\n#读写机器log：  进行了10次写和 四次读\n151231 15:29:27 19 Query set names gbk^@\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e5c85\",\"pingce5684d957e5cf2\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e7937\",\"pingce5684d957e7982\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957e8e96\",\"pingce5684d957e8ee4\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ea2c2\",\"pingce5684d957ea2eb\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eb565\",\"pingce5684d957eb5b3\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957ec7ee\",\"pingce5684d957ec83e\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eda2f\",\"pingce5684d957eda78\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eeca4\",\"pingce5684d957eecf0\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957eff16\",\"pingce5684d957eff61\")\n19 Query INSERT INTO `test`(`test`, `test1`) VALUES (\"5684d957f121e\",\"pingce5684d957f126d\")\n19 Query select * from test limit 10\n151231 15:29:28 19 Query select * from test limit 10\n19 Query select * from test limit 10\n19 Query select * from test limit 10\n19 Query select * from test limit 10\n```\n- 查看读库的log\n```\n# 只进行了读操作，校正了数据库的读写分离操作。\n151231 15:29:20 4 Query stop slave\n151231 15:29:27 3 Query set names gbk^@\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n3 Query select * from test limit 10\n```\n\n## 最后\n一句话：打开slave，校验主从备份；关闭slave，校验读写分离。\n\n【转载请注明：[ 检验mysql主从备份，读写分离 ](http://cuihuan.net/article/%E6%A3%80%E9%AA%8Cmysql%E4%B8%BB%E4%BB%8E%E5%A4%87%E4%BB%BD%EF%BC%8C%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html) | [靠谱崔小拽](http://cuihuan.net) 】\n\n\n","slug":"检验mysql主从备份，读写分离","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nkq001m661fgxccqs6z","content":"<blockquote>\n<p>先说背景：mysql的主从部署，读写分离，负载均衡之后；需要简单测试和校验一下，在实践中写了个简单的php脚本和校验过程，mark一下，方便再次部署校验。</p>\n</blockquote>\n<h2 id=\"数据库部署和实践\"><a href=\"#数据库部署和实践\" class=\"headerlink\" title=\"数据库部署和实践\"></a>数据库部署和实践</h2><p>数据库在实践中，<code>往往需要进行多机主从备份保证安全</code>，这个毋庸置疑；<code>进行读写分离和负载均衡可以极大的提升mysql的读写性能</code>。作者在实践中采用阿里的ameoba进行了读写分离和负载均衡操作。细节步骤参考小拽文章:<a href=\"http://www.baidu.com\" target=\"_blank\" rel=\"external\"> mysql主从备份，读写分离和负载均衡实践 </a></p>\n<p>那么问题来了，部署完了，校验也需慎重，下面是简单的校验过程。</p>\n<h2 id=\"php简单读写库脚本\"><a href=\"#php简单读写库脚本\" class=\"headerlink\" title=\"php简单读写库脚本\"></a>php简单读写库脚本</h2><p>上码：能用代码说的，最好不用文字说话！<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></span></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * 进行读写分离的校验</div><div class=\"line\"> * <span class=\"doctag\">@notice</span> ：需要关闭主从备份的情况下进行</div><div class=\"line\"> * 原理：打开主从，写主库，从库获取数据，校验主从备份；关闭主从写ameoba,校验读写分离和负载</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@author</span>: cuixiaohuan</div><div class=\"line\"> * Date: 15/12/29</div><div class=\"line\"> * Time: 下午9:10</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReadAndWriteTest</span> </span>&#123;</div><div class=\"line\">   </div><div class=\"line\">    <span class=\"comment\">// ameoba 设定端口,校验读写时，放主库配置</span></div><div class=\"line\">    <span class=\"keyword\">const</span> IP   =<span class=\"string\">\"ip:port\"</span>;</div><div class=\"line\">    <span class=\"keyword\">const</span> PWD  =<span class=\"string\">\"pwd\"</span>;</div><div class=\"line\">    <span class=\"keyword\">const</span> USER =<span class=\"string\">\"user\"</span>;</div><div class=\"line\">    <span class=\"keyword\">const</span> DB   =<span class=\"string\">\"db\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        error_reporting(E_ALL ^ E_DEPRECATED);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;initDb();</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;_writeTest();</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;_selectTest();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 进行10次读操作</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_selectTest</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">10</span>; $i++) &#123;</div><div class=\"line\">            $read_sql = <span class=\"string\">'select * from test limit 10'</span>;</div><div class=\"line\">            $g_result = mysql_query($read_sql);</div><div class=\"line\">            var_dump($g_result);</div><div class=\"line\">            mysql_free_result($g_result);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 进行10次写操作</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_writeTest</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">10</span>; $i++) &#123;</div><div class=\"line\">            $id        = uniqid();</div><div class=\"line\">            $content   = <span class=\"string\">\"pingce\"</span> . uniqid();</div><div class=\"line\">            $write_sql = <span class=\"string\">'INSERT INTO `test`(`test`, `test1`) VALUES (\"'</span> . $id . <span class=\"string\">'\",\"'</span> . $content . <span class=\"string\">'\")'</span>;</div><div class=\"line\">            $g_result = mysql_query($write_sql);</div><div class=\"line\">            var_dump($g_result);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</span></div><div class=\"line\">     * 初始化数据库连接信息 info</div><div class=\"line\">     */</div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">initDb</span><span class=\"params\">()</span></span></div><div class=\"line\">    &#123;</div><div class=\"line\">        $crowd_conn = mysql_pconnect(<span class=\"keyword\">self</span>::IP, <span class=\"keyword\">self</span>::USER, <span class=\"keyword\">self</span>::PWD);</div><div class=\"line\">        <span class=\"keyword\">if</span> (!$crowd_conn) &#123;</div><div class=\"line\">            <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        $crowd_db = mysql_select_db(<span class=\"keyword\">self</span>::DB, $crowd_conn);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">$rw = <span class=\"keyword\">new</span> ReadAndWriteTest();</div></pre></td></tr></table></figure></p>\n<h2 id=\"主从备份校验\"><a href=\"#主从备份校验\" class=\"headerlink\" title=\"主从备份校验\"></a>主从备份校验</h2><ul>\n<li>开启slave</li>\n<li>调整数据库信息为mysql，主库信息，运行脚本。</li>\n<li>查看从库的log，有如下写入操作，说明实时主从备份成功。<figure class=\"highlight basic\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">151231 </span><span class=\"number\">15</span>:<span class=\"number\">36</span>:<span class=\"number\">21</span> <span class=\"number\">4</span> Query start slave</div><div class=\"line\"><span class=\"symbol\">14 </span>Connect <span class=\"keyword\">Out</span> pingce@<span class=\"number\">10.95.112.120</span>:<span class=\"number\">3666</span></div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e5c85\"</span>,<span class=\"string\">\"pingce5684d957e5cf2\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e7937\"</span>,<span class=\"string\">\"pingce5684d957e7982\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e8e96\"</span>,<span class=\"string\">\"pingce5684d957e8ee4\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957ea2c2\"</span>,<span class=\"string\">\"pingce5684d957ea2eb\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eb565\"</span>,<span class=\"string\">\"pingce5684d957eb5b3\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957ec7ee\"</span>,<span class=\"string\">\"pingce5684d957ec83e\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eda2f\"</span>,<span class=\"string\">\"pingce5684d957eda78\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eeca4\"</span>,<span class=\"string\">\"pingce5684d957eecf0\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eff16\"</span>,<span class=\"string\">\"pingce5684d957eff61\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957f121e\"</span>,<span class=\"string\">\"pingce5684d957f126d\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"检验读写分离\"><a href=\"#检验读写分离\" class=\"headerlink\" title=\"检验读写分离\"></a>检验读写分离</h2><ul>\n<li><p>读写分离，首先需要关闭从机器上的slave。原因：存在主从的话，无法通过log查看出读写分离操作。</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; <span class=\"literal\">stop</span> <span class=\"literal\">slave</span>;</div><div class=\"line\">Query OK, <span class=\"number\">0</span> rows affected (<span class=\"number\">0.08</span> sec)</div></pre></td></tr></table></figure>\n</li>\n<li><p>运行脚本：如下信息标示，运行成功。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuixiaohuan TestScript]$ /home/work/lamp/php5/bin/php ReadAndWriteTest.php</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957e5c85\"</span>,<span class=\"string\">\"pingce5684d957e5cf2\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957e7937\"</span>,<span class=\"string\">\"pingce5684d957e7982\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957e8e96\"</span>,<span class=\"string\">\"pingce5684d957e8ee4\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957ea2c2\"</span>,<span class=\"string\">\"pingce5684d957ea2eb\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957eb565\"</span>,<span class=\"string\">\"pingce5684d957eb5b3\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957ec7ee\"</span>,<span class=\"string\">\"pingce5684d957ec83e\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957eda2f\"</span>,<span class=\"string\">\"pingce5684d957eda78\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957eeca4\"</span>,<span class=\"string\">\"pingce5684d957eecf0\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957eff16\"</span>,<span class=\"string\">\"pingce5684d957eff61\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957f121e\"</span>,<span class=\"string\">\"pingce5684d957f126d\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">5</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">6</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">7</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">8</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">9</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">10</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">11</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">12</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">13</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">14</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div></pre></td></tr></table></figure>\n</li>\n<li><p>查询读写库的log</p>\n<blockquote>\n<p>解释：之所以主库放一个读写库，是因为有些要求超高一致性的数据，备份可能会有延迟；所以，主库承担读写操作，和高负载。</p>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">#读写机器log：  进行了<span class=\"number\">10</span>次写和 四次读</div><div class=\"line\"><span class=\"number\">151231</span> <span class=\"number\">15</span>:<span class=\"number\">29</span>:<span class=\"number\">27</span> <span class=\"number\">19</span> Query set names gbk^@</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e5c85\"</span>,<span class=\"string\">\"pingce5684d957e5cf2\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e7937\"</span>,<span class=\"string\">\"pingce5684d957e7982\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e8e96\"</span>,<span class=\"string\">\"pingce5684d957e8ee4\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957ea2c2\"</span>,<span class=\"string\">\"pingce5684d957ea2eb\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eb565\"</span>,<span class=\"string\">\"pingce5684d957eb5b3\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957ec7ee\"</span>,<span class=\"string\">\"pingce5684d957ec83e\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eda2f\"</span>,<span class=\"string\">\"pingce5684d957eda78\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eeca4\"</span>,<span class=\"string\">\"pingce5684d957eecf0\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eff16\"</span>,<span class=\"string\">\"pingce5684d957eff61\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957f121e\"</span>,<span class=\"string\">\"pingce5684d957f126d\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div><div class=\"line\"><span class=\"number\">151231</span> <span class=\"number\">15</span>:<span class=\"number\">29</span>:<span class=\"number\">28</span> <span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div><div class=\"line\"><span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div><div class=\"line\"><span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div><div class=\"line\"><span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div></pre></td></tr></table></figure>\n</blockquote>\n</li>\n<li><p>查看读库的log</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"># 只进行了读操作，校正了数据库的读写分离操作。</div><div class=\"line\">151231 15:29:20 4 <span class=\"keyword\">Query</span> stop slave</div><div class=\"line\">151231 15:29:27 3 <span class=\"keyword\">Query</span> <span class=\"keyword\">set</span> names gbk^@</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>一句话：打开slave，校验主从备份；关闭slave，校验读写分离。</p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/%E6%A3%80%E9%AA%8Cmysql%E4%B8%BB%E4%BB%8E%E5%A4%87%E4%BB%BD%EF%BC%8C%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html\"> 检验mysql主从备份，读写分离 </a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n","excerpt":"","more":"<blockquote>\n<p>先说背景：mysql的主从部署，读写分离，负载均衡之后；需要简单测试和校验一下，在实践中写了个简单的php脚本和校验过程，mark一下，方便再次部署校验。</p>\n</blockquote>\n<h2 id=\"数据库部署和实践\"><a href=\"#数据库部署和实践\" class=\"headerlink\" title=\"数据库部署和实践\"></a>数据库部署和实践</h2><p>数据库在实践中，<code>往往需要进行多机主从备份保证安全</code>，这个毋庸置疑；<code>进行读写分离和负载均衡可以极大的提升mysql的读写性能</code>。作者在实践中采用阿里的ameoba进行了读写分离和负载均衡操作。细节步骤参考小拽文章:<a href=\"http://www.baidu.com\"> mysql主从备份，读写分离和负载均衡实践 </a></p>\n<p>那么问题来了，部署完了，校验也需慎重，下面是简单的校验过程。</p>\n<h2 id=\"php简单读写库脚本\"><a href=\"#php简单读写库脚本\" class=\"headerlink\" title=\"php简单读写库脚本\"></a>php简单读写库脚本</h2><p>上码：能用代码说的，最好不用文字说话！<br><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"php\"><span class=\"meta\">&lt;?php</span></div><div class=\"line\"><span class=\"comment\">/**</div><div class=\"line\"> * 进行读写分离的校验</div><div class=\"line\"> * <span class=\"doctag\">@notice</span> ：需要关闭主从备份的情况下进行</div><div class=\"line\"> * 原理：打开主从，写主库，从库获取数据，校验主从备份；关闭主从写ameoba,校验读写分离和负载</div><div class=\"line\"> *</div><div class=\"line\"> * <span class=\"doctag\">@author</span>: cuixiaohuan</div><div class=\"line\"> * Date: 15/12/29</div><div class=\"line\"> * Time: 下午9:10</div><div class=\"line\"> */</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReadAndWriteTest</span> </span>&#123;</div><div class=\"line\">   </div><div class=\"line\">    <span class=\"comment\">// ameoba 设定端口,校验读写时，放主库配置</span></div><div class=\"line\">    <span class=\"keyword\">const</span> IP   =<span class=\"string\">\"ip:port\"</span>;</div><div class=\"line\">    <span class=\"keyword\">const</span> PWD  =<span class=\"string\">\"pwd\"</span>;</div><div class=\"line\">    <span class=\"keyword\">const</span> USER =<span class=\"string\">\"user\"</span>;</div><div class=\"line\">    <span class=\"keyword\">const</span> DB   =<span class=\"string\">\"db\"</span>;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">__construct</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        error_reporting(E_ALL ^ E_DEPRECATED);</div><div class=\"line\"></div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;initDb();</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;_writeTest();</div><div class=\"line\">        <span class=\"keyword\">$this</span>-&gt;_selectTest();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 进行10次读操作</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_selectTest</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">10</span>; $i++) &#123;</div><div class=\"line\">            $read_sql = <span class=\"string\">'select * from test limit 10'</span>;</div><div class=\"line\">            $g_result = mysql_query($read_sql);</div><div class=\"line\">            var_dump($g_result);</div><div class=\"line\">            mysql_free_result($g_result);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 进行10次写操作</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_writeTest</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">for</span> ($i = <span class=\"number\">0</span>; $i &lt; <span class=\"number\">10</span>; $i++) &#123;</div><div class=\"line\">            $id        = uniqid();</div><div class=\"line\">            $content   = <span class=\"string\">\"pingce\"</span> . uniqid();</div><div class=\"line\">            $write_sql = <span class=\"string\">'INSERT INTO `test`(`test`, `test1`) VALUES (\"'</span> . $id . <span class=\"string\">'\",\"'</span> . $content . <span class=\"string\">'\")'</span>;</div><div class=\"line\">            $g_result = mysql_query($write_sql);</div><div class=\"line\">            var_dump($g_result);</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">/**</div><div class=\"line\">     * 初始化数据库连接信息 info</div><div class=\"line\">     */</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">initDb</span><span class=\"params\">()</span></div><div class=\"line\">    </span>&#123;</div><div class=\"line\">        $crowd_conn = mysql_pconnect(<span class=\"keyword\">self</span>::IP, <span class=\"keyword\">self</span>::USER, <span class=\"keyword\">self</span>::PWD);</div><div class=\"line\">        <span class=\"keyword\">if</span> (!$crowd_conn) &#123;</div><div class=\"line\">            <span class=\"keyword\">die</span>(<span class=\"string\">\"Could not connect:\"</span> . mysql_error());</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        $crowd_db = mysql_select_db(<span class=\"keyword\">self</span>::DB, $crowd_conn);</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">$rw = <span class=\"keyword\">new</span> ReadAndWriteTest();</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"主从备份校验\"><a href=\"#主从备份校验\" class=\"headerlink\" title=\"主从备份校验\"></a>主从备份校验</h2><ul>\n<li>开启slave</li>\n<li>调整数据库信息为mysql，主库信息，运行脚本。</li>\n<li>查看从库的log，有如下写入操作，说明实时主从备份成功。<figure class=\"highlight basic\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"symbol\">151231 </span><span class=\"number\">15</span>:<span class=\"number\">36</span>:<span class=\"number\">21</span> <span class=\"number\">4</span> Query start slave</div><div class=\"line\"><span class=\"symbol\">14 </span>Connect <span class=\"keyword\">Out</span> pingce@<span class=\"number\">10.95.112.120</span>:<span class=\"number\">3666</span></div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e5c85\"</span>,<span class=\"string\">\"pingce5684d957e5cf2\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e7937\"</span>,<span class=\"string\">\"pingce5684d957e7982\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e8e96\"</span>,<span class=\"string\">\"pingce5684d957e8ee4\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957ea2c2\"</span>,<span class=\"string\">\"pingce5684d957ea2eb\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eb565\"</span>,<span class=\"string\">\"pingce5684d957eb5b3\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957ec7ee\"</span>,<span class=\"string\">\"pingce5684d957ec83e\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eda2f\"</span>,<span class=\"string\">\"pingce5684d957eda78\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eeca4\"</span>,<span class=\"string\">\"pingce5684d957eecf0\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eff16\"</span>,<span class=\"string\">\"pingce5684d957eff61\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div><div class=\"line\"><span class=\"symbol\">15 </span>Query BEGIN</div><div class=\"line\"><span class=\"symbol\">15 </span>Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957f121e\"</span>,<span class=\"string\">\"pingce5684d957f126d\"</span>)</div><div class=\"line\"><span class=\"symbol\">15 </span>Query COMMIT /* implicit, from Xid_log_event */</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"检验读写分离\"><a href=\"#检验读写分离\" class=\"headerlink\" title=\"检验读写分离\"></a>检验读写分离</h2><ul>\n<li><p>读写分离，首先需要关闭从机器上的slave。原因：存在主从的话，无法通过log查看出读写分离操作。</p>\n<figure class=\"highlight crmsh\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div></pre></td><td class=\"code\"><pre><div class=\"line\">mysql&gt; <span class=\"literal\">stop</span> <span class=\"literal\">slave</span>;</div><div class=\"line\">Query OK, <span class=\"number\">0</span> rows affected (<span class=\"number\">0.08</span> sec)</div></pre></td></tr></table></figure>\n</li>\n<li><p>运行脚本：如下信息标示，运行成功。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div></pre></td><td class=\"code\"><pre><div class=\"line\">[cuixiaohuan TestScript]$ /home/work/lamp/php5/bin/php ReadAndWriteTest.php</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957e5c85\"</span>,<span class=\"string\">\"pingce5684d957e5cf2\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957e7937\"</span>,<span class=\"string\">\"pingce5684d957e7982\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957e8e96\"</span>,<span class=\"string\">\"pingce5684d957e8ee4\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957ea2c2\"</span>,<span class=\"string\">\"pingce5684d957ea2eb\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957eb565\"</span>,<span class=\"string\">\"pingce5684d957eb5b3\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957ec7ee\"</span>,<span class=\"string\">\"pingce5684d957ec83e\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957eda2f\"</span>,<span class=\"string\">\"pingce5684d957eda78\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957eeca4\"</span>,<span class=\"string\">\"pingce5684d957eecf0\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957eff16\"</span>,<span class=\"string\">\"pingce5684d957eff61\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"string\">`test`</span>(<span class=\"string\">`test`</span>, <span class=\"string\">`test1`</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">\"5684d957f121e\"</span>,<span class=\"string\">\"pingce5684d957f126d\"</span>)bool(<span class=\"literal\">true</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">5</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">6</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">7</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">8</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">9</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">10</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">11</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">12</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">13</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div><div class=\"line\"><span class=\"keyword\">resource</span>(<span class=\"number\">14</span>) <span class=\"keyword\">of</span> <span class=\"keyword\">type</span> (mysql <span class=\"keyword\">result</span>)</div></pre></td></tr></table></figure>\n</li>\n<li><p>查询读写库的log</p>\n<blockquote>\n<p>解释：之所以主库放一个读写库，是因为有些要求超高一致性的数据，备份可能会有延迟；所以，主库承担读写操作，和高负载。</p>\n<figure class=\"highlight clean\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div></pre></td><td class=\"code\"><pre><div class=\"line\">#读写机器log：  进行了<span class=\"number\">10</span>次写和 四次读</div><div class=\"line\"><span class=\"number\">151231</span> <span class=\"number\">15</span>:<span class=\"number\">29</span>:<span class=\"number\">27</span> <span class=\"number\">19</span> Query set names gbk^@</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e5c85\"</span>,<span class=\"string\">\"pingce5684d957e5cf2\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e7937\"</span>,<span class=\"string\">\"pingce5684d957e7982\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957e8e96\"</span>,<span class=\"string\">\"pingce5684d957e8ee4\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957ea2c2\"</span>,<span class=\"string\">\"pingce5684d957ea2eb\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eb565\"</span>,<span class=\"string\">\"pingce5684d957eb5b3\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957ec7ee\"</span>,<span class=\"string\">\"pingce5684d957ec83e\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eda2f\"</span>,<span class=\"string\">\"pingce5684d957eda78\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eeca4\"</span>,<span class=\"string\">\"pingce5684d957eecf0\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957eff16\"</span>,<span class=\"string\">\"pingce5684d957eff61\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query INSERT INTO `test`(`test`, `test1`) VALUES (<span class=\"string\">\"5684d957f121e\"</span>,<span class=\"string\">\"pingce5684d957f126d\"</span>)</div><div class=\"line\"><span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div><div class=\"line\"><span class=\"number\">151231</span> <span class=\"number\">15</span>:<span class=\"number\">29</span>:<span class=\"number\">28</span> <span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div><div class=\"line\"><span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div><div class=\"line\"><span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div><div class=\"line\"><span class=\"number\">19</span> Query select * <span class=\"keyword\">from</span> test limit <span class=\"number\">10</span></div></pre></td></tr></table></figure>\n</blockquote>\n</li>\n<li><p>查看读库的log</p>\n<figure class=\"highlight stata\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div></pre></td><td class=\"code\"><pre><div class=\"line\"># 只进行了读操作，校正了数据库的读写分离操作。</div><div class=\"line\">151231 15:29:20 4 <span class=\"keyword\">Query</span> stop slave</div><div class=\"line\">151231 15:29:27 3 <span class=\"keyword\">Query</span> <span class=\"keyword\">set</span> names gbk^@</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div><div class=\"line\">3 <span class=\"keyword\">Query</span> select * from <span class=\"keyword\">test</span> limit 10</div></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"最后\"><a href=\"#最后\" class=\"headerlink\" title=\"最后\"></a>最后</h2><p>一句话：打开slave，校验主从备份；关闭slave，校验读写分离。</p>\n<p>【转载请注明：<a href=\"http://cuihuan.net/article/%E6%A3%80%E9%AA%8Cmysql%E4%B8%BB%E4%BB%8E%E5%A4%87%E4%BB%BD%EF%BC%8C%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html\"> 检验mysql主从备份，读写分离 </a> | <a href=\"http://cuihuan.net\">靠谱崔小拽</a> 】</p>\n"},{"title":"Nginx实践二：nginx端口配置，域名重定向设置","date":"2015-11-18T09:21:35.000Z","_content":"\n> nginx替换apache之后，需要进行两个基本设置，一是：域名绑定和重定向，防止盗链，死链，参考文章[ apache 防盗链 ](http://cuihuan.net/?p=154)；二是：设置多个端口，一个端口显然无法满足需求。\n\n### 域名防盗链设置\n域名防盗链主要通过，设定服务器域名，非域名重定向到现有域名（相对于之前的黑名单，我太单纯了，流量可以重定向利用一下）。\n\n配置nginx.conf\n\n```\n# default 默认只能server_name 访问\nlisten 80 default ;\nserver_name cuihuan.net;\n\n# 重定向\nif ($host != \"cuihuan.net\") {\n    rewrite ^/(.*)$ http://cuihuan.net/$1 permanent;\n}\n```\n\n解释：首先80端口默认只能域名访问 ，默认的域名cuihuan.net。 对于所有非cuihuan.net 的过来的数据直接引流的cuihuan.net。如下图【这个战斗力为五的渣渣还挂在我的页面】\n\n![4BF263AE-6ACD-4634-9000-795C0FB5F323](http://cuihuan.net/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png)\n\n进行了转码后还可以避免搜索引擎抓的域名出现死链。\n\n[![18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C](http://cuihuan.net/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png)](http://cuihuan.net/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png)\n\n### 配置多端口：\n 这个就简单了，直接把上面配置好的server copy一个挂上其他web服务或者phpadmin等等\n```\nserver {\n    listen 8002 default ;\n    server_name cuihuan.net;\n\n    if ($host != \"cuihuan.net\") {\n        rewrite ^/(.*)$ http://cuihuan.net/$1 permanent;\n    }\n\n    location / {\n        root /var/www/weixin;\n        index index.php;\n    }\n\n    location ~ \\.php$ {\n        root /var/www/weixin;\n        fastcgi_pass 127.0.0.1:9000;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME /var/www/weixin$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n   # set nginx stutus\n   location /NginxStatus{\n        stub_status on;\n        access_log on;\n        auth_basic \"NginxStatus\";\n        auth_basic_user_file conf/htpasswd;\n   }\n\n   #set deny all file\n    error_page 404 /404.html;\n    location = /var/www/wordpress/40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /home/www/wordpress/50x.html {\n    }\n }\n```\n\n> 对于nginx搭建小网站来说，这个是基本的配置。个人感觉相对于之前[ apache 防盗链配置 ](http://cuihuan.net/?p=154)来说难易差不多。\n\n [ 相关文章：Nginx实践一：centos apache更换为nginx ](http://cuihuan.net/?p=225)\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=241)","source":"_posts/Nginx实践二：nginx端口配置，域名重定向设置.md","raw":"---\ntitle: Nginx实践二：nginx端口配置，域名重定向设置 \ndate: 2015-11-18 17:21:35\ntags: \n- 服务器\n- apache\n- nginx\n---\n\n> nginx替换apache之后，需要进行两个基本设置，一是：域名绑定和重定向，防止盗链，死链，参考文章[ apache 防盗链 ](http://cuihuan.net/?p=154)；二是：设置多个端口，一个端口显然无法满足需求。\n\n### 域名防盗链设置\n域名防盗链主要通过，设定服务器域名，非域名重定向到现有域名（相对于之前的黑名单，我太单纯了，流量可以重定向利用一下）。\n\n配置nginx.conf\n\n```\n# default 默认只能server_name 访问\nlisten 80 default ;\nserver_name cuihuan.net;\n\n# 重定向\nif ($host != \"cuihuan.net\") {\n    rewrite ^/(.*)$ http://cuihuan.net/$1 permanent;\n}\n```\n\n解释：首先80端口默认只能域名访问 ，默认的域名cuihuan.net。 对于所有非cuihuan.net 的过来的数据直接引流的cuihuan.net。如下图【这个战斗力为五的渣渣还挂在我的页面】\n\n![4BF263AE-6ACD-4634-9000-795C0FB5F323](http://cuihuan.net/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png)\n\n进行了转码后还可以避免搜索引擎抓的域名出现死链。\n\n[![18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C](http://cuihuan.net/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png)](http://cuihuan.net/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png)\n\n### 配置多端口：\n 这个就简单了，直接把上面配置好的server copy一个挂上其他web服务或者phpadmin等等\n```\nserver {\n    listen 8002 default ;\n    server_name cuihuan.net;\n\n    if ($host != \"cuihuan.net\") {\n        rewrite ^/(.*)$ http://cuihuan.net/$1 permanent;\n    }\n\n    location / {\n        root /var/www/weixin;\n        index index.php;\n    }\n\n    location ~ \\.php$ {\n        root /var/www/weixin;\n        fastcgi_pass 127.0.0.1:9000;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME /var/www/weixin$fastcgi_script_name;\n        include fastcgi_params;\n    }\n\n   # set nginx stutus\n   location /NginxStatus{\n        stub_status on;\n        access_log on;\n        auth_basic \"NginxStatus\";\n        auth_basic_user_file conf/htpasswd;\n   }\n\n   #set deny all file\n    error_page 404 /404.html;\n    location = /var/www/wordpress/40x.html {\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /home/www/wordpress/50x.html {\n    }\n }\n```\n\n> 对于nginx搭建小网站来说，这个是基本的配置。个人感觉相对于之前[ apache 防盗链配置 ](http://cuihuan.net/?p=154)来说难易差不多。\n\n [ 相关文章：Nginx实践一：centos apache更换为nginx ](http://cuihuan.net/?p=225)\n\n[ 个人小站原文链接 ](http://cuihuan.net/?p=241)","slug":"Nginx实践二：nginx端口配置，域名重定向设置","published":1,"updated":"2017-03-15T03:41:00.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj0af9nks001p661fpm2nbev9","content":"<blockquote>\n<p>nginx替换apache之后，需要进行两个基本设置，一是：域名绑定和重定向，防止盗链，死链，参考文章<a href=\"http://cuihuan.net/?p=154\"> apache 防盗链 </a>；二是：设置多个端口，一个端口显然无法满足需求。</p>\n</blockquote>\n<h3 id=\"域名防盗链设置\"><a href=\"#域名防盗链设置\" class=\"headerlink\" title=\"域名防盗链设置\"></a>域名防盗链设置</h3><p>域名防盗链主要通过，设定服务器域名，非域名重定向到现有域名（相对于之前的黑名单，我太单纯了，流量可以重定向利用一下）。</p>\n<p>配置nginx.conf</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># default 默认只能server_name 访问</span></div><div class=\"line\"><span class=\"attribute\">listen</span> <span class=\"number\">80</span> default ;</div><div class=\"line\"><span class=\"attribute\">server_name</span> cuihuan.net;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 重定向</span></div><div class=\"line\"><span class=\"attribute\">if</span> (<span class=\"variable\">$host</span> != <span class=\"string\">\"cuihuan.net\"</span>) &#123;</div><div class=\"line\">    <span class=\"attribute\">rewrite</span><span class=\"regexp\"> ^/(.*)$</span> http://cuihuan.net/<span class=\"variable\">$1</span> <span class=\"literal\">permanent</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>解释：首先80端口默认只能域名访问 ，默认的域名cuihuan.net。 对于所有非cuihuan.net 的过来的数据直接引流的cuihuan.net。如下图【这个战斗力为五的渣渣还挂在我的页面】</p>\n<p><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png\" alt=\"4BF263AE-6ACD-4634-9000-795C0FB5F323\"></p>\n<p>进行了转码后还可以避免搜索引擎抓的域名出现死链。</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png\" alt=\"18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C\"></a></p>\n<h3 id=\"配置多端口：\"><a href=\"#配置多端口：\" class=\"headerlink\" title=\"配置多端口：\"></a>配置多端口：</h3><p> 这个就简单了，直接把上面配置好的server copy一个挂上其他web服务或者phpadmin等等<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">server</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">listen</span> <span class=\"number\">8002</span> default ;</div><div class=\"line\">    <span class=\"attribute\">server_name</span> cuihuan.net;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attribute\">if</span> (<span class=\"variable\">$host</span> != <span class=\"string\">\"cuihuan.net\"</span>) &#123;</div><div class=\"line\">        <span class=\"attribute\">rewrite</span><span class=\"regexp\"> ^/(.*)$</span> http://cuihuan.net/<span class=\"variable\">$1</span> <span class=\"literal\">permanent</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attribute\">location</span> / &#123;</div><div class=\"line\">        <span class=\"attribute\">root</span> /var/www/weixin;</div><div class=\"line\">        <span class=\"attribute\">index</span> index.php;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attribute\">location</span> <span class=\"regexp\">~ \\.php$</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">root</span> /var/www/weixin;</div><div class=\"line\">        <span class=\"attribute\">fastcgi_pass</span> <span class=\"number\">127.0.0.1:9000</span>;</div><div class=\"line\">        <span class=\"attribute\">fastcgi_index</span> index.php;</div><div class=\"line\">        <span class=\"attribute\">fastcgi_param</span> SCRIPT_FILENAME /var/www/weixin<span class=\"variable\">$fastcgi_script_name</span>;</div><div class=\"line\">        <span class=\"attribute\">include</span> fastcgi_params;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"comment\"># set nginx stutus</span></div><div class=\"line\">   <span class=\"attribute\">location</span> /NginxStatus&#123;</div><div class=\"line\">        <span class=\"attribute\">stub_status</span> <span class=\"literal\">on</span>;</div><div class=\"line\">        <span class=\"attribute\">access_log</span> <span class=\"literal\">on</span>;</div><div class=\"line\">        <span class=\"attribute\">auth_basic</span> <span class=\"string\">\"NginxStatus\"</span>;</div><div class=\"line\">        <span class=\"attribute\">auth_basic_user_file</span> conf/htpasswd;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"comment\">#set deny all file</span></div><div class=\"line\">    <span class=\"attribute\">error_page</span> <span class=\"number\">404</span> /<span class=\"number\">404</span>.html;</div><div class=\"line\">    <span class=\"attribute\">location</span> = /var/www/wordpress/40x.html &#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attribute\">error_page</span> <span class=\"number\">500</span> <span class=\"number\">502</span> <span class=\"number\">503</span> <span class=\"number\">504</span> /50x.html;</div><div class=\"line\">    <span class=\"attribute\">location</span> = /home/www/wordpress/50x.html &#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>对于nginx搭建小网站来说，这个是基本的配置。个人感觉相对于之前<a href=\"http://cuihuan.net/?p=154\"> apache 防盗链配置 </a>来说难易差不多。</p>\n</blockquote>\n<p> <a href=\"http://cuihuan.net/?p=225\"> 相关文章：Nginx实践一：centos apache更换为nginx </a></p>\n<p><a href=\"http://cuihuan.net/?p=241\"> 个人小站原文链接 </a></p>\n","excerpt":"","more":"<blockquote>\n<p>nginx替换apache之后，需要进行两个基本设置，一是：域名绑定和重定向，防止盗链，死链，参考文章<a href=\"http://cuihuan.net/?p=154\"> apache 防盗链 </a>；二是：设置多个端口，一个端口显然无法满足需求。</p>\n</blockquote>\n<h3 id=\"域名防盗链设置\"><a href=\"#域名防盗链设置\" class=\"headerlink\" title=\"域名防盗链设置\"></a>域名防盗链设置</h3><p>域名防盗链主要通过，设定服务器域名，非域名重定向到现有域名（相对于之前的黑名单，我太单纯了，流量可以重定向利用一下）。</p>\n<p>配置nginx.conf</p>\n<figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># default 默认只能server_name 访问</span></div><div class=\"line\"><span class=\"attribute\">listen</span> <span class=\"number\">80</span> default ;</div><div class=\"line\"><span class=\"attribute\">server_name</span> cuihuan.net;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># 重定向</span></div><div class=\"line\"><span class=\"attribute\">if</span> (<span class=\"variable\">$host</span> != <span class=\"string\">\"cuihuan.net\"</span>) &#123;</div><div class=\"line\">    <span class=\"attribute\">rewrite</span><span class=\"regexp\"> ^/(.*)$</span> http://cuihuan.net/<span class=\"variable\">$1</span> <span class=\"literal\">permanent</span>;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p>解释：首先80端口默认只能域名访问 ，默认的域名cuihuan.net。 对于所有非cuihuan.net 的过来的数据直接引流的cuihuan.net。如下图【这个战斗力为五的渣渣还挂在我的页面】</p>\n<p><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/4BF263AE-6ACD-4634-9000-795C0FB5F323-1024x851.png\" alt=\"4BF263AE-6ACD-4634-9000-795C0FB5F323\"></p>\n<p>进行了转码后还可以避免搜索引擎抓的域名出现死链。</p>\n<p><a href=\"http://cuihuan.net/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C.png\"><img src=\"http://cuihuan.net/wp-content/uploads/2015/11/18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C-1024x467.png\" alt=\"18AC69FB-9C9D-4CE6-8D9A-8F3BFC40D75C\"></a></p>\n<h3 id=\"配置多端口：\"><a href=\"#配置多端口：\" class=\"headerlink\" title=\"配置多端口：\"></a>配置多端口：</h3><p> 这个就简单了，直接把上面配置好的server copy一个挂上其他web服务或者phpadmin等等<br><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"section\">server</span> &#123;</div><div class=\"line\">    <span class=\"attribute\">listen</span> <span class=\"number\">8002</span> default ;</div><div class=\"line\">    <span class=\"attribute\">server_name</span> cuihuan.net;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attribute\">if</span> (<span class=\"variable\">$host</span> != <span class=\"string\">\"cuihuan.net\"</span>) &#123;</div><div class=\"line\">        <span class=\"attribute\">rewrite</span><span class=\"regexp\"> ^/(.*)$</span> http://cuihuan.net/<span class=\"variable\">$1</span> <span class=\"literal\">permanent</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attribute\">location</span> / &#123;</div><div class=\"line\">        <span class=\"attribute\">root</span> /var/www/weixin;</div><div class=\"line\">        <span class=\"attribute\">index</span> index.php;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attribute\">location</span> <span class=\"regexp\">~ \\.php$</span> &#123;</div><div class=\"line\">        <span class=\"attribute\">root</span> /var/www/weixin;</div><div class=\"line\">        <span class=\"attribute\">fastcgi_pass</span> <span class=\"number\">127.0.0.1:9000</span>;</div><div class=\"line\">        <span class=\"attribute\">fastcgi_index</span> index.php;</div><div class=\"line\">        <span class=\"attribute\">fastcgi_param</span> SCRIPT_FILENAME /var/www/weixin<span class=\"variable\">$fastcgi_script_name</span>;</div><div class=\"line\">        <span class=\"attribute\">include</span> fastcgi_params;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"comment\"># set nginx stutus</span></div><div class=\"line\">   <span class=\"attribute\">location</span> /NginxStatus&#123;</div><div class=\"line\">        <span class=\"attribute\">stub_status</span> <span class=\"literal\">on</span>;</div><div class=\"line\">        <span class=\"attribute\">access_log</span> <span class=\"literal\">on</span>;</div><div class=\"line\">        <span class=\"attribute\">auth_basic</span> <span class=\"string\">\"NginxStatus\"</span>;</div><div class=\"line\">        <span class=\"attribute\">auth_basic_user_file</span> conf/htpasswd;</div><div class=\"line\">   &#125;</div><div class=\"line\"></div><div class=\"line\">   <span class=\"comment\">#set deny all file</span></div><div class=\"line\">    <span class=\"attribute\">error_page</span> <span class=\"number\">404</span> /<span class=\"number\">404</span>.html;</div><div class=\"line\">    <span class=\"attribute\">location</span> = /var/www/wordpress/40x.html &#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"attribute\">error_page</span> <span class=\"number\">500</span> <span class=\"number\">502</span> <span class=\"number\">503</span> <span class=\"number\">504</span> /50x.html;</div><div class=\"line\">    <span class=\"attribute\">location</span> = /home/www/wordpress/50x.html &#123;</div><div class=\"line\">    &#125;</div><div class=\"line\"> &#125;</div></pre></td></tr></table></figure></p>\n<blockquote>\n<p>对于nginx搭建小网站来说，这个是基本的配置。个人感觉相对于之前<a href=\"http://cuihuan.net/?p=154\"> apache 防盗链配置 </a>来说难易差不多。</p>\n</blockquote>\n<p> <a href=\"http://cuihuan.net/?p=225\"> 相关文章：Nginx实践一：centos apache更换为nginx </a></p>\n<p><a href=\"http://cuihuan.net/?p=241\"> 个人小站原文链接 </a></p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cj0af9nib0001661fet4d6k52","tag_id":"cj0af9nik0004661ffnzzcyqv","_id":"cj0af9njh000j661f5vmku64s"},{"post_id":"cj0af9nib0001661fet4d6k52","tag_id":"cj0af9nj3000b661fcgsrbe8g","_id":"cj0af9njj000l661fzn2d9mfx"},{"post_id":"cj0af9nib0001661fet4d6k52","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9njl000o661fbr7co175"},{"post_id":"cj0af9nig0003661f5f7h96eg","tag_id":"cj0af9njf000h661fr6jrzkt0","_id":"cj0af9njr000w661fawudw28w"},{"post_id":"cj0af9nig0003661f5f7h96eg","tag_id":"cj0af9njj000m661fxmqu6kie","_id":"cj0af9njv000y661f494emi6z"},{"post_id":"cj0af9nig0003661f5f7h96eg","tag_id":"cj0af9njn000r661fbmo4gjb9","_id":"cj0af9njy0011661fie0sjg1t"},{"post_id":"cj0af9nir0006661fd5dr6kzg","tag_id":"cj0af9njq000u661fe4418615","_id":"cj0af9nk60018661flrdos13b"},{"post_id":"cj0af9nir0006661fd5dr6kzg","tag_id":"cj0af9njv000z661fvitt3ajn","_id":"cj0af9nk8001a661fx3pnltcd"},{"post_id":"cj0af9nir0006661fd5dr6kzg","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nkb001d661fyd6zsmli"},{"post_id":"cj0af9niy0008661fbgzm3w7b","tag_id":"cj0af9nk60017661fv3mcj5qk","_id":"cj0af9nkq001l661fgrvftatc"},{"post_id":"cj0af9niy0008661fbgzm3w7b","tag_id":"cj0af9nk9001c661ffa9ij28p","_id":"cj0af9nkr001n661fe3ihm8ri"},{"post_id":"cj0af9niy0008661fbgzm3w7b","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nkt001q661fsy3pfmbn"},{"post_id":"cj0af9nj2000a661fb1kemw7x","tag_id":"cj0af9nko001j661f4d1xdjol","_id":"cj0af9nku001s661fp0tkc7qr"},{"post_id":"cj0af9nj2000a661fb1kemw7x","tag_id":"cj0af9nks001o661f9not0h59","_id":"cj0af9nkv001t661feh0nccrj"},{"post_id":"cj0af9nj4000c661fpdl2eos3","tag_id":"cj0af9nk60017661fv3mcj5qk","_id":"cj0af9nkz001x661fgjd1wjpt"},{"post_id":"cj0af9nj4000c661fpdl2eos3","tag_id":"cj0af9nk9001c661ffa9ij28p","_id":"cj0af9nl1001y661fv1iqj5v0"},{"post_id":"cj0af9nj4000c661fpdl2eos3","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nl10020661fju9pvule"},{"post_id":"cj0af9nj7000d661ff9xy6nko","tag_id":"cj0af9nkz001w661f6lznup1c","_id":"cj0af9nl70025661fskw0l0qr"},{"post_id":"cj0af9nj7000d661ff9xy6nko","tag_id":"cj0af9nl1001z661f02vwh9ez","_id":"cj0af9nl80026661fmj9wymf7"},{"post_id":"cj0af9nj7000d661ff9xy6nko","tag_id":"cj0af9nl30021661fygqxmggy","_id":"cj0af9nl90028661f0ee9bq9q"},{"post_id":"cj0af9nj7000d661ff9xy6nko","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nl90029661f2vaxzf9s"},{"post_id":"cj0af9nj7000d661ff9xy6nko","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nla002b661ffbnyksxf"},{"post_id":"cj0af9njb000f661fld51hx3u","tag_id":"cj0af9nl70024661fj62z7ptd","_id":"cj0af9nla002c661fvvjydve7"},{"post_id":"cj0af9njb000f661fld51hx3u","tag_id":"cj0af9nks001o661f9not0h59","_id":"cj0af9nld002e661f8iy73mue"},{"post_id":"cj0af9njd000g661ftac7hv1q","tag_id":"cj0af9nl9002a661fnucxhf9k","_id":"cj0af9nli002j661famq75pbm"},{"post_id":"cj0af9njd000g661ftac7hv1q","tag_id":"cj0af9nlb002d661fcnaz93x5","_id":"cj0af9nli002k661f2iyjg3ov"},{"post_id":"cj0af9njd000g661ftac7hv1q","tag_id":"cj0af9nle002f661f6qypfps8","_id":"cj0af9nli002m661fwb1po20s"},{"post_id":"cj0af9njd000g661ftac7hv1q","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nli002n661fk665c085"},{"post_id":"cj0af9njd000g661ftac7hv1q","tag_id":"cj0af9nlg002h661f6oyn91l0","_id":"cj0af9nlj002p661f0106cfne"},{"post_id":"cj0af9njg000i661f0ollkcde","tag_id":"cj0af9nlg002i661fusyqz6ve","_id":"cj0af9nlj002s661fl5ugkjwa"},{"post_id":"cj0af9njg000i661f0ollkcde","tag_id":"cj0af9nli002l661fudrjd3rx","_id":"cj0af9nlk002t661f9eyanfva"},{"post_id":"cj0af9njg000i661f0ollkcde","tag_id":"cj0af9nlj002o661f0hqio1tj","_id":"cj0af9nlk002v661frsegm03x"},{"post_id":"cj0af9njg000i661f0ollkcde","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nlk002w661fi4vvvvbr"},{"post_id":"cj0af9nji000k661fd9euh8ho","tag_id":"cj0af9nks001o661f9not0h59","_id":"cj0af9nlk002y661frrkkr047"},{"post_id":"cj0af9njk000n661fsxmixi92","tag_id":"cj0af9nlk002u661fj1zf38nf","_id":"cj0af9nlm0030661fgi4u0ann"},{"post_id":"cj0af9njk000n661fsxmixi92","tag_id":"cj0af9nlk002x661ft70qmhmd","_id":"cj0af9nlm0031661fs7w2i89s"},{"post_id":"cj0af9njl000p661fw2cdu12d","tag_id":"cj0af9nlk002x661ft70qmhmd","_id":"cj0af9nlo0033661f3ury727j"},{"post_id":"cj0af9njn000q661fm5312tkb","tag_id":"cj0af9nlm0032661fpjhrdsqy","_id":"cj0af9nlp0036661fx4rk7f6f"},{"post_id":"cj0af9njn000q661fm5312tkb","tag_id":"cj0af9nlk002x661ft70qmhmd","_id":"cj0af9nlp0037661f00rrtru8"},{"post_id":"cj0af9njn000q661fm5312tkb","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nlp0039661fssrkvqga"},{"post_id":"cj0af9njo000s661frtxxq25x","tag_id":"cj0af9nlo0035661fsfjw9fqb","_id":"cj0af9nlq003b661fpeywwdr4"},{"post_id":"cj0af9njo000s661frtxxq25x","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nlq003c661f2suugqg8"},{"post_id":"cj0af9njp000t661fhet61w3h","tag_id":"cj0af9nlq003a661ftwhr9fnf","_id":"cj0af9nls003f661fg5bf99dc"},{"post_id":"cj0af9njp000t661fhet61w3h","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nls003g661ffiepjjwh"},{"post_id":"cj0af9njp000t661fhet61w3h","tag_id":"cj0af9nlr003d661f7t6epn3h","_id":"cj0af9nls003i661flae0bppm"},{"post_id":"cj0af9njq000v661faea5fk5z","tag_id":"cj0af9nlr003e661fvi3w1ua4","_id":"cj0af9nls003j661fmgu5qmd2"},{"post_id":"cj0af9njq000v661faea5fk5z","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nlt003l661fms2ads3k"},{"post_id":"cj0af9nju000x661fw15p58jq","tag_id":"cj0af9nls003h661fclhjeev7","_id":"cj0af9nlv003o661f5fsnjk8h"},{"post_id":"cj0af9nju000x661fw15p58jq","tag_id":"cj0af9nls003k661f0bdgva8k","_id":"cj0af9nlv003p661f1y1emawh"},{"post_id":"cj0af9nju000x661fw15p58jq","tag_id":"cj0af9nlt003m661fybstjacv","_id":"cj0af9nlw003r661fv7890ghn"},{"post_id":"cj0af9nju000x661fw15p58jq","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nlw003s661fzcwe6z4u"},{"post_id":"cj0af9njx0010661fpc0e4e55","tag_id":"cj0af9nik0004661ffnzzcyqv","_id":"cj0af9nlx003u661faax1rsnq"},{"post_id":"cj0af9njx0010661fpc0e4e55","tag_id":"cj0af9nlu003n661f4gzjqvck","_id":"cj0af9nlx003v661f5e4lnjto"},{"post_id":"cj0af9njy0012661fcnaqaqje","tag_id":"cj0af9nlv003q661fa8mdx0io","_id":"cj0af9nm00040661f2zzzroig"},{"post_id":"cj0af9njy0012661fcnaqaqje","tag_id":"cj0af9nlx003t661fixatw1yu","_id":"cj0af9nm00041661fqeoaudmb"},{"post_id":"cj0af9njy0012661fcnaqaqje","tag_id":"cj0af9nlx003w661ffgg38c98","_id":"cj0af9nm10043661f6yr3xqzt"},{"post_id":"cj0af9njy0012661fcnaqaqje","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nm10044661f6mm9go6c"},{"post_id":"cj0af9njy0012661fcnaqaqje","tag_id":"cj0af9nly003y661fw77xt6aw","_id":"cj0af9nm20046661fz10s5dsj"},{"post_id":"cj0af9nk00014661f1r9metfy","tag_id":"cj0af9nlq003a661ftwhr9fnf","_id":"cj0af9nm30047661f3e8n18ni"},{"post_id":"cj0af9nk00014661f1r9metfy","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nm30049661fhinwht0j"},{"post_id":"cj0af9nk00014661f1r9metfy","tag_id":"cj0af9nlr003d661f7t6epn3h","_id":"cj0af9nm3004a661f3hwcqm9y"},{"post_id":"cj0af9nk20015661fl36pai3b","tag_id":"cj0af9nls003h661fclhjeev7","_id":"cj0af9nm5004e661ftd8cw4tl"},{"post_id":"cj0af9nk20015661fl36pai3b","tag_id":"cj0af9nm30048661f9fjntugd","_id":"cj0af9nm5004f661fuqnv3r3j"},{"post_id":"cj0af9nk20015661fl36pai3b","tag_id":"cj0af9nm3004b661fihd6f954","_id":"cj0af9nm6004h661f84dht9jo"},{"post_id":"cj0af9nk20015661fl36pai3b","tag_id":"cj0af9nm4004c661fxqnodpd5","_id":"cj0af9nm6004i661fv3pfa6cm"},{"post_id":"cj0af9nk50016661f9xnefop1","tag_id":"cj0af9nls003h661fclhjeev7","_id":"cj0af9nm7004k661fuvj6e05v"},{"post_id":"cj0af9nk70019661fsjdvrige","tag_id":"cj0af9nlo0035661fsfjw9fqb","_id":"cj0af9nm7004l661fpk8kz2io"},{"post_id":"cj0af9nk70019661fsjdvrige","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nm8004n661fk0h9dq8u"},{"post_id":"cj0af9nk8001b661fxdpau37c","tag_id":"cj0af9nlo0035661fsfjw9fqb","_id":"cj0af9nm8004p661fl0w46vq3"},{"post_id":"cj0af9nk8001b661fxdpau37c","tag_id":"cj0af9nk00013661frgtl4sa7","_id":"cj0af9nm9004q661fkzgehdmh"},{"post_id":"cj0af9nk8001b661fxdpau37c","tag_id":"cj0af9nl9002a661fnucxhf9k","_id":"cj0af9nm9004s661f7j0l5wir"},{"post_id":"cj0af9nkb001e661fiqrkl1t8","tag_id":"cj0af9nls003h661fclhjeev7","_id":"cj0af9nma004u661fzeexxys6"},{"post_id":"cj0af9nkb001e661fiqrkl1t8","tag_id":"cj0af9nm9004r661f3hwedz1n","_id":"cj0af9nma004v661fca096hko"},{"post_id":"cj0af9nkb001e661fiqrkl1t8","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nma004x661f6enchx9u"},{"post_id":"cj0af9nke001f661fcekivn4u","tag_id":"cj0af9nm9004t661f6rv8sfvr","_id":"cj0af9nmb004z661fvgetqctt"},{"post_id":"cj0af9nke001f661fcekivn4u","tag_id":"cj0af9nma004w661fhma3hbyi","_id":"cj0af9nmb0050661f37yan25x"},{"post_id":"cj0af9nke001f661fcekivn4u","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nmc0052661fntddbc27"},{"post_id":"cj0af9nkl001h661fm5odur8b","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nme0055661fpwi3x0wh"},{"post_id":"cj0af9nkl001h661fm5odur8b","tag_id":"cj0af9nmb004y661fth2iq4ht","_id":"cj0af9nme0056661faq80fkll"},{"post_id":"cj0af9nkl001h661fm5odur8b","tag_id":"cj0af9nlk002x661ft70qmhmd","_id":"cj0af9nmf0058661fsjagjj2b"},{"post_id":"cj0af9nkl001h661fm5odur8b","tag_id":"cj0af9nls003h661fclhjeev7","_id":"cj0af9nmf0059661fcog1d7pi"},{"post_id":"cj0af9nkm001i661fcz6xbevc","tag_id":"cj0af9nmd0054661fw1u2cvrq","_id":"cj0af9nmg005d661fyr44edc8"},{"post_id":"cj0af9nkm001i661fcz6xbevc","tag_id":"cj0af9nme0057661f59ylv6pr","_id":"cj0af9nmg005e661fw4xrdl1b"},{"post_id":"cj0af9nkm001i661fcz6xbevc","tag_id":"cj0af9nls003h661fclhjeev7","_id":"cj0af9nmg005g661f4ceqjnl5"},{"post_id":"cj0af9nkm001i661fcz6xbevc","tag_id":"cj0af9nlk002x661ft70qmhmd","_id":"cj0af9nmg005h661fpidkfais"},{"post_id":"cj0af9nkp001k661fda1ru2ew","tag_id":"cj0af9nja000e661fjx4e5inv","_id":"cj0af9nmi005j661f7qyh7hc8"},{"post_id":"cj0af9nkp001k661fda1ru2ew","tag_id":"cj0af9nmg005c661frbotk53r","_id":"cj0af9nmj005k661fmvd5ypj0"},{"post_id":"cj0af9nkp001k661fda1ru2ew","tag_id":"cj0af9nmg005f661fcnwj9mgg","_id":"cj0af9nmj005m661fbavbu4t9"},{"post_id":"cj0af9nkq001m661fgxccqs6z","tag_id":"cj0af9nmd0054661fw1u2cvrq","_id":"cj0af9nml005p661fx46jur4z"},{"post_id":"cj0af9nkq001m661fgxccqs6z","tag_id":"cj0af9nme0057661f59ylv6pr","_id":"cj0af9nml005q661f3x9tgnw5"},{"post_id":"cj0af9nkq001m661fgxccqs6z","tag_id":"cj0af9nlk002x661ft70qmhmd","_id":"cj0af9nml005r661foiigisq2"},{"post_id":"cj0af9nks001p661fpm2nbev9","tag_id":"cj0af9nmk005o661ftycto381","_id":"cj0af9nml005s661f39xl6fms"},{"post_id":"cj0af9nks001p661fpm2nbev9","tag_id":"cj0af9nj3000b661fcgsrbe8g","_id":"cj0af9nmm005t661fw9kjk0gz"},{"post_id":"cj0af9nks001p661fpm2nbev9","tag_id":"cj0af9nik0004661ffnzzcyqv","_id":"cj0af9nmm005u661fg3bgpben"}],"Tag":[{"name":"nginx","_id":"cj0af9nik0004661ffnzzcyqv"},{"name":"apache","_id":"cj0af9nj3000b661fcgsrbe8g"},{"name":"php","_id":"cj0af9nja000e661fjx4e5inv"},{"name":"db","_id":"cj0af9njf000h661fr6jrzkt0"},{"name":"active record","_id":"cj0af9njj000m661fxmqu6kie"},{"name":"yii2","_id":"cj0af9njn000r661fbmo4gjb9"},{"name":"合成图片","_id":"cj0af9njq000u661fe4418615"},{"name":"canvas","_id":"cj0af9njv000z661fvitt3ajn"},{"name":"javascript","_id":"cj0af9nk00013661frgtl4sa7"},{"name":"chrome-extension","_id":"cj0af9nk60017661fv3mcj5qk"},{"name":"chrome","_id":"cj0af9nk9001c661ffa9ij28p"},{"name":"crontab","_id":"cj0af9nko001j661f4d1xdjol"},{"name":"linux","_id":"cj0af9nks001o661f9not0h59"},{"name":"网页爬虫","_id":"cj0af9nkz001w661f6lznup1c"},{"name":"shell","_id":"cj0af9nl1001z661f02vwh9ez"},{"name":"css","_id":"cj0af9nl30021661fygqxmggy"},{"name":"git修复","_id":"cj0af9nl70024661fj62z7ptd"},{"name":"前端","_id":"cj0af9nl9002a661fnucxhf9k"},{"name":"动态获取数据","_id":"cj0af9nlb002d661fcnaz93x5"},{"name":"pho","_id":"cj0af9nle002f661f6qypfps8"},{"name":"echarts","_id":"cj0af9nlg002h661f6oyn91l0"},{"name":"cors","_id":"cj0af9nlg002i661fusyqz6ve"},{"name":"跨域","_id":"cj0af9nli002l661fudrjd3rx"},{"name":"jsonp","_id":"cj0af9nlj002o661f0hqio1tj"},{"name":"备份","_id":"cj0af9nlk002u661fj1zf38nf"},{"name":"mysql","_id":"cj0af9nlk002x661ft70qmhmd"},{"name":"数据库同步","_id":"cj0af9nlm0032661fpjhrdsqy"},{"name":"自动化测试","_id":"cj0af9nlo0035661fsfjw9fqb"},{"name":"单元测试","_id":"cj0af9nlq003a661ftwhr9fnf"},{"name":"phpunit","_id":"cj0af9nlr003d661f7t6epn3h"},{"name":"unicode","_id":"cj0af9nlr003e661fvi3w1ua4"},{"name":"redis","_id":"cj0af9nls003h661fclhjeev7"},{"name":"单例模式","_id":"cj0af9nls003k661f0bdgva8k"},{"name":"设计模式","_id":"cj0af9nlt003m661fybstjacv"},{"name":"基本原理","_id":"cj0af9nlu003n661f4gzjqvck"},{"name":"iframe跨域","_id":"cj0af9nlv003q661fa8mdx0io"},{"name":"iframe自适应高度","_id":"cj0af9nlx003t661fixatw1yu"},{"name":"iframe","_id":"cj0af9nlx003w661ffgg38c98"},{"name":"html5","_id":"cj0af9nly003y661fw77xt6aw"},{"name":"高可用架构","_id":"cj0af9nm30048661f9fjntugd"},{"name":"容灾方案","_id":"cj0af9nm3004b661fihd6f954"},{"name":"redis主从","_id":"cj0af9nm4004c661fxqnodpd5"},{"name":"phpredis","_id":"cj0af9nm9004r661f3hwedz1n"},{"name":"缓存","_id":"cj0af9nm9004t661f6rv8sfvr"},{"name":"wordpress","_id":"cj0af9nma004w661fhma3hbyi"},{"name":"高并发","_id":"cj0af9nmb004y661fth2iq4ht"},{"name":"读写分离","_id":"cj0af9nmd0054661fw1u2cvrq"},{"name":"主从备份","_id":"cj0af9nme0057661f59ylv6pr"},{"name":"ip","_id":"cj0af9nmg005c661frbotk53r"},{"name":"恶意攻击","_id":"cj0af9nmg005f661fcnwj9mgg"},{"name":"服务器","_id":"cj0af9nmk005o661ftycto381"}]}}